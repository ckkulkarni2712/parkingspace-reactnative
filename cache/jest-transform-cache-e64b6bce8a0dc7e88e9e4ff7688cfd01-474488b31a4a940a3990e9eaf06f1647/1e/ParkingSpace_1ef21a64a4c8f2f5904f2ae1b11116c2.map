{"version":3,"names":["ParkingSpace","navigation","useNavigation","dispatch","useDispatch","numspaces","useSelector","state","parkingSpaces","numSpaces","useState","displayForm","setDisplayForm","registration","setReg","Date","parkingTime","setTime","selectedSpace","setSelected","activatePayment","setActivation","spaces","showPicker","setPicker","renderSpaces","i","push","displaySpaces","setDisplay","useEffect","handleIncrement","addToParkingSpace","handleDecrement","removeParkingSpace","handleSpaceClick","space","navigate","spaceDetails","handleSubmit","occupyParkingLots","spaceNum","toLocaleTimeString","hour","minute","hour12","handleRegistration","text","setParkingTime","selectedTime","hidePicker","styles","container","buttonStyling1","buttonStyling2","map","parkingSpace","formContainer","setTimeButton","formInput","buttonStyling3","color","StyleSheet","create","flexGrow","alignItems","flexDirection","flexWrap","justifyContent","backgroundColor","width","height","borderWidth","borderStyle","borderColor","margin","marginHorizontal","marginTop","parkingNumber","fontSize","top","position","padding","left","right","flex","textAlign","bottom","paddingHorizontal","paddingVertical","zIndex","borderRadius"],"sources":["ParkingSpace.tsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {View} from 'react-native';\r\nimport {\r\n  Text,\r\n  StyleSheet,\r\n  ScrollView,\r\n  TextInput,\r\n  TouchableOpacity,\r\n} from 'react-native';\r\nimport DateTimePickerModal from 'react-native-modal-datetime-picker';\r\nimport {useNavigation} from '@react-navigation/native';\r\nimport {NativeStackNavigationProp} from '@react-navigation/native-stack';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {\r\n  addToParkingSpace,\r\n  occupyParkingLots,\r\n  removeParkingSpace,\r\n} from './Reducer/parkingSlice';\r\nconst ParkingSpace = () => {\r\n  const navigation = useNavigation<NativeStackNavigationProp<any>>();\r\n  const dispatch = useDispatch();\r\n  const numspaces = useSelector((state: any) => state.parkingSpaces.numSpaces);\r\n  const [displayForm, setDisplayForm] = useState<boolean>(false);\r\n  const [registration, setReg] = useState<string>('');\r\n  const [parkingTime, setTime] = useState<Date>(new Date());\r\n  const [selectedSpace, setSelected] = useState<number>(0);\r\n  const [activatePayment, setActivation] = useState<boolean>(false);\r\n  const spaces = useSelector((state: any) => state.parkingSpaces.spaces);\r\n  const [showPicker, setPicker] = useState(false);\r\n  const [displaySpaces, setDisplay] = useState(() => {\r\n    const renderSpaces = [];\r\n    for (let i = 1; i <= numspaces; i++) {\r\n      renderSpaces.push(i);\r\n    }\r\n    return renderSpaces;\r\n  });\r\n  useEffect(() => {\r\n    const renderSpaces = [];\r\n    for (let i = 1; i <= numspaces; i++) {\r\n      renderSpaces.push(i);\r\n    }\r\n    setDisplay(renderSpaces);\r\n  }, [numspaces]);\r\n  const handleIncrement = () => {\r\n    dispatch(addToParkingSpace());\r\n  };\r\n  const handleDecrement = () => {\r\n    dispatch(removeParkingSpace());\r\n  };\r\n  const handleSpaceClick = (space: number) => {\r\n    if (spaces[space]) {\r\n      navigation.navigate('Payment', {\r\n        spaceDetails: spaces[space],\r\n        space: space,\r\n      });\r\n    }\r\n    setSelected(space);\r\n    setDisplayForm(true);\r\n  };\r\n  const handleSubmit = () => {\r\n    dispatch(\r\n      occupyParkingLots({\r\n        spaceNum: selectedSpace,\r\n        registration: registration,\r\n        parkingTime: parkingTime.toLocaleTimeString([], {\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          hour12: false,\r\n        }),\r\n      }),\r\n    );\r\n    setSelected(0);\r\n    setReg('');\r\n    setTime(new Date());\r\n  };\r\n  const handleRegistration = (text: string) => {\r\n    setReg(text);\r\n  };\r\n  const setParkingTime = (selectedTime: Date) => {\r\n    setTime(selectedTime);\r\n  };\r\n  const hidePicker = () => {\r\n    setPicker(false);\r\n  };\r\n  return (\r\n    <ScrollView contentContainerStyle={styles.container} horizontal={true}>\r\n      <TouchableOpacity\r\n        testID=\"add-parking-space-button\"\r\n        style={styles.buttonStyling1}\r\n        onPress={handleIncrement}>\r\n        <Text>Create New Parking</Text>\r\n      </TouchableOpacity>\r\n      <TouchableOpacity\r\n        testID=\"add-parking-space-button\"\r\n        onPress={handleDecrement}\r\n        style={styles.buttonStyling2}>\r\n        <Text>Remove Parking Space</Text>\r\n      </TouchableOpacity>\r\n      {displaySpaces.map(space => (\r\n        <TouchableOpacity\r\n          testID={`parking-space-${space}`}\r\n          onPress={() => handleSpaceClick(space)}\r\n          key={space}\r\n          style={styles.parkingSpace}>\r\n          <Text>{space}</Text>\r\n          {spaces[space] && (\r\n            <View>\r\n              <Text>Registration: {spaces[space].registration}</Text>\r\n              <Text>Parking Time: {spaces[space].parkingTime}</Text>\r\n            </View>\r\n          )}\r\n        </TouchableOpacity>\r\n      ))}\r\n      {displayForm && (\r\n        <View style={styles.formContainer}>\r\n          <DateTimePickerModal\r\n            isVisible={showPicker}\r\n            mode=\"time\"\r\n            onConfirm={setParkingTime}\r\n            onCancel={() => hidePicker()}\r\n          />\r\n          <Text testID=\"parking-time-label\">Parking Time (tap to change)</Text>\r\n          <TouchableOpacity\r\n            style={styles.setTimeButton}\r\n            onPress={() => {\r\n              setPicker(true);\r\n            }}\r\n            testID=\"change-time-button\">\r\n            <Text testID=\"parking-time\">\r\n              {parkingTime.toLocaleTimeString()}\r\n            </Text>\r\n          </TouchableOpacity>\r\n          <Text testID=\"car-registration-label\">Car Registration</Text>\r\n          <TextInput\r\n            placeholder=\"Enter vehicle registration\"\r\n            onChangeText={handleRegistration}\r\n            style={styles.formInput}\r\n            testID=\"vehicle-registration-input\"\r\n          />\r\n          <TouchableOpacity\r\n            testID=\"submit-button\"\r\n            onPress={() => handleSubmit()}\r\n            style={styles.buttonStyling3}>\r\n            <Text style={{color: 'white'}}>Submit</Text>\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity\r\n            style={styles.buttonStyling3}\r\n            onPress={() => {\r\n              setSelected(0);\r\n              handleRegistration('');\r\n              setParkingTime(new Date());\r\n              setDisplayForm(false);\r\n            }}\r\n            testID=\"close-button\">\r\n            <Text style={{color: 'white'}}>Close</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      )}\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nexport default ParkingSpace;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexGrow: 1,\r\n    alignItems: 'center',\r\n    flexDirection: 'column',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#F5EFEF',\r\n  },\r\n  parkingSpace: {\r\n    width: 110,\r\n    backgroundColor: '#EFEFEF',\r\n    height: 85,\r\n    borderWidth: 2.5,\r\n    borderStyle: 'dotted',\r\n    borderColor: '#49C78C',\r\n    margin: 5,\r\n    marginHorizontal: 48,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginTop: 20,\r\n  },\r\n  parkingNumber: {\r\n    fontSize: 20,\r\n  },\r\n  buttonStyling1: {\r\n    top: 0,\r\n    position: 'absolute',\r\n    padding: 10,\r\n    backgroundColor: '#E1EDF8',\r\n    left: 50,\r\n  },\r\n  buttonStyling2: {\r\n    top: 0,\r\n    right: 10,\r\n    position: 'absolute',\r\n    padding: 10,\r\n    backgroundColor: '#E1EDF8',\r\n  },\r\n  formInput: {\r\n    marginTop: 7,\r\n    width: '100%',\r\n    height: 33,\r\n    borderWidth: 1,\r\n    borderColor: '#ccc',\r\n    padding: 7,\r\n    flex: 1,\r\n    textAlign: 'center',\r\n  },\r\n  formContainer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    backgroundColor: '#FFFFFF',\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 10,\r\n    zIndex: 1,\r\n  },\r\n  buttonStyling3: {\r\n    marginTop: 5,\r\n    backgroundColor: '#0551B4',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 7,\r\n    borderRadius: 5,\r\n  },\r\n  setTimeButton: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: 'white',\r\n    borderWidth: 1,\r\n    padding: 5,\r\n  },\r\n  spaceDetails: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#0551B4',\r\n    padding: 25,\r\n  },\r\n});\r\n"],"mappings":"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"}