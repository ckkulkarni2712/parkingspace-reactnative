ed7d190e4c103b3c6157a078f62d8f18
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.bindByRoleQueries = void 0;
var _accessiblity = require("../helpers/accessiblity");
var _findAll = require("../helpers/findAll");
var _accessibilityState = require("../helpers/matchers/accessibilityState");
var _accessibilityValue = require("../helpers/matchers/accessibilityValue");
var _matchStringProp = require("../helpers/matchers/matchStringProp");
var _within = require("../within");
var _config = require("../config");
var _makeQueries = require("./makeQueries");
var matchAccessibleNameIfNeeded = function matchAccessibleNameIfNeeded(node, name) {
  if (name == null) return true;
  var _ref = (0, _within.getQueriesForElement)(node),
    queryAllByText = _ref.queryAllByText,
    queryAllByLabelText = _ref.queryAllByLabelText;
  return queryAllByText(name).length > 0 || queryAllByLabelText(name).length > 0;
};
var matchAccessibleStateIfNeeded = function matchAccessibleStateIfNeeded(node, options) {
  return options != null ? (0, _accessibilityState.matchAccessibilityState)(node, options) : true;
};
var matchAccessibilityValueIfNeeded = function matchAccessibilityValueIfNeeded(node, value) {
  return value != null ? (0, _accessibilityValue.matchAccessibilityValue)(node, value) : true;
};
var queryAllByRole = function queryAllByRole(instance) {
  return function queryAllByRoleFn(role, options) {
    var shouldMatchOnlyAccessibilityElements = (0, _config.getConfig)().useBreakingChanges;
    return (0, _findAll.findAll)(instance, function (node) {
      return typeof node.type === 'string' && (!shouldMatchOnlyAccessibilityElements || (0, _accessiblity.isAccessibilityElement)(node)) && (0, _matchStringProp.matchStringProp)(node.props.accessibilityRole, role) && matchAccessibleStateIfNeeded(node, options) && matchAccessibilityValueIfNeeded(node, options == null ? void 0 : options.value) && matchAccessibleNameIfNeeded(node, options == null ? void 0 : options.name);
    }, options);
  };
};
var formatQueryParams = function formatQueryParams(role) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var params = ["role: \"" + String(role) + "\""];
  if (options.name) {
    params.push("name: \"" + String(options.name) + "\"");
  }
  _accessiblity.accessibilityStateKeys.forEach(function (stateKey) {
    if (options[stateKey] !== undefined) {
      params.push(stateKey + " state: " + options[stateKey]);
    }
  });
  _accessiblity.accessiblityValueKeys.forEach(function (valueKey) {
    var _options$value;
    if ((options == null ? void 0 : (_options$value = options.value) == null ? void 0 : _options$value[valueKey]) !== undefined) {
      var _options$value2;
      params.push(valueKey + " value: " + (options == null ? void 0 : (_options$value2 = options.value) == null ? void 0 : _options$value2[valueKey]));
    }
  });
  return params.join(', ');
};
var getMultipleError = function getMultipleError(role, options) {
  return "Found multiple elements with " + formatQueryParams(role, options);
};
var getMissingError = function getMissingError(role, options) {
  return "Unable to find an element with " + formatQueryParams(role, options);
};
var _ref2 = (0, _makeQueries.makeQueries)(queryAllByRole, getMissingError, getMultipleError),
  getBy = _ref2.getBy,
  getAllBy = _ref2.getAllBy,
  queryBy = _ref2.queryBy,
  queryAllBy = _ref2.queryAllBy,
  findBy = _ref2.findBy,
  findAllBy = _ref2.findAllBy;
var bindByRoleQueries = function bindByRoleQueries(instance) {
  return {
    getByRole: getBy(instance),
    getAllByRole: getAllBy(instance),
    queryByRole: queryBy(instance),
    queryAllByRole: queryAllBy(instance),
    findByRole: findBy(instance),
    findAllByRole: findAllBy(instance)
  };
};
exports.bindByRoleQueries = bindByRoleQueries;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2lDIiwibmFtZXMiOlsibWF0Y2hBY2Nlc3NpYmxlTmFtZUlmTmVlZGVkIiwibm9kZSIsIm5hbWUiLCJxdWVyeUFsbEJ5VGV4dCIsInF1ZXJ5QWxsQnlMYWJlbFRleHQiLCJsZW5ndGgiLCJtYXRjaEFjY2Vzc2libGVTdGF0ZUlmTmVlZGVkIiwib3B0aW9ucyIsIm1hdGNoQWNjZXNzaWJpbGl0eVZhbHVlSWZOZWVkZWQiLCJ2YWx1ZSIsInF1ZXJ5QWxsQnlSb2xlIiwiaW5zdGFuY2UiLCJxdWVyeUFsbEJ5Um9sZUZuIiwicm9sZSIsInNob3VsZE1hdGNoT25seUFjY2Vzc2liaWxpdHlFbGVtZW50cyIsInVzZUJyZWFraW5nQ2hhbmdlcyIsInR5cGUiLCJwcm9wcyIsImFjY2Vzc2liaWxpdHlSb2xlIiwiZm9ybWF0UXVlcnlQYXJhbXMiLCJwYXJhbXMiLCJTdHJpbmciLCJwdXNoIiwiYWNjZXNzaWJpbGl0eVN0YXRlS2V5cyIsImZvckVhY2giLCJzdGF0ZUtleSIsInVuZGVmaW5lZCIsImFjY2Vzc2libGl0eVZhbHVlS2V5cyIsInZhbHVlS2V5Iiwiam9pbiIsImdldE11bHRpcGxlRXJyb3IiLCJnZXRNaXNzaW5nRXJyb3IiLCJnZXRCeSIsImdldEFsbEJ5IiwicXVlcnlCeSIsInF1ZXJ5QWxsQnkiLCJmaW5kQnkiLCJmaW5kQWxsQnkiLCJiaW5kQnlSb2xlUXVlcmllcyIsImdldEJ5Um9sZSIsImdldEFsbEJ5Um9sZSIsInF1ZXJ5QnlSb2xlIiwiZmluZEJ5Um9sZSIsImZpbmRBbGxCeVJvbGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3F1ZXJpZXMvcm9sZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFjY2Vzc2liaWxpdHlTdGF0ZSB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5pbXBvcnQgdHlwZSB7IFJlYWN0VGVzdEluc3RhbmNlIH0gZnJvbSAncmVhY3QtdGVzdC1yZW5kZXJlcic7XG5pbXBvcnQge1xuICBhY2Nlc3NpYmlsaXR5U3RhdGVLZXlzLFxuICBhY2Nlc3NpYmxpdHlWYWx1ZUtleXMsXG4gIGlzQWNjZXNzaWJpbGl0eUVsZW1lbnQsXG59IGZyb20gJy4uL2hlbHBlcnMvYWNjZXNzaWJsaXR5JztcbmltcG9ydCB7IGZpbmRBbGwgfSBmcm9tICcuLi9oZWxwZXJzL2ZpbmRBbGwnO1xuaW1wb3J0IHsgbWF0Y2hBY2Nlc3NpYmlsaXR5U3RhdGUgfSBmcm9tICcuLi9oZWxwZXJzL21hdGNoZXJzL2FjY2Vzc2liaWxpdHlTdGF0ZSc7XG5pbXBvcnQge1xuICBBY2Nlc3NpYmlsaXR5VmFsdWVNYXRjaGVyLFxuICBtYXRjaEFjY2Vzc2liaWxpdHlWYWx1ZSxcbn0gZnJvbSAnLi4vaGVscGVycy9tYXRjaGVycy9hY2Nlc3NpYmlsaXR5VmFsdWUnO1xuaW1wb3J0IHsgbWF0Y2hTdHJpbmdQcm9wIH0gZnJvbSAnLi4vaGVscGVycy9tYXRjaGVycy9tYXRjaFN0cmluZ1Byb3AnO1xuaW1wb3J0IHR5cGUgeyBUZXh0TWF0Y2ggfSBmcm9tICcuLi9tYXRjaGVzJztcbmltcG9ydCB7IGdldFF1ZXJpZXNGb3JFbGVtZW50IH0gZnJvbSAnLi4vd2l0aGluJztcbmltcG9ydCB7IGdldENvbmZpZyB9IGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQgeyBtYWtlUXVlcmllcyB9IGZyb20gJy4vbWFrZVF1ZXJpZXMnO1xuaW1wb3J0IHR5cGUge1xuICBGaW5kQWxsQnlRdWVyeSxcbiAgRmluZEJ5UXVlcnksXG4gIEdldEFsbEJ5UXVlcnksXG4gIEdldEJ5UXVlcnksXG4gIFF1ZXJ5QWxsQnlRdWVyeSxcbiAgUXVlcnlCeVF1ZXJ5LFxufSBmcm9tICcuL21ha2VRdWVyaWVzJztcbmltcG9ydCB7IENvbW1vblF1ZXJ5T3B0aW9ucyB9IGZyb20gJy4vb3B0aW9ucyc7XG5cbnR5cGUgQnlSb2xlT3B0aW9ucyA9IENvbW1vblF1ZXJ5T3B0aW9ucyAmXG4gIEFjY2Vzc2liaWxpdHlTdGF0ZSAmIHtcbiAgICBuYW1lPzogVGV4dE1hdGNoO1xuICAgIHZhbHVlPzogQWNjZXNzaWJpbGl0eVZhbHVlTWF0Y2hlcjtcbiAgfTtcblxuY29uc3QgbWF0Y2hBY2Nlc3NpYmxlTmFtZUlmTmVlZGVkID0gKFxuICBub2RlOiBSZWFjdFRlc3RJbnN0YW5jZSxcbiAgbmFtZT86IFRleHRNYXRjaFxuKSA9PiB7XG4gIGlmIChuYW1lID09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIGNvbnN0IHsgcXVlcnlBbGxCeVRleHQsIHF1ZXJ5QWxsQnlMYWJlbFRleHQgfSA9IGdldFF1ZXJpZXNGb3JFbGVtZW50KG5vZGUpO1xuICByZXR1cm4gKFxuICAgIHF1ZXJ5QWxsQnlUZXh0KG5hbWUpLmxlbmd0aCA+IDAgfHwgcXVlcnlBbGxCeUxhYmVsVGV4dChuYW1lKS5sZW5ndGggPiAwXG4gICk7XG59O1xuXG5jb25zdCBtYXRjaEFjY2Vzc2libGVTdGF0ZUlmTmVlZGVkID0gKFxuICBub2RlOiBSZWFjdFRlc3RJbnN0YW5jZSxcbiAgb3B0aW9ucz86IEJ5Um9sZU9wdGlvbnNcbikgPT4ge1xuICByZXR1cm4gb3B0aW9ucyAhPSBudWxsID8gbWF0Y2hBY2Nlc3NpYmlsaXR5U3RhdGUobm9kZSwgb3B0aW9ucykgOiB0cnVlO1xufTtcblxuY29uc3QgbWF0Y2hBY2Nlc3NpYmlsaXR5VmFsdWVJZk5lZWRlZCA9IChcbiAgbm9kZTogUmVhY3RUZXN0SW5zdGFuY2UsXG4gIHZhbHVlPzogQWNjZXNzaWJpbGl0eVZhbHVlTWF0Y2hlclxuKSA9PiB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsID8gbWF0Y2hBY2Nlc3NpYmlsaXR5VmFsdWUobm9kZSwgdmFsdWUpIDogdHJ1ZTtcbn07XG5cbmNvbnN0IHF1ZXJ5QWxsQnlSb2xlID0gKFxuICBpbnN0YW5jZTogUmVhY3RUZXN0SW5zdGFuY2Vcbik6ICgocm9sZTogVGV4dE1hdGNoLCBvcHRpb25zPzogQnlSb2xlT3B0aW9ucykgPT4gQXJyYXk8UmVhY3RUZXN0SW5zdGFuY2U+KSA9PlxuICBmdW5jdGlvbiBxdWVyeUFsbEJ5Um9sZUZuKHJvbGUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBzaG91bGRNYXRjaE9ubHlBY2Nlc3NpYmlsaXR5RWxlbWVudHMgPSBnZXRDb25maWcoKS51c2VCcmVha2luZ0NoYW5nZXM7XG5cbiAgICByZXR1cm4gZmluZEFsbChcbiAgICAgIGluc3RhbmNlLFxuICAgICAgKG5vZGUpID0+XG4gICAgICAgIC8vIHJ1biB0aGUgY2hlYXBlc3QgY2hlY2tzIGZpcnN0LCBhbmQgZWFybHkgZXhpdCB0byBhdm9pZCB1bm5lZWRlZCBjb21wdXRhdGlvbnNcbiAgICAgICAgdHlwZW9mIG5vZGUudHlwZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgKCFzaG91bGRNYXRjaE9ubHlBY2Nlc3NpYmlsaXR5RWxlbWVudHMgfHxcbiAgICAgICAgICBpc0FjY2Vzc2liaWxpdHlFbGVtZW50KG5vZGUpKSAmJlxuICAgICAgICBtYXRjaFN0cmluZ1Byb3Aobm9kZS5wcm9wcy5hY2Nlc3NpYmlsaXR5Um9sZSwgcm9sZSkgJiZcbiAgICAgICAgbWF0Y2hBY2Nlc3NpYmxlU3RhdGVJZk5lZWRlZChub2RlLCBvcHRpb25zKSAmJlxuICAgICAgICBtYXRjaEFjY2Vzc2liaWxpdHlWYWx1ZUlmTmVlZGVkKG5vZGUsIG9wdGlvbnM/LnZhbHVlKSAmJlxuICAgICAgICBtYXRjaEFjY2Vzc2libGVOYW1lSWZOZWVkZWQobm9kZSwgb3B0aW9ucz8ubmFtZSksXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfTtcblxuY29uc3QgZm9ybWF0UXVlcnlQYXJhbXMgPSAocm9sZTogVGV4dE1hdGNoLCBvcHRpb25zOiBCeVJvbGVPcHRpb25zID0ge30pID0+IHtcbiAgY29uc3QgcGFyYW1zID0gW2Byb2xlOiBcIiR7U3RyaW5nKHJvbGUpfVwiYF07XG5cbiAgaWYgKG9wdGlvbnMubmFtZSkge1xuICAgIHBhcmFtcy5wdXNoKGBuYW1lOiBcIiR7U3RyaW5nKG9wdGlvbnMubmFtZSl9XCJgKTtcbiAgfVxuXG4gIGFjY2Vzc2liaWxpdHlTdGF0ZUtleXMuZm9yRWFjaCgoc3RhdGVLZXkpID0+IHtcbiAgICBpZiAob3B0aW9uc1tzdGF0ZUtleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcGFyYW1zLnB1c2goYCR7c3RhdGVLZXl9IHN0YXRlOiAke29wdGlvbnNbc3RhdGVLZXldfWApO1xuICAgIH1cbiAgfSk7XG5cbiAgYWNjZXNzaWJsaXR5VmFsdWVLZXlzLmZvckVhY2goKHZhbHVlS2V5KSA9PiB7XG4gICAgaWYgKG9wdGlvbnM/LnZhbHVlPy5bdmFsdWVLZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHBhcmFtcy5wdXNoKGAke3ZhbHVlS2V5fSB2YWx1ZTogJHtvcHRpb25zPy52YWx1ZT8uW3ZhbHVlS2V5XX1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJhbXMuam9pbignLCAnKTtcbn07XG5cbmNvbnN0IGdldE11bHRpcGxlRXJyb3IgPSAocm9sZTogVGV4dE1hdGNoLCBvcHRpb25zPzogQnlSb2xlT3B0aW9ucykgPT5cbiAgYEZvdW5kIG11bHRpcGxlIGVsZW1lbnRzIHdpdGggJHtmb3JtYXRRdWVyeVBhcmFtcyhyb2xlLCBvcHRpb25zKX1gO1xuXG5jb25zdCBnZXRNaXNzaW5nRXJyb3IgPSAocm9sZTogVGV4dE1hdGNoLCBvcHRpb25zPzogQnlSb2xlT3B0aW9ucykgPT5cbiAgYFVuYWJsZSB0byBmaW5kIGFuIGVsZW1lbnQgd2l0aCAke2Zvcm1hdFF1ZXJ5UGFyYW1zKHJvbGUsIG9wdGlvbnMpfWA7XG5cbmNvbnN0IHsgZ2V0QnksIGdldEFsbEJ5LCBxdWVyeUJ5LCBxdWVyeUFsbEJ5LCBmaW5kQnksIGZpbmRBbGxCeSB9ID0gbWFrZVF1ZXJpZXMoXG4gIHF1ZXJ5QWxsQnlSb2xlLFxuICBnZXRNaXNzaW5nRXJyb3IsXG4gIGdldE11bHRpcGxlRXJyb3Jcbik7XG5cbmV4cG9ydCB0eXBlIEJ5Um9sZVF1ZXJpZXMgPSB7XG4gIGdldEJ5Um9sZTogR2V0QnlRdWVyeTxUZXh0TWF0Y2gsIEJ5Um9sZU9wdGlvbnM+O1xuICBnZXRBbGxCeVJvbGU6IEdldEFsbEJ5UXVlcnk8VGV4dE1hdGNoLCBCeVJvbGVPcHRpb25zPjtcbiAgcXVlcnlCeVJvbGU6IFF1ZXJ5QnlRdWVyeTxUZXh0TWF0Y2gsIEJ5Um9sZU9wdGlvbnM+O1xuICBxdWVyeUFsbEJ5Um9sZTogUXVlcnlBbGxCeVF1ZXJ5PFRleHRNYXRjaCwgQnlSb2xlT3B0aW9ucz47XG4gIGZpbmRCeVJvbGU6IEZpbmRCeVF1ZXJ5PFRleHRNYXRjaCwgQnlSb2xlT3B0aW9ucz47XG4gIGZpbmRBbGxCeVJvbGU6IEZpbmRBbGxCeVF1ZXJ5PFRleHRNYXRjaCwgQnlSb2xlT3B0aW9ucz47XG59O1xuXG5leHBvcnQgY29uc3QgYmluZEJ5Um9sZVF1ZXJpZXMgPSAoXG4gIGluc3RhbmNlOiBSZWFjdFRlc3RJbnN0YW5jZVxuKTogQnlSb2xlUXVlcmllcyA9PiAoe1xuICBnZXRCeVJvbGU6IGdldEJ5KGluc3RhbmNlKSxcbiAgZ2V0QWxsQnlSb2xlOiBnZXRBbGxCeShpbnN0YW5jZSksXG4gIHF1ZXJ5QnlSb2xlOiBxdWVyeUJ5KGluc3RhbmNlKSxcbiAgcXVlcnlBbGxCeVJvbGU6IHF1ZXJ5QWxsQnkoaW5zdGFuY2UpLFxuICBmaW5kQnlSb2xlOiBmaW5kQnkoaW5zdGFuY2UpLFxuICBmaW5kQWxsQnlSb2xlOiBmaW5kQWxsQnkoaW5zdGFuY2UpLFxufSk7XG4iXX0=