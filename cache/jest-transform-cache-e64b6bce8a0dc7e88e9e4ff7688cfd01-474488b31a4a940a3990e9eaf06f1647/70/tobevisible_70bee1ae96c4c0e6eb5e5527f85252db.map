{"version":3,"names":["Object","defineProperty","exports","value","toBeVisible","react_native_1","require","jest_matcher_utils_1","utils_1","component_tree_1","isVisibleForStyles","element","style","props","StyleSheet","flatten","display","opacity","isVisibleForAccessibility","accessibilityElementsHidden","importantForAccessibility","isModalVisible","type","Modal","visible","isElementVisible","current","getParentElement","checkReactElement","isVisible","pass","message","is","matcherHint","isNot","printElement","join"],"sources":["to-be-visible.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toBeVisible = void 0;\nconst react_native_1 = require(\"react-native\");\nconst jest_matcher_utils_1 = require(\"jest-matcher-utils\");\nconst utils_1 = require(\"./utils\");\nconst component_tree_1 = require(\"./component-tree\");\nfunction isVisibleForStyles(element) {\n    const style = element.props.style || {};\n    const { display, opacity } = react_native_1.StyleSheet.flatten(style);\n    return display !== 'none' && opacity !== 0;\n}\nfunction isVisibleForAccessibility(element) {\n    return (!element.props.accessibilityElementsHidden &&\n        element.props.importantForAccessibility !== 'no-hide-descendants');\n}\nfunction isModalVisible(element) {\n    return element.type !== react_native_1.Modal || element.props.visible !== false;\n}\nfunction isElementVisible(element) {\n    let current = element;\n    while (current) {\n        if (!isVisibleForStyles(current) ||\n            !isVisibleForAccessibility(current) ||\n            !isModalVisible(current)) {\n            return false;\n        }\n        current = (0, component_tree_1.getParentElement)(current, [react_native_1.Modal]);\n    }\n    return true;\n}\nfunction toBeVisible(element) {\n    (0, utils_1.checkReactElement)(element, toBeVisible, this);\n    const isVisible = isElementVisible(element);\n    return {\n        pass: isVisible,\n        message: () => {\n            const is = isVisible ? 'is' : 'is not';\n            return [\n                (0, jest_matcher_utils_1.matcherHint)(`${this.isNot ? '.not' : ''}.toBeVisible`, 'element', ''),\n                '',\n                `Received element ${is} visible:`,\n                (0, utils_1.printElement)(element),\n            ].join('\\n');\n        },\n    };\n}\nexports.toBeVisible = toBeVisible;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,WAAW,GAAG,KAAK,CAAC;AAC5B,IAAMC,cAAc,GAAGC,OAAO,CAAC,cAAc,CAAC;AAC9C,IAAMC,oBAAoB,GAAGD,OAAO,CAAC,oBAAoB,CAAC;AAC1D,IAAME,OAAO,GAAGF,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMG,gBAAgB,GAAGH,OAAO,CAAC,kBAAkB,CAAC;AACpD,SAASI,kBAAkB,CAACC,OAAO,EAAE;EACjC,IAAMC,KAAK,GAAGD,OAAO,CAACE,KAAK,CAACD,KAAK,IAAI,CAAC,CAAC;EACvC,4BAA6BP,cAAc,CAACS,UAAU,CAACC,OAAO,CAACH,KAAK,CAAC;IAA7DI,OAAO,yBAAPA,OAAO;IAAEC,OAAO,yBAAPA,OAAO;EACxB,OAAOD,OAAO,KAAK,MAAM,IAAIC,OAAO,KAAK,CAAC;AAC9C;AACA,SAASC,yBAAyB,CAACP,OAAO,EAAE;EACxC,OAAQ,CAACA,OAAO,CAACE,KAAK,CAACM,2BAA2B,IAC9CR,OAAO,CAACE,KAAK,CAACO,yBAAyB,KAAK,qBAAqB;AACzE;AACA,SAASC,cAAc,CAACV,OAAO,EAAE;EAC7B,OAAOA,OAAO,CAACW,IAAI,KAAKjB,cAAc,CAACkB,KAAK,IAAIZ,OAAO,CAACE,KAAK,CAACW,OAAO,KAAK,KAAK;AACnF;AACA,SAASC,gBAAgB,CAACd,OAAO,EAAE;EAC/B,IAAIe,OAAO,GAAGf,OAAO;EACrB,OAAOe,OAAO,EAAE;IACZ,IAAI,CAAChB,kBAAkB,CAACgB,OAAO,CAAC,IAC5B,CAACR,yBAAyB,CAACQ,OAAO,CAAC,IACnC,CAACL,cAAc,CAACK,OAAO,CAAC,EAAE;MAC1B,OAAO,KAAK;IAChB;IACAA,OAAO,GAAG,CAAC,CAAC,EAAEjB,gBAAgB,CAACkB,gBAAgB,EAAED,OAAO,EAAE,CAACrB,cAAc,CAACkB,KAAK,CAAC,CAAC;EACrF;EACA,OAAO,IAAI;AACf;AACA,SAASnB,WAAW,CAACO,OAAO,EAAE;EAAA;EAC1B,CAAC,CAAC,EAAEH,OAAO,CAACoB,iBAAiB,EAAEjB,OAAO,EAAEP,WAAW,EAAE,IAAI,CAAC;EAC1D,IAAMyB,SAAS,GAAGJ,gBAAgB,CAACd,OAAO,CAAC;EAC3C,OAAO;IACHmB,IAAI,EAAED,SAAS;IACfE,OAAO,EAAE,mBAAM;MACX,IAAMC,EAAE,GAAGH,SAAS,GAAG,IAAI,GAAG,QAAQ;MACtC,OAAO,CACH,CAAC,CAAC,EAAEtB,oBAAoB,CAAC0B,WAAW,GAAK,KAAI,CAACC,KAAK,GAAG,MAAM,GAAG,EAAE,oBAAgB,SAAS,EAAE,EAAE,CAAC,EAC/F,EAAE,wBACkBF,EAAE,gBACtB,CAAC,CAAC,EAAExB,OAAO,CAAC2B,YAAY,EAAExB,OAAO,CAAC,CACrC,CAACyB,IAAI,CAAC,IAAI,CAAC;IAChB;EACJ,CAAC;AACL;AACAlC,OAAO,CAACE,WAAW,GAAGA,WAAW"}