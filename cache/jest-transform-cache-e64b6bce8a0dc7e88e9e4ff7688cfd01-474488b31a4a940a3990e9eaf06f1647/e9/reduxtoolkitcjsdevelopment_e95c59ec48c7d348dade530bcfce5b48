0230b795721669cc1576ab5aa2620894
var __extends = this && this.__extends || function () {
  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];
    };
    return _extendStatics(d, b);
  };
  return function (d, b) {
    if (typeof b !== "function" && b !== null) throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    _extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __generator = this && this.__generator || function (thisArg, body) {
  var _ = {
      label: 0,
      sent: function sent() {
        if (t[0] & 1) throw t[1];
        return t[1];
      },
      trys: [],
      ops: []
    },
    f,
    y,
    t,
    g;
  return g = {
    next: verb(0),
    "throw": verb(1),
    "return": verb(2)
  }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
    return this;
  }), g;
  function verb(n) {
    return function (v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");
    while (_) try {
      if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
      if (y = 0, t) op = [op[0] & 2, t.value];
      switch (op[0]) {
        case 0:
        case 1:
          t = op;
          break;
        case 4:
          _.label++;
          return {
            value: op[1],
            done: false
          };
        case 5:
          _.label++;
          y = op[1];
          op = [0];
          continue;
        case 7:
          op = _.ops.pop();
          _.trys.pop();
          continue;
        default:
          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _ = 0;
            continue;
          }
          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
            _.label = op[1];
            break;
          }
          if (op[0] === 6 && _.label < t[1]) {
            _.label = t[1];
            t = op;
            break;
          }
          if (t && _.label < t[2]) {
            _.label = t[2];
            _.ops.push(op);
            break;
          }
          if (t[2]) _.ops.pop();
          _.trys.pop();
          continue;
      }
      op = body.call(thisArg, _);
    } catch (e) {
      op = [6, e];
      y = 0;
    } finally {
      f = t = 0;
    }
    if (op[0] & 5) throw op[1];
    return {
      value: op[0] ? op[1] : void 0,
      done: true
    };
  }
};
var __spreadArray = this && this.__spreadArray || function (to, from) {
  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];
  return to;
};
var __create = Object.create;
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = function __defNormalProp(obj, key, value) {
  return key in obj ? __defProp(obj, key, {
    enumerable: true,
    configurable: true,
    writable: true,
    value: value
  }) : obj[key] = value;
};
var __spreadValues = function __spreadValues(a, b) {
  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols) for (var _i = 0, _c = __getOwnPropSymbols(b); _i < _c.length; _i++) {
    var prop = _c[_i];
    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);
  }
  return a;
};
var __spreadProps = function __spreadProps(a, b) {
  return __defProps(a, __getOwnPropDescs(b));
};
var __markAsModule = function __markAsModule(target) {
  return __defProp(target, "__esModule", {
    value: true
  });
};
var __export = function __export(target, all) {
  for (var name in all) __defProp(target, name, {
    get: all[name],
    enumerable: true
  });
};
var __reExport = function __reExport(target, module2, desc) {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    var _loop_1 = function _loop_1(key) {
      if (!__hasOwnProp.call(target, key) && key !== "default") __defProp(target, key, {
        get: function get() {
          return module2[key];
        },
        enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable
      });
    };
    for (var _i = 0, _c = __getOwnPropNames(module2); _i < _c.length; _i++) {
      var key = _c[_i];
      _loop_1(key);
    }
  }
  return target;
};
var __toModule = function __toModule(module2) {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? {
    get: function get() {
      return module2.default;
    },
    enumerable: true
  } : {
    value: module2,
    enumerable: true
  })), module2);
};
var __async = function __async(__this, __arguments, generator) {
  return new Promise(function (resolve, reject) {
    var fulfilled = function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = function rejected(value) {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = function step(x) {
      return x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    };
    step((generator = generator.apply(__this, __arguments)).next());
  });
};
__markAsModule(exports);
__export(exports, {
  MiddlewareArray: function MiddlewareArray() {
    return _MiddlewareArray;
  },
  SHOULD_AUTOBATCH: function SHOULD_AUTOBATCH() {
    return _SHOULD_AUTOBATCH;
  },
  TaskAbortError: function TaskAbortError() {
    return _TaskAbortError;
  },
  addListener: function addListener() {
    return _addListener;
  },
  autoBatchEnhancer: function autoBatchEnhancer() {
    return _autoBatchEnhancer;
  },
  clearAllListeners: function clearAllListeners() {
    return _clearAllListeners;
  },
  configureStore: function configureStore() {
    return _configureStore;
  },
  createAction: function createAction() {
    return _createAction;
  },
  createAsyncThunk: function createAsyncThunk() {
    return _createAsyncThunk;
  },
  createDraftSafeSelector: function createDraftSafeSelector() {
    return _createDraftSafeSelector;
  },
  createEntityAdapter: function createEntityAdapter() {
    return _createEntityAdapter;
  },
  createImmutableStateInvariantMiddleware: function createImmutableStateInvariantMiddleware() {
    return _createImmutableStateInvariantMiddleware;
  },
  createListenerMiddleware: function createListenerMiddleware() {
    return _createListenerMiddleware;
  },
  createNextState: function createNextState() {
    return import_immer6.default;
  },
  createReducer: function createReducer() {
    return _createReducer;
  },
  createSelector: function createSelector() {
    return import_reselect2.createSelector;
  },
  createSerializableStateInvariantMiddleware: function createSerializableStateInvariantMiddleware() {
    return _createSerializableStateInvariantMiddleware;
  },
  createSlice: function createSlice() {
    return _createSlice;
  },
  current: function current() {
    return import_immer6.current;
  },
  findNonSerializableValue: function findNonSerializableValue() {
    return _findNonSerializableValue;
  },
  freeze: function freeze() {
    return import_immer6.freeze;
  },
  getDefaultMiddleware: function getDefaultMiddleware() {
    return _getDefaultMiddleware;
  },
  getType: function getType() {
    return _getType;
  },
  isAllOf: function isAllOf() {
    return _isAllOf;
  },
  isAnyOf: function isAnyOf() {
    return _isAnyOf;
  },
  isAsyncThunkAction: function isAsyncThunkAction() {
    return _isAsyncThunkAction;
  },
  isDraft: function isDraft() {
    return import_immer6.isDraft;
  },
  isFulfilled: function isFulfilled() {
    return _isFulfilled;
  },
  isImmutableDefault: function isImmutableDefault() {
    return _isImmutableDefault;
  },
  isPending: function isPending() {
    return _isPending;
  },
  isPlain: function isPlain() {
    return _isPlain;
  },
  isPlainObject: function isPlainObject() {
    return _isPlainObject;
  },
  isRejected: function isRejected() {
    return _isRejected;
  },
  isRejectedWithValue: function isRejectedWithValue() {
    return _isRejectedWithValue;
  },
  miniSerializeError: function miniSerializeError() {
    return _miniSerializeError;
  },
  nanoid: function nanoid() {
    return _nanoid;
  },
  original: function original() {
    return import_immer6.original;
  },
  prepareAutoBatched: function prepareAutoBatched() {
    return _prepareAutoBatched;
  },
  removeListener: function removeListener() {
    return _removeListener;
  },
  unwrapResult: function unwrapResult() {
    return _unwrapResult;
  }
});
var import_immer5 = __toModule(require("immer"));
__reExport(exports, __toModule(require("redux")));
var import_immer6 = __toModule(require("immer"));
var import_reselect2 = __toModule(require("reselect"));
var import_immer = __toModule(require("immer"));
var import_reselect = __toModule(require("reselect"));
var _createDraftSafeSelector = function _createDraftSafeSelector() {
  var args = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    args[_i] = arguments[_i];
  }
  var selector = (0, import_reselect.createSelector).apply(void 0, args);
  var wrappedSelector = function wrappedSelector(value) {
    var rest = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      rest[_i - 1] = arguments[_i];
    }
    return selector.apply(void 0, __spreadArray([(0, import_immer.isDraft)(value) ? (0, import_immer.current)(value) : value], rest));
  };
  return wrappedSelector;
};
var import_redux2 = __toModule(require("redux"));
var import_redux = __toModule(require("redux"));
var composeWithDevTools = typeof window !== "undefined" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function () {
  if (arguments.length === 0) return void 0;
  if (typeof arguments[0] === "object") return import_redux.compose;
  return import_redux.compose.apply(null, arguments);
};
var devToolsEnhancer = typeof window !== "undefined" && window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__ : function () {
  return function (noop2) {
    return noop2;
  };
};
function _isPlainObject(value) {
  if (typeof value !== "object" || value === null) return false;
  var proto = Object.getPrototypeOf(value);
  if (proto === null) return true;
  var baseProto = proto;
  while (Object.getPrototypeOf(baseProto) !== null) {
    baseProto = Object.getPrototypeOf(baseProto);
  }
  return proto === baseProto;
}
var import_redux_thunk = __toModule(require("redux-thunk"));
var import_immer2 = __toModule(require("immer"));
function getTimeMeasureUtils(maxDelay, fnName) {
  var elapsed = 0;
  return {
    measureTime: function measureTime(fn) {
      var started = Date.now();
      try {
        return fn();
      } finally {
        var finished = Date.now();
        elapsed += finished - started;
      }
    },
    warnIfExceeded: function warnIfExceeded() {
      if (elapsed > maxDelay) {
        console.warn(fnName + " took " + elapsed + "ms, which is more than the warning threshold of " + maxDelay + "ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.");
      }
    }
  };
}
var _MiddlewareArray = function (_super) {
  __extends(MiddlewareArray, _super);
  function MiddlewareArray() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    var _this = _super.apply(this, args) || this;
    Object.setPrototypeOf(_this, MiddlewareArray.prototype);
    return _this;
  }
  Object.defineProperty(MiddlewareArray, Symbol.species, {
    get: function get() {
      return MiddlewareArray;
    },
    enumerable: false,
    configurable: true
  });
  MiddlewareArray.prototype.concat = function () {
    var arr = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      arr[_i] = arguments[_i];
    }
    return _super.prototype.concat.apply(this, arr);
  };
  MiddlewareArray.prototype.prepend = function () {
    var arr = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      arr[_i] = arguments[_i];
    }
    if (arr.length === 1 && Array.isArray(arr[0])) {
      return new (MiddlewareArray.bind.apply(MiddlewareArray, __spreadArray([void 0], arr[0].concat(this))))();
    }
    return new (MiddlewareArray.bind.apply(MiddlewareArray, __spreadArray([void 0], arr.concat(this))))();
  };
  return MiddlewareArray;
}(Array);
function freezeDraftable(val) {
  return (0, import_immer2.isDraftable)(val) ? (0, import_immer2.default)(val, function () {}) : val;
}
var isProduction = false;
var prefix = "Invariant failed";
function invariant(condition, message) {
  if (condition) {
    return;
  }
  if (isProduction) {
    throw new Error(prefix);
  }
  throw new Error(prefix + ": " + (message || ""));
}
function stringify(obj, serializer, indent, decycler) {
  return JSON.stringify(obj, getSerialize(serializer, decycler), indent);
}
function getSerialize(serializer, decycler) {
  var stack = [],
    keys = [];
  if (!decycler) decycler = function decycler(_, value) {
    if (stack[0] === value) return "[Circular ~]";
    return "[Circular ~." + keys.slice(0, stack.indexOf(value)).join(".") + "]";
  };
  return function (key, value) {
    if (stack.length > 0) {
      var thisPos = stack.indexOf(this);
      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);
      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);
      if (~stack.indexOf(value)) value = decycler.call(this, key, value);
    } else stack.push(value);
    return serializer == null ? value : serializer.call(this, key, value);
  };
}
function _isImmutableDefault(value) {
  return typeof value !== "object" || value == null || Object.isFrozen(value);
}
function trackForMutations(isImmutable, ignorePaths, obj) {
  var trackedProperties = trackProperties(isImmutable, ignorePaths, obj);
  return {
    detectMutations: function detectMutations() {
      return _detectMutations(isImmutable, ignorePaths, trackedProperties, obj);
    }
  };
}
function trackProperties(isImmutable, ignorePaths, obj, path) {
  if (ignorePaths === void 0) {
    ignorePaths = [];
  }
  if (path === void 0) {
    path = "";
  }
  var tracked = {
    value: obj
  };
  if (!isImmutable(obj)) {
    tracked.children = {};
    for (var key in obj) {
      var childPath = path ? path + "." + key : key;
      if (ignorePaths.length && ignorePaths.indexOf(childPath) !== -1) {
        continue;
      }
      tracked.children[key] = trackProperties(isImmutable, ignorePaths, obj[key], childPath);
    }
  }
  return tracked;
}
function _detectMutations(isImmutable, ignoredPaths, trackedProperty, obj, sameParentRef, path) {
  if (ignoredPaths === void 0) {
    ignoredPaths = [];
  }
  if (sameParentRef === void 0) {
    sameParentRef = false;
  }
  if (path === void 0) {
    path = "";
  }
  var prevObj = trackedProperty ? trackedProperty.value : void 0;
  var sameRef = prevObj === obj;
  if (sameParentRef && !sameRef && !Number.isNaN(obj)) {
    return {
      wasMutated: true,
      path: path
    };
  }
  if (isImmutable(prevObj) || isImmutable(obj)) {
    return {
      wasMutated: false
    };
  }
  var keysToDetect = {};
  for (var key in trackedProperty.children) {
    keysToDetect[key] = true;
  }
  for (var key in obj) {
    keysToDetect[key] = true;
  }
  var hasIgnoredPaths = ignoredPaths.length > 0;
  var _loop_2 = function _loop_2(key) {
    var nestedPath = path ? path + "." + key : key;
    if (hasIgnoredPaths) {
      var hasMatches = ignoredPaths.some(function (ignored) {
        if (ignored instanceof RegExp) {
          return ignored.test(nestedPath);
        }
        return nestedPath === ignored;
      });
      if (hasMatches) {
        return "continue";
      }
    }
    var result = _detectMutations(isImmutable, ignoredPaths, trackedProperty.children[key], obj[key], sameRef, nestedPath);
    if (result.wasMutated) {
      return {
        value: result
      };
    }
  };
  for (var key in keysToDetect) {
    var state_1 = _loop_2(key);
    if (typeof state_1 === "object") return state_1.value;
  }
  return {
    wasMutated: false
  };
}
function _createImmutableStateInvariantMiddleware(options) {
  if (options === void 0) {
    options = {};
  }
  if (false) {
    return function () {
      return function (next) {
        return function (action) {
          return next(action);
        };
      };
    };
  }
  var _c = options.isImmutable,
    isImmutable = _c === void 0 ? _isImmutableDefault : _c,
    ignoredPaths = options.ignoredPaths,
    _d = options.warnAfter,
    warnAfter = _d === void 0 ? 32 : _d,
    ignore = options.ignore;
  ignoredPaths = ignoredPaths || ignore;
  var track = trackForMutations.bind(null, isImmutable, ignoredPaths);
  return function (_c) {
    var getState = _c.getState;
    var state = getState();
    var tracker = track(state);
    var result;
    return function (next) {
      return function (action) {
        var measureUtils = getTimeMeasureUtils(warnAfter, "ImmutableStateInvariantMiddleware");
        measureUtils.measureTime(function () {
          state = getState();
          result = tracker.detectMutations();
          tracker = track(state);
          invariant(!result.wasMutated, "A state mutation was detected between dispatches, in the path '" + (result.path || "") + "'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)");
        });
        var dispatchedAction = next(action);
        measureUtils.measureTime(function () {
          state = getState();
          result = tracker.detectMutations();
          tracker = track(state);
          result.wasMutated && invariant(!result.wasMutated, "A state mutation was detected inside a dispatch, in the path: " + (result.path || "") + ". Take a look at the reducer(s) handling the action " + stringify(action) + ". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)");
        });
        measureUtils.warnIfExceeded();
        return dispatchedAction;
      };
    };
  };
}
function _isPlain(val) {
  var type = typeof val;
  return val == null || type === "string" || type === "boolean" || type === "number" || Array.isArray(val) || _isPlainObject(val);
}
function _findNonSerializableValue(value, path, isSerializable, getEntries, ignoredPaths, cache) {
  if (path === void 0) {
    path = "";
  }
  if (isSerializable === void 0) {
    isSerializable = _isPlain;
  }
  if (ignoredPaths === void 0) {
    ignoredPaths = [];
  }
  var foundNestedSerializable;
  if (!isSerializable(value)) {
    return {
      keyPath: path || "<root>",
      value: value
    };
  }
  if (typeof value !== "object" || value === null) {
    return false;
  }
  if (cache == null ? void 0 : cache.has(value)) return false;
  var entries = getEntries != null ? getEntries(value) : Object.entries(value);
  var hasIgnoredPaths = ignoredPaths.length > 0;
  var _loop_3 = function _loop_3(key, nestedValue) {
    var nestedPath = path ? path + "." + key : key;
    if (hasIgnoredPaths) {
      var hasMatches = ignoredPaths.some(function (ignored) {
        if (ignored instanceof RegExp) {
          return ignored.test(nestedPath);
        }
        return nestedPath === ignored;
      });
      if (hasMatches) {
        return "continue";
      }
    }
    if (!isSerializable(nestedValue)) {
      return {
        value: {
          keyPath: nestedPath,
          value: nestedValue
        }
      };
    }
    if (typeof nestedValue === "object") {
      foundNestedSerializable = _findNonSerializableValue(nestedValue, nestedPath, isSerializable, getEntries, ignoredPaths, cache);
      if (foundNestedSerializable) {
        return {
          value: foundNestedSerializable
        };
      }
    }
  };
  for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {
    var _c = entries_1[_i],
      key = _c[0],
      nestedValue = _c[1];
    var state_2 = _loop_3(key, nestedValue);
    if (typeof state_2 === "object") return state_2.value;
  }
  if (cache && isNestedFrozen(value)) cache.add(value);
  return false;
}
function isNestedFrozen(value) {
  if (!Object.isFrozen(value)) return false;
  for (var _i = 0, _c = Object.values(value); _i < _c.length; _i++) {
    var nestedValue = _c[_i];
    if (typeof nestedValue !== "object" || nestedValue === null) continue;
    if (!isNestedFrozen(nestedValue)) return false;
  }
  return true;
}
function _createSerializableStateInvariantMiddleware(options) {
  if (options === void 0) {
    options = {};
  }
  if (false) {
    return function () {
      return function (next) {
        return function (action) {
          return next(action);
        };
      };
    };
  }
  var _c = options.isSerializable,
    isSerializable = _c === void 0 ? _isPlain : _c,
    getEntries = options.getEntries,
    _d = options.ignoredActions,
    ignoredActions = _d === void 0 ? [] : _d,
    _e = options.ignoredActionPaths,
    ignoredActionPaths = _e === void 0 ? ["meta.arg", "meta.baseQueryMeta"] : _e,
    _f = options.ignoredPaths,
    ignoredPaths = _f === void 0 ? [] : _f,
    _g = options.warnAfter,
    warnAfter = _g === void 0 ? 32 : _g,
    _h = options.ignoreState,
    ignoreState = _h === void 0 ? false : _h,
    _j = options.ignoreActions,
    ignoreActions = _j === void 0 ? false : _j,
    _k = options.disableCache,
    disableCache = _k === void 0 ? false : _k;
  var cache = !disableCache && WeakSet ? new WeakSet() : void 0;
  return function (storeAPI) {
    return function (next) {
      return function (action) {
        var result = next(action);
        var measureUtils = getTimeMeasureUtils(warnAfter, "SerializableStateInvariantMiddleware");
        if (!ignoreActions && !(ignoredActions.length && ignoredActions.indexOf(action.type) !== -1)) {
          measureUtils.measureTime(function () {
            var foundActionNonSerializableValue = _findNonSerializableValue(action, "", isSerializable, getEntries, ignoredActionPaths, cache);
            if (foundActionNonSerializableValue) {
              var keyPath = foundActionNonSerializableValue.keyPath,
                value = foundActionNonSerializableValue.value;
              console.error("A non-serializable value was detected in an action, in the path: `" + keyPath + "`. Value:", value, "\nTake a look at the logic that dispatched this action: ", action, "\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)", "\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)");
            }
          });
        }
        if (!ignoreState) {
          measureUtils.measureTime(function () {
            var state = storeAPI.getState();
            var foundStateNonSerializableValue = _findNonSerializableValue(state, "", isSerializable, getEntries, ignoredPaths, cache);
            if (foundStateNonSerializableValue) {
              var keyPath = foundStateNonSerializableValue.keyPath,
                value = foundStateNonSerializableValue.value;
              console.error("A non-serializable value was detected in the state, in the path: `" + keyPath + "`. Value:", value, "\nTake a look at the reducer(s) handling this action type: " + action.type + ".\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)");
            }
          });
          measureUtils.warnIfExceeded();
        }
        return result;
      };
    };
  };
}
function isBoolean(x) {
  return typeof x === "boolean";
}
function curryGetDefaultMiddleware() {
  return function curriedGetDefaultMiddleware(options) {
    return _getDefaultMiddleware(options);
  };
}
function _getDefaultMiddleware(options) {
  if (options === void 0) {
    options = {};
  }
  var _c = options.thunk,
    thunk = _c === void 0 ? true : _c,
    _d = options.immutableCheck,
    immutableCheck = _d === void 0 ? true : _d,
    _e = options.serializableCheck,
    serializableCheck = _e === void 0 ? true : _e;
  var middlewareArray = new _MiddlewareArray();
  if (thunk) {
    if (isBoolean(thunk)) {
      middlewareArray.push(import_redux_thunk.default);
    } else {
      middlewareArray.push(import_redux_thunk.default.withExtraArgument(thunk.extraArgument));
    }
  }
  if (true) {
    if (immutableCheck) {
      var immutableOptions = {};
      if (!isBoolean(immutableCheck)) {
        immutableOptions = immutableCheck;
      }
      middlewareArray.unshift(_createImmutableStateInvariantMiddleware(immutableOptions));
    }
    if (serializableCheck) {
      var serializableOptions = {};
      if (!isBoolean(serializableCheck)) {
        serializableOptions = serializableCheck;
      }
      middlewareArray.push(_createSerializableStateInvariantMiddleware(serializableOptions));
    }
  }
  return middlewareArray;
}
var IS_PRODUCTION = false;
function _configureStore(options) {
  var curriedGetDefaultMiddleware = curryGetDefaultMiddleware();
  var _c = options || {},
    _d = _c.reducer,
    reducer = _d === void 0 ? void 0 : _d,
    _e = _c.middleware,
    middleware = _e === void 0 ? curriedGetDefaultMiddleware() : _e,
    _f = _c.devTools,
    devTools = _f === void 0 ? true : _f,
    _g = _c.preloadedState,
    preloadedState = _g === void 0 ? void 0 : _g,
    _h = _c.enhancers,
    enhancers = _h === void 0 ? void 0 : _h;
  var rootReducer;
  if (typeof reducer === "function") {
    rootReducer = reducer;
  } else if (_isPlainObject(reducer)) {
    rootReducer = (0, import_redux2.combineReducers)(reducer);
  } else {
    throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');
  }
  var finalMiddleware = middleware;
  if (typeof finalMiddleware === "function") {
    finalMiddleware = finalMiddleware(curriedGetDefaultMiddleware);
    if (!IS_PRODUCTION && !Array.isArray(finalMiddleware)) {
      throw new Error("when using a middleware builder function, an array of middleware must be returned");
    }
  }
  if (!IS_PRODUCTION && finalMiddleware.some(function (item) {
    return typeof item !== "function";
  })) {
    throw new Error("each middleware provided to configureStore must be a function");
  }
  var middlewareEnhancer = (0, import_redux2.applyMiddleware).apply(void 0, finalMiddleware);
  var finalCompose = import_redux2.compose;
  if (devTools) {
    finalCompose = composeWithDevTools(__spreadValues({
      trace: !IS_PRODUCTION
    }, typeof devTools === "object" && devTools));
  }
  var storeEnhancers = [middlewareEnhancer];
  if (Array.isArray(enhancers)) {
    storeEnhancers = __spreadArray([middlewareEnhancer], enhancers);
  } else if (typeof enhancers === "function") {
    storeEnhancers = enhancers(storeEnhancers);
  }
  var composedEnhancer = finalCompose.apply(void 0, storeEnhancers);
  return (0, import_redux2.createStore)(rootReducer, preloadedState, composedEnhancer);
}
function _createAction(type, prepareAction) {
  function actionCreator() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    if (prepareAction) {
      var prepared = prepareAction.apply(void 0, args);
      if (!prepared) {
        throw new Error("prepareAction did not return an object");
      }
      return __spreadValues(__spreadValues({
        type: type,
        payload: prepared.payload
      }, "meta" in prepared && {
        meta: prepared.meta
      }), "error" in prepared && {
        error: prepared.error
      });
    }
    return {
      type: type,
      payload: args[0]
    };
  }
  actionCreator.toString = function () {
    return "" + type;
  };
  actionCreator.type = type;
  actionCreator.match = function (action) {
    return action.type === type;
  };
  return actionCreator;
}
function isFSA(action) {
  return _isPlainObject(action) && typeof action.type === "string" && Object.keys(action).every(isValidKey);
}
function isValidKey(key) {
  return ["type", "payload", "error", "meta"].indexOf(key) > -1;
}
function _getType(actionCreator) {
  return "" + actionCreator;
}
var import_immer3 = __toModule(require("immer"));
function executeReducerBuilderCallback(builderCallback) {
  var actionsMap = {};
  var actionMatchers = [];
  var defaultCaseReducer;
  var builder = {
    addCase: function addCase(typeOrActionCreator, reducer) {
      if (true) {
        if (actionMatchers.length > 0) {
          throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");
        }
        if (defaultCaseReducer) {
          throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`");
        }
      }
      var type = typeof typeOrActionCreator === "string" ? typeOrActionCreator : typeOrActionCreator.type;
      if (type in actionsMap) {
        throw new Error("addCase cannot be called with two reducers for the same action type");
      }
      actionsMap[type] = reducer;
      return builder;
    },
    addMatcher: function addMatcher(matcher, reducer) {
      if (true) {
        if (defaultCaseReducer) {
          throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");
        }
      }
      actionMatchers.push({
        matcher: matcher,
        reducer: reducer
      });
      return builder;
    },
    addDefaultCase: function addDefaultCase(reducer) {
      if (true) {
        if (defaultCaseReducer) {
          throw new Error("`builder.addDefaultCase` can only be called once");
        }
      }
      defaultCaseReducer = reducer;
      return builder;
    }
  };
  builderCallback(builder);
  return [actionsMap, actionMatchers, defaultCaseReducer];
}
function isStateFunction(x) {
  return typeof x === "function";
}
var hasWarnedAboutObjectNotation = false;
function _createReducer(initialState, mapOrBuilderCallback, actionMatchers, defaultCaseReducer) {
  if (actionMatchers === void 0) {
    actionMatchers = [];
  }
  if (true) {
    if (typeof mapOrBuilderCallback === "object") {
      if (!hasWarnedAboutObjectNotation) {
        hasWarnedAboutObjectNotation = true;
        console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer");
      }
    }
  }
  var _c = typeof mapOrBuilderCallback === "function" ? executeReducerBuilderCallback(mapOrBuilderCallback) : [mapOrBuilderCallback, actionMatchers, defaultCaseReducer],
    actionsMap = _c[0],
    finalActionMatchers = _c[1],
    finalDefaultCaseReducer = _c[2];
  var getInitialState;
  if (isStateFunction(initialState)) {
    getInitialState = function getInitialState() {
      return freezeDraftable(initialState());
    };
  } else {
    var frozenInitialState_1 = freezeDraftable(initialState);
    getInitialState = function getInitialState() {
      return frozenInitialState_1;
    };
  }
  function reducer(state, action) {
    if (state === void 0) {
      state = getInitialState();
    }
    var caseReducers = __spreadArray([actionsMap[action.type]], finalActionMatchers.filter(function (_c) {
      var matcher = _c.matcher;
      return matcher(action);
    }).map(function (_c) {
      var reducer2 = _c.reducer;
      return reducer2;
    }));
    if (caseReducers.filter(function (cr) {
      return !!cr;
    }).length === 0) {
      caseReducers = [finalDefaultCaseReducer];
    }
    return caseReducers.reduce(function (previousState, caseReducer) {
      if (caseReducer) {
        if ((0, import_immer3.isDraft)(previousState)) {
          var draft = previousState;
          var result = caseReducer(draft, action);
          if (result === void 0) {
            return previousState;
          }
          return result;
        } else if (!(0, import_immer3.isDraftable)(previousState)) {
          var result = caseReducer(previousState, action);
          if (result === void 0) {
            if (previousState === null) {
              return previousState;
            }
            throw Error("A case reducer on a non-draftable value must not return undefined");
          }
          return result;
        } else {
          return (0, import_immer3.default)(previousState, function (draft) {
            return caseReducer(draft, action);
          });
        }
      }
      return previousState;
    }, state);
  }
  reducer.getInitialState = getInitialState;
  return reducer;
}
var hasWarnedAboutObjectNotation2 = false;
function getType2(slice, actionKey) {
  return slice + "/" + actionKey;
}
function _createSlice(options) {
  var name = options.name;
  if (!name) {
    throw new Error("`name` is a required option for createSlice");
  }
  if (typeof process !== "undefined" && true) {
    if (options.initialState === void 0) {
      console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");
    }
  }
  var initialState = typeof options.initialState == "function" ? options.initialState : freezeDraftable(options.initialState);
  var reducers = options.reducers || {};
  var reducerNames = Object.keys(reducers);
  var sliceCaseReducersByName = {};
  var sliceCaseReducersByType = {};
  var actionCreators = {};
  reducerNames.forEach(function (reducerName) {
    var maybeReducerWithPrepare = reducers[reducerName];
    var type = getType2(name, reducerName);
    var caseReducer;
    var prepareCallback;
    if ("reducer" in maybeReducerWithPrepare) {
      caseReducer = maybeReducerWithPrepare.reducer;
      prepareCallback = maybeReducerWithPrepare.prepare;
    } else {
      caseReducer = maybeReducerWithPrepare;
    }
    sliceCaseReducersByName[reducerName] = caseReducer;
    sliceCaseReducersByType[type] = caseReducer;
    actionCreators[reducerName] = prepareCallback ? _createAction(type, prepareCallback) : _createAction(type);
  });
  function buildReducer() {
    if (true) {
      if (typeof options.extraReducers === "object") {
        if (!hasWarnedAboutObjectNotation2) {
          hasWarnedAboutObjectNotation2 = true;
          console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice");
        }
      }
    }
    var _c = typeof options.extraReducers === "function" ? executeReducerBuilderCallback(options.extraReducers) : [options.extraReducers],
      _d = _c[0],
      extraReducers = _d === void 0 ? {} : _d,
      _e = _c[1],
      actionMatchers = _e === void 0 ? [] : _e,
      _f = _c[2],
      defaultCaseReducer = _f === void 0 ? void 0 : _f;
    var finalCaseReducers = __spreadValues(__spreadValues({}, extraReducers), sliceCaseReducersByType);
    return _createReducer(initialState, function (builder) {
      for (var key in finalCaseReducers) {
        builder.addCase(key, finalCaseReducers[key]);
      }
      for (var _i = 0, actionMatchers_1 = actionMatchers; _i < actionMatchers_1.length; _i++) {
        var m = actionMatchers_1[_i];
        builder.addMatcher(m.matcher, m.reducer);
      }
      if (defaultCaseReducer) {
        builder.addDefaultCase(defaultCaseReducer);
      }
    });
  }
  var _reducer;
  return {
    name: name,
    reducer: function reducer(state, action) {
      if (!_reducer) _reducer = buildReducer();
      return _reducer(state, action);
    },
    actions: actionCreators,
    caseReducers: sliceCaseReducersByName,
    getInitialState: function getInitialState() {
      if (!_reducer) _reducer = buildReducer();
      return _reducer.getInitialState();
    }
  };
}
function getInitialEntityState() {
  return {
    ids: [],
    entities: {}
  };
}
function createInitialStateFactory() {
  function getInitialState(additionalState) {
    if (additionalState === void 0) {
      additionalState = {};
    }
    return Object.assign(getInitialEntityState(), additionalState);
  }
  return {
    getInitialState: getInitialState
  };
}
function createSelectorsFactory() {
  function getSelectors(selectState) {
    var selectIds = function selectIds(state) {
      return state.ids;
    };
    var selectEntities = function selectEntities(state) {
      return state.entities;
    };
    var selectAll = _createDraftSafeSelector(selectIds, selectEntities, function (ids, entities) {
      return ids.map(function (id) {
        return entities[id];
      });
    });
    var selectId = function selectId(_, id) {
      return id;
    };
    var selectById = function selectById(entities, id) {
      return entities[id];
    };
    var selectTotal = _createDraftSafeSelector(selectIds, function (ids) {
      return ids.length;
    });
    if (!selectState) {
      return {
        selectIds: selectIds,
        selectEntities: selectEntities,
        selectAll: selectAll,
        selectTotal: selectTotal,
        selectById: _createDraftSafeSelector(selectEntities, selectId, selectById)
      };
    }
    var selectGlobalizedEntities = _createDraftSafeSelector(selectState, selectEntities);
    return {
      selectIds: _createDraftSafeSelector(selectState, selectIds),
      selectEntities: selectGlobalizedEntities,
      selectAll: _createDraftSafeSelector(selectState, selectAll),
      selectTotal: _createDraftSafeSelector(selectState, selectTotal),
      selectById: _createDraftSafeSelector(selectGlobalizedEntities, selectId, selectById)
    };
  }
  return {
    getSelectors: getSelectors
  };
}
var import_immer4 = __toModule(require("immer"));
function createSingleArgumentStateOperator(mutator) {
  var operator = createStateOperator(function (_, state) {
    return mutator(state);
  });
  return function operation(state) {
    return operator(state, void 0);
  };
}
function createStateOperator(mutator) {
  return function operation(state, arg) {
    function isPayloadActionArgument(arg2) {
      return isFSA(arg2);
    }
    var runMutator = function runMutator(draft) {
      if (isPayloadActionArgument(arg)) {
        mutator(arg.payload, draft);
      } else {
        mutator(arg, draft);
      }
    };
    if ((0, import_immer4.isDraft)(state)) {
      runMutator(state);
      return state;
    } else {
      return (0, import_immer4.default)(state, runMutator);
    }
  };
}
function selectIdValue(entity, selectId) {
  var key = selectId(entity);
  if (key === void 0) {
    console.warn("The entity passed to the `selectId` implementation returned undefined.", "You should probably provide your own `selectId` implementation.", "The entity that was passed:", entity, "The `selectId` implementation:", selectId.toString());
  }
  return key;
}
function ensureEntitiesArray(entities) {
  if (!Array.isArray(entities)) {
    entities = Object.values(entities);
  }
  return entities;
}
function splitAddedUpdatedEntities(newEntities, selectId, state) {
  newEntities = ensureEntitiesArray(newEntities);
  var added = [];
  var updated = [];
  for (var _i = 0, newEntities_1 = newEntities; _i < newEntities_1.length; _i++) {
    var entity = newEntities_1[_i];
    var id = selectIdValue(entity, selectId);
    if (id in state.entities) {
      updated.push({
        id: id,
        changes: entity
      });
    } else {
      added.push(entity);
    }
  }
  return [added, updated];
}
function createUnsortedStateAdapter(selectId) {
  function addOneMutably(entity, state) {
    var key = selectIdValue(entity, selectId);
    if (key in state.entities) {
      return;
    }
    state.ids.push(key);
    state.entities[key] = entity;
  }
  function addManyMutably(newEntities, state) {
    newEntities = ensureEntitiesArray(newEntities);
    for (var _i = 0, newEntities_2 = newEntities; _i < newEntities_2.length; _i++) {
      var entity = newEntities_2[_i];
      addOneMutably(entity, state);
    }
  }
  function setOneMutably(entity, state) {
    var key = selectIdValue(entity, selectId);
    if (!(key in state.entities)) {
      state.ids.push(key);
    }
    state.entities[key] = entity;
  }
  function setManyMutably(newEntities, state) {
    newEntities = ensureEntitiesArray(newEntities);
    for (var _i = 0, newEntities_3 = newEntities; _i < newEntities_3.length; _i++) {
      var entity = newEntities_3[_i];
      setOneMutably(entity, state);
    }
  }
  function setAllMutably(newEntities, state) {
    newEntities = ensureEntitiesArray(newEntities);
    state.ids = [];
    state.entities = {};
    addManyMutably(newEntities, state);
  }
  function removeOneMutably(key, state) {
    return removeManyMutably([key], state);
  }
  function removeManyMutably(keys, state) {
    var didMutate = false;
    keys.forEach(function (key) {
      if (key in state.entities) {
        delete state.entities[key];
        didMutate = true;
      }
    });
    if (didMutate) {
      state.ids = state.ids.filter(function (id) {
        return id in state.entities;
      });
    }
  }
  function removeAllMutably(state) {
    Object.assign(state, {
      ids: [],
      entities: {}
    });
  }
  function takeNewKey(keys, update, state) {
    var original2 = state.entities[update.id];
    var updated = Object.assign({}, original2, update.changes);
    var newKey = selectIdValue(updated, selectId);
    var hasNewKey = newKey !== update.id;
    if (hasNewKey) {
      keys[update.id] = newKey;
      delete state.entities[update.id];
    }
    state.entities[newKey] = updated;
    return hasNewKey;
  }
  function updateOneMutably(update, state) {
    return updateManyMutably([update], state);
  }
  function updateManyMutably(updates, state) {
    var newKeys = {};
    var updatesPerEntity = {};
    updates.forEach(function (update) {
      if (update.id in state.entities) {
        updatesPerEntity[update.id] = {
          id: update.id,
          changes: __spreadValues(__spreadValues({}, updatesPerEntity[update.id] ? updatesPerEntity[update.id].changes : null), update.changes)
        };
      }
    });
    updates = Object.values(updatesPerEntity);
    var didMutateEntities = updates.length > 0;
    if (didMutateEntities) {
      var didMutateIds = updates.filter(function (update) {
        return takeNewKey(newKeys, update, state);
      }).length > 0;
      if (didMutateIds) {
        state.ids = Object.keys(state.entities);
      }
    }
  }
  function upsertOneMutably(entity, state) {
    return upsertManyMutably([entity], state);
  }
  function upsertManyMutably(newEntities, state) {
    var _c = splitAddedUpdatedEntities(newEntities, selectId, state),
      added = _c[0],
      updated = _c[1];
    updateManyMutably(updated, state);
    addManyMutably(added, state);
  }
  return {
    removeAll: createSingleArgumentStateOperator(removeAllMutably),
    addOne: createStateOperator(addOneMutably),
    addMany: createStateOperator(addManyMutably),
    setOne: createStateOperator(setOneMutably),
    setMany: createStateOperator(setManyMutably),
    setAll: createStateOperator(setAllMutably),
    updateOne: createStateOperator(updateOneMutably),
    updateMany: createStateOperator(updateManyMutably),
    upsertOne: createStateOperator(upsertOneMutably),
    upsertMany: createStateOperator(upsertManyMutably),
    removeOne: createStateOperator(removeOneMutably),
    removeMany: createStateOperator(removeManyMutably)
  };
}
function createSortedStateAdapter(selectId, sort) {
  var _c = createUnsortedStateAdapter(selectId),
    removeOne = _c.removeOne,
    removeMany = _c.removeMany,
    removeAll = _c.removeAll;
  function addOneMutably(entity, state) {
    return addManyMutably([entity], state);
  }
  function addManyMutably(newEntities, state) {
    newEntities = ensureEntitiesArray(newEntities);
    var models = newEntities.filter(function (model) {
      return !(selectIdValue(model, selectId) in state.entities);
    });
    if (models.length !== 0) {
      merge(models, state);
    }
  }
  function setOneMutably(entity, state) {
    return setManyMutably([entity], state);
  }
  function setManyMutably(newEntities, state) {
    newEntities = ensureEntitiesArray(newEntities);
    if (newEntities.length !== 0) {
      merge(newEntities, state);
    }
  }
  function setAllMutably(newEntities, state) {
    newEntities = ensureEntitiesArray(newEntities);
    state.entities = {};
    state.ids = [];
    addManyMutably(newEntities, state);
  }
  function updateOneMutably(update, state) {
    return updateManyMutably([update], state);
  }
  function updateManyMutably(updates, state) {
    var appliedUpdates = false;
    for (var _i = 0, updates_1 = updates; _i < updates_1.length; _i++) {
      var update = updates_1[_i];
      var entity = state.entities[update.id];
      if (!entity) {
        continue;
      }
      appliedUpdates = true;
      Object.assign(entity, update.changes);
      var newId = selectId(entity);
      if (update.id !== newId) {
        delete state.entities[update.id];
        state.entities[newId] = entity;
      }
    }
    if (appliedUpdates) {
      resortEntities(state);
    }
  }
  function upsertOneMutably(entity, state) {
    return upsertManyMutably([entity], state);
  }
  function upsertManyMutably(newEntities, state) {
    var _c = splitAddedUpdatedEntities(newEntities, selectId, state),
      added = _c[0],
      updated = _c[1];
    updateManyMutably(updated, state);
    addManyMutably(added, state);
  }
  function areArraysEqual(a, b) {
    if (a.length !== b.length) {
      return false;
    }
    for (var i = 0; i < a.length && i < b.length; i++) {
      if (a[i] === b[i]) {
        continue;
      }
      return false;
    }
    return true;
  }
  function merge(models, state) {
    models.forEach(function (model) {
      state.entities[selectId(model)] = model;
    });
    resortEntities(state);
  }
  function resortEntities(state) {
    var allEntities = Object.values(state.entities);
    allEntities.sort(sort);
    var newSortedIds = allEntities.map(selectId);
    var ids = state.ids;
    if (!areArraysEqual(ids, newSortedIds)) {
      state.ids = newSortedIds;
    }
  }
  return {
    removeOne: removeOne,
    removeMany: removeMany,
    removeAll: removeAll,
    addOne: createStateOperator(addOneMutably),
    updateOne: createStateOperator(updateOneMutably),
    upsertOne: createStateOperator(upsertOneMutably),
    setOne: createStateOperator(setOneMutably),
    setMany: createStateOperator(setManyMutably),
    setAll: createStateOperator(setAllMutably),
    addMany: createStateOperator(addManyMutably),
    updateMany: createStateOperator(updateManyMutably),
    upsertMany: createStateOperator(upsertManyMutably)
  };
}
function _createEntityAdapter(options) {
  if (options === void 0) {
    options = {};
  }
  var _c = __spreadValues({
      sortComparer: false,
      selectId: function selectId(instance) {
        return instance.id;
      }
    }, options),
    selectId = _c.selectId,
    sortComparer = _c.sortComparer;
  var stateFactory = createInitialStateFactory();
  var selectorsFactory = createSelectorsFactory();
  var stateAdapter = sortComparer ? createSortedStateAdapter(selectId, sortComparer) : createUnsortedStateAdapter(selectId);
  return __spreadValues(__spreadValues(__spreadValues({
    selectId: selectId,
    sortComparer: sortComparer
  }, stateFactory), selectorsFactory), stateAdapter);
}
var urlAlphabet = "ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";
var _nanoid = function _nanoid(size) {
  if (size === void 0) {
    size = 21;
  }
  var id = "";
  var i = size;
  while (i--) {
    id += urlAlphabet[Math.random() * 64 | 0];
  }
  return id;
};
var commonProperties = ["name", "message", "stack", "code"];
var RejectWithValue = function () {
  function RejectWithValue(payload, meta) {
    this.payload = payload;
    this.meta = meta;
  }
  return RejectWithValue;
}();
var FulfillWithMeta = function () {
  function FulfillWithMeta(payload, meta) {
    this.payload = payload;
    this.meta = meta;
  }
  return FulfillWithMeta;
}();
var _miniSerializeError = function _miniSerializeError(value) {
  if (typeof value === "object" && value !== null) {
    var simpleError = {};
    for (var _i = 0, commonProperties_1 = commonProperties; _i < commonProperties_1.length; _i++) {
      var property = commonProperties_1[_i];
      if (typeof value[property] === "string") {
        simpleError[property] = value[property];
      }
    }
    return simpleError;
  }
  return {
    message: String(value)
  };
};
var _createAsyncThunk = function () {
  function createAsyncThunk2(typePrefix, payloadCreator, options) {
    var fulfilled = _createAction(typePrefix + "/fulfilled", function (payload, requestId, arg, meta) {
      return {
        payload: payload,
        meta: __spreadProps(__spreadValues({}, meta || {}), {
          arg: arg,
          requestId: requestId,
          requestStatus: "fulfilled"
        })
      };
    });
    var pending = _createAction(typePrefix + "/pending", function (requestId, arg, meta) {
      return {
        payload: void 0,
        meta: __spreadProps(__spreadValues({}, meta || {}), {
          arg: arg,
          requestId: requestId,
          requestStatus: "pending"
        })
      };
    });
    var rejected = _createAction(typePrefix + "/rejected", function (error, requestId, arg, payload, meta) {
      return {
        payload: payload,
        error: (options && options.serializeError || _miniSerializeError)(error || "Rejected"),
        meta: __spreadProps(__spreadValues({}, meta || {}), {
          arg: arg,
          requestId: requestId,
          rejectedWithValue: !!payload,
          requestStatus: "rejected",
          aborted: (error == null ? void 0 : error.name) === "AbortError",
          condition: (error == null ? void 0 : error.name) === "ConditionError"
        })
      };
    });
    var displayedWarning = false;
    var AC = typeof AbortController !== "undefined" ? AbortController : function () {
      function class_1() {
        this.signal = {
          aborted: false,
          addEventListener: function addEventListener() {},
          dispatchEvent: function dispatchEvent() {
            return false;
          },
          onabort: function onabort() {},
          removeEventListener: function removeEventListener() {},
          reason: void 0,
          throwIfAborted: function throwIfAborted() {}
        };
      }
      class_1.prototype.abort = function () {
        if (true) {
          if (!displayedWarning) {
            displayedWarning = true;
            console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'.");
          }
        }
      };
      return class_1;
    }();
    function actionCreator(arg) {
      return function (dispatch, getState, extra) {
        var requestId = (options == null ? void 0 : options.idGenerator) ? options.idGenerator(arg) : _nanoid();
        var abortController = new AC();
        var abortReason;
        var started = false;
        function abort(reason) {
          abortReason = reason;
          abortController.abort();
        }
        var promise2 = function () {
          return __async(this, null, function () {
            var _a, _b, finalAction, conditionResult, abortedPromise, err_1, skipDispatch;
            return __generator(this, function (_c) {
              switch (_c.label) {
                case 0:
                  _c.trys.push([0, 4,, 5]);
                  conditionResult = (_a = options == null ? void 0 : options.condition) == null ? void 0 : _a.call(options, arg, {
                    getState: getState,
                    extra: extra
                  });
                  if (!isThenable(conditionResult)) return [3, 2];
                  return [4, conditionResult];
                case 1:
                  conditionResult = _c.sent();
                  _c.label = 2;
                case 2:
                  if (conditionResult === false || abortController.signal.aborted) {
                    throw {
                      name: "ConditionError",
                      message: "Aborted due to condition callback returning false."
                    };
                  }
                  started = true;
                  abortedPromise = new Promise(function (_, reject) {
                    return abortController.signal.addEventListener("abort", function () {
                      return reject({
                        name: "AbortError",
                        message: abortReason || "Aborted"
                      });
                    });
                  });
                  dispatch(pending(requestId, arg, (_b = options == null ? void 0 : options.getPendingMeta) == null ? void 0 : _b.call(options, {
                    requestId: requestId,
                    arg: arg
                  }, {
                    getState: getState,
                    extra: extra
                  })));
                  return [4, Promise.race([abortedPromise, Promise.resolve(payloadCreator(arg, {
                    dispatch: dispatch,
                    getState: getState,
                    extra: extra,
                    requestId: requestId,
                    signal: abortController.signal,
                    abort: abort,
                    rejectWithValue: function rejectWithValue(value, meta) {
                      return new RejectWithValue(value, meta);
                    },
                    fulfillWithValue: function fulfillWithValue(value, meta) {
                      return new FulfillWithMeta(value, meta);
                    }
                  })).then(function (result) {
                    if (result instanceof RejectWithValue) {
                      throw result;
                    }
                    if (result instanceof FulfillWithMeta) {
                      return fulfilled(result.payload, requestId, arg, result.meta);
                    }
                    return fulfilled(result, requestId, arg);
                  })])];
                case 3:
                  finalAction = _c.sent();
                  return [3, 5];
                case 4:
                  err_1 = _c.sent();
                  finalAction = err_1 instanceof RejectWithValue ? rejected(null, requestId, arg, err_1.payload, err_1.meta) : rejected(err_1, requestId, arg);
                  return [3, 5];
                case 5:
                  skipDispatch = options && !options.dispatchConditionRejection && rejected.match(finalAction) && finalAction.meta.condition;
                  if (!skipDispatch) {
                    dispatch(finalAction);
                  }
                  return [2, finalAction];
              }
            });
          });
        }();
        return Object.assign(promise2, {
          abort: abort,
          requestId: requestId,
          arg: arg,
          unwrap: function unwrap() {
            return promise2.then(_unwrapResult);
          }
        });
      };
    }
    return Object.assign(actionCreator, {
      pending: pending,
      rejected: rejected,
      fulfilled: fulfilled,
      typePrefix: typePrefix
    });
  }
  createAsyncThunk2.withTypes = function () {
    return createAsyncThunk2;
  };
  return createAsyncThunk2;
}();
function _unwrapResult(action) {
  if (action.meta && action.meta.rejectedWithValue) {
    throw action.payload;
  }
  if (action.error) {
    throw action.error;
  }
  return action.payload;
}
function isThenable(value) {
  return value !== null && typeof value === "object" && typeof value.then === "function";
}
var hasMatchFunction = function hasMatchFunction(v) {
  return v && typeof v.match === "function";
};
var matches = function matches(matcher, action) {
  if (hasMatchFunction(matcher)) {
    return matcher.match(action);
  } else {
    return matcher(action);
  }
};
function _isAnyOf() {
  var matchers = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    matchers[_i] = arguments[_i];
  }
  return function (action) {
    return matchers.some(function (matcher) {
      return matches(matcher, action);
    });
  };
}
function _isAllOf() {
  var matchers = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    matchers[_i] = arguments[_i];
  }
  return function (action) {
    return matchers.every(function (matcher) {
      return matches(matcher, action);
    });
  };
}
function hasExpectedRequestMetadata(action, validStatus) {
  if (!action || !action.meta) return false;
  var hasValidRequestId = typeof action.meta.requestId === "string";
  var hasValidRequestStatus = validStatus.indexOf(action.meta.requestStatus) > -1;
  return hasValidRequestId && hasValidRequestStatus;
}
function isAsyncThunkArray(a) {
  return typeof a[0] === "function" && "pending" in a[0] && "fulfilled" in a[0] && "rejected" in a[0];
}
function _isPending() {
  var asyncThunks = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    asyncThunks[_i] = arguments[_i];
  }
  if (asyncThunks.length === 0) {
    return function (action) {
      return hasExpectedRequestMetadata(action, ["pending"]);
    };
  }
  if (!isAsyncThunkArray(asyncThunks)) {
    return _isPending()(asyncThunks[0]);
  }
  return function (action) {
    var matchers = asyncThunks.map(function (asyncThunk) {
      return asyncThunk.pending;
    });
    var combinedMatcher = _isAnyOf.apply(void 0, matchers);
    return combinedMatcher(action);
  };
}
function _isRejected() {
  var asyncThunks = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    asyncThunks[_i] = arguments[_i];
  }
  if (asyncThunks.length === 0) {
    return function (action) {
      return hasExpectedRequestMetadata(action, ["rejected"]);
    };
  }
  if (!isAsyncThunkArray(asyncThunks)) {
    return _isRejected()(asyncThunks[0]);
  }
  return function (action) {
    var matchers = asyncThunks.map(function (asyncThunk) {
      return asyncThunk.rejected;
    });
    var combinedMatcher = _isAnyOf.apply(void 0, matchers);
    return combinedMatcher(action);
  };
}
function _isRejectedWithValue() {
  var asyncThunks = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    asyncThunks[_i] = arguments[_i];
  }
  var hasFlag = function hasFlag(action) {
    return action && action.meta && action.meta.rejectedWithValue;
  };
  if (asyncThunks.length === 0) {
    return function (action) {
      var combinedMatcher = _isAllOf(_isRejected.apply(void 0, asyncThunks), hasFlag);
      return combinedMatcher(action);
    };
  }
  if (!isAsyncThunkArray(asyncThunks)) {
    return _isRejectedWithValue()(asyncThunks[0]);
  }
  return function (action) {
    var combinedMatcher = _isAllOf(_isRejected.apply(void 0, asyncThunks), hasFlag);
    return combinedMatcher(action);
  };
}
function _isFulfilled() {
  var asyncThunks = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    asyncThunks[_i] = arguments[_i];
  }
  if (asyncThunks.length === 0) {
    return function (action) {
      return hasExpectedRequestMetadata(action, ["fulfilled"]);
    };
  }
  if (!isAsyncThunkArray(asyncThunks)) {
    return _isFulfilled()(asyncThunks[0]);
  }
  return function (action) {
    var matchers = asyncThunks.map(function (asyncThunk) {
      return asyncThunk.fulfilled;
    });
    var combinedMatcher = _isAnyOf.apply(void 0, matchers);
    return combinedMatcher(action);
  };
}
function _isAsyncThunkAction() {
  var asyncThunks = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    asyncThunks[_i] = arguments[_i];
  }
  if (asyncThunks.length === 0) {
    return function (action) {
      return hasExpectedRequestMetadata(action, ["pending", "fulfilled", "rejected"]);
    };
  }
  if (!isAsyncThunkArray(asyncThunks)) {
    return _isAsyncThunkAction()(asyncThunks[0]);
  }
  return function (action) {
    var matchers = [];
    for (var _i = 0, asyncThunks_1 = asyncThunks; _i < asyncThunks_1.length; _i++) {
      var asyncThunk = asyncThunks_1[_i];
      matchers.push(asyncThunk.pending, asyncThunk.rejected, asyncThunk.fulfilled);
    }
    var combinedMatcher = _isAnyOf.apply(void 0, matchers);
    return combinedMatcher(action);
  };
}
var assertFunction = function assertFunction(func, expected) {
  if (typeof func !== "function") {
    throw new TypeError(expected + " is not a function");
  }
};
var noop = function noop() {};
var catchRejection = function catchRejection(promise2, onError) {
  if (onError === void 0) {
    onError = noop;
  }
  promise2.catch(onError);
  return promise2;
};
var addAbortSignalListener = function addAbortSignalListener(abortSignal, callback) {
  abortSignal.addEventListener("abort", callback, {
    once: true
  });
  return function () {
    return abortSignal.removeEventListener("abort", callback);
  };
};
var abortControllerWithReason = function abortControllerWithReason(abortController, reason) {
  var signal = abortController.signal;
  if (signal.aborted) {
    return;
  }
  if (!("reason" in signal)) {
    Object.defineProperty(signal, "reason", {
      enumerable: true,
      value: reason,
      configurable: true,
      writable: true
    });
  }
  ;
  abortController.abort(reason);
};
var task = "task";
var listener = "listener";
var completed = "completed";
var cancelled = "cancelled";
var taskCancelled = "task-" + cancelled;
var taskCompleted = "task-" + completed;
var listenerCancelled = listener + "-" + cancelled;
var listenerCompleted = listener + "-" + completed;
var _TaskAbortError = function () {
  function TaskAbortError(code) {
    this.code = code;
    this.name = "TaskAbortError";
    this.message = task + " " + cancelled + " (reason: " + code + ")";
  }
  return TaskAbortError;
}();
var validateActive = function validateActive(signal) {
  if (signal.aborted) {
    throw new _TaskAbortError(signal.reason);
  }
};
function raceWithSignal(signal, promise2) {
  var cleanup = noop;
  return new Promise(function (resolve, reject) {
    var notifyRejection = function notifyRejection() {
      return reject(new _TaskAbortError(signal.reason));
    };
    if (signal.aborted) {
      notifyRejection();
      return;
    }
    cleanup = addAbortSignalListener(signal, notifyRejection);
    promise2.finally(function () {
      return cleanup();
    }).then(resolve, reject);
  }).finally(function () {
    cleanup = noop;
  });
}
var runTask = function runTask(task2, cleanUp) {
  return __async(void 0, null, function () {
    var value, error_1;
    return __generator(this, function (_c) {
      switch (_c.label) {
        case 0:
          _c.trys.push([0, 3, 4, 5]);
          return [4, Promise.resolve()];
        case 1:
          _c.sent();
          return [4, task2()];
        case 2:
          value = _c.sent();
          return [2, {
            status: "ok",
            value: value
          }];
        case 3:
          error_1 = _c.sent();
          return [2, {
            status: error_1 instanceof _TaskAbortError ? "cancelled" : "rejected",
            error: error_1
          }];
        case 4:
          cleanUp == null ? void 0 : cleanUp();
          return [7];
        case 5:
          return [2];
      }
    });
  });
};
var createPause = function createPause(signal) {
  return function (promise2) {
    return catchRejection(raceWithSignal(signal, promise2).then(function (output) {
      validateActive(signal);
      return output;
    }));
  };
};
var createDelay = function createDelay(signal) {
  var pause = createPause(signal);
  return function (timeoutMs) {
    return pause(new Promise(function (resolve) {
      return setTimeout(resolve, timeoutMs);
    }));
  };
};
var assign = Object.assign;
var INTERNAL_NIL_TOKEN = {};
var alm = "listenerMiddleware";
var createFork = function createFork(parentAbortSignal) {
  var linkControllers = function linkControllers(controller) {
    return addAbortSignalListener(parentAbortSignal, function () {
      return abortControllerWithReason(controller, parentAbortSignal.reason);
    });
  };
  return function (taskExecutor) {
    assertFunction(taskExecutor, "taskExecutor");
    var childAbortController = new AbortController();
    linkControllers(childAbortController);
    var result = runTask(function () {
      return __async(void 0, null, function () {
        var result2;
        return __generator(this, function (_c) {
          switch (_c.label) {
            case 0:
              validateActive(parentAbortSignal);
              validateActive(childAbortController.signal);
              return [4, taskExecutor({
                pause: createPause(childAbortController.signal),
                delay: createDelay(childAbortController.signal),
                signal: childAbortController.signal
              })];
            case 1:
              result2 = _c.sent();
              validateActive(childAbortController.signal);
              return [2, result2];
          }
        });
      });
    }, function () {
      return abortControllerWithReason(childAbortController, taskCompleted);
    });
    return {
      result: createPause(parentAbortSignal)(result),
      cancel: function cancel() {
        abortControllerWithReason(childAbortController, taskCancelled);
      }
    };
  };
};
var createTakePattern = function createTakePattern(startListening, signal) {
  var take = function take(predicate, timeout) {
    return __async(void 0, null, function () {
      var unsubscribe, tuplePromise, promises, output;
      return __generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            validateActive(signal);
            unsubscribe = function unsubscribe() {};
            tuplePromise = new Promise(function (resolve, reject) {
              var stopListening = startListening({
                predicate: predicate,
                effect: function effect(action, listenerApi) {
                  listenerApi.unsubscribe();
                  resolve([action, listenerApi.getState(), listenerApi.getOriginalState()]);
                }
              });
              unsubscribe = function unsubscribe() {
                stopListening();
                reject();
              };
            });
            promises = [tuplePromise];
            if (timeout != null) {
              promises.push(new Promise(function (resolve) {
                return setTimeout(resolve, timeout, null);
              }));
            }
            _c.label = 1;
          case 1:
            _c.trys.push([1,, 3, 4]);
            return [4, raceWithSignal(signal, Promise.race(promises))];
          case 2:
            output = _c.sent();
            validateActive(signal);
            return [2, output];
          case 3:
            unsubscribe();
            return [7];
          case 4:
            return [2];
        }
      });
    });
  };
  return function (predicate, timeout) {
    return catchRejection(take(predicate, timeout));
  };
};
var getListenerEntryPropsFrom = function getListenerEntryPropsFrom(options) {
  var type = options.type,
    actionCreator = options.actionCreator,
    matcher = options.matcher,
    predicate = options.predicate,
    effect = options.effect;
  if (type) {
    predicate = _createAction(type).match;
  } else if (actionCreator) {
    type = actionCreator.type;
    predicate = actionCreator.match;
  } else if (matcher) {
    predicate = matcher;
  } else if (predicate) {} else {
    throw new Error("Creating or removing a listener requires one of the known fields for matching an action");
  }
  assertFunction(effect, "options.listener");
  return {
    predicate: predicate,
    type: type,
    effect: effect
  };
};
var createListenerEntry = function createListenerEntry(options) {
  var _c = getListenerEntryPropsFrom(options),
    type = _c.type,
    predicate = _c.predicate,
    effect = _c.effect;
  var id = _nanoid();
  var entry = {
    id: id,
    effect: effect,
    type: type,
    predicate: predicate,
    pending: new Set(),
    unsubscribe: function unsubscribe() {
      throw new Error("Unsubscribe not initialized");
    }
  };
  return entry;
};
var cancelActiveListeners = function cancelActiveListeners(entry) {
  entry.pending.forEach(function (controller) {
    abortControllerWithReason(controller, listenerCancelled);
  });
};
var createClearListenerMiddleware = function createClearListenerMiddleware(listenerMap) {
  return function () {
    listenerMap.forEach(cancelActiveListeners);
    listenerMap.clear();
  };
};
var safelyNotifyError = function safelyNotifyError(errorHandler, errorToNotify, errorInfo) {
  try {
    errorHandler(errorToNotify, errorInfo);
  } catch (errorHandlerError) {
    setTimeout(function () {
      throw errorHandlerError;
    }, 0);
  }
};
var _addListener = _createAction(alm + "/add");
var _clearAllListeners = _createAction(alm + "/removeAll");
var _removeListener = _createAction(alm + "/remove");
var defaultErrorHandler = function defaultErrorHandler() {
  var args = [];
  for (var _i = 0; _i < arguments.length; _i++) {
    args[_i] = arguments[_i];
  }
  console.error.apply(console, __spreadArray([alm + "/error"], args));
};
function _createListenerMiddleware(middlewareOptions) {
  var _this = this;
  if (middlewareOptions === void 0) {
    middlewareOptions = {};
  }
  var listenerMap = new Map();
  var extra = middlewareOptions.extra,
    _c = middlewareOptions.onError,
    onError = _c === void 0 ? defaultErrorHandler : _c;
  assertFunction(onError, "onError");
  var insertEntry = function insertEntry(entry) {
    entry.unsubscribe = function () {
      return listenerMap.delete(entry.id);
    };
    listenerMap.set(entry.id, entry);
    return function (cancelOptions) {
      entry.unsubscribe();
      if (cancelOptions == null ? void 0 : cancelOptions.cancelActive) {
        cancelActiveListeners(entry);
      }
    };
  };
  var findListenerEntry = function findListenerEntry(comparator) {
    for (var _i = 0, _c = Array.from(listenerMap.values()); _i < _c.length; _i++) {
      var entry = _c[_i];
      if (comparator(entry)) {
        return entry;
      }
    }
    return void 0;
  };
  var startListening = function startListening(options) {
    var entry = findListenerEntry(function (existingEntry) {
      return existingEntry.effect === options.effect;
    });
    if (!entry) {
      entry = createListenerEntry(options);
    }
    return insertEntry(entry);
  };
  var stopListening = function stopListening(options) {
    var _c = getListenerEntryPropsFrom(options),
      type = _c.type,
      effect = _c.effect,
      predicate = _c.predicate;
    var entry = findListenerEntry(function (entry2) {
      var matchPredicateOrType = typeof type === "string" ? entry2.type === type : entry2.predicate === predicate;
      return matchPredicateOrType && entry2.effect === effect;
    });
    if (entry) {
      entry.unsubscribe();
      if (options.cancelActive) {
        cancelActiveListeners(entry);
      }
    }
    return !!entry;
  };
  var notifyListener = function notifyListener(entry, action, api, getOriginalState) {
    return __async(_this, null, function () {
      var internalTaskController, take, listenerError_1;
      return __generator(this, function (_c) {
        switch (_c.label) {
          case 0:
            internalTaskController = new AbortController();
            take = createTakePattern(startListening, internalTaskController.signal);
            _c.label = 1;
          case 1:
            _c.trys.push([1, 3, 4, 5]);
            entry.pending.add(internalTaskController);
            return [4, Promise.resolve(entry.effect(action, assign({}, api, {
              getOriginalState: getOriginalState,
              condition: function condition(predicate, timeout) {
                return take(predicate, timeout).then(Boolean);
              },
              take: take,
              delay: createDelay(internalTaskController.signal),
              pause: createPause(internalTaskController.signal),
              extra: extra,
              signal: internalTaskController.signal,
              fork: createFork(internalTaskController.signal),
              unsubscribe: entry.unsubscribe,
              subscribe: function subscribe() {
                listenerMap.set(entry.id, entry);
              },
              cancelActiveListeners: function cancelActiveListeners() {
                entry.pending.forEach(function (controller, _, set) {
                  if (controller !== internalTaskController) {
                    abortControllerWithReason(controller, listenerCancelled);
                    set.delete(controller);
                  }
                });
              }
            })))];
          case 2:
            _c.sent();
            return [3, 5];
          case 3:
            listenerError_1 = _c.sent();
            if (!(listenerError_1 instanceof _TaskAbortError)) {
              safelyNotifyError(onError, listenerError_1, {
                raisedBy: "effect"
              });
            }
            return [3, 5];
          case 4:
            abortControllerWithReason(internalTaskController, listenerCompleted);
            entry.pending.delete(internalTaskController);
            return [7];
          case 5:
            return [2];
        }
      });
    });
  };
  var clearListenerMiddleware = createClearListenerMiddleware(listenerMap);
  var middleware = function middleware(api) {
    return function (next) {
      return function (action) {
        if (_addListener.match(action)) {
          return startListening(action.payload);
        }
        if (_clearAllListeners.match(action)) {
          clearListenerMiddleware();
          return;
        }
        if (_removeListener.match(action)) {
          return stopListening(action.payload);
        }
        var originalState = api.getState();
        var getOriginalState = function getOriginalState() {
          if (originalState === INTERNAL_NIL_TOKEN) {
            throw new Error(alm + ": getOriginalState can only be called synchronously");
          }
          return originalState;
        };
        var result;
        try {
          result = next(action);
          if (listenerMap.size > 0) {
            var currentState = api.getState();
            var listenerEntries = Array.from(listenerMap.values());
            for (var _i = 0, listenerEntries_1 = listenerEntries; _i < listenerEntries_1.length; _i++) {
              var entry = listenerEntries_1[_i];
              var runListener = false;
              try {
                runListener = entry.predicate(action, currentState, originalState);
              } catch (predicateError) {
                runListener = false;
                safelyNotifyError(onError, predicateError, {
                  raisedBy: "predicate"
                });
              }
              if (!runListener) {
                continue;
              }
              notifyListener(entry, action, api, getOriginalState);
            }
          }
        } finally {
          originalState = INTERNAL_NIL_TOKEN;
        }
        return result;
      };
    };
  };
  return {
    middleware: middleware,
    startListening: startListening,
    stopListening: stopListening,
    clearListeners: clearListenerMiddleware
  };
}
var _SHOULD_AUTOBATCH = "RTK_autoBatch";
var _prepareAutoBatched = function _prepareAutoBatched() {
  return function (payload) {
    var _c;
    return {
      payload: payload,
      meta: (_c = {}, _c[_SHOULD_AUTOBATCH] = true, _c)
    };
  };
};
var promise;
var queueMicrotaskShim = typeof queueMicrotask === "function" ? queueMicrotask.bind(typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : globalThis) : function (cb) {
  return (promise || (promise = Promise.resolve())).then(cb).catch(function (err) {
    return setTimeout(function () {
      throw err;
    }, 0);
  });
};
var createQueueWithTimer = function createQueueWithTimer(timeout) {
  return function (notify) {
    setTimeout(notify, timeout);
  };
};
var rAF = typeof window !== "undefined" && window.requestAnimationFrame ? window.requestAnimationFrame : createQueueWithTimer(10);
var _autoBatchEnhancer = function _autoBatchEnhancer(options) {
  if (options === void 0) {
    options = {
      type: "raf"
    };
  }
  return function (next) {
    return function () {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      var store = next.apply(void 0, args);
      var notifying = true;
      var shouldNotifyAtEndOfTick = false;
      var notificationQueued = false;
      var listeners = new Set();
      var queueCallback = options.type === "tick" ? queueMicrotaskShim : options.type === "raf" ? rAF : options.type === "callback" ? options.queueNotification : createQueueWithTimer(options.timeout);
      var notifyListeners = function notifyListeners() {
        notificationQueued = false;
        if (shouldNotifyAtEndOfTick) {
          shouldNotifyAtEndOfTick = false;
          listeners.forEach(function (l) {
            return l();
          });
        }
      };
      return Object.assign({}, store, {
        subscribe: function subscribe(listener2) {
          var wrappedListener = function wrappedListener() {
            return notifying && listener2();
          };
          var unsubscribe = store.subscribe(wrappedListener);
          listeners.add(listener2);
          return function () {
            unsubscribe();
            listeners.delete(listener2);
          };
        },
        dispatch: function dispatch(action) {
          var _a;
          try {
            notifying = !((_a = action == null ? void 0 : action.meta) == null ? void 0 : _a[_SHOULD_AUTOBATCH]);
            shouldNotifyAtEndOfTick = !notifying;
            if (shouldNotifyAtEndOfTick) {
              if (!notificationQueued) {
                notificationQueued = true;
                queueCallback(notifyListeners);
              }
            }
            return store.dispatch(action);
          } finally {
            notifying = true;
          }
        }
      });
    };
  };
};
(0, import_immer5.enableES5)();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQTtBQUFBQztFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7RUFBQUM7SUFBQTtFQUFBO0VBQUFDO0lBQUE7RUFBQTtFQUFBQztJQUFBO0VBQUE7Q0FBQTtBQUFBLG9CQUEwQkM7QUFD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WSxJQUFJd1k7VUFDZCxPQUFPO1lBQ0x0RTtZQUNBaUUsVUFBVXhDLE9BQU82QztVQUFBO1FBQUE7UUFLckJ2Syw0QkFBUzFQO1VBekhmO1VBMEhRLElBQUk7WUFHRnlaLFlBQVksRUFBQyx1Q0FBUTdVLFNBQVIsbUJBQWV0TjtZQUc1Qm9pQiwwQkFBMEIsQ0FBQ0Q7WUFDM0IsSUFBSUMseUJBQXlCO2NBSTNCLElBQUksQ0FBQ0Msb0JBQW9CO2dCQUN2QkEscUJBQXFCO2dCQUNyQkUsY0FBY0U7OztZQVNsQixPQUFPUCxNQUFNOUosU0FBUzFQO1dBQUEsU0FDdEI7WUFFQXlaLFlBQVk7O1FBQUE7T0FBQTtJQUFBO0VBeEVwQixDQXdFb0I7QUF6RXBCLENBeUVvQjtBNUIzSHRCIiwibmFtZXMiOlsiX19tYXJrQXNNb2R1bGUiLCJfX2V4cG9ydCIsIk1pZGRsZXdhcmVBcnJheSIsIlNIT1VMRF9BVVRPQkFUQ0giLCJUYXNrQWJvcnRFcnJvciIsImFkZExpc3RlbmVyIiwiYXV0b0JhdGNoRW5oYW5jZXIiLCJjbGVhckFsbExpc3RlbmVycyIsImNvbmZpZ3VyZVN0b3JlIiwiY3JlYXRlQWN0aW9uIiwiY3JlYXRlQXN5bmNUaHVuayIsImNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yIiwiY3JlYXRlRW50aXR5QWRhcHRlciIsImNyZWF0ZUltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSIsImNyZWF0ZUxpc3RlbmVyTWlkZGxld2FyZSIsImNyZWF0ZU5leHRTdGF0ZSIsImNyZWF0ZVJlZHVjZXIiLCJjcmVhdGVTZWxlY3RvciIsImNyZWF0ZVNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSIsImNyZWF0ZVNsaWNlIiwiY3VycmVudCIsImZpbmROb25TZXJpYWxpemFibGVWYWx1ZSIsImZyZWV6ZSIsImdldERlZmF1bHRNaWRkbGV3YXJlIiwiZ2V0VHlwZSIsImlzQWxsT2YiLCJpc0FueU9mIiwiaXNBc3luY1RodW5rQWN0aW9uIiwiaXNEcmFmdCIsImlzRnVsZmlsbGVkIiwiaXNJbW11dGFibGVEZWZhdWx0IiwiaXNQZW5kaW5nIiwiaXNQbGFpbiIsImlzUGxhaW5PYmplY3QiLCJpc1JlamVjdGVkIiwiaXNSZWplY3RlZFdpdGhWYWx1ZSIsIm1pbmlTZXJpYWxpemVFcnJvciIsIm5hbm9pZCIsIm9yaWdpbmFsIiwicHJlcGFyZUF1dG9CYXRjaGVkIiwicmVtb3ZlTGlzdGVuZXIiLCJ1bndyYXBSZXN1bHQiLCJfX3RvTW9kdWxlIiwiX19yZUV4cG9ydCIsIl9pIiwiYXJncyIsInNlbGVjdG9yIiwid3JhcHBlZFNlbGVjdG9yIiwidmFsdWUiLCJyZXN0IiwiY29tcG9zZVdpdGhEZXZUb29scyIsIndpbmRvdyIsIl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX0NPTVBPU0VfXyIsImFyZ3VtZW50cyIsImxlbmd0aCIsImltcG9ydF9yZWR1eCIsImFwcGx5IiwiZGV2VG9vbHNFbmhhbmNlciIsIl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX18iLCJub29wMiIsInByb3RvIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJiYXNlUHJvdG8iLCJtYXhEZWxheSIsImZuTmFtZSIsImVsYXBzZWQiLCJtZWFzdXJlVGltZSIsImZuIiwic3RhcnRlZCIsIkRhdGUiLCJub3ciLCJmaW5pc2hlZCIsIndhcm5JZkV4Y2VlZGVkIiwiY29uc29sZSIsIndhcm4iLCJfX2V4dGVuZHMiLCJzZXRQcm90b3R5cGVPZiIsIl90aGlzIiwicHJvdG90eXBlIiwiU3ltYm9sIiwic3BlY2llcyIsImFyciIsIl9zdXBlciIsImNvbmNhdCIsIkFycmF5IiwiaXNBcnJheSIsInZhbCIsImlzUHJvZHVjdGlvbiIsInByZWZpeCIsImNvbmRpdGlvbiIsIm1lc3NhZ2UiLCJFcnJvciIsIm9iaiIsInNlcmlhbGl6ZXIiLCJpbmRlbnQiLCJkZWN5Y2xlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRTZXJpYWxpemUiLCJzdGFjayIsImtleXMiLCJfIiwic2xpY2UiLCJpbmRleE9mIiwiam9pbiIsImtleSIsInRoaXNQb3MiLCJzcGxpY2UiLCJwdXNoIiwiSW5maW5pdHkiLCJjYWxsIiwiaXNGcm96ZW4iLCJpc0ltbXV0YWJsZSIsImlnbm9yZVBhdGhzIiwidHJhY2tlZFByb3BlcnRpZXMiLCJ0cmFja1Byb3BlcnRpZXMiLCJkZXRlY3RNdXRhdGlvbnMiLCJwYXRoIiwidHJhY2tlZCIsImNoaWxkcmVuIiwiY2hpbGRQYXRoIiwiaWdub3JlZFBhdGhzIiwidHJhY2tlZFByb3BlcnR5Iiwic2FtZVBhcmVudFJlZiIsInByZXZPYmoiLCJzYW1lUmVmIiwiTnVtYmVyIiwiaXNOYU4iLCJ3YXNNdXRhdGVkIiwia2V5c1RvRGV0ZWN0IiwiaGFzSWdub3JlZFBhdGhzIiwibmVzdGVkUGF0aCIsImhhc01hdGNoZXMiLCJzb21lIiwiaWdub3JlZCIsIlJlZ0V4cCIsInRlc3QiLCJyZXN1bHQiLCJvcHRpb25zIiwibmV4dCIsImFjdGlvbiIsIl9kIiwid2FybkFmdGVyIiwiaWdub3JlIiwidHJhY2siLCJ0cmFja0Zvck11dGF0aW9ucyIsImJpbmQiLCJfYyIsImdldFN0YXRlIiwic3RhdGUiLCJ0cmFja2VyIiwibWVhc3VyZVV0aWxzIiwiZ2V0VGltZU1lYXN1cmVVdGlscyIsImludmFyaWFudCIsImRpc3BhdGNoZWRBY3Rpb24iLCJ0eXBlIiwiaXNTZXJpYWxpemFibGUiLCJnZXRFbnRyaWVzIiwiY2FjaGUiLCJmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZSIsImtleVBhdGgiLCJoYXMiLCJlbnRyaWVzIiwibmVzdGVkVmFsdWUiLCJpc05lc3RlZEZyb3plbiIsImFkZCIsInZhbHVlcyIsImlnbm9yZWRBY3Rpb25zIiwiX2UiLCJpZ25vcmVkQWN0aW9uUGF0aHMiLCJfZiIsIl9nIiwiX2giLCJpZ25vcmVTdGF0ZSIsIl9qIiwiaWdub3JlQWN0aW9ucyIsIl9rIiwiZGlzYWJsZUNhY2hlIiwiV2Vha1NldCIsInN0b3JlQVBJIiwiZm91bmRBY3Rpb25Ob25TZXJpYWxpemFibGVWYWx1ZSIsImVycm9yIiwiZm91bmRTdGF0ZU5vblNlcmlhbGl6YWJsZVZhbHVlIiwieCIsInRodW5rIiwiaW1tdXRhYmxlQ2hlY2siLCJzZXJpYWxpemFibGVDaGVjayIsIm1pZGRsZXdhcmVBcnJheSIsImlzQm9vbGVhbiIsImltcG9ydF9yZWR1eF90aHVuayIsIndpdGhFeHRyYUFyZ3VtZW50IiwiZXh0cmFBcmd1bWVudCIsImltbXV0YWJsZU9wdGlvbnMiLCJ1bnNoaWZ0Iiwic2VyaWFsaXphYmxlT3B0aW9ucyIsIklTX1BST0RVQ1RJT04iLCJjdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUiLCJjdXJyeUdldERlZmF1bHRNaWRkbGV3YXJlIiwicmVkdWNlciIsIm1pZGRsZXdhcmUiLCJkZXZUb29scyIsInByZWxvYWRlZFN0YXRlIiwiZW5oYW5jZXJzIiwicm9vdFJlZHVjZXIiLCJmaW5hbE1pZGRsZXdhcmUiLCJpdGVtIiwibWlkZGxld2FyZUVuaGFuY2VyIiwiZmluYWxDb21wb3NlIiwiaW1wb3J0X3JlZHV4MiIsIl9fc3ByZWFkVmFsdWVzIiwidHJhY2UiLCJzdG9yZUVuaGFuY2VycyIsImNvbXBvc2VkRW5oYW5jZXIiLCJwcmVwYXJlQWN0aW9uIiwicHJlcGFyZWQiLCJwYXlsb2FkIiwibWV0YSIsImFjdGlvbkNyZWF0b3IiLCJ0b1N0cmluZyIsIm1hdGNoIiwiZXZlcnkiLCJpc1ZhbGlkS2V5IiwiYnVpbGRlckNhbGxiYWNrIiwiYWN0aW9uc01hcCIsImFjdGlvbk1hdGNoZXJzIiwiZGVmYXVsdENhc2VSZWR1Y2VyIiwiYnVpbGRlciIsImFkZENhc2UiLCJ0eXBlT3JBY3Rpb25DcmVhdG9yIiwiYWRkTWF0Y2hlciIsIm1hdGNoZXIiLCJhZGREZWZhdWx0Q2FzZSIsImhhc1dhcm5lZEFib3V0T2JqZWN0Tm90YXRpb24iLCJpbml0aWFsU3RhdGUiLCJtYXBPckJ1aWxkZXJDYWxsYmFjayIsImV4ZWN1dGVSZWR1Y2VyQnVpbGRlckNhbGxiYWNrIiwiZmluYWxBY3Rpb25NYXRjaGVycyIsImZpbmFsRGVmYXVsdENhc2VSZWR1Y2VyIiwiZ2V0SW5pdGlhbFN0YXRlIiwiaXNTdGF0ZUZ1bmN0aW9uIiwiZnJvemVuSW5pdGlhbFN0YXRlXzEiLCJmcmVlemVEcmFmdGFibGUiLCJjYXNlUmVkdWNlcnMiLCJmaWx0ZXIiLCJtYXAiLCJyZWR1Y2VyMiIsImNyIiwicmVkdWNlIiwicHJldmlvdXNTdGF0ZSIsImNhc2VSZWR1Y2VyIiwiZHJhZnQiLCJoYXNXYXJuZWRBYm91dE9iamVjdE5vdGF0aW9uMiIsImFjdGlvbktleSIsIm5hbWUiLCJwcm9jZXNzIiwicmVkdWNlcnMiLCJyZWR1Y2VyTmFtZXMiLCJzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZSIsInNsaWNlQ2FzZVJlZHVjZXJzQnlUeXBlIiwiYWN0aW9uQ3JlYXRvcnMiLCJmb3JFYWNoIiwicmVkdWNlck5hbWUiLCJtYXliZVJlZHVjZXJXaXRoUHJlcGFyZSIsImdldFR5cGUyIiwicHJlcGFyZUNhbGxiYWNrIiwicHJlcGFyZSIsImV4dHJhUmVkdWNlcnMiLCJmaW5hbENhc2VSZWR1Y2VycyIsIm0iLCJfcmVkdWNlciIsImJ1aWxkUmVkdWNlciIsImFjdGlvbnMiLCJpZHMiLCJlbnRpdGllcyIsImFkZGl0aW9uYWxTdGF0ZSIsImFzc2lnbiIsImdldEluaXRpYWxFbnRpdHlTdGF0ZSIsInNlbGVjdFN0YXRlIiwic2VsZWN0SWRzIiwic2VsZWN0RW50aXRpZXMiLCJzZWxlY3RBbGwiLCJpZCIsInNlbGVjdElkIiwic2VsZWN0QnlJZCIsInNlbGVjdFRvdGFsIiwic2VsZWN0R2xvYmFsaXplZEVudGl0aWVzIiwiZ2V0U2VsZWN0b3JzIiwibXV0YXRvciIsIm9wZXJhdG9yIiwiY3JlYXRlU3RhdGVPcGVyYXRvciIsImFyZyIsImFyZzIiLCJpc0ZTQSIsInJ1bk11dGF0b3IiLCJpc1BheWxvYWRBY3Rpb25Bcmd1bWVudCIsImVudGl0eSIsIm5ld0VudGl0aWVzIiwiZW5zdXJlRW50aXRpZXNBcnJheSIsImFkZGVkIiwidXBkYXRlZCIsInNlbGVjdElkVmFsdWUiLCJjaGFuZ2VzIiwiYWRkT25lTXV0YWJseSIsInNldE9uZU11dGFibHkiLCJhZGRNYW55TXV0YWJseSIsInJlbW92ZU1hbnlNdXRhYmx5IiwiZGlkTXV0YXRlIiwidXBkYXRlIiwib3JpZ2luYWwyIiwibmV3S2V5IiwiaGFzTmV3S2V5IiwidXBkYXRlTWFueU11dGFibHkiLCJ1cGRhdGVzIiwibmV3S2V5cyIsInVwZGF0ZXNQZXJFbnRpdHkiLCJkaWRNdXRhdGVFbnRpdGllcyIsImRpZE11dGF0ZUlkcyIsInVwc2VydE1hbnlNdXRhYmx5Iiwic3BsaXRBZGRlZFVwZGF0ZWRFbnRpdGllcyIsInJlbW92ZUFsbCIsImNyZWF0ZVNpbmdsZUFyZ3VtZW50U3RhdGVPcGVyYXRvciIsInJlbW92ZUFsbE11dGFibHkiLCJhZGRPbmUiLCJhZGRNYW55Iiwic2V0T25lIiwic2V0TWFueSIsInNldE1hbnlNdXRhYmx5Iiwic2V0QWxsIiwic2V0QWxsTXV0YWJseSIsInVwZGF0ZU9uZSIsInVwZGF0ZU9uZU11dGFibHkiLCJ1cGRhdGVNYW55IiwidXBzZXJ0T25lIiwidXBzZXJ0T25lTXV0YWJseSIsInVwc2VydE1hbnkiLCJyZW1vdmVPbmUiLCJyZW1vdmVPbmVNdXRhYmx5IiwicmVtb3ZlTWFueSIsInNvcnQiLCJjcmVhdGVVbnNvcnRlZFN0YXRlQWRhcHRlciIsIm1vZGVscyIsIm1vZGVsIiwibWVyZ2UiLCJhcHBsaWVkVXBkYXRlcyIsIm5ld0lkIiwicmVzb3J0RW50aXRpZXMiLCJhIiwiYiIsImkiLCJhbGxFbnRpdGllcyIsIm5ld1NvcnRlZElkcyIsImFyZUFycmF5c0VxdWFsIiwic29ydENvbXBhcmVyIiwiaW5zdGFuY2UiLCJzdGF0ZUZhY3RvcnkiLCJjcmVhdGVJbml0aWFsU3RhdGVGYWN0b3J5Iiwic2VsZWN0b3JzRmFjdG9yeSIsImNyZWF0ZVNlbGVjdG9yc0ZhY3RvcnkiLCJzdGF0ZUFkYXB0ZXIiLCJjcmVhdGVTb3J0ZWRTdGF0ZUFkYXB0ZXIiLCJ1cmxBbHBoYWJldCIsInNpemUiLCJNYXRoIiwicmFuZG9tIiwiY29tbW9uUHJvcGVydGllcyIsInNpbXBsZUVycm9yIiwicHJvcGVydHkiLCJTdHJpbmciLCJ0eXBlUHJlZml4IiwicGF5bG9hZENyZWF0b3IiLCJmdWxmaWxsZWQiLCJyZXF1ZXN0SWQiLCJfX3NwcmVhZFByb3BzIiwicmVxdWVzdFN0YXR1cyIsInBlbmRpbmciLCJyZWplY3RlZCIsInNlcmlhbGl6ZUVycm9yIiwicmVqZWN0ZWRXaXRoVmFsdWUiLCJhYm9ydGVkIiwiZGlzcGxheWVkV2FybmluZyIsIkFDIiwiQWJvcnRDb250cm9sbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiLCJvbmFib3J0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlYXNvbiIsInRocm93SWZBYm9ydGVkIiwiY2xhc3NfMSIsImluZm8iLCJkaXNwYXRjaCIsImV4dHJhIiwiaWRHZW5lcmF0b3IiLCJhYm9ydENvbnRyb2xsZXIiLCJhYm9ydFJlYXNvbiIsImFib3J0IiwicHJvbWlzZTIiLCJjb25kaXRpb25SZXN1bHQiLCJpc1RoZW5hYmxlIiwic2lnbmFsIiwiYWJvcnRlZFByb21pc2UiLCJQcm9taXNlIiwicmVqZWN0IiwiZ2V0UGVuZGluZ01ldGEiLCJyYWNlIiwicmVzb2x2ZSIsInJlamVjdFdpdGhWYWx1ZSIsIlJlamVjdFdpdGhWYWx1ZSIsImZ1bGZpbGxXaXRoVmFsdWUiLCJGdWxmaWxsV2l0aE1ldGEiLCJ0aGVuIiwiZmluYWxBY3Rpb24iLCJlcnJfMSIsInNraXBEaXNwYXRjaCIsImRpc3BhdGNoQ29uZGl0aW9uUmVqZWN0aW9uIiwidW53cmFwIiwiY3JlYXRlQXN5bmNUaHVuazIiLCJ3aXRoVHlwZXMiLCJoYXNNYXRjaEZ1bmN0aW9uIiwidiIsIm1hdGNoZXMiLCJtYXRjaGVycyIsInZhbGlkU3RhdHVzIiwiaGFzVmFsaWRSZXF1ZXN0SWQiLCJoYXNWYWxpZFJlcXVlc3RTdGF0dXMiLCJhc3luY1RodW5rcyIsImlzQXN5bmNUaHVua0FycmF5IiwiYXN5bmNUaHVuayIsImNvbWJpbmVkTWF0Y2hlciIsImhhc0ZsYWciLCJhc3NlcnRGdW5jdGlvbiIsImZ1bmMiLCJleHBlY3RlZCIsIlR5cGVFcnJvciIsIm5vb3AiLCJjYXRjaFJlamVjdGlvbiIsIm9uRXJyb3IiLCJjYXRjaCIsImFkZEFib3J0U2lnbmFsTGlzdGVuZXIiLCJhYm9ydFNpZ25hbCIsImNhbGxiYWNrIiwib25jZSIsImFib3J0Q29udHJvbGxlcldpdGhSZWFzb24iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInRhc2siLCJsaXN0ZW5lciIsImNvbXBsZXRlZCIsImNhbmNlbGxlZCIsInRhc2tDYW5jZWxsZWQiLCJ0YXNrQ29tcGxldGVkIiwibGlzdGVuZXJDYW5jZWxsZWQiLCJsaXN0ZW5lckNvbXBsZXRlZCIsImNvZGUiLCJ2YWxpZGF0ZUFjdGl2ZSIsImNsZWFudXAiLCJub3RpZnlSZWplY3Rpb24iLCJmaW5hbGx5IiwicnVuVGFzayIsInRhc2syIiwiY2xlYW5VcCIsInN0YXR1cyIsImVycm9yXzEiLCJjcmVhdGVQYXVzZSIsInJhY2VXaXRoU2lnbmFsIiwib3V0cHV0IiwiY3JlYXRlRGVsYXkiLCJwYXVzZSIsInRpbWVvdXRNcyIsIklOVEVSTkFMX05JTF9UT0tFTiIsImFsbSIsImNyZWF0ZUZvcmsiLCJwYXJlbnRBYm9ydFNpZ25hbCIsImxpbmtDb250cm9sbGVycyIsImNvbnRyb2xsZXIiLCJ0YXNrRXhlY3V0b3IiLCJjaGlsZEFib3J0Q29udHJvbGxlciIsImRlbGF5IiwicmVzdWx0MiIsImNhbmNlbCIsImNyZWF0ZVRha2VQYXR0ZXJuIiwic3RhcnRMaXN0ZW5pbmciLCJ0YWtlIiwicHJlZGljYXRlIiwidGltZW91dCIsInVuc3Vic2NyaWJlIiwidHVwbGVQcm9taXNlIiwic3RvcExpc3RlbmluZyIsImVmZmVjdCIsImxpc3RlbmVyQXBpIiwiZ2V0T3JpZ2luYWxTdGF0ZSIsInByb21pc2VzIiwiZ2V0TGlzdGVuZXJFbnRyeVByb3BzRnJvbSIsImNyZWF0ZUxpc3RlbmVyRW50cnkiLCJlbnRyeSIsIlNldCIsImNhbmNlbEFjdGl2ZUxpc3RlbmVycyIsImNyZWF0ZUNsZWFyTGlzdGVuZXJNaWRkbGV3YXJlIiwibGlzdGVuZXJNYXAiLCJjbGVhciIsInNhZmVseU5vdGlmeUVycm9yIiwiZXJyb3JIYW5kbGVyIiwiZXJyb3JUb05vdGlmeSIsImVycm9ySW5mbyIsImVycm9ySGFuZGxlckVycm9yIiwic2V0VGltZW91dCIsImRlZmF1bHRFcnJvckhhbmRsZXIiLCJtaWRkbGV3YXJlT3B0aW9ucyIsIk1hcCIsImluc2VydEVudHJ5IiwiZGVsZXRlIiwic2V0IiwiY2FuY2VsT3B0aW9ucyIsImNhbmNlbEFjdGl2ZSIsImZpbmRMaXN0ZW5lckVudHJ5IiwiY29tcGFyYXRvciIsImZyb20iLCJleGlzdGluZ0VudHJ5IiwiZW50cnkyIiwibWF0Y2hQcmVkaWNhdGVPclR5cGUiLCJub3RpZnlMaXN0ZW5lciIsImFwaSIsImludGVybmFsVGFza0NvbnRyb2xsZXIiLCJCb29sZWFuIiwiZm9yayIsInN1YnNjcmliZSIsImxpc3RlbmVyRXJyb3JfMSIsInJhaXNlZEJ5IiwiY2xlYXJMaXN0ZW5lck1pZGRsZXdhcmUiLCJvcmlnaW5hbFN0YXRlIiwiY3VycmVudFN0YXRlIiwibGlzdGVuZXJFbnRyaWVzIiwicnVuTGlzdGVuZXIiLCJwcmVkaWNhdGVFcnJvciIsImNsZWFyTGlzdGVuZXJzIiwicHJvbWlzZSIsInF1ZXVlTWljcm90YXNrU2hpbSIsInF1ZXVlTWljcm90YXNrIiwiZ2xvYmFsIiwiZ2xvYmFsVGhpcyIsImNiIiwiZXJyIiwiY3JlYXRlUXVldWVXaXRoVGltZXIiLCJub3RpZnkiLCJyQUYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzdG9yZSIsIm5vdGlmeWluZyIsInNob3VsZE5vdGlmeUF0RW5kT2ZUaWNrIiwibm90aWZpY2F0aW9uUXVldWVkIiwibGlzdGVuZXJzIiwicXVldWVDYWxsYmFjayIsInF1ZXVlTm90aWZpY2F0aW9uIiwibm90aWZ5TGlzdGVuZXJzIiwibCIsImxpc3RlbmVyMiIsIndyYXBwZWRMaXN0ZW5lciJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyIsIi4uL3NyYy9jcmVhdGVEcmFmdFNhZmVTZWxlY3Rvci50cyIsIi4uL3NyYy9jb25maWd1cmVTdG9yZS50cyIsIi4uL3NyYy9kZXZ0b29sc0V4dGVuc2lvbi50cyIsIi4uL3NyYy9pc1BsYWluT2JqZWN0LnRzIiwiLi4vc3JjL2dldERlZmF1bHRNaWRkbGV3YXJlLnRzIiwiLi4vc3JjL3V0aWxzLnRzIiwiLi4vc3JjL2ltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZS50cyIsIi4uL3NyYy9zZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUudHMiLCIuLi9zcmMvY3JlYXRlQWN0aW9uLnRzIiwiLi4vc3JjL2NyZWF0ZVJlZHVjZXIudHMiLCIuLi9zcmMvbWFwQnVpbGRlcnMudHMiLCIuLi9zcmMvY3JlYXRlU2xpY2UudHMiLCIuLi9zcmMvZW50aXRpZXMvZW50aXR5X3N0YXRlLnRzIiwiLi4vc3JjL2VudGl0aWVzL3N0YXRlX3NlbGVjdG9ycy50cyIsIi4uL3NyYy9lbnRpdGllcy9zdGF0ZV9hZGFwdGVyLnRzIiwiLi4vc3JjL2VudGl0aWVzL3V0aWxzLnRzIiwiLi4vc3JjL2VudGl0aWVzL3Vuc29ydGVkX3N0YXRlX2FkYXB0ZXIudHMiLCIuLi9zcmMvZW50aXRpZXMvc29ydGVkX3N0YXRlX2FkYXB0ZXIudHMiLCIuLi9zcmMvZW50aXRpZXMvY3JlYXRlX2FkYXB0ZXIudHMiLCIuLi9zcmMvbmFub2lkLnRzIiwiLi4vc3JjL2NyZWF0ZUFzeW5jVGh1bmsudHMiLCIuLi9zcmMvdHNIZWxwZXJzLnRzIiwiLi4vc3JjL21hdGNoZXJzLnRzIiwiLi4vc3JjL2xpc3RlbmVyTWlkZGxld2FyZS91dGlscy50cyIsIi4uL3NyYy9saXN0ZW5lck1pZGRsZXdhcmUvZXhjZXB0aW9ucy50cyIsIi4uL3NyYy9saXN0ZW5lck1pZGRsZXdhcmUvdGFzay50cyIsIi4uL3NyYy9saXN0ZW5lck1pZGRsZXdhcmUvaW5kZXgudHMiLCIuLi9zcmMvYXV0b0JhdGNoRW5oYW5jZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW5hYmxlRVM1IH0gZnJvbSAnaW1tZXInXHJcbmV4cG9ydCAqIGZyb20gJ3JlZHV4J1xyXG5leHBvcnQge1xyXG4gIGRlZmF1bHQgYXMgY3JlYXRlTmV4dFN0YXRlLFxyXG4gIGN1cnJlbnQsXHJcbiAgZnJlZXplLFxyXG4gIG9yaWdpbmFsLFxyXG4gIGlzRHJhZnQsXHJcbn0gZnJvbSAnaW1tZXInXHJcbmV4cG9ydCB0eXBlIHsgRHJhZnQgfSBmcm9tICdpbW1lcidcclxuZXhwb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCdcclxuZXhwb3J0IHR5cGUge1xyXG4gIFNlbGVjdG9yLFxyXG4gIE91dHB1dFBhcmFtZXRyaWNTZWxlY3RvcixcclxuICBPdXRwdXRTZWxlY3RvcixcclxuICBQYXJhbWV0cmljU2VsZWN0b3IsXHJcbn0gZnJvbSAncmVzZWxlY3QnXHJcbmV4cG9ydCB7IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yIH0gZnJvbSAnLi9jcmVhdGVEcmFmdFNhZmVTZWxlY3RvcidcclxuZXhwb3J0IHR5cGUgeyBUaHVua0FjdGlvbiwgVGh1bmtEaXNwYXRjaCwgVGh1bmtNaWRkbGV3YXJlIH0gZnJvbSAncmVkdXgtdGh1bmsnXHJcblxyXG4vLyBXZSBkZWxpYmVyYXRlbHkgZW5hYmxlIEltbWVyJ3MgRVM1IHN1cHBvcnQsIG9uIHRoZSBncm91bmRzIHRoYXRcclxuLy8gd2UgYXNzdW1lIFJUSyB3aWxsIGJlIHVzZWQgd2l0aCBSZWFjdCBOYXRpdmUgYW5kIG90aGVyIFByb3h5LWxlc3NcclxuLy8gZW52aXJvbm1lbnRzLiAgSW4gYWRkaXRpb24sIHRoYXQncyBob3cgSW1tZXIgNCBiZWhhdmVkLCBhbmQgc2luY2VcclxuLy8gd2Ugd2FudCB0byBzaGlwIHRoaXMgaW4gYW4gUlRLIG1pbm9yLCB3ZSBzaG91bGQga2VlcCB0aGUgc2FtZSBiZWhhdmlvci5cclxuZW5hYmxlRVM1KClcclxuXHJcbmV4cG9ydCB7XHJcbiAgLy8ganNcclxuICBjb25maWd1cmVTdG9yZSxcclxufSBmcm9tICcuL2NvbmZpZ3VyZVN0b3JlJ1xyXG5leHBvcnQgdHlwZSB7XHJcbiAgLy8gdHlwZXNcclxuICBDb25maWd1cmVFbmhhbmNlcnNDYWxsYmFjayxcclxuICBDb25maWd1cmVTdG9yZU9wdGlvbnMsXHJcbiAgRW5oYW5jZWRTdG9yZSxcclxufSBmcm9tICcuL2NvbmZpZ3VyZVN0b3JlJ1xyXG5leHBvcnQgdHlwZSB7IERldlRvb2xzRW5oYW5jZXJPcHRpb25zIH0gZnJvbSAnLi9kZXZ0b29sc0V4dGVuc2lvbidcclxuZXhwb3J0IHtcclxuICAvLyBqc1xyXG4gIGNyZWF0ZUFjdGlvbixcclxuICBnZXRUeXBlLFxyXG59IGZyb20gJy4vY3JlYXRlQWN0aW9uJ1xyXG5leHBvcnQgdHlwZSB7XHJcbiAgLy8gdHlwZXNcclxuICBQYXlsb2FkQWN0aW9uLFxyXG4gIFBheWxvYWRBY3Rpb25DcmVhdG9yLFxyXG4gIEFjdGlvbkNyZWF0b3JXaXRoTm9uSW5mZXJyYWJsZVBheWxvYWQsXHJcbiAgQWN0aW9uQ3JlYXRvcldpdGhPcHRpb25hbFBheWxvYWQsXHJcbiAgQWN0aW9uQ3JlYXRvcldpdGhQYXlsb2FkLFxyXG4gIEFjdGlvbkNyZWF0b3JXaXRob3V0UGF5bG9hZCxcclxuICBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZCxcclxuICBQcmVwYXJlQWN0aW9uLFxyXG59IGZyb20gJy4vY3JlYXRlQWN0aW9uJ1xyXG5leHBvcnQge1xyXG4gIC8vIGpzXHJcbiAgY3JlYXRlUmVkdWNlcixcclxufSBmcm9tICcuL2NyZWF0ZVJlZHVjZXInXHJcbmV4cG9ydCB0eXBlIHtcclxuICAvLyB0eXBlc1xyXG4gIEFjdGlvbnMsXHJcbiAgQ2FzZVJlZHVjZXIsXHJcbiAgQ2FzZVJlZHVjZXJzLFxyXG59IGZyb20gJy4vY3JlYXRlUmVkdWNlcidcclxuZXhwb3J0IHtcclxuICAvLyBqc1xyXG4gIGNyZWF0ZVNsaWNlLFxyXG59IGZyb20gJy4vY3JlYXRlU2xpY2UnXHJcblxyXG5leHBvcnQgdHlwZSB7XHJcbiAgLy8gdHlwZXNcclxuICBDcmVhdGVTbGljZU9wdGlvbnMsXHJcbiAgU2xpY2UsXHJcbiAgQ2FzZVJlZHVjZXJBY3Rpb25zLFxyXG4gIFNsaWNlQ2FzZVJlZHVjZXJzLFxyXG4gIFZhbGlkYXRlU2xpY2VDYXNlUmVkdWNlcnMsXHJcbiAgQ2FzZVJlZHVjZXJXaXRoUHJlcGFyZSxcclxuICBTbGljZUFjdGlvbkNyZWF0b3IsXHJcbn0gZnJvbSAnLi9jcmVhdGVTbGljZSdcclxuZXhwb3J0IHtcclxuICAvLyBqc1xyXG4gIGNyZWF0ZUltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSxcclxuICBpc0ltbXV0YWJsZURlZmF1bHQsXHJcbn0gZnJvbSAnLi9pbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmV4cG9ydCB0eXBlIHtcclxuICAvLyB0eXBlc1xyXG4gIEltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZU9wdGlvbnMsXHJcbn0gZnJvbSAnLi9pbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmV4cG9ydCB7XHJcbiAgLy8ganNcclxuICBjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUsXHJcbiAgZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlLFxyXG4gIGlzUGxhaW4sXHJcbn0gZnJvbSAnLi9zZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmV4cG9ydCB0eXBlIHtcclxuICAvLyB0eXBlc1xyXG4gIFNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZU9wdGlvbnMsXHJcbn0gZnJvbSAnLi9zZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmV4cG9ydCB7XHJcbiAgLy8ganNcclxuICBnZXREZWZhdWx0TWlkZGxld2FyZSxcclxufSBmcm9tICcuL2dldERlZmF1bHRNaWRkbGV3YXJlJ1xyXG5leHBvcnQgdHlwZSB7XHJcbiAgLy8gdHlwZXNcclxuICBBY3Rpb25SZWR1Y2VyTWFwQnVpbGRlcixcclxufSBmcm9tICcuL21hcEJ1aWxkZXJzJ1xyXG5leHBvcnQgeyBNaWRkbGV3YXJlQXJyYXkgfSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuZXhwb3J0IHsgY3JlYXRlRW50aXR5QWRhcHRlciB9IGZyb20gJy4vZW50aXRpZXMvY3JlYXRlX2FkYXB0ZXInXHJcbmV4cG9ydCB0eXBlIHtcclxuICBEaWN0aW9uYXJ5LFxyXG4gIEVudGl0eVN0YXRlLFxyXG4gIEVudGl0eUFkYXB0ZXIsXHJcbiAgRW50aXR5U2VsZWN0b3JzLFxyXG4gIEVudGl0eVN0YXRlQWRhcHRlcixcclxuICBFbnRpdHlJZCxcclxuICBVcGRhdGUsXHJcbiAgSWRTZWxlY3RvcixcclxuICBDb21wYXJlcixcclxufSBmcm9tICcuL2VudGl0aWVzL21vZGVscydcclxuXHJcbmV4cG9ydCB7XHJcbiAgY3JlYXRlQXN5bmNUaHVuayxcclxuICB1bndyYXBSZXN1bHQsXHJcbiAgbWluaVNlcmlhbGl6ZUVycm9yLFxyXG59IGZyb20gJy4vY3JlYXRlQXN5bmNUaHVuaydcclxuZXhwb3J0IHR5cGUge1xyXG4gIEFzeW5jVGh1bmssXHJcbiAgQXN5bmNUaHVua09wdGlvbnMsXHJcbiAgQXN5bmNUaHVua0FjdGlvbixcclxuICBBc3luY1RodW5rUGF5bG9hZENyZWF0b3JSZXR1cm5WYWx1ZSxcclxuICBBc3luY1RodW5rUGF5bG9hZENyZWF0b3IsXHJcbiAgU2VyaWFsaXplZEVycm9yLFxyXG59IGZyb20gJy4vY3JlYXRlQXN5bmNUaHVuaydcclxuXHJcbmV4cG9ydCB7XHJcbiAgLy8ganNcclxuICBpc0FsbE9mLFxyXG4gIGlzQW55T2YsXHJcbiAgaXNQZW5kaW5nLFxyXG4gIGlzUmVqZWN0ZWQsXHJcbiAgaXNGdWxmaWxsZWQsXHJcbiAgaXNBc3luY1RodW5rQWN0aW9uLFxyXG4gIGlzUmVqZWN0ZWRXaXRoVmFsdWUsXHJcbn0gZnJvbSAnLi9tYXRjaGVycydcclxuZXhwb3J0IHR5cGUge1xyXG4gIC8vIHR5cGVzXHJcbiAgQWN0aW9uTWF0Y2hpbmdBbGxPZixcclxuICBBY3Rpb25NYXRjaGluZ0FueU9mLFxyXG59IGZyb20gJy4vbWF0Y2hlcnMnXHJcblxyXG5leHBvcnQgeyBuYW5vaWQgfSBmcm9tICcuL25hbm9pZCdcclxuXHJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgaXNQbGFpbk9iamVjdCB9IGZyb20gJy4vaXNQbGFpbk9iamVjdCdcclxuXHJcbmV4cG9ydCB0eXBlIHtcclxuICBMaXN0ZW5lckVmZmVjdCxcclxuICBMaXN0ZW5lck1pZGRsZXdhcmUsXHJcbiAgTGlzdGVuZXJFZmZlY3RBUEksXHJcbiAgTGlzdGVuZXJNaWRkbGV3YXJlSW5zdGFuY2UsXHJcbiAgQ3JlYXRlTGlzdGVuZXJNaWRkbGV3YXJlT3B0aW9ucyxcclxuICBMaXN0ZW5lckVycm9ySGFuZGxlcixcclxuICBUeXBlZFN0YXJ0TGlzdGVuaW5nLFxyXG4gIFR5cGVkQWRkTGlzdGVuZXIsXHJcbiAgVHlwZWRTdG9wTGlzdGVuaW5nLFxyXG4gIFR5cGVkUmVtb3ZlTGlzdGVuZXIsXHJcbiAgVW5zdWJzY3JpYmVMaXN0ZW5lcixcclxuICBVbnN1YnNjcmliZUxpc3RlbmVyT3B0aW9ucyxcclxuICBGb3JrZWRUYXNrRXhlY3V0b3IsXHJcbiAgRm9ya2VkVGFzayxcclxuICBGb3JrZWRUYXNrQVBJLFxyXG4gIEFzeW5jVGFza0V4ZWN1dG9yLFxyXG4gIFN5bmNUYXNrRXhlY3V0b3IsXHJcbiAgVGFza0NhbmNlbGxlZCxcclxuICBUYXNrUmVqZWN0ZWQsXHJcbiAgVGFza1Jlc29sdmVkLFxyXG4gIFRhc2tSZXN1bHQsXHJcbn0gZnJvbSAnLi9saXN0ZW5lck1pZGRsZXdhcmUvaW5kZXgnXHJcbmV4cG9ydCB0eXBlIHsgQW55TGlzdGVuZXJQcmVkaWNhdGUgfSBmcm9tICcuL2xpc3RlbmVyTWlkZGxld2FyZS90eXBlcydcclxuXHJcbmV4cG9ydCB7XHJcbiAgY3JlYXRlTGlzdGVuZXJNaWRkbGV3YXJlLFxyXG4gIGFkZExpc3RlbmVyLFxyXG4gIHJlbW92ZUxpc3RlbmVyLFxyXG4gIGNsZWFyQWxsTGlzdGVuZXJzLFxyXG4gIFRhc2tBYm9ydEVycm9yLFxyXG59IGZyb20gJy4vbGlzdGVuZXJNaWRkbGV3YXJlL2luZGV4J1xyXG5cclxuZXhwb3J0IHtcclxuICBTSE9VTERfQVVUT0JBVENILFxyXG4gIHByZXBhcmVBdXRvQmF0Y2hlZCxcclxuICBhdXRvQmF0Y2hFbmhhbmNlcixcclxufSBmcm9tICcuL2F1dG9CYXRjaEVuaGFuY2VyJ1xyXG5leHBvcnQgdHlwZSB7IEF1dG9CYXRjaE9wdGlvbnMgfSBmcm9tICcuL2F1dG9CYXRjaEVuaGFuY2VyJ1xyXG4iLCJpbXBvcnQgeyBjdXJyZW50LCBpc0RyYWZ0IH0gZnJvbSAnaW1tZXInXHJcbmltcG9ydCB7IGNyZWF0ZVNlbGVjdG9yIH0gZnJvbSAncmVzZWxlY3QnXHJcblxyXG4vKipcclxuICogXCJEcmFmdC1TYWZlXCIgdmVyc2lvbiBvZiBgcmVzZWxlY3RgJ3MgYGNyZWF0ZVNlbGVjdG9yYDpcclxuICogSWYgYW4gYGltbWVyYC1kcmFmdGVkIG9iamVjdCBpcyBwYXNzZWQgaW50byB0aGUgcmVzdWx0aW5nIHNlbGVjdG9yJ3MgZmlyc3QgYXJndW1lbnQsXHJcbiAqIHRoZSBzZWxlY3RvciB3aWxsIGFjdCBvbiB0aGUgY3VycmVudCBkcmFmdCB2YWx1ZSwgaW5zdGVhZCBvZiByZXR1cm5pbmcgYSBjYWNoZWQgdmFsdWVcclxuICogdGhhdCBtaWdodCBiZSBwb3NzaWJseSBvdXRkYXRlZCBpZiB0aGUgZHJhZnQgaGFzIGJlZW4gbW9kaWZpZWQgc2luY2UuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcjogdHlwZW9mIGNyZWF0ZVNlbGVjdG9yID0gKFxyXG4gIC4uLmFyZ3M6IHVua25vd25bXVxyXG4pID0+IHtcclxuICBjb25zdCBzZWxlY3RvciA9IChjcmVhdGVTZWxlY3RvciBhcyBhbnkpKC4uLmFyZ3MpXHJcbiAgY29uc3Qgd3JhcHBlZFNlbGVjdG9yID0gKHZhbHVlOiB1bmtub3duLCAuLi5yZXN0OiB1bmtub3duW10pID0+XHJcbiAgICBzZWxlY3Rvcihpc0RyYWZ0KHZhbHVlKSA/IGN1cnJlbnQodmFsdWUpIDogdmFsdWUsIC4uLnJlc3QpXHJcbiAgcmV0dXJuIHdyYXBwZWRTZWxlY3RvciBhcyBhbnlcclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7XHJcbiAgUmVkdWNlcixcclxuICBSZWR1Y2Vyc01hcE9iamVjdCxcclxuICBNaWRkbGV3YXJlLFxyXG4gIEFjdGlvbixcclxuICBBbnlBY3Rpb24sXHJcbiAgU3RvcmVFbmhhbmNlcixcclxuICBTdG9yZSxcclxuICBEaXNwYXRjaCxcclxuICBQcmVsb2FkZWRTdGF0ZSxcclxuICBDb21iaW5lZFN0YXRlLFxyXG59IGZyb20gJ3JlZHV4J1xyXG5pbXBvcnQgeyBjcmVhdGVTdG9yZSwgY29tcG9zZSwgYXBwbHlNaWRkbGV3YXJlLCBjb21iaW5lUmVkdWNlcnMgfSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHR5cGUgeyBEZXZUb29sc0VuaGFuY2VyT3B0aW9ucyBhcyBEZXZUb29sc09wdGlvbnMgfSBmcm9tICcuL2RldnRvb2xzRXh0ZW5zaW9uJ1xyXG5pbXBvcnQgeyBjb21wb3NlV2l0aERldlRvb2xzIH0gZnJvbSAnLi9kZXZ0b29sc0V4dGVuc2lvbidcclxuXHJcbmltcG9ydCBpc1BsYWluT2JqZWN0IGZyb20gJy4vaXNQbGFpbk9iamVjdCdcclxuaW1wb3J0IHR5cGUge1xyXG4gIFRodW5rTWlkZGxld2FyZUZvcixcclxuICBDdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUsXHJcbn0gZnJvbSAnLi9nZXREZWZhdWx0TWlkZGxld2FyZSdcclxuaW1wb3J0IHsgY3VycnlHZXREZWZhdWx0TWlkZGxld2FyZSB9IGZyb20gJy4vZ2V0RGVmYXVsdE1pZGRsZXdhcmUnXHJcbmltcG9ydCB0eXBlIHtcclxuICBOb0luZmVyLFxyXG4gIEV4dHJhY3REaXNwYXRjaEV4dGVuc2lvbnMsXHJcbiAgRXh0cmFjdFN0b3JlRXh0ZW5zaW9ucyxcclxufSBmcm9tICcuL3RzSGVscGVycydcclxuXHJcbmNvbnN0IElTX1BST0RVQ1RJT04gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXHJcblxyXG4vKipcclxuICogQ2FsbGJhY2sgZnVuY3Rpb24gdHlwZSwgdG8gYmUgdXNlZCBpbiBgQ29uZmlndXJlU3RvcmVPcHRpb25zLmVuaGFuY2Vyc2BcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgQ29uZmlndXJlRW5oYW5jZXJzQ2FsbGJhY2s8RSBleHRlbmRzIEVuaGFuY2VycyA9IEVuaGFuY2Vycz4gPSAoXHJcbiAgICBkZWZhdWx0RW5oYW5jZXJzOiByZWFkb25seSBTdG9yZUVuaGFuY2VyW11cclxuKSA9PiBbLi4uRV1cclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciBgY29uZmlndXJlU3RvcmUoKWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlndXJlU3RvcmVPcHRpb25zPFxyXG4gIFMgPSBhbnksXHJcbiAgQSBleHRlbmRzIEFjdGlvbiA9IEFueUFjdGlvbixcclxuICBNIGV4dGVuZHMgTWlkZGxld2FyZXM8Uz4gPSBNaWRkbGV3YXJlczxTPixcclxuICBFIGV4dGVuZHMgRW5oYW5jZXJzID0gRW5oYW5jZXJzXHJcbj4ge1xyXG4gIC8qKlxyXG4gICAqIEEgc2luZ2xlIHJlZHVjZXIgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHVzZWQgYXMgdGhlIHJvb3QgcmVkdWNlciwgb3IgYW5cclxuICAgKiBvYmplY3Qgb2Ygc2xpY2UgcmVkdWNlcnMgdGhhdCB3aWxsIGJlIHBhc3NlZCB0byBgY29tYmluZVJlZHVjZXJzKClgLlxyXG4gICAqL1xyXG4gIHJlZHVjZXI6IFJlZHVjZXI8UywgQT4gfCBSZWR1Y2Vyc01hcE9iamVjdDxTLCBBPlxyXG5cclxuICAvKipcclxuICAgKiBBbiBhcnJheSBvZiBSZWR1eCBtaWRkbGV3YXJlIHRvIGluc3RhbGwuIElmIG5vdCBzdXBwbGllZCwgZGVmYXVsdHMgdG9cclxuICAgKiB0aGUgc2V0IG9mIG1pZGRsZXdhcmUgcmV0dXJuZWQgYnkgYGdldERlZmF1bHRNaWRkbGV3YXJlKClgLlxyXG4gICAqXHJcbiAgICogQGV4YW1wbGUgYG1pZGRsZXdhcmU6IChnRE0pID0+IGdETSgpLmNvbmNhdChsb2dnZXIsIGFwaU1pZGRsZXdhcmUsIHlvdXJDdXN0b21NaWRkbGV3YXJlKWBcclxuICAgKiBAc2VlIGh0dHBzOi8vcmVkdXgtdG9vbGtpdC5qcy5vcmcvYXBpL2dldERlZmF1bHRNaWRkbGV3YXJlI2ludGVuZGVkLXVzYWdlXHJcbiAgICovXHJcbiAgbWlkZGxld2FyZT86ICgoZ2V0RGVmYXVsdE1pZGRsZXdhcmU6IEN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZTxTPikgPT4gTSkgfCBNXHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIFJlZHV4IERldlRvb2xzIGludGVncmF0aW9uLiBEZWZhdWx0cyB0byBgdHJ1ZWAuXHJcbiAgICpcclxuICAgKiBBZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gY2FuIGJlIGRvbmUgYnkgcGFzc2luZyBSZWR1eCBEZXZUb29scyBvcHRpb25zXHJcbiAgICovXHJcbiAgZGV2VG9vbHM/OiBib29sZWFuIHwgRGV2VG9vbHNPcHRpb25zXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBpbml0aWFsIHN0YXRlLCBzYW1lIGFzIFJlZHV4J3MgY3JlYXRlU3RvcmUuXHJcbiAgICogWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXQgdG8gaHlkcmF0ZSB0aGUgc3RhdGVcclxuICAgKiBmcm9tIHRoZSBzZXJ2ZXIgaW4gdW5pdmVyc2FsIGFwcHMsIG9yIHRvIHJlc3RvcmUgYSBwcmV2aW91c2x5IHNlcmlhbGl6ZWRcclxuICAgKiB1c2VyIHNlc3Npb24uIElmIHlvdSB1c2UgYGNvbWJpbmVSZWR1Y2VycygpYCB0byBwcm9kdWNlIHRoZSByb290IHJlZHVjZXJcclxuICAgKiBmdW5jdGlvbiAoZWl0aGVyIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkgYnkgcGFzc2luZyBhbiBvYmplY3QgYXMgYHJlZHVjZXJgKSxcclxuICAgKiB0aGlzIG11c3QgYmUgYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUgc2hhcGUgYXMgdGhlIHJlZHVjZXIgbWFwIGtleXMuXHJcbiAgICovXHJcbiAgLypcclxuICBOb3QgMTAwJSBjb3JyZWN0IGJ1dCB0aGUgYmVzdCBhcHByb3hpbWF0aW9uIHdlIGNhbiBnZXQ6XHJcbiAgLSBpZiBTIGlzIGEgYENvbWJpbmVkU3RhdGVgIGFwcGx5aW5nIGEgc2Vjb25kIGBDb21iaW5lZFN0YXRlYCBvbiBpdCBkb2VzIG5vdCBjaGFuZ2UgYW55dGhpbmcuXHJcbiAgLSBpZiBpdCBpcyBub3QsIHRoZXJlIGNvdWxkIGJlIHR3byBjYXNlczpcclxuICAgIC0gYFJlZHVjZXJzTWFwT2JqZWN0PFMsIEE+YCBpcyBiZWluZyBwYXNzZWQgaW4uIEluIHRoaXMgY2FzZSwgd2Ugd2lsbCBjYWxsIGBjb21iaW5lUmVkdWNlcnNgIG9uIGl0IGFuZCBgQ29tYmluZWRTdGF0ZTxTPmAgaXMgY29ycmVjdFxyXG4gICAgLSBgUmVkdWNlcjxTLCBBPmAgaXMgYmVpbmcgcGFzc2VkIGluLiBJbiB0aGlzIGNhc2UsIGFjdHVhbGx5IGBDb21iaW5lZFN0YXRlPFM+YCBpcyB3cm9uZyBhbmQgYFNgIHdvdWxkIGJlIGNvcnJlY3QuXHJcbiAgICBBcyB3ZSBjYW5ub3QgZGlzdGluZ3Vpc2ggYmV0d2VlbiB0aG9zZSB0d28gY2FzZXMgd2l0aG91dCBhZGRpbmcgYW5vdGhlciBnZW5lcmljIHBhcmFtZXRlcixcclxuICAgIHdlIGp1c3QgbWFrZSB0aGUgcHJhZ21hdGljIGFzc3VtcHRpb24gdGhhdCB0aGUgbGF0dGVyIGFsbW9zdCBuZXZlciBoYXBwZW5zLlxyXG4gICovXHJcbiAgcHJlbG9hZGVkU3RhdGU/OiBQcmVsb2FkZWRTdGF0ZTxDb21iaW5lZFN0YXRlPE5vSW5mZXI8Uz4+PlxyXG5cclxuICAvKipcclxuICAgKiBUaGUgc3RvcmUgZW5oYW5jZXJzIHRvIGFwcGx5LiBTZWUgUmVkdXgncyBgY3JlYXRlU3RvcmUoKWAuXHJcbiAgICogQWxsIGVuaGFuY2VycyB3aWxsIGJlIGluY2x1ZGVkIGJlZm9yZSB0aGUgRGV2VG9vbHMgRXh0ZW5zaW9uIGVuaGFuY2VyLlxyXG4gICAqIElmIHlvdSBuZWVkIHRvIGN1c3RvbWl6ZSB0aGUgb3JkZXIgb2YgZW5oYW5jZXJzLCBzdXBwbHkgYSBjYWxsYmFja1xyXG4gICAqIGZ1bmN0aW9uIHRoYXQgd2lsbCByZWNlaXZlIHRoZSBvcmlnaW5hbCBhcnJheSAoaWUsIGBbYXBwbHlNaWRkbGV3YXJlXWApLFxyXG4gICAqIGFuZCBzaG91bGQgcmV0dXJuIGEgbmV3IGFycmF5IChzdWNoIGFzIGBbYXBwbHlNaWRkbGV3YXJlLCBvZmZsaW5lXWApLlxyXG4gICAqIElmIHlvdSBvbmx5IG5lZWQgdG8gYWRkIG1pZGRsZXdhcmUsIHlvdSBjYW4gdXNlIHRoZSBgbWlkZGxld2FyZWAgcGFyYW1ldGVyIGluc3RlYWQuXHJcbiAgICovXHJcbiAgZW5oYW5jZXJzPzogRSB8IENvbmZpZ3VyZUVuaGFuY2Vyc0NhbGxiYWNrPEU+XHJcbn1cclxuXHJcbnR5cGUgTWlkZGxld2FyZXM8Uz4gPSBSZWFkb25seUFycmF5PE1pZGRsZXdhcmU8e30sIFM+PlxyXG5cclxudHlwZSBFbmhhbmNlcnMgPSBSZWFkb25seUFycmF5PFN0b3JlRW5oYW5jZXI+XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xraXRTdG9yZTxcclxuICBTID0gYW55LFxyXG4gIEEgZXh0ZW5kcyBBY3Rpb24gPSBBbnlBY3Rpb24sXHJcbiAgTSBleHRlbmRzIE1pZGRsZXdhcmVzPFM+ID0gTWlkZGxld2FyZXM8Uz4sXHJcbj4gZXh0ZW5kcyBTdG9yZTxTLCBBPiB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGBkaXNwYXRjaGAgbWV0aG9kIG9mIHlvdXIgc3RvcmUsIGVuaGFuY2VkIGJ5IGFsbCBpdHMgbWlkZGxld2FyZXMuXHJcbiAgICpcclxuICAgKiBAaW5oZXJpdGRvY1xyXG4gICAqL1xyXG4gIGRpc3BhdGNoOiBFeHRyYWN0RGlzcGF0Y2hFeHRlbnNpb25zPE0+ICYgRGlzcGF0Y2g8QT5cclxufVxyXG5cclxuLyoqXHJcbiAqIEEgUmVkdXggc3RvcmUgcmV0dXJuZWQgYnkgYGNvbmZpZ3VyZVN0b3JlKClgLiBTdXBwb3J0cyBkaXNwYXRjaGluZ1xyXG4gKiBzaWRlLWVmZmVjdGZ1bCBfdGh1bmtzXyBpbiBhZGRpdGlvbiB0byBwbGFpbiBhY3Rpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBFbmhhbmNlZFN0b3JlPFxyXG4gIFMgPSBhbnksXHJcbiAgQSBleHRlbmRzIEFjdGlvbiA9IEFueUFjdGlvbixcclxuICBNIGV4dGVuZHMgTWlkZGxld2FyZXM8Uz4gPSBNaWRkbGV3YXJlczxTPixcclxuICBFIGV4dGVuZHMgRW5oYW5jZXJzID0gRW5oYW5jZXJzXHJcbj4gPSBUb29sa2l0U3RvcmU8UywgQSwgTT4gJiBFeHRyYWN0U3RvcmVFeHRlbnNpb25zPEU+XHJcblxyXG4vKipcclxuICogQSBmcmllbmRseSBhYnN0cmFjdGlvbiBvdmVyIHRoZSBzdGFuZGFyZCBSZWR1eCBgY3JlYXRlU3RvcmUoKWAgZnVuY3Rpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBvcHRpb25zIFRoZSBzdG9yZSBjb25maWd1cmF0aW9uLlxyXG4gKiBAcmV0dXJucyBBIGNvbmZpZ3VyZWQgUmVkdXggc3RvcmUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVTdG9yZTxcclxuICBTID0gYW55LFxyXG4gIEEgZXh0ZW5kcyBBY3Rpb24gPSBBbnlBY3Rpb24sXHJcbiAgTSBleHRlbmRzIE1pZGRsZXdhcmVzPFM+ID0gW1RodW5rTWlkZGxld2FyZUZvcjxTPl0sXHJcbiAgRSBleHRlbmRzIEVuaGFuY2VycyA9IFtTdG9yZUVuaGFuY2VyXVxyXG4+KG9wdGlvbnM6IENvbmZpZ3VyZVN0b3JlT3B0aW9uczxTLCBBLCBNLCBFPik6IEVuaGFuY2VkU3RvcmU8UywgQSwgTSwgRT4ge1xyXG4gIGNvbnN0IGN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZSA9IGN1cnJ5R2V0RGVmYXVsdE1pZGRsZXdhcmU8Uz4oKVxyXG5cclxuICBjb25zdCB7XHJcbiAgICByZWR1Y2VyID0gdW5kZWZpbmVkLFxyXG4gICAgbWlkZGxld2FyZSA9IGN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZSgpLFxyXG4gICAgZGV2VG9vbHMgPSB0cnVlLFxyXG4gICAgcHJlbG9hZGVkU3RhdGUgPSB1bmRlZmluZWQsXHJcbiAgICBlbmhhbmNlcnMgPSB1bmRlZmluZWQsXHJcbiAgfSA9IG9wdGlvbnMgfHwge31cclxuXHJcbiAgbGV0IHJvb3RSZWR1Y2VyOiBSZWR1Y2VyPFMsIEE+XHJcblxyXG4gIGlmICh0eXBlb2YgcmVkdWNlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgcm9vdFJlZHVjZXIgPSByZWR1Y2VyXHJcbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHJlZHVjZXIpKSB7XHJcbiAgICByb290UmVkdWNlciA9IGNvbWJpbmVSZWR1Y2VycyhyZWR1Y2VyKSBhcyB1bmtub3duIGFzIFJlZHVjZXI8UywgQT5cclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAnXCJyZWR1Y2VyXCIgaXMgYSByZXF1aXJlZCBhcmd1bWVudCwgYW5kIG11c3QgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3Qgb2YgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHBhc3NlZCB0byBjb21iaW5lUmVkdWNlcnMnXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBsZXQgZmluYWxNaWRkbGV3YXJlID0gbWlkZGxld2FyZVxyXG4gIGlmICh0eXBlb2YgZmluYWxNaWRkbGV3YXJlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICBmaW5hbE1pZGRsZXdhcmUgPSBmaW5hbE1pZGRsZXdhcmUoY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlKVxyXG5cclxuICAgIGlmICghSVNfUFJPRFVDVElPTiAmJiAhQXJyYXkuaXNBcnJheShmaW5hbE1pZGRsZXdhcmUpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAnd2hlbiB1c2luZyBhIG1pZGRsZXdhcmUgYnVpbGRlciBmdW5jdGlvbiwgYW4gYXJyYXkgb2YgbWlkZGxld2FyZSBtdXN0IGJlIHJldHVybmVkJ1xyXG4gICAgICApXHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmIChcclxuICAgICFJU19QUk9EVUNUSU9OICYmXHJcbiAgICBmaW5hbE1pZGRsZXdhcmUuc29tZSgoaXRlbTogYW55KSA9PiB0eXBlb2YgaXRlbSAhPT0gJ2Z1bmN0aW9uJylcclxuICApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgJ2VhY2ggbWlkZGxld2FyZSBwcm92aWRlZCB0byBjb25maWd1cmVTdG9yZSBtdXN0IGJlIGEgZnVuY3Rpb24nXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBjb25zdCBtaWRkbGV3YXJlRW5oYW5jZXI6IFN0b3JlRW5oYW5jZXIgPSBhcHBseU1pZGRsZXdhcmUoLi4uZmluYWxNaWRkbGV3YXJlKVxyXG5cclxuICBsZXQgZmluYWxDb21wb3NlID0gY29tcG9zZVxyXG5cclxuICBpZiAoZGV2VG9vbHMpIHtcclxuICAgIGZpbmFsQ29tcG9zZSA9IGNvbXBvc2VXaXRoRGV2VG9vbHMoe1xyXG4gICAgICAvLyBFbmFibGUgY2FwdHVyZSBvZiBzdGFjayB0cmFjZXMgZm9yIGRpc3BhdGNoZWQgUmVkdXggYWN0aW9uc1xyXG4gICAgICB0cmFjZTogIUlTX1BST0RVQ1RJT04sXHJcbiAgICAgIC4uLih0eXBlb2YgZGV2VG9vbHMgPT09ICdvYmplY3QnICYmIGRldlRvb2xzKSxcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBsZXQgc3RvcmVFbmhhbmNlcnM6IEVuaGFuY2VycyA9IFttaWRkbGV3YXJlRW5oYW5jZXJdXHJcblxyXG4gIGlmIChBcnJheS5pc0FycmF5KGVuaGFuY2VycykpIHtcclxuICAgIHN0b3JlRW5oYW5jZXJzID0gW21pZGRsZXdhcmVFbmhhbmNlciwgLi4uZW5oYW5jZXJzXVxyXG4gIH0gZWxzZSBpZiAodHlwZW9mIGVuaGFuY2VycyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgc3RvcmVFbmhhbmNlcnMgPSBlbmhhbmNlcnMoc3RvcmVFbmhhbmNlcnMpXHJcbiAgfVxyXG5cclxuICBjb25zdCBjb21wb3NlZEVuaGFuY2VyID0gZmluYWxDb21wb3NlKC4uLnN0b3JlRW5oYW5jZXJzKSBhcyBTdG9yZUVuaGFuY2VyPGFueT5cclxuXHJcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKHJvb3RSZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgY29tcG9zZWRFbmhhbmNlcilcclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IEFjdGlvbiwgQWN0aW9uQ3JlYXRvciwgU3RvcmVFbmhhbmNlciB9IGZyb20gJ3JlZHV4J1xyXG5pbXBvcnQgeyBjb21wb3NlIH0gZnJvbSAncmVkdXgnXHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBEZXZUb29sc0VuaGFuY2VyT3B0aW9ucyB7XHJcbiAgLyoqXHJcbiAgICogdGhlIGluc3RhbmNlIG5hbWUgdG8gYmUgc2hvd2VkIG9uIHRoZSBtb25pdG9yIHBhZ2UuIERlZmF1bHQgdmFsdWUgaXMgYGRvY3VtZW50LnRpdGxlYC5cclxuICAgKiBJZiBub3Qgc3BlY2lmaWVkIGFuZCB0aGVyZSdzIG5vIGRvY3VtZW50IHRpdGxlLCBpdCB3aWxsIGNvbnNpc3Qgb2YgYHRhYklkYCBhbmQgYGluc3RhbmNlSWRgLlxyXG4gICAqL1xyXG4gIG5hbWU/OiBzdHJpbmdcclxuICAvKipcclxuICAgKiBhY3Rpb24gY3JlYXRvcnMgZnVuY3Rpb25zIHRvIGJlIGF2YWlsYWJsZSBpbiB0aGUgRGlzcGF0Y2hlci5cclxuICAgKi9cclxuICBhY3Rpb25DcmVhdG9ycz86IEFjdGlvbkNyZWF0b3I8YW55PltdIHwgeyBba2V5OiBzdHJpbmddOiBBY3Rpb25DcmVhdG9yPGFueT4gfVxyXG4gIC8qKlxyXG4gICAqIGlmIG1vcmUgdGhhbiBvbmUgYWN0aW9uIGlzIGRpc3BhdGNoZWQgaW4gdGhlIGluZGljYXRlZCBpbnRlcnZhbCwgYWxsIG5ldyBhY3Rpb25zIHdpbGwgYmUgY29sbGVjdGVkIGFuZCBzZW50IGF0IG9uY2UuXHJcbiAgICogSXQgaXMgdGhlIGpvaW50IGJldHdlZW4gcGVyZm9ybWFuY2UgYW5kIHNwZWVkLiBXaGVuIHNldCB0byBgMGAsIGFsbCBhY3Rpb25zIHdpbGwgYmUgc2VudCBpbnN0YW50bHkuXHJcbiAgICogU2V0IGl0IHRvIGEgaGlnaGVyIHZhbHVlIHdoZW4gZXhwZXJpZW5jaW5nIHBlcmYgaXNzdWVzIChhbHNvIGBtYXhBZ2VgIHRvIGEgbG93ZXIgdmFsdWUpLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgNTAwIG1zLlxyXG4gICAqL1xyXG4gIGxhdGVuY3k/OiBudW1iZXJcclxuICAvKipcclxuICAgKiAoPiAxKSAtIG1heGltdW0gYWxsb3dlZCBhY3Rpb25zIHRvIGJlIHN0b3JlZCBpbiB0aGUgaGlzdG9yeSB0cmVlLiBUaGUgb2xkZXN0IGFjdGlvbnMgYXJlIHJlbW92ZWQgb25jZSBtYXhBZ2UgaXMgcmVhY2hlZC4gSXQncyBjcml0aWNhbCBmb3IgcGVyZm9ybWFuY2UuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCA1MFxyXG4gICAqL1xyXG4gIG1heEFnZT86IG51bWJlclxyXG4gIC8qKlxyXG4gICAqIEN1c3RvbWl6ZXMgaG93IGFjdGlvbnMgYW5kIHN0YXRlIGFyZSBzZXJpYWxpemVkIGFuZCBkZXNlcmlhbGl6ZWQuIENhbiBiZSBhIGJvb2xlYW4gb3Igb2JqZWN0LiBJZiBnaXZlbiBhIGJvb2xlYW4sIHRoZSBiZWhhdmlvciBpcyB0aGUgc2FtZSBhcyBpZiB5b3VcclxuICAgKiB3ZXJlIHRvIHBhc3MgYW4gb2JqZWN0IGFuZCBzcGVjaWZ5IGBvcHRpb25zYCBhcyBhIGJvb2xlYW4uIEdpdmluZyBhbiBvYmplY3QgYWxsb3dzIGZpbmUtZ3JhaW5lZCBjdXN0b21pemF0aW9uIHVzaW5nIHRoZSBgcmVwbGFjZXJgIGFuZCBgcmV2aXZlcmBcclxuICAgKiBmdW5jdGlvbnMuXHJcbiAgICovXHJcbiAgc2VyaWFsaXplPzpcclxuICAgIHwgYm9vbGVhblxyXG4gICAgfCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogLSBgdW5kZWZpbmVkYCAtIHdpbGwgdXNlIHJlZ3VsYXIgYEpTT04uc3RyaW5naWZ5YCB0byBzZW5kIGRhdGEgKGl0J3MgdGhlIGZhc3QgbW9kZSkuXHJcbiAgICAgICAgICogLSBgZmFsc2VgIC0gd2lsbCBoYW5kbGUgYWxzbyBjaXJjdWxhciByZWZlcmVuY2VzLlxyXG4gICAgICAgICAqIC0gYHRydWVgIC0gd2lsbCBoYW5kbGUgYWxzbyBkYXRlLCByZWdleCwgdW5kZWZpbmVkLCBlcnJvciBvYmplY3RzLCBzeW1ib2xzLCBtYXBzLCBzZXRzIGFuZCBmdW5jdGlvbnMuXHJcbiAgICAgICAgICogLSBvYmplY3QsIHdoaWNoIGNvbnRhaW5zIGBkYXRlYCwgYHJlZ2V4YCwgYHVuZGVmaW5lZGAsIGBlcnJvcmAsIGBzeW1ib2xgLCBgbWFwYCwgYHNldGAgYW5kIGBmdW5jdGlvbmAga2V5cy5cclxuICAgICAgICAgKiAgIEZvciBlYWNoIG9mIHRoZW0geW91IGNhbiBpbmRpY2F0ZSBpZiB0byBpbmNsdWRlIChieSBzZXR0aW5nIGFzIGB0cnVlYCkuXHJcbiAgICAgICAgICogICBGb3IgYGZ1bmN0aW9uYCBrZXkgeW91IGNhbiBhbHNvIHNwZWNpZnkgYSBjdXN0b20gZnVuY3Rpb24gd2hpY2ggaGFuZGxlcyBzZXJpYWxpemF0aW9uLlxyXG4gICAgICAgICAqICAgU2VlIFtganNhbmBdKGh0dHBzOi8vZ2l0aHViLmNvbS9rb2xvZG55L2pzYW4pIGZvciBtb3JlIGRldGFpbHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3B0aW9ucz86XHJcbiAgICAgICAgICB8IHVuZGVmaW5lZFxyXG4gICAgICAgICAgfCBib29sZWFuXHJcbiAgICAgICAgICB8IHtcclxuICAgICAgICAgICAgICBkYXRlPzogdHJ1ZVxyXG4gICAgICAgICAgICAgIHJlZ2V4PzogdHJ1ZVxyXG4gICAgICAgICAgICAgIHVuZGVmaW5lZD86IHRydWVcclxuICAgICAgICAgICAgICBlcnJvcj86IHRydWVcclxuICAgICAgICAgICAgICBzeW1ib2w/OiB0cnVlXHJcbiAgICAgICAgICAgICAgbWFwPzogdHJ1ZVxyXG4gICAgICAgICAgICAgIHNldD86IHRydWVcclxuICAgICAgICAgICAgICBmdW5jdGlvbj86IHRydWUgfCAoKGZuOiAoLi4uYXJnczogYW55W10pID0+IGFueSkgPT4gc3RyaW5nKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogW0pTT04gcmVwbGFjZXIgZnVuY3Rpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0pTT04vc3RyaW5naWZ5I1RoZV9yZXBsYWNlcl9wYXJhbWV0ZXIpIHVzZWQgZm9yIGJvdGggYWN0aW9ucyBhbmQgc3RhdGVzIHN0cmluZ2lmeS5cclxuICAgICAgICAgKiBJbiBhZGRpdGlvbiwgeW91IGNhbiBzcGVjaWZ5IGEgZGF0YSB0eXBlIGJ5IGFkZGluZyBhIFtgX19zZXJpYWxpemVkVHlwZV9fYF0oaHR0cHM6Ly9naXRodWIuY29tL3phbG1veGlzdXMvcmVtb3RlZGV2LXNlcmlhbGl6ZS9ibG9iL21hc3Rlci9oZWxwZXJzL2luZGV4LmpzI0w0KVxyXG4gICAgICAgICAqIGtleS4gU28geW91IGNhbiBkZXNlcmlhbGl6ZSBpdCBiYWNrIHdoaWxlIGltcG9ydGluZyBvciBwZXJzaXN0aW5nIGRhdGEuXHJcbiAgICAgICAgICogTW9yZW92ZXIsIGl0IHdpbGwgYWxzbyBbc2hvdyBhIG5pY2UgcHJldmlldyBzaG93aW5nIHRoZSBwcm92aWRlZCBjdXN0b20gdHlwZV0oaHR0cHM6Ly9jbG91ZC5naXRodWJ1c2VyY29udGVudC5jb20vYXNzZXRzLzc5NTc4NTkvMjE4MTQzMzAvYTE3ZDU1NmEtZDc2MS0xMWU2LTg1ZWYtMTU5ZGQxMmYzNmM1LnBuZyk6XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVwbGFjZXI/OiAoa2V5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiBhbnlcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBbSlNPTiBgcmV2aXZlcmAgZnVuY3Rpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0pTT04vcGFyc2UjVXNpbmdfdGhlX3Jldml2ZXJfcGFyYW1ldGVyKVxyXG4gICAgICAgICAqIHVzZWQgZm9yIHBhcnNpbmcgdGhlIGltcG9ydGVkIGFjdGlvbnMgYW5kIHN0YXRlcy4gU2VlIFtgcmVtb3RlZGV2LXNlcmlhbGl6ZWBdKGh0dHBzOi8vZ2l0aHViLmNvbS96YWxtb3hpc3VzL3JlbW90ZWRldi1zZXJpYWxpemUvYmxvYi9tYXN0ZXIvaW1tdXRhYmxlL3NlcmlhbGl6ZS5qcyNMOC1MNDEpXHJcbiAgICAgICAgICogYXMgYW4gZXhhbXBsZSBvbiBob3cgdG8gc2VyaWFsaXplIHNwZWNpYWwgZGF0YSB0eXBlcyBhbmQgZ2V0IHRoZW0gYmFjay5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXZpdmVyPzogKGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4gYW55XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXV0b21hdGljYWxseSBzZXJpYWxpemUvZGVzZXJpYWxpemUgaW1tdXRhYmxlanMgdmlhIFtyZW1vdGVkZXYtc2VyaWFsaXplXShodHRwczovL2dpdGh1Yi5jb20vemFsbW94aXN1cy9yZW1vdGVkZXYtc2VyaWFsaXplKS5cclxuICAgICAgICAgKiBKdXN0IHBhc3MgdGhlIEltbXV0YWJsZSBsaWJyYXJ5LiBJdCB3aWxsIHN1cHBvcnQgYWxsIEltbXV0YWJsZUpTIHN0cnVjdHVyZXMuIFlvdSBjYW4gZXZlbiBleHBvcnQgdGhlbSBpbnRvIGEgZmlsZSBhbmQgZ2V0IHRoZW0gYmFjay5cclxuICAgICAgICAgKiBUaGUgb25seSBleGNlcHRpb24gaXMgYFJlY29yZGAgY2xhc3MsIGZvciB3aGljaCB5b3Ugc2hvdWxkIHBhc3MgdGhpcyBpbiBhZGRpdGlvbiB0aGUgcmVmZXJlbmNlcyB0byB5b3VyIGNsYXNzZXMgaW4gYHJlZnNgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGltbXV0YWJsZT86IGFueVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEltbXV0YWJsZUpTIGBSZWNvcmRgIGNsYXNzZXMgdXNlZCB0byBtYWtlIHBvc3NpYmxlIHJlc3RvcmUgaXRzIGluc3RhbmNlcyBiYWNrIHdoZW4gaW1wb3J0aW5nLCBwZXJzaXN0aW5nLi4uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVmcz86IGFueVxyXG4gICAgICB9XHJcbiAgLyoqXHJcbiAgICogZnVuY3Rpb24gd2hpY2ggdGFrZXMgYGFjdGlvbmAgb2JqZWN0IGFuZCBpZCBudW1iZXIgYXMgYXJndW1lbnRzLCBhbmQgc2hvdWxkIHJldHVybiBgYWN0aW9uYCBvYmplY3QgYmFjay5cclxuICAgKi9cclxuICBhY3Rpb25TYW5pdGl6ZXI/OiA8QSBleHRlbmRzIEFjdGlvbj4oYWN0aW9uOiBBLCBpZDogbnVtYmVyKSA9PiBBXHJcbiAgLyoqXHJcbiAgICogZnVuY3Rpb24gd2hpY2ggdGFrZXMgYHN0YXRlYCBvYmplY3QgYW5kIGluZGV4IGFzIGFyZ3VtZW50cywgYW5kIHNob3VsZCByZXR1cm4gYHN0YXRlYCBvYmplY3QgYmFjay5cclxuICAgKi9cclxuICBzdGF0ZVNhbml0aXplcj86IDxTPihzdGF0ZTogUywgaW5kZXg6IG51bWJlcikgPT4gU1xyXG4gIC8qKlxyXG4gICAqICpzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyBhcyByZWdleCogLSBhY3Rpb25zIHR5cGVzIHRvIGJlIGhpZGRlbiAvIHNob3duIGluIHRoZSBtb25pdG9ycyAod2hpbGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VycykuXHJcbiAgICogSWYgYGFjdGlvbnNXaGl0ZWxpc3RgIHNwZWNpZmllZCwgYGFjdGlvbnNCbGFja2xpc3RgIGlzIGlnbm9yZWQuXHJcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGFjdGlvbnNEZW55bGlzdCBpbnN0ZWFkLlxyXG4gICAqL1xyXG4gIGFjdGlvbnNCbGFja2xpc3Q/OiBzdHJpbmcgfCBzdHJpbmdbXVxyXG4gIC8qKlxyXG4gICAqICpzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyBhcyByZWdleCogLSBhY3Rpb25zIHR5cGVzIHRvIGJlIGhpZGRlbiAvIHNob3duIGluIHRoZSBtb25pdG9ycyAod2hpbGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VycykuXHJcbiAgICogSWYgYGFjdGlvbnNXaGl0ZWxpc3RgIHNwZWNpZmllZCwgYGFjdGlvbnNCbGFja2xpc3RgIGlzIGlnbm9yZWQuXHJcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGFjdGlvbnNBbGxvd2xpc3QgaW5zdGVhZC5cclxuICAgKi9cclxuICBhY3Rpb25zV2hpdGVsaXN0Pzogc3RyaW5nIHwgc3RyaW5nW11cclxuICAvKipcclxuICAgKiAqc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgYXMgcmVnZXgqIC0gYWN0aW9ucyB0eXBlcyB0byBiZSBoaWRkZW4gLyBzaG93biBpbiB0aGUgbW9uaXRvcnMgKHdoaWxlIHBhc3NlZCB0byB0aGUgcmVkdWNlcnMpLlxyXG4gICAqIElmIGBhY3Rpb25zQWxsb3dsaXN0YCBzcGVjaWZpZWQsIGBhY3Rpb25zRGVueWxpc3RgIGlzIGlnbm9yZWQuXHJcbiAgICovXHJcbiAgYWN0aW9uc0RlbnlsaXN0Pzogc3RyaW5nIHwgc3RyaW5nW11cclxuICAvKipcclxuICAgKiAqc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgYXMgcmVnZXgqIC0gYWN0aW9ucyB0eXBlcyB0byBiZSBoaWRkZW4gLyBzaG93biBpbiB0aGUgbW9uaXRvcnMgKHdoaWxlIHBhc3NlZCB0byB0aGUgcmVkdWNlcnMpLlxyXG4gICAqIElmIGBhY3Rpb25zQWxsb3dsaXN0YCBzcGVjaWZpZWQsIGBhY3Rpb25zRGVueWxpc3RgIGlzIGlnbm9yZWQuXHJcbiAgICovXHJcbiAgYWN0aW9uc0FsbG93bGlzdD86IHN0cmluZyB8IHN0cmluZ1tdXHJcbiAgLyoqXHJcbiAgICogY2FsbGVkIGZvciBldmVyeSBhY3Rpb24gYmVmb3JlIHNlbmRpbmcsIHRha2VzIGBzdGF0ZWAgYW5kIGBhY3Rpb25gIG9iamVjdCwgYW5kIHJldHVybnMgYHRydWVgIGluIGNhc2UgaXQgYWxsb3dzIHNlbmRpbmcgdGhlIGN1cnJlbnQgZGF0YSB0byB0aGUgbW9uaXRvci5cclxuICAgKiBVc2UgaXQgYXMgYSBtb3JlIGFkdmFuY2VkIHZlcnNpb24gb2YgYGFjdGlvbnNEZW55bGlzdGAvYGFjdGlvbnNBbGxvd2xpc3RgIHBhcmFtZXRlcnMuXHJcbiAgICovXHJcbiAgcHJlZGljYXRlPzogPFMsIEEgZXh0ZW5kcyBBY3Rpb24+KHN0YXRlOiBTLCBhY3Rpb246IEEpID0+IGJvb2xlYW5cclxuICAvKipcclxuICAgKiBpZiBzcGVjaWZpZWQgYXMgYGZhbHNlYCwgaXQgd2lsbCBub3QgcmVjb3JkIHRoZSBjaGFuZ2VzIHRpbGwgY2xpY2tpbmcgb24gYFN0YXJ0IHJlY29yZGluZ2AgYnV0dG9uLlxyXG4gICAqIEF2YWlsYWJsZSBvbmx5IGZvciBSZWR1eCBlbmhhbmNlciwgZm9yIG90aGVycyB1c2UgYGF1dG9QYXVzZWAuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCB0cnVlXHJcbiAgICovXHJcbiAgc2hvdWxkUmVjb3JkQ2hhbmdlcz86IGJvb2xlYW5cclxuICAvKipcclxuICAgKiBpZiBzcGVjaWZpZWQsIHdoZW5ldmVyIGNsaWNraW5nIG9uIGBQYXVzZSByZWNvcmRpbmdgIGJ1dHRvbiBhbmQgdGhlcmUgYXJlIGFjdGlvbnMgaW4gdGhlIGhpc3RvcnkgbG9nLCB3aWxsIGFkZCB0aGlzIGFjdGlvbiB0eXBlLlxyXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIHdpbGwgY29tbWl0IHdoZW4gcGF1c2VkLiBBdmFpbGFibGUgb25seSBmb3IgUmVkdXggZW5oYW5jZXIuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBcIkBAUEFVU0VEXCJcIlxyXG4gICAqL1xyXG4gIHBhdXNlQWN0aW9uVHlwZT86IHN0cmluZ1xyXG4gIC8qKlxyXG4gICAqIGF1dG8gcGF1c2VzIHdoZW4gdGhlIGV4dGVuc2lvbuKAmXMgd2luZG93IGlzIG5vdCBvcGVuZWQsIGFuZCBzbyBoYXMgemVybyBpbXBhY3Qgb24geW91ciBhcHAgd2hlbiBub3QgaW4gdXNlLlxyXG4gICAqIE5vdCBhdmFpbGFibGUgZm9yIFJlZHV4IGVuaGFuY2VyIChhcyBpdCBhbHJlYWR5IGRvZXMgaXQgYnV0IHN0b3JpbmcgdGhlIGRhdGEgdG8gYmUgc2VudCkuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBmYWxzZVxyXG4gICAqL1xyXG4gIGF1dG9QYXVzZT86IGJvb2xlYW5cclxuICAvKipcclxuICAgKiBpZiBzcGVjaWZpZWQgYXMgYHRydWVgLCBpdCB3aWxsIG5vdCBhbGxvdyBhbnkgbm9uLW1vbml0b3IgYWN0aW9ucyB0byBiZSBkaXNwYXRjaGVkIHRpbGwgY2xpY2tpbmcgb24gYFVubG9jayBjaGFuZ2VzYCBidXR0b24uXHJcbiAgICogQXZhaWxhYmxlIG9ubHkgZm9yIFJlZHV4IGVuaGFuY2VyLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgZmFsc2VcclxuICAgKi9cclxuICBzaG91bGRTdGFydExvY2tlZD86IGJvb2xlYW5cclxuICAvKipcclxuICAgKiBpZiBzZXQgdG8gYGZhbHNlYCwgd2lsbCBub3QgcmVjb21wdXRlIHRoZSBzdGF0ZXMgb24gaG90IHJlbG9hZGluZyAob3Igb24gcmVwbGFjaW5nIHRoZSByZWR1Y2VycykuIEF2YWlsYWJsZSBvbmx5IGZvciBSZWR1eCBlbmhhbmNlci5cclxuICAgKlxyXG4gICAqIEBkZWZhdWx0IHRydWVcclxuICAgKi9cclxuICBzaG91bGRIb3RSZWxvYWQ/OiBib29sZWFuXHJcbiAgLyoqXHJcbiAgICogaWYgc3BlY2lmaWVkIGFzIGB0cnVlYCwgd2hlbmV2ZXIgdGhlcmUncyBhbiBleGNlcHRpb24gaW4gcmVkdWNlcnMsIHRoZSBtb25pdG9ycyB3aWxsIHNob3cgdGhlIGVycm9yIG1lc3NhZ2UsIGFuZCBuZXh0IGFjdGlvbnMgd2lsbCBub3QgYmUgZGlzcGF0Y2hlZC5cclxuICAgKlxyXG4gICAqIEBkZWZhdWx0IGZhbHNlXHJcbiAgICovXHJcbiAgc2hvdWxkQ2F0Y2hFcnJvcnM/OiBib29sZWFuXHJcbiAgLyoqXHJcbiAgICogSWYgeW91IHdhbnQgdG8gcmVzdHJpY3QgdGhlIGV4dGVuc2lvbiwgc3BlY2lmeSB0aGUgZmVhdHVyZXMgeW91IGFsbG93LlxyXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIGFsbCBvZiB0aGUgZmVhdHVyZXMgYXJlIGVuYWJsZWQuIFdoZW4gc2V0IGFzIGFuIG9iamVjdCwgb25seSB0aG9zZSBpbmNsdWRlZCBhcyBgdHJ1ZWAgd2lsbCBiZSBhbGxvd2VkLlxyXG4gICAqIE5vdGUgdGhhdCBleGNlcHQgYHRydWVgL2BmYWxzZWAsIGBpbXBvcnRgIGFuZCBgZXhwb3J0YCBjYW4gYmUgc2V0IGFzIGBjdXN0b21gICh3aGljaCBpcyBieSBkZWZhdWx0IGZvciBSZWR1eCBlbmhhbmNlciksIG1lYW5pbmcgdGhhdCB0aGUgaW1wb3J0aW5nL2V4cG9ydGluZyBvY2N1cnMgb24gdGhlIGNsaWVudCBzaWRlLlxyXG4gICAqIE90aGVyd2lzZSwgeW91J2xsIGdldC9zZXQgdGhlIGRhdGEgcmlnaHQgZnJvbSB0aGUgbW9uaXRvciBwYXJ0LlxyXG4gICAqL1xyXG4gIGZlYXR1cmVzPzoge1xyXG4gICAgLyoqXHJcbiAgICAgKiBzdGFydC9wYXVzZSByZWNvcmRpbmcgb2YgZGlzcGF0Y2hlZCBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHBhdXNlPzogYm9vbGVhblxyXG4gICAgLyoqXHJcbiAgICAgKiBsb2NrL3VubG9jayBkaXNwYXRjaGluZyBhY3Rpb25zIGFuZCBzaWRlIGVmZmVjdHNcclxuICAgICAqL1xyXG4gICAgbG9jaz86IGJvb2xlYW5cclxuICAgIC8qKlxyXG4gICAgICogcGVyc2lzdCBzdGF0ZXMgb24gcGFnZSByZWxvYWRpbmdcclxuICAgICAqL1xyXG4gICAgcGVyc2lzdD86IGJvb2xlYW5cclxuICAgIC8qKlxyXG4gICAgICogZXhwb3J0IGhpc3Rvcnkgb2YgYWN0aW9ucyBpbiBhIGZpbGVcclxuICAgICAqL1xyXG4gICAgZXhwb3J0PzogYm9vbGVhbiB8ICdjdXN0b20nXHJcbiAgICAvKipcclxuICAgICAqIGltcG9ydCBoaXN0b3J5IG9mIGFjdGlvbnMgZnJvbSBhIGZpbGVcclxuICAgICAqL1xyXG4gICAgaW1wb3J0PzogYm9vbGVhbiB8ICdjdXN0b20nXHJcbiAgICAvKipcclxuICAgICAqIGp1bXAgYmFjayBhbmQgZm9ydGggKHRpbWUgdHJhdmVsbGluZylcclxuICAgICAqL1xyXG4gICAganVtcD86IGJvb2xlYW5cclxuICAgIC8qKlxyXG4gICAgICogc2tpcCAoY2FuY2VsKSBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHNraXA/OiBib29sZWFuXHJcbiAgICAvKipcclxuICAgICAqIGRyYWcgYW5kIGRyb3AgYWN0aW9ucyBpbiB0aGUgaGlzdG9yeSBsaXN0XHJcbiAgICAgKi9cclxuICAgIHJlb3JkZXI/OiBib29sZWFuXHJcbiAgICAvKipcclxuICAgICAqIGRpc3BhdGNoIGN1c3RvbSBhY3Rpb25zIG9yIGFjdGlvbiBjcmVhdG9yc1xyXG4gICAgICovXHJcbiAgICBkaXNwYXRjaD86IGJvb2xlYW5cclxuICAgIC8qKlxyXG4gICAgICogZ2VuZXJhdGUgdGVzdHMgZm9yIHRoZSBzZWxlY3RlZCBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHRlc3Q/OiBib29sZWFuXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFNldCB0byB0cnVlIG9yIGEgc3RhY2t0cmFjZS1yZXR1cm5pbmcgZnVuY3Rpb24gdG8gcmVjb3JkIGNhbGwgc3RhY2sgdHJhY2VzIGZvciBkaXNwYXRjaGVkIGFjdGlvbnMuXHJcbiAgICogRGVmYXVsdHMgdG8gZmFsc2UuXHJcbiAgICovXHJcbiAgdHJhY2U/OiBib29sZWFuIHwgKDxBIGV4dGVuZHMgQWN0aW9uPihhY3Rpb246IEEpID0+IHN0cmluZylcclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygc3RhY2sgdHJhY2UgZW50cmllcyB0byByZWNvcmQgcGVyIGFjdGlvbi4gRGVmYXVsdHMgdG8gMTAuXHJcbiAgICovXHJcbiAgdHJhY2VMaW1pdD86IG51bWJlclxyXG59XHJcblxyXG50eXBlIENvbXBvc2UgPSB0eXBlb2YgY29tcG9zZVxyXG5cclxuaW50ZXJmYWNlIENvbXBvc2VXaXRoRGV2VG9vbHMge1xyXG4gIChvcHRpb25zOiBEZXZUb29sc0VuaGFuY2VyT3B0aW9ucyk6IENvbXBvc2VcclxuICA8U3RvcmVFeHQ+KC4uLmZ1bmNzOiBTdG9yZUVuaGFuY2VyPFN0b3JlRXh0PltdKTogU3RvcmVFbmhhbmNlcjxTdG9yZUV4dD5cclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjb25zdCBjb21wb3NlV2l0aERldlRvb2xzOiBDb21wb3NlV2l0aERldlRvb2xzID1cclxuICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICh3aW5kb3cgYXMgYW55KS5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX19cclxuICAgID8gKHdpbmRvdyBhcyBhbnkpLl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX0NPTVBPU0VfX1xyXG4gICAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWRcclxuICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHJldHVybiBjb21wb3NlXHJcbiAgICAgICAgcmV0dXJuIGNvbXBvc2UuYXBwbHkobnVsbCwgYXJndW1lbnRzIGFzIGFueSBhcyBGdW5jdGlvbltdKVxyXG4gICAgICB9XHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGRldlRvb2xzRW5oYW5jZXI6IHtcclxuICAob3B0aW9uczogRGV2VG9vbHNFbmhhbmNlck9wdGlvbnMpOiBTdG9yZUVuaGFuY2VyPGFueT5cclxufSA9XHJcbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHdpbmRvdyBhcyBhbnkpLl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX19cclxuICAgID8gKHdpbmRvdyBhcyBhbnkpLl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX19cclxuICAgIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobm9vcCkge1xyXG4gICAgICAgICAgcmV0dXJuIG5vb3BcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuIiwiLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFzc2VkIHZhbHVlIGlzIFwicGxhaW5cIiBvYmplY3QsIGkuZS4gYW4gb2JqZWN0IHdob3NlXHJcbiAqIHByb3RvdHlwZSBpcyB0aGUgcm9vdCBgT2JqZWN0LnByb3RvdHlwZWAuIFRoaXMgaW5jbHVkZXMgb2JqZWN0cyBjcmVhdGVkXHJcbiAqIHVzaW5nIG9iamVjdCBsaXRlcmFscywgYnV0IG5vdCBmb3IgaW5zdGFuY2UgZm9yIGNsYXNzIGluc3RhbmNlcy5cclxuICpcclxuICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgYXJndW1lbnQgYXBwZWFycyB0byBiZSBhIHBsYWluIG9iamVjdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIG9iamVjdCB7XHJcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT09IG51bGwpIHJldHVybiBmYWxzZVxyXG5cclxuICBsZXQgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpXHJcbiAgaWYgKHByb3RvID09PSBudWxsKSByZXR1cm4gdHJ1ZVxyXG5cclxuICBsZXQgYmFzZVByb3RvID0gcHJvdG9cclxuICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGJhc2VQcm90bykgIT09IG51bGwpIHtcclxuICAgIGJhc2VQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihiYXNlUHJvdG8pXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcHJvdG8gPT09IGJhc2VQcm90b1xyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgTWlkZGxld2FyZSwgQW55QWN0aW9uIH0gZnJvbSAncmVkdXgnXHJcbmltcG9ydCB0eXBlIHsgVGh1bmtNaWRkbGV3YXJlIH0gZnJvbSAncmVkdXgtdGh1bmsnXHJcbmltcG9ydCB0aHVua01pZGRsZXdhcmUgZnJvbSAncmVkdXgtdGh1bmsnXHJcbmltcG9ydCB0eXBlIHsgSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlT3B0aW9ucyB9IGZyb20gJy4vaW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlJ1xyXG4vKiBQUk9EX1NUQVJUX1JFTU9WRV9VTUQgKi9cclxuaW1wb3J0IHsgY3JlYXRlSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlIH0gZnJvbSAnLi9pbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbi8qIFBST0RfU1RPUF9SRU1PVkVfVU1EICovXHJcblxyXG5pbXBvcnQgdHlwZSB7IFNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZU9wdGlvbnMgfSBmcm9tICcuL3NlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSdcclxuaW1wb3J0IHsgY3JlYXRlU2VyaWFsaXphYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlIH0gZnJvbSAnLi9zZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbmltcG9ydCB0eXBlIHsgRXhjbHVkZUZyb21UdXBsZSB9IGZyb20gJy4vdHNIZWxwZXJzJ1xyXG5pbXBvcnQgeyBNaWRkbGV3YXJlQXJyYXkgfSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuZnVuY3Rpb24gaXNCb29sZWFuKHg6IGFueSk6IHggaXMgYm9vbGVhbiB7XHJcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnYm9vbGVhbidcclxufVxyXG5cclxuaW50ZXJmYWNlIFRodW5rT3B0aW9uczxFID0gYW55PiB7XHJcbiAgZXh0cmFBcmd1bWVudDogRVxyXG59XHJcblxyXG5pbnRlcmZhY2UgR2V0RGVmYXVsdE1pZGRsZXdhcmVPcHRpb25zIHtcclxuICB0aHVuaz86IGJvb2xlYW4gfCBUaHVua09wdGlvbnNcclxuICBpbW11dGFibGVDaGVjaz86IGJvb2xlYW4gfCBJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVPcHRpb25zXHJcbiAgc2VyaWFsaXphYmxlQ2hlY2s/OiBib29sZWFuIHwgU2VyaWFsaXphYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlT3B0aW9uc1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBUaHVua01pZGRsZXdhcmVGb3I8XHJcbiAgUyxcclxuICBPIGV4dGVuZHMgR2V0RGVmYXVsdE1pZGRsZXdhcmVPcHRpb25zID0ge31cclxuPiA9IE8gZXh0ZW5kcyB7XHJcbiAgdGh1bms6IGZhbHNlXHJcbn1cclxuICA/IG5ldmVyXHJcbiAgOiBPIGV4dGVuZHMgeyB0aHVuazogeyBleHRyYUFyZ3VtZW50OiBpbmZlciBFIH0gfVxyXG4gID8gVGh1bmtNaWRkbGV3YXJlPFMsIEFueUFjdGlvbiwgRT5cclxuICA6IFRodW5rTWlkZGxld2FyZTxTLCBBbnlBY3Rpb24+XHJcblxyXG5leHBvcnQgdHlwZSBDdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmU8UyA9IGFueT4gPSA8XHJcbiAgTyBleHRlbmRzIFBhcnRpYWw8R2V0RGVmYXVsdE1pZGRsZXdhcmVPcHRpb25zPiA9IHtcclxuICAgIHRodW5rOiB0cnVlXHJcbiAgICBpbW11dGFibGVDaGVjazogdHJ1ZVxyXG4gICAgc2VyaWFsaXphYmxlQ2hlY2s6IHRydWVcclxuICB9XHJcbj4oXHJcbiAgb3B0aW9ucz86IE9cclxuKSA9PiBNaWRkbGV3YXJlQXJyYXk8RXhjbHVkZUZyb21UdXBsZTxbVGh1bmtNaWRkbGV3YXJlRm9yPFMsIE8+XSwgbmV2ZXI+PlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGN1cnJ5R2V0RGVmYXVsdE1pZGRsZXdhcmU8XHJcbiAgUyA9IGFueVxyXG4+KCk6IEN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZTxTPiB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIGN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZShvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gZ2V0RGVmYXVsdE1pZGRsZXdhcmUob3B0aW9ucylcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFueSBhcnJheSBjb250YWluaW5nIHRoZSBkZWZhdWx0IG1pZGRsZXdhcmUgaW5zdGFsbGVkIGJ5XHJcbiAqIGBjb25maWd1cmVTdG9yZSgpYC4gVXNlZnVsIGlmIHlvdSB3YW50IHRvIGNvbmZpZ3VyZSB5b3VyIHN0b3JlIHdpdGggYSBjdXN0b21cclxuICogYG1pZGRsZXdhcmVgIGFycmF5IGJ1dCBzdGlsbCBrZWVwIHRoZSBkZWZhdWx0IHNldC5cclxuICpcclxuICogQHJldHVybiBUaGUgZGVmYXVsdCBtaWRkbGV3YXJlIHVzZWQgYnkgYGNvbmZpZ3VyZVN0b3JlKClgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFByZWZlciB0byB1c2UgdGhlIGNhbGxiYWNrIG5vdGF0aW9uIGZvciB0aGUgYG1pZGRsZXdhcmVgIG9wdGlvbiBpbiBgY29uZmlndXJlU3RvcmVgXHJcbiAqIHRvIGFjY2VzcyBhIHByZS10eXBlZCBgZ2V0RGVmYXVsdE1pZGRsZXdhcmVgIGluc3RlYWQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE1pZGRsZXdhcmU8XHJcbiAgUyA9IGFueSxcclxuICBPIGV4dGVuZHMgUGFydGlhbDxHZXREZWZhdWx0TWlkZGxld2FyZU9wdGlvbnM+ID0ge1xyXG4gICAgdGh1bms6IHRydWVcclxuICAgIGltbXV0YWJsZUNoZWNrOiB0cnVlXHJcbiAgICBzZXJpYWxpemFibGVDaGVjazogdHJ1ZVxyXG4gIH1cclxuPihcclxuICBvcHRpb25zOiBPID0ge30gYXMgT1xyXG4pOiBNaWRkbGV3YXJlQXJyYXk8RXhjbHVkZUZyb21UdXBsZTxbVGh1bmtNaWRkbGV3YXJlRm9yPFMsIE8+XSwgbmV2ZXI+PiB7XHJcbiAgY29uc3Qge1xyXG4gICAgdGh1bmsgPSB0cnVlLFxyXG4gICAgaW1tdXRhYmxlQ2hlY2sgPSB0cnVlLFxyXG4gICAgc2VyaWFsaXphYmxlQ2hlY2sgPSB0cnVlLFxyXG4gIH0gPSBvcHRpb25zXHJcblxyXG4gIGxldCBtaWRkbGV3YXJlQXJyYXkgPSBuZXcgTWlkZGxld2FyZUFycmF5PE1pZGRsZXdhcmVbXT4oKVxyXG5cclxuICBpZiAodGh1bmspIHtcclxuICAgIGlmIChpc0Jvb2xlYW4odGh1bmspKSB7XHJcbiAgICAgIG1pZGRsZXdhcmVBcnJheS5wdXNoKHRodW5rTWlkZGxld2FyZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1pZGRsZXdhcmVBcnJheS5wdXNoKFxyXG4gICAgICAgIHRodW5rTWlkZGxld2FyZS53aXRoRXh0cmFBcmd1bWVudCh0aHVuay5leHRyYUFyZ3VtZW50KVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgaWYgKGltbXV0YWJsZUNoZWNrKSB7XHJcbiAgICAgIC8qIFBST0RfU1RBUlRfUkVNT1ZFX1VNRCAqL1xyXG4gICAgICBsZXQgaW1tdXRhYmxlT3B0aW9uczogSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlT3B0aW9ucyA9IHt9XHJcblxyXG4gICAgICBpZiAoIWlzQm9vbGVhbihpbW11dGFibGVDaGVjaykpIHtcclxuICAgICAgICBpbW11dGFibGVPcHRpb25zID0gaW1tdXRhYmxlQ2hlY2tcclxuICAgICAgfVxyXG5cclxuICAgICAgbWlkZGxld2FyZUFycmF5LnVuc2hpZnQoXHJcbiAgICAgICAgY3JlYXRlSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlKGltbXV0YWJsZU9wdGlvbnMpXHJcbiAgICAgIClcclxuICAgICAgLyogUFJPRF9TVE9QX1JFTU9WRV9VTUQgKi9cclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2VyaWFsaXphYmxlQ2hlY2spIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YWJsZU9wdGlvbnM6IFNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZU9wdGlvbnMgPSB7fVxyXG5cclxuICAgICAgaWYgKCFpc0Jvb2xlYW4oc2VyaWFsaXphYmxlQ2hlY2spKSB7XHJcbiAgICAgICAgc2VyaWFsaXphYmxlT3B0aW9ucyA9IHNlcmlhbGl6YWJsZUNoZWNrXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG1pZGRsZXdhcmVBcnJheS5wdXNoKFxyXG4gICAgICAgIGNyZWF0ZVNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZShzZXJpYWxpemFibGVPcHRpb25zKVxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbWlkZGxld2FyZUFycmF5IGFzIGFueVxyXG59XHJcbiIsImltcG9ydCBjcmVhdGVOZXh0U3RhdGUsIHsgaXNEcmFmdGFibGUgfSBmcm9tICdpbW1lcidcclxuaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlIH0gZnJvbSAncmVkdXgnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltZU1lYXN1cmVVdGlscyhtYXhEZWxheTogbnVtYmVyLCBmbk5hbWU6IHN0cmluZykge1xyXG4gIGxldCBlbGFwc2VkID0gMFxyXG4gIHJldHVybiB7XHJcbiAgICBtZWFzdXJlVGltZTxUPihmbjogKCkgPT4gVCk6IFQge1xyXG4gICAgICBjb25zdCBzdGFydGVkID0gRGF0ZS5ub3coKVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBmbigpXHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgY29uc3QgZmluaXNoZWQgPSBEYXRlLm5vdygpXHJcbiAgICAgICAgZWxhcHNlZCArPSBmaW5pc2hlZCAtIHN0YXJ0ZWRcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHdhcm5JZkV4Y2VlZGVkKCkge1xyXG4gICAgICBpZiAoZWxhcHNlZCA+IG1heERlbGF5KSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGAke2ZuTmFtZX0gdG9vayAke2VsYXBzZWR9bXMsIHdoaWNoIGlzIG1vcmUgdGhhbiB0aGUgd2FybmluZyB0aHJlc2hvbGQgb2YgJHttYXhEZWxheX1tcy4gXHJcbklmIHlvdXIgc3RhdGUgb3IgYWN0aW9ucyBhcmUgdmVyeSBsYXJnZSwgeW91IG1heSB3YW50IHRvIGRpc2FibGUgdGhlIG1pZGRsZXdhcmUgYXMgaXQgbWlnaHQgY2F1c2UgdG9vIG11Y2ggb2YgYSBzbG93ZG93biBpbiBkZXZlbG9wbWVudCBtb2RlLiBTZWUgaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy9hcGkvZ2V0RGVmYXVsdE1pZGRsZXdhcmUgZm9yIGluc3RydWN0aW9ucy5cclxuSXQgaXMgZGlzYWJsZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMsIHNvIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoYXQuYClcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxheShtczogbnVtYmVyKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNaWRkbGV3YXJlQXJyYXk8XHJcbiAgTWlkZGxld2FyZXMgZXh0ZW5kcyBNaWRkbGV3YXJlPGFueSwgYW55PltdXHJcbj4gZXh0ZW5kcyBBcnJheTxNaWRkbGV3YXJlc1tudW1iZXJdPiB7XHJcbiAgY29uc3RydWN0b3IoLi4uaXRlbXM6IE1pZGRsZXdhcmVzKVxyXG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICBzdXBlciguLi5hcmdzKVxyXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE1pZGRsZXdhcmVBcnJheS5wcm90b3R5cGUpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IFtTeW1ib2wuc3BlY2llc10oKSB7XHJcbiAgICByZXR1cm4gTWlkZGxld2FyZUFycmF5IGFzIGFueVxyXG4gIH1cclxuXHJcbiAgY29uY2F0PEFkZGl0aW9uYWxNaWRkbGV3YXJlcyBleHRlbmRzIFJlYWRvbmx5QXJyYXk8TWlkZGxld2FyZTxhbnksIGFueT4+PihcclxuICAgIGl0ZW1zOiBBZGRpdGlvbmFsTWlkZGxld2FyZXNcclxuICApOiBNaWRkbGV3YXJlQXJyYXk8Wy4uLk1pZGRsZXdhcmVzLCAuLi5BZGRpdGlvbmFsTWlkZGxld2FyZXNdPlxyXG5cclxuICBjb25jYXQ8QWRkaXRpb25hbE1pZGRsZXdhcmVzIGV4dGVuZHMgUmVhZG9ubHlBcnJheTxNaWRkbGV3YXJlPGFueSwgYW55Pj4+KFxyXG4gICAgLi4uaXRlbXM6IEFkZGl0aW9uYWxNaWRkbGV3YXJlc1xyXG4gICk6IE1pZGRsZXdhcmVBcnJheTxbLi4uTWlkZGxld2FyZXMsIC4uLkFkZGl0aW9uYWxNaWRkbGV3YXJlc10+XHJcbiAgY29uY2F0KC4uLmFycjogYW55W10pIHtcclxuICAgIHJldHVybiBzdXBlci5jb25jYXQuYXBwbHkodGhpcywgYXJyKVxyXG4gIH1cclxuXHJcbiAgcHJlcGVuZDxBZGRpdGlvbmFsTWlkZGxld2FyZXMgZXh0ZW5kcyBSZWFkb25seUFycmF5PE1pZGRsZXdhcmU8YW55LCBhbnk+Pj4oXHJcbiAgICBpdGVtczogQWRkaXRpb25hbE1pZGRsZXdhcmVzXHJcbiAgKTogTWlkZGxld2FyZUFycmF5PFsuLi5BZGRpdGlvbmFsTWlkZGxld2FyZXMsIC4uLk1pZGRsZXdhcmVzXT5cclxuXHJcbiAgcHJlcGVuZDxBZGRpdGlvbmFsTWlkZGxld2FyZXMgZXh0ZW5kcyBSZWFkb25seUFycmF5PE1pZGRsZXdhcmU8YW55LCBhbnk+Pj4oXHJcbiAgICAuLi5pdGVtczogQWRkaXRpb25hbE1pZGRsZXdhcmVzXHJcbiAgKTogTWlkZGxld2FyZUFycmF5PFsuLi5BZGRpdGlvbmFsTWlkZGxld2FyZXMsIC4uLk1pZGRsZXdhcmVzXT5cclxuXHJcbiAgcHJlcGVuZCguLi5hcnI6IGFueVtdKSB7XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGFyclswXSkpIHtcclxuICAgICAgcmV0dXJuIG5ldyBNaWRkbGV3YXJlQXJyYXkoLi4uYXJyWzBdLmNvbmNhdCh0aGlzKSlcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgTWlkZGxld2FyZUFycmF5KC4uLmFyci5jb25jYXQodGhpcykpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZnJlZXplRHJhZnRhYmxlPFQ+KHZhbDogVCkge1xyXG4gIHJldHVybiBpc0RyYWZ0YWJsZSh2YWwpID8gY3JlYXRlTmV4dFN0YXRlKHZhbCwgKCkgPT4ge30pIDogdmFsXHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlIH0gZnJvbSAncmVkdXgnXHJcbmltcG9ydCB7IGdldFRpbWVNZWFzdXJlVXRpbHMgfSBmcm9tICcuL3V0aWxzJ1xyXG5cclxudHlwZSBFbnRyeVByb2Nlc3NvciA9IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gYW55XHJcblxyXG5jb25zdCBpc1Byb2R1Y3Rpb246IGJvb2xlYW4gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXHJcbmNvbnN0IHByZWZpeDogc3RyaW5nID0gJ0ludmFyaWFudCBmYWlsZWQnXHJcblxyXG4vLyBUaHJvdyBhbiBlcnJvciBpZiB0aGUgY29uZGl0aW9uIGZhaWxzXHJcbi8vIFN0cmlwIG91dCBlcnJvciBtZXNzYWdlcyBmb3IgcHJvZHVjdGlvblxyXG4vLyA+IE5vdCBwcm92aWRpbmcgYW4gaW5saW5lIGRlZmF1bHQgYXJndW1lbnQgZm9yIG1lc3NhZ2UgYXMgdGhlIHJlc3VsdCBpcyBzbWFsbGVyXHJcbmZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb246IGFueSwgbWVzc2FnZT86IHN0cmluZykge1xyXG4gIGlmIChjb25kaXRpb24pIHtcclxuICAgIHJldHVyblxyXG4gIH1cclxuICAvLyBDb25kaXRpb24gbm90IHBhc3NlZFxyXG5cclxuICAvLyBJbiBwcm9kdWN0aW9uIHdlIHN0cmlwIHRoZSBtZXNzYWdlIGJ1dCBzdGlsbCB0aHJvd1xyXG4gIGlmIChpc1Byb2R1Y3Rpb24pIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihwcmVmaXgpXHJcbiAgfVxyXG5cclxuICAvLyBXaGVuIG5vdCBpbiBwcm9kdWN0aW9uIHdlIGFsbG93IHRoZSBtZXNzYWdlIHRvIHBhc3MgdGhyb3VnaFxyXG4gIC8vICpUaGlzIGJsb2NrIHdpbGwgYmUgcmVtb3ZlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcypcclxuICB0aHJvdyBuZXcgRXJyb3IoYCR7cHJlZml4fTogJHttZXNzYWdlIHx8ICcnfWApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShcclxuICBvYmo6IGFueSxcclxuICBzZXJpYWxpemVyPzogRW50cnlQcm9jZXNzb3IsXHJcbiAgaW5kZW50Pzogc3RyaW5nIHwgbnVtYmVyLFxyXG4gIGRlY3ljbGVyPzogRW50cnlQcm9jZXNzb3JcclxuKTogc3RyaW5nIHtcclxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBnZXRTZXJpYWxpemUoc2VyaWFsaXplciwgZGVjeWNsZXIpLCBpbmRlbnQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNlcmlhbGl6ZShcclxuICBzZXJpYWxpemVyPzogRW50cnlQcm9jZXNzb3IsXHJcbiAgZGVjeWNsZXI/OiBFbnRyeVByb2Nlc3NvclxyXG4pOiBFbnRyeVByb2Nlc3NvciB7XHJcbiAgbGV0IHN0YWNrOiBhbnlbXSA9IFtdLFxyXG4gICAga2V5czogYW55W10gPSBbXVxyXG5cclxuICBpZiAoIWRlY3ljbGVyKVxyXG4gICAgZGVjeWNsZXIgPSBmdW5jdGlvbiAoXzogc3RyaW5nLCB2YWx1ZTogYW55KSB7XHJcbiAgICAgIGlmIChzdGFja1swXSA9PT0gdmFsdWUpIHJldHVybiAnW0NpcmN1bGFyIH5dJ1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgICdbQ2lyY3VsYXIgfi4nICsga2V5cy5zbGljZSgwLCBzdGFjay5pbmRleE9mKHZhbHVlKSkuam9pbignLicpICsgJ10nXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBhbnksIGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XHJcbiAgICBpZiAoc3RhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICB2YXIgdGhpc1BvcyA9IHN0YWNrLmluZGV4T2YodGhpcylcclxuICAgICAgfnRoaXNQb3MgPyBzdGFjay5zcGxpY2UodGhpc1BvcyArIDEpIDogc3RhY2sucHVzaCh0aGlzKVxyXG4gICAgICB+dGhpc1BvcyA/IGtleXMuc3BsaWNlKHRoaXNQb3MsIEluZmluaXR5LCBrZXkpIDoga2V5cy5wdXNoKGtleSlcclxuICAgICAgaWYgKH5zdGFjay5pbmRleE9mKHZhbHVlKSkgdmFsdWUgPSBkZWN5Y2xlciEuY2FsbCh0aGlzLCBrZXksIHZhbHVlKVxyXG4gICAgfSBlbHNlIHN0YWNrLnB1c2godmFsdWUpXHJcblxyXG4gICAgcmV0dXJuIHNlcmlhbGl6ZXIgPT0gbnVsbCA/IHZhbHVlIDogc2VyaWFsaXplci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYGlzSW1tdXRhYmxlYCBmdW5jdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzSW1tdXRhYmxlRGVmYXVsdCh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4ge1xyXG4gIHJldHVybiB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09IG51bGwgfHwgT2JqZWN0LmlzRnJvemVuKHZhbHVlKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdHJhY2tGb3JNdXRhdGlvbnMoXHJcbiAgaXNJbW11dGFibGU6IElzSW1tdXRhYmxlRnVuYyxcclxuICBpZ25vcmVQYXRoczogSWdub3JlUGF0aHMgfCB1bmRlZmluZWQsXHJcbiAgb2JqOiBhbnlcclxuKSB7XHJcbiAgY29uc3QgdHJhY2tlZFByb3BlcnRpZXMgPSB0cmFja1Byb3BlcnRpZXMoaXNJbW11dGFibGUsIGlnbm9yZVBhdGhzLCBvYmopXHJcbiAgcmV0dXJuIHtcclxuICAgIGRldGVjdE11dGF0aW9ucygpIHtcclxuICAgICAgcmV0dXJuIGRldGVjdE11dGF0aW9ucyhpc0ltbXV0YWJsZSwgaWdub3JlUGF0aHMsIHRyYWNrZWRQcm9wZXJ0aWVzLCBvYmopXHJcbiAgICB9LFxyXG4gIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFRyYWNrZWRQcm9wZXJ0eSB7XHJcbiAgdmFsdWU6IGFueVxyXG4gIGNoaWxkcmVuOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyYWNrUHJvcGVydGllcyhcclxuICBpc0ltbXV0YWJsZTogSXNJbW11dGFibGVGdW5jLFxyXG4gIGlnbm9yZVBhdGhzOiBJZ25vcmVQYXRocyA9IFtdLFxyXG4gIG9iajogUmVjb3JkPHN0cmluZywgYW55PixcclxuICBwYXRoOiBzdHJpbmcgPSAnJ1xyXG4pIHtcclxuICBjb25zdCB0cmFja2VkOiBQYXJ0aWFsPFRyYWNrZWRQcm9wZXJ0eT4gPSB7IHZhbHVlOiBvYmogfVxyXG5cclxuICBpZiAoIWlzSW1tdXRhYmxlKG9iaikpIHtcclxuICAgIHRyYWNrZWQuY2hpbGRyZW4gPSB7fVxyXG5cclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICBjb25zdCBjaGlsZFBhdGggPSBwYXRoID8gcGF0aCArICcuJyArIGtleSA6IGtleVxyXG4gICAgICBpZiAoaWdub3JlUGF0aHMubGVuZ3RoICYmIGlnbm9yZVBhdGhzLmluZGV4T2YoY2hpbGRQYXRoKSAhPT0gLTEpIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0cmFja2VkLmNoaWxkcmVuW2tleV0gPSB0cmFja1Byb3BlcnRpZXMoXHJcbiAgICAgICAgaXNJbW11dGFibGUsXHJcbiAgICAgICAgaWdub3JlUGF0aHMsXHJcbiAgICAgICAgb2JqW2tleV0sXHJcbiAgICAgICAgY2hpbGRQYXRoXHJcbiAgICAgIClcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRyYWNrZWQgYXMgVHJhY2tlZFByb3BlcnR5XHJcbn1cclxuXHJcbnR5cGUgSWdub3JlUGF0aHMgPSByZWFkb25seSAoc3RyaW5nIHwgUmVnRXhwKVtdXHJcblxyXG5mdW5jdGlvbiBkZXRlY3RNdXRhdGlvbnMoXHJcbiAgaXNJbW11dGFibGU6IElzSW1tdXRhYmxlRnVuYyxcclxuICBpZ25vcmVkUGF0aHM6IElnbm9yZVBhdGhzID0gW10sXHJcbiAgdHJhY2tlZFByb3BlcnR5OiBUcmFja2VkUHJvcGVydHksXHJcbiAgb2JqOiBhbnksXHJcbiAgc2FtZVBhcmVudFJlZjogYm9vbGVhbiA9IGZhbHNlLFxyXG4gIHBhdGg6IHN0cmluZyA9ICcnXHJcbik6IHsgd2FzTXV0YXRlZDogYm9vbGVhbjsgcGF0aD86IHN0cmluZyB9IHtcclxuICBjb25zdCBwcmV2T2JqID0gdHJhY2tlZFByb3BlcnR5ID8gdHJhY2tlZFByb3BlcnR5LnZhbHVlIDogdW5kZWZpbmVkXHJcblxyXG4gIGNvbnN0IHNhbWVSZWYgPSBwcmV2T2JqID09PSBvYmpcclxuXHJcbiAgaWYgKHNhbWVQYXJlbnRSZWYgJiYgIXNhbWVSZWYgJiYgIU51bWJlci5pc05hTihvYmopKSB7XHJcbiAgICByZXR1cm4geyB3YXNNdXRhdGVkOiB0cnVlLCBwYXRoIH1cclxuICB9XHJcblxyXG4gIGlmIChpc0ltbXV0YWJsZShwcmV2T2JqKSB8fCBpc0ltbXV0YWJsZShvYmopKSB7XHJcbiAgICByZXR1cm4geyB3YXNNdXRhdGVkOiBmYWxzZSB9XHJcbiAgfVxyXG5cclxuICAvLyBHYXRoZXIgYWxsIGtleXMgZnJvbSBwcmV2ICh0cmFja2VkKSBhbmQgYWZ0ZXIgb2Jqc1xyXG4gIGNvbnN0IGtleXNUb0RldGVjdDogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7fVxyXG4gIGZvciAobGV0IGtleSBpbiB0cmFja2VkUHJvcGVydHkuY2hpbGRyZW4pIHtcclxuICAgIGtleXNUb0RldGVjdFtrZXldID0gdHJ1ZVxyXG4gIH1cclxuICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XHJcbiAgICBrZXlzVG9EZXRlY3Rba2V5XSA9IHRydWVcclxuICB9XHJcblxyXG4gIGNvbnN0IGhhc0lnbm9yZWRQYXRocyA9IGlnbm9yZWRQYXRocy5sZW5ndGggPiAwXHJcblxyXG4gIGZvciAobGV0IGtleSBpbiBrZXlzVG9EZXRlY3QpIHtcclxuICAgIGNvbnN0IG5lc3RlZFBhdGggPSBwYXRoID8gcGF0aCArICcuJyArIGtleSA6IGtleVxyXG5cclxuICAgIGlmIChoYXNJZ25vcmVkUGF0aHMpIHtcclxuICAgICAgY29uc3QgaGFzTWF0Y2hlcyA9IGlnbm9yZWRQYXRocy5zb21lKChpZ25vcmVkKSA9PiB7XHJcbiAgICAgICAgaWYgKGlnbm9yZWQgaW5zdGFuY2VvZiBSZWdFeHApIHtcclxuICAgICAgICAgIHJldHVybiBpZ25vcmVkLnRlc3QobmVzdGVkUGF0aClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5lc3RlZFBhdGggPT09IGlnbm9yZWRcclxuICAgICAgfSlcclxuICAgICAgaWYgKGhhc01hdGNoZXMpIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gZGV0ZWN0TXV0YXRpb25zKFxyXG4gICAgICBpc0ltbXV0YWJsZSxcclxuICAgICAgaWdub3JlZFBhdGhzLFxyXG4gICAgICB0cmFja2VkUHJvcGVydHkuY2hpbGRyZW5ba2V5XSxcclxuICAgICAgb2JqW2tleV0sXHJcbiAgICAgIHNhbWVSZWYsXHJcbiAgICAgIG5lc3RlZFBhdGhcclxuICAgIClcclxuXHJcbiAgICBpZiAocmVzdWx0Lndhc011dGF0ZWQpIHtcclxuICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4geyB3YXNNdXRhdGVkOiBmYWxzZSB9XHJcbn1cclxuXHJcbnR5cGUgSXNJbW11dGFibGVGdW5jID0gKHZhbHVlOiBhbnkpID0+IGJvb2xlYW5cclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciBgY3JlYXRlSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlKClgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZU9wdGlvbnMge1xyXG4gIC8qKlxyXG4gICAgQ2FsbGJhY2sgZnVuY3Rpb24gdG8gY2hlY2sgaWYgYSB2YWx1ZSBpcyBjb25zaWRlcmVkIHRvIGJlIGltbXV0YWJsZS5cclxuICAgIFRoaXMgZnVuY3Rpb24gaXMgYXBwbGllZCByZWN1cnNpdmVseSB0byBldmVyeSB2YWx1ZSBjb250YWluZWQgaW4gdGhlIHN0YXRlLlxyXG4gICAgVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gd2lsbCByZXR1cm4gdHJ1ZSBmb3IgcHJpbWl0aXZlIHR5cGVzIFxyXG4gICAgKGxpa2UgbnVtYmVycywgc3RyaW5ncywgYm9vbGVhbnMsIG51bGwgYW5kIHVuZGVmaW5lZCkuXHJcbiAgICovXHJcbiAgaXNJbW11dGFibGU/OiBJc0ltbXV0YWJsZUZ1bmNcclxuICAvKiogXHJcbiAgICBBbiBhcnJheSBvZiBkb3Qtc2VwYXJhdGVkIHBhdGggc3RyaW5ncyB0aGF0IG1hdGNoIG5hbWVkIG5vZGVzIGZyb20gXHJcbiAgICB0aGUgcm9vdCBzdGF0ZSB0byBpZ25vcmUgd2hlbiBjaGVja2luZyBmb3IgaW1tdXRhYmlsaXR5LlxyXG4gICAgRGVmYXVsdHMgdG8gdW5kZWZpbmVkXHJcbiAgICovXHJcbiAgaWdub3JlZFBhdGhzPzogSWdub3JlUGF0aHNcclxuICAvKiogUHJpbnQgYSB3YXJuaW5nIGlmIGNoZWNrcyB0YWtlIGxvbmdlciB0aGFuIE4gbXMuIERlZmF1bHQ6IDMybXMgKi9cclxuICB3YXJuQWZ0ZXI/OiBudW1iZXJcclxuICAvLyBAZGVwcmVjYXRlZC4gVXNlIGlnbm9yZWRQYXRoc1xyXG4gIGlnbm9yZT86IHN0cmluZ1tdXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWlkZGxld2FyZSB0aGF0IGNoZWNrcyB3aGV0aGVyIGFueSBzdGF0ZSB3YXMgbXV0YXRlZCBpbiBiZXR3ZWVuXHJcbiAqIGRpc3BhdGNoZXMgb3IgZHVyaW5nIGEgZGlzcGF0Y2guIElmIGFueSBtdXRhdGlvbnMgYXJlIGRldGVjdGVkLCBhbiBlcnJvciBpc1xyXG4gKiB0aHJvd24uXHJcbiAqXHJcbiAqIEBwYXJhbSBvcHRpb25zIE1pZGRsZXdhcmUgb3B0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZShcclxuICBvcHRpb25zOiBJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVPcHRpb25zID0ge31cclxuKTogTWlkZGxld2FyZSB7XHJcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcclxuICAgIHJldHVybiAoKSA9PiAobmV4dCkgPT4gKGFjdGlvbikgPT4gbmV4dChhY3Rpb24pXHJcbiAgfVxyXG5cclxuICBsZXQge1xyXG4gICAgaXNJbW11dGFibGUgPSBpc0ltbXV0YWJsZURlZmF1bHQsXHJcbiAgICBpZ25vcmVkUGF0aHMsXHJcbiAgICB3YXJuQWZ0ZXIgPSAzMixcclxuICAgIGlnbm9yZSxcclxuICB9ID0gb3B0aW9uc1xyXG5cclxuICAvLyBBbGlhcyBpZ25vcmUtPmlnbm9yZWRQYXRocywgYnV0IHByZWZlciBpZ25vcmVkUGF0aHMgaWYgcHJlc2VudFxyXG4gIGlnbm9yZWRQYXRocyA9IGlnbm9yZWRQYXRocyB8fCBpZ25vcmVcclxuXHJcbiAgY29uc3QgdHJhY2sgPSB0cmFja0Zvck11dGF0aW9ucy5iaW5kKG51bGwsIGlzSW1tdXRhYmxlLCBpZ25vcmVkUGF0aHMpXHJcblxyXG4gIHJldHVybiAoeyBnZXRTdGF0ZSB9KSA9PiB7XHJcbiAgICBsZXQgc3RhdGUgPSBnZXRTdGF0ZSgpXHJcbiAgICBsZXQgdHJhY2tlciA9IHRyYWNrKHN0YXRlKVxyXG5cclxuICAgIGxldCByZXN1bHRcclxuICAgIHJldHVybiAobmV4dCkgPT4gKGFjdGlvbikgPT4ge1xyXG4gICAgICBjb25zdCBtZWFzdXJlVXRpbHMgPSBnZXRUaW1lTWVhc3VyZVV0aWxzKFxyXG4gICAgICAgIHdhcm5BZnRlcixcclxuICAgICAgICAnSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlJ1xyXG4gICAgICApXHJcblxyXG4gICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoKCkgPT4ge1xyXG4gICAgICAgIHN0YXRlID0gZ2V0U3RhdGUoKVxyXG5cclxuICAgICAgICByZXN1bHQgPSB0cmFja2VyLmRldGVjdE11dGF0aW9ucygpXHJcbiAgICAgICAgLy8gVHJhY2sgYmVmb3JlIHBvdGVudGlhbGx5IG5vdCBtZWV0aW5nIHRoZSBpbnZhcmlhbnRcclxuICAgICAgICB0cmFja2VyID0gdHJhY2soc3RhdGUpXHJcblxyXG4gICAgICAgIGludmFyaWFudChcclxuICAgICAgICAgICFyZXN1bHQud2FzTXV0YXRlZCxcclxuICAgICAgICAgIGBBIHN0YXRlIG11dGF0aW9uIHdhcyBkZXRlY3RlZCBiZXR3ZWVuIGRpc3BhdGNoZXMsIGluIHRoZSBwYXRoICcke1xyXG4gICAgICAgICAgICByZXN1bHQucGF0aCB8fCAnJ1xyXG4gICAgICAgICAgfScuICBUaGlzIG1heSBjYXVzZSBpbmNvcnJlY3QgYmVoYXZpb3IuIChodHRwczovL3JlZHV4LmpzLm9yZy9zdHlsZS1ndWlkZS9zdHlsZS1ndWlkZSNkby1ub3QtbXV0YXRlLXN0YXRlKWBcclxuICAgICAgICApXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zdCBkaXNwYXRjaGVkQWN0aW9uID0gbmV4dChhY3Rpb24pXHJcblxyXG4gICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoKCkgPT4ge1xyXG4gICAgICAgIHN0YXRlID0gZ2V0U3RhdGUoKVxyXG5cclxuICAgICAgICByZXN1bHQgPSB0cmFja2VyLmRldGVjdE11dGF0aW9ucygpXHJcbiAgICAgICAgLy8gVHJhY2sgYmVmb3JlIHBvdGVudGlhbGx5IG5vdCBtZWV0aW5nIHRoZSBpbnZhcmlhbnRcclxuICAgICAgICB0cmFja2VyID0gdHJhY2soc3RhdGUpXHJcblxyXG4gICAgICAgIHJlc3VsdC53YXNNdXRhdGVkICYmXHJcbiAgICAgICAgICBpbnZhcmlhbnQoXHJcbiAgICAgICAgICAgICFyZXN1bHQud2FzTXV0YXRlZCxcclxuICAgICAgICAgICAgYEEgc3RhdGUgbXV0YXRpb24gd2FzIGRldGVjdGVkIGluc2lkZSBhIGRpc3BhdGNoLCBpbiB0aGUgcGF0aDogJHtcclxuICAgICAgICAgICAgICByZXN1bHQucGF0aCB8fCAnJ1xyXG4gICAgICAgICAgICB9LiBUYWtlIGEgbG9vayBhdCB0aGUgcmVkdWNlcihzKSBoYW5kbGluZyB0aGUgYWN0aW9uICR7c3RyaW5naWZ5KFxyXG4gICAgICAgICAgICAgIGFjdGlvblxyXG4gICAgICAgICAgICApfS4gKGh0dHBzOi8vcmVkdXguanMub3JnL3N0eWxlLWd1aWRlL3N0eWxlLWd1aWRlI2RvLW5vdC1tdXRhdGUtc3RhdGUpYFxyXG4gICAgICAgICAgKVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgbWVhc3VyZVV0aWxzLndhcm5JZkV4Y2VlZGVkKClcclxuXHJcbiAgICAgIHJldHVybiBkaXNwYXRjaGVkQWN0aW9uXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBpc1BsYWluT2JqZWN0IGZyb20gJy4vaXNQbGFpbk9iamVjdCdcclxuaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlIH0gZnJvbSAncmVkdXgnXHJcbmltcG9ydCB7IGdldFRpbWVNZWFzdXJlVXRpbHMgfSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFzc2VkIHZhbHVlIGlzIFwicGxhaW5cIiwgaS5lLiBhIHZhbHVlIHRoYXQgaXMgZWl0aGVyXHJcbiAqIGRpcmVjdGx5IEpTT04tc2VyaWFsaXphYmxlIChib29sZWFuLCBudW1iZXIsIHN0cmluZywgYXJyYXksIHBsYWluIG9iamVjdClcclxuICogb3IgYHVuZGVmaW5lZGAuXHJcbiAqXHJcbiAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNQbGFpbih2YWw6IGFueSkge1xyXG4gIGNvbnN0IHR5cGUgPSB0eXBlb2YgdmFsXHJcbiAgcmV0dXJuIChcclxuICAgIHZhbCA9PSBudWxsIHx8XHJcbiAgICB0eXBlID09PSAnc3RyaW5nJyB8fFxyXG4gICAgdHlwZSA9PT0gJ2Jvb2xlYW4nIHx8XHJcbiAgICB0eXBlID09PSAnbnVtYmVyJyB8fFxyXG4gICAgQXJyYXkuaXNBcnJheSh2YWwpIHx8XHJcbiAgICBpc1BsYWluT2JqZWN0KHZhbClcclxuICApXHJcbn1cclxuXHJcbmludGVyZmFjZSBOb25TZXJpYWxpemFibGVWYWx1ZSB7XHJcbiAga2V5UGF0aDogc3RyaW5nXHJcbiAgdmFsdWU6IHVua25vd25cclxufVxyXG5cclxudHlwZSBJZ25vcmVQYXRocyA9IHJlYWRvbmx5IChzdHJpbmcgfCBSZWdFeHApW11cclxuXHJcbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKFxyXG4gIHZhbHVlOiB1bmtub3duLFxyXG4gIHBhdGg6IHN0cmluZyA9ICcnLFxyXG4gIGlzU2VyaWFsaXphYmxlOiAodmFsdWU6IHVua25vd24pID0+IGJvb2xlYW4gPSBpc1BsYWluLFxyXG4gIGdldEVudHJpZXM/OiAodmFsdWU6IHVua25vd24pID0+IFtzdHJpbmcsIGFueV1bXSxcclxuICBpZ25vcmVkUGF0aHM6IElnbm9yZVBhdGhzID0gW10sXHJcbiAgY2FjaGU/OiBXZWFrU2V0PG9iamVjdD5cclxuKTogTm9uU2VyaWFsaXphYmxlVmFsdWUgfCBmYWxzZSB7XHJcbiAgbGV0IGZvdW5kTmVzdGVkU2VyaWFsaXphYmxlOiBOb25TZXJpYWxpemFibGVWYWx1ZSB8IGZhbHNlXHJcblxyXG4gIGlmICghaXNTZXJpYWxpemFibGUodmFsdWUpKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBrZXlQYXRoOiBwYXRoIHx8ICc8cm9vdD4nLFxyXG4gICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICBpZiAoY2FjaGU/Lmhhcyh2YWx1ZSkpIHJldHVybiBmYWxzZVxyXG5cclxuICBjb25zdCBlbnRyaWVzID0gZ2V0RW50cmllcyAhPSBudWxsID8gZ2V0RW50cmllcyh2YWx1ZSkgOiBPYmplY3QuZW50cmllcyh2YWx1ZSlcclxuXHJcbiAgY29uc3QgaGFzSWdub3JlZFBhdGhzID0gaWdub3JlZFBhdGhzLmxlbmd0aCA+IDBcclxuXHJcbiAgZm9yIChjb25zdCBba2V5LCBuZXN0ZWRWYWx1ZV0gb2YgZW50cmllcykge1xyXG4gICAgY29uc3QgbmVzdGVkUGF0aCA9IHBhdGggPyBwYXRoICsgJy4nICsga2V5IDoga2V5XHJcblxyXG4gICAgaWYgKGhhc0lnbm9yZWRQYXRocykge1xyXG4gICAgICBjb25zdCBoYXNNYXRjaGVzID0gaWdub3JlZFBhdGhzLnNvbWUoKGlnbm9yZWQpID0+IHtcclxuICAgICAgICBpZiAoaWdub3JlZCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xyXG4gICAgICAgICAgcmV0dXJuIGlnbm9yZWQudGVzdChuZXN0ZWRQYXRoKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmVzdGVkUGF0aCA9PT0gaWdub3JlZFxyXG4gICAgICB9KVxyXG4gICAgICBpZiAoaGFzTWF0Y2hlcykge1xyXG4gICAgICAgIGNvbnRpbnVlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWlzU2VyaWFsaXphYmxlKG5lc3RlZFZhbHVlKSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGtleVBhdGg6IG5lc3RlZFBhdGgsXHJcbiAgICAgICAgdmFsdWU6IG5lc3RlZFZhbHVlLFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBuZXN0ZWRWYWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgZm91bmROZXN0ZWRTZXJpYWxpemFibGUgPSBmaW5kTm9uU2VyaWFsaXphYmxlVmFsdWUoXHJcbiAgICAgICAgbmVzdGVkVmFsdWUsXHJcbiAgICAgICAgbmVzdGVkUGF0aCxcclxuICAgICAgICBpc1NlcmlhbGl6YWJsZSxcclxuICAgICAgICBnZXRFbnRyaWVzLFxyXG4gICAgICAgIGlnbm9yZWRQYXRocyxcclxuICAgICAgICBjYWNoZVxyXG4gICAgICApXHJcblxyXG4gICAgICBpZiAoZm91bmROZXN0ZWRTZXJpYWxpemFibGUpIHtcclxuICAgICAgICByZXR1cm4gZm91bmROZXN0ZWRTZXJpYWxpemFibGVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGNhY2hlICYmIGlzTmVzdGVkRnJvemVuKHZhbHVlKSkgY2FjaGUuYWRkKHZhbHVlKVxyXG5cclxuICByZXR1cm4gZmFsc2VcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTmVzdGVkRnJvemVuKHZhbHVlOiBvYmplY3QpIHtcclxuICBpZiAoIU9iamVjdC5pc0Zyb3plbih2YWx1ZSkpIHJldHVybiBmYWxzZVxyXG5cclxuICBmb3IgKGNvbnN0IG5lc3RlZFZhbHVlIG9mIE9iamVjdC52YWx1ZXModmFsdWUpKSB7XHJcbiAgICBpZiAodHlwZW9mIG5lc3RlZFZhbHVlICE9PSAnb2JqZWN0JyB8fCBuZXN0ZWRWYWx1ZSA9PT0gbnVsbCkgY29udGludWVcclxuXHJcbiAgICBpZiAoIWlzTmVzdGVkRnJvemVuKG5lc3RlZFZhbHVlKSkgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZVxyXG59XHJcblxyXG4vKipcclxuICogT3B0aW9ucyBmb3IgYGNyZWF0ZVNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSgpYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVPcHRpb25zIHtcclxuICAvKipcclxuICAgKiBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgaWYgYSB2YWx1ZSBpcyBjb25zaWRlcmVkIHNlcmlhbGl6YWJsZS4gVGhpc1xyXG4gICAqIGZ1bmN0aW9uIGlzIGFwcGxpZWQgcmVjdXJzaXZlbHkgdG8gZXZlcnkgdmFsdWUgY29udGFpbmVkIGluIHRoZVxyXG4gICAqIHN0YXRlLiBEZWZhdWx0cyB0byBgaXNQbGFpbigpYC5cclxuICAgKi9cclxuICBpc1NlcmlhbGl6YWJsZT86ICh2YWx1ZTogYW55KSA9PiBib29sZWFuXHJcbiAgLyoqXHJcbiAgICogVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSB1c2VkIHRvIHJldHJpZXZlIGVudHJpZXMgZnJvbSBlYWNoXHJcbiAgICogdmFsdWUuICBJZiB1bnNwZWNpZmllZCwgYE9iamVjdC5lbnRyaWVzYCB3aWxsIGJlIHVzZWQuIERlZmF1bHRzXHJcbiAgICogdG8gYHVuZGVmaW5lZGAuXHJcbiAgICovXHJcbiAgZ2V0RW50cmllcz86ICh2YWx1ZTogYW55KSA9PiBbc3RyaW5nLCBhbnldW11cclxuXHJcbiAgLyoqXHJcbiAgICogQW4gYXJyYXkgb2YgYWN0aW9uIHR5cGVzIHRvIGlnbm9yZSB3aGVuIGNoZWNraW5nIGZvciBzZXJpYWxpemFiaWxpdHkuXHJcbiAgICogRGVmYXVsdHMgdG8gW11cclxuICAgKi9cclxuICBpZ25vcmVkQWN0aW9ucz86IHN0cmluZ1tdXHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGFycmF5IG9mIGRvdC1zZXBhcmF0ZWQgcGF0aCBzdHJpbmdzIG9yIHJlZ3VsYXIgZXhwcmVzc2lvbnMgdG8gaWdub3JlXHJcbiAgICogd2hlbiBjaGVja2luZyBmb3Igc2VyaWFsaXphYmlsaXR5LCBEZWZhdWx0cyB0b1xyXG4gICAqIFsnbWV0YS5hcmcnLCAnbWV0YS5iYXNlUXVlcnlNZXRhJ11cclxuICAgKi9cclxuICBpZ25vcmVkQWN0aW9uUGF0aHM/OiAoc3RyaW5nIHwgUmVnRXhwKVtdXHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGFycmF5IG9mIGRvdC1zZXBhcmF0ZWQgcGF0aCBzdHJpbmdzIG9yIHJlZ3VsYXIgZXhwcmVzc2lvbnMgdG8gaWdub3JlXHJcbiAgICogd2hlbiBjaGVja2luZyBmb3Igc2VyaWFsaXphYmlsaXR5LCBEZWZhdWx0cyB0byBbXVxyXG4gICAqL1xyXG4gIGlnbm9yZWRQYXRocz86IChzdHJpbmcgfCBSZWdFeHApW11cclxuICAvKipcclxuICAgKiBFeGVjdXRpb24gdGltZSB3YXJuaW5nIHRocmVzaG9sZC4gSWYgdGhlIG1pZGRsZXdhcmUgdGFrZXMgbG9uZ2VyXHJcbiAgICogdGhhbiBgd2FybkFmdGVyYCBtcywgYSB3YXJuaW5nIHdpbGwgYmUgZGlzcGxheWVkIGluIHRoZSBjb25zb2xlLlxyXG4gICAqIERlZmF1bHRzIHRvIDMybXMuXHJcbiAgICovXHJcbiAgd2FybkFmdGVyPzogbnVtYmVyXHJcblxyXG4gIC8qKlxyXG4gICAqIE9wdCBvdXQgb2YgY2hlY2tpbmcgc3RhdGUuIFdoZW4gc2V0IHRvIGB0cnVlYCwgb3RoZXIgc3RhdGUtcmVsYXRlZCBwYXJhbXMgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAqL1xyXG4gIGlnbm9yZVN0YXRlPzogYm9vbGVhblxyXG5cclxuICAvKipcclxuICAgKiBPcHQgb3V0IG9mIGNoZWNraW5nIGFjdGlvbnMuIFdoZW4gc2V0IHRvIGB0cnVlYCwgb3RoZXIgYWN0aW9uLXJlbGF0ZWQgcGFyYW1zIHdpbGwgYmUgaWdub3JlZC5cclxuICAgKi9cclxuICBpZ25vcmVBY3Rpb25zPzogYm9vbGVhblxyXG5cclxuICAvKipcclxuICAgKiBPcHQgb3V0IG9mIGNhY2hpbmcgdGhlIHJlc3VsdHMuIFRoZSBjYWNoZSB1c2VzIGEgV2Vha1NldCBhbmQgc3BlZWRzIHVwIHJlcGVhdGVkIGNoZWNraW5nIHByb2Nlc3Nlcy5cclxuICAgKiBUaGUgY2FjaGUgaXMgYXV0b21hdGljYWxseSBkaXNhYmxlZCBpZiBubyBicm93c2VyIHN1cHBvcnQgZm9yIFdlYWtTZXQgaXMgcHJlc2VudC5cclxuICAgKi9cclxuICBkaXNhYmxlQ2FjaGU/OiBib29sZWFuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWlkZGxld2FyZSB0aGF0LCBhZnRlciBldmVyeSBzdGF0ZSBjaGFuZ2UsIGNoZWNrcyBpZiB0aGUgbmV3XHJcbiAqIHN0YXRlIGlzIHNlcmlhbGl6YWJsZS4gSWYgYSBub24tc2VyaWFsaXphYmxlIHZhbHVlIGlzIGZvdW5kIHdpdGhpbiB0aGVcclxuICogc3RhdGUsIGFuIGVycm9yIGlzIHByaW50ZWQgdG8gdGhlIGNvbnNvbGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBvcHRpb25zIE1pZGRsZXdhcmUgb3B0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZShcclxuICBvcHRpb25zOiBTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmVPcHRpb25zID0ge31cclxuKTogTWlkZGxld2FyZSB7XHJcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcclxuICAgIHJldHVybiAoKSA9PiAobmV4dCkgPT4gKGFjdGlvbikgPT4gbmV4dChhY3Rpb24pXHJcbiAgfVxyXG4gIGNvbnN0IHtcclxuICAgIGlzU2VyaWFsaXphYmxlID0gaXNQbGFpbixcclxuICAgIGdldEVudHJpZXMsXHJcbiAgICBpZ25vcmVkQWN0aW9ucyA9IFtdLFxyXG4gICAgaWdub3JlZEFjdGlvblBhdGhzID0gWydtZXRhLmFyZycsICdtZXRhLmJhc2VRdWVyeU1ldGEnXSxcclxuICAgIGlnbm9yZWRQYXRocyA9IFtdLFxyXG4gICAgd2FybkFmdGVyID0gMzIsXHJcbiAgICBpZ25vcmVTdGF0ZSA9IGZhbHNlLFxyXG4gICAgaWdub3JlQWN0aW9ucyA9IGZhbHNlLFxyXG4gICAgZGlzYWJsZUNhY2hlID0gZmFsc2UsXHJcbiAgfSA9IG9wdGlvbnNcclxuXHJcbiAgY29uc3QgY2FjaGU6IFdlYWtTZXQ8b2JqZWN0PiB8IHVuZGVmaW5lZCA9XHJcbiAgICAhZGlzYWJsZUNhY2hlICYmIFdlYWtTZXQgPyBuZXcgV2Vha1NldCgpIDogdW5kZWZpbmVkXHJcblxyXG4gIHJldHVybiAoc3RvcmVBUEkpID0+IChuZXh0KSA9PiAoYWN0aW9uKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBuZXh0KGFjdGlvbilcclxuXHJcbiAgICBjb25zdCBtZWFzdXJlVXRpbHMgPSBnZXRUaW1lTWVhc3VyZVV0aWxzKFxyXG4gICAgICB3YXJuQWZ0ZXIsXHJcbiAgICAgICdTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUnXHJcbiAgICApXHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAhaWdub3JlQWN0aW9ucyAmJlxyXG4gICAgICAhKGlnbm9yZWRBY3Rpb25zLmxlbmd0aCAmJiBpZ25vcmVkQWN0aW9ucy5pbmRleE9mKGFjdGlvbi50eXBlKSAhPT0gLTEpXHJcbiAgICApIHtcclxuICAgICAgbWVhc3VyZVV0aWxzLm1lYXN1cmVUaW1lKCgpID0+IHtcclxuICAgICAgICBjb25zdCBmb3VuZEFjdGlvbk5vblNlcmlhbGl6YWJsZVZhbHVlID0gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKFxyXG4gICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgJycsXHJcbiAgICAgICAgICBpc1NlcmlhbGl6YWJsZSxcclxuICAgICAgICAgIGdldEVudHJpZXMsXHJcbiAgICAgICAgICBpZ25vcmVkQWN0aW9uUGF0aHMsXHJcbiAgICAgICAgICBjYWNoZVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgKGZvdW5kQWN0aW9uTm9uU2VyaWFsaXphYmxlVmFsdWUpIHtcclxuICAgICAgICAgIGNvbnN0IHsga2V5UGF0aCwgdmFsdWUgfSA9IGZvdW5kQWN0aW9uTm9uU2VyaWFsaXphYmxlVmFsdWVcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgICBgQSBub24tc2VyaWFsaXphYmxlIHZhbHVlIHdhcyBkZXRlY3RlZCBpbiBhbiBhY3Rpb24sIGluIHRoZSBwYXRoOiBcXGAke2tleVBhdGh9XFxgLiBWYWx1ZTpgLFxyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgJ1xcblRha2UgYSBsb29rIGF0IHRoZSBsb2dpYyB0aGF0IGRpc3BhdGNoZWQgdGhpcyBhY3Rpb246ICcsXHJcbiAgICAgICAgICAgIGFjdGlvbixcclxuICAgICAgICAgICAgJ1xcbihTZWUgaHR0cHM6Ly9yZWR1eC5qcy5vcmcvZmFxL2FjdGlvbnMjd2h5LXNob3VsZC10eXBlLWJlLWEtc3RyaW5nLW9yLWF0LWxlYXN0LXNlcmlhbGl6YWJsZS13aHktc2hvdWxkLW15LWFjdGlvbi10eXBlcy1iZS1jb25zdGFudHMpJyxcclxuICAgICAgICAgICAgJ1xcbihUbyBhbGxvdyBub24tc2VyaWFsaXphYmxlIHZhbHVlcyBzZWU6IGh0dHBzOi8vcmVkdXgtdG9vbGtpdC5qcy5vcmcvdXNhZ2UvdXNhZ2UtZ3VpZGUjd29ya2luZy13aXRoLW5vbi1zZXJpYWxpemFibGUtZGF0YSknXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghaWdub3JlU3RhdGUpIHtcclxuICAgICAgbWVhc3VyZVV0aWxzLm1lYXN1cmVUaW1lKCgpID0+IHtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IHN0b3JlQVBJLmdldFN0YXRlKClcclxuXHJcbiAgICAgICAgY29uc3QgZm91bmRTdGF0ZU5vblNlcmlhbGl6YWJsZVZhbHVlID0gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKFxyXG4gICAgICAgICAgc3RhdGUsXHJcbiAgICAgICAgICAnJyxcclxuICAgICAgICAgIGlzU2VyaWFsaXphYmxlLFxyXG4gICAgICAgICAgZ2V0RW50cmllcyxcclxuICAgICAgICAgIGlnbm9yZWRQYXRocyxcclxuICAgICAgICAgIGNhY2hlXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiAoZm91bmRTdGF0ZU5vblNlcmlhbGl6YWJsZVZhbHVlKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGtleVBhdGgsIHZhbHVlIH0gPSBmb3VuZFN0YXRlTm9uU2VyaWFsaXphYmxlVmFsdWVcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgICBgQSBub24tc2VyaWFsaXphYmxlIHZhbHVlIHdhcyBkZXRlY3RlZCBpbiB0aGUgc3RhdGUsIGluIHRoZSBwYXRoOiBcXGAke2tleVBhdGh9XFxgLiBWYWx1ZTpgLFxyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgYFxyXG5UYWtlIGEgbG9vayBhdCB0aGUgcmVkdWNlcihzKSBoYW5kbGluZyB0aGlzIGFjdGlvbiB0eXBlOiAke2FjdGlvbi50eXBlfS5cclxuKFNlZSBodHRwczovL3JlZHV4LmpzLm9yZy9mYXEvb3JnYW5pemluZy1zdGF0ZSNjYW4taS1wdXQtZnVuY3Rpb25zLXByb21pc2VzLW9yLW90aGVyLW5vbi1zZXJpYWxpemFibGUtaXRlbXMtaW4tbXktc3RvcmUtc3RhdGUpYFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIG1lYXN1cmVVdGlscy53YXJuSWZFeGNlZWRlZCgpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IEFjdGlvbiB9IGZyb20gJ3JlZHV4J1xyXG5pbXBvcnQgdHlwZSB7XHJcbiAgSXNVbmtub3duT3JOb25JbmZlcnJhYmxlLFxyXG4gIElmTWF5YmVVbmRlZmluZWQsXHJcbiAgSWZWb2lkLFxyXG4gIElzQW55LFxyXG59IGZyb20gJy4vdHNIZWxwZXJzJ1xyXG5pbXBvcnQgaXNQbGFpbk9iamVjdCBmcm9tICcuL2lzUGxhaW5PYmplY3QnXHJcblxyXG4vKipcclxuICogQW4gYWN0aW9uIHdpdGggYSBzdHJpbmcgdHlwZSBhbmQgYW4gYXNzb2NpYXRlZCBwYXlsb2FkLiBUaGlzIGlzIHRoZVxyXG4gKiB0eXBlIG9mIGFjdGlvbiByZXR1cm5lZCBieSBgY3JlYXRlQWN0aW9uKClgIGFjdGlvbiBjcmVhdG9ycy5cclxuICpcclxuICogQHRlbXBsYXRlIFAgVGhlIHR5cGUgb2YgdGhlIGFjdGlvbidzIHBheWxvYWQuXHJcbiAqIEB0ZW1wbGF0ZSBUIHRoZSB0eXBlIHVzZWQgZm9yIHRoZSBhY3Rpb24gdHlwZS5cclxuICogQHRlbXBsYXRlIE0gVGhlIHR5cGUgb2YgdGhlIGFjdGlvbidzIG1ldGEgKG9wdGlvbmFsKVxyXG4gKiBAdGVtcGxhdGUgRSBUaGUgdHlwZSBvZiB0aGUgYWN0aW9uJ3MgZXJyb3IgKG9wdGlvbmFsKVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBQYXlsb2FkQWN0aW9uPFxyXG4gIFAgPSB2b2lkLFxyXG4gIFQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmcsXHJcbiAgTSA9IG5ldmVyLFxyXG4gIEUgPSBuZXZlclxyXG4+ID0ge1xyXG4gIHBheWxvYWQ6IFBcclxuICB0eXBlOiBUXHJcbn0gJiAoW01dIGV4dGVuZHMgW25ldmVyXVxyXG4gID8ge31cclxuICA6IHtcclxuICAgICAgbWV0YTogTVxyXG4gICAgfSkgJlxyXG4gIChbRV0gZXh0ZW5kcyBbbmV2ZXJdXHJcbiAgICA/IHt9XHJcbiAgICA6IHtcclxuICAgICAgICBlcnJvcjogRVxyXG4gICAgICB9KVxyXG5cclxuLyoqXHJcbiAqIEEgXCJwcmVwYXJlXCIgbWV0aG9kIHRvIGJlIHVzZWQgYXMgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgYGNyZWF0ZUFjdGlvbmAuXHJcbiAqIFRha2VzIGFueSBudW1iZXIgb2YgYXJndW1lbnRzIGFuZCByZXR1cm5zIGEgRmx1eCBTdGFuZGFyZCBBY3Rpb24gd2l0aG91dFxyXG4gKiB0eXBlICh3aWxsIGJlIGFkZGVkIGxhdGVyKSB0aGF0ICptdXN0KiBjb250YWluIGEgcGF5bG9hZCAobWlnaHQgYmUgdW5kZWZpbmVkKS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgUHJlcGFyZUFjdGlvbjxQPiA9XHJcbiAgfCAoKC4uLmFyZ3M6IGFueVtdKSA9PiB7IHBheWxvYWQ6IFAgfSlcclxuICB8ICgoLi4uYXJnczogYW55W10pID0+IHsgcGF5bG9hZDogUDsgbWV0YTogYW55IH0pXHJcbiAgfCAoKC4uLmFyZ3M6IGFueVtdKSA9PiB7IHBheWxvYWQ6IFA7IGVycm9yOiBhbnkgfSlcclxuICB8ICgoLi4uYXJnczogYW55W10pID0+IHsgcGF5bG9hZDogUDsgbWV0YTogYW55OyBlcnJvcjogYW55IH0pXHJcblxyXG4vKipcclxuICogSW50ZXJuYWwgdmVyc2lvbiBvZiBgQWN0aW9uQ3JlYXRvcldpdGhQcmVwYXJlZFBheWxvYWRgLiBOb3QgdG8gYmUgdXNlZCBleHRlcm5hbGx5LlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmV4cG9ydCB0eXBlIF9BY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxcclxuICBQQSBleHRlbmRzIFByZXBhcmVBY3Rpb248YW55PiB8IHZvaWQsXHJcbiAgVCBleHRlbmRzIHN0cmluZyA9IHN0cmluZ1xyXG4+ID0gUEEgZXh0ZW5kcyBQcmVwYXJlQWN0aW9uPGluZmVyIFA+XHJcbiAgPyBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxcclxuICAgICAgUGFyYW1ldGVyczxQQT4sXHJcbiAgICAgIFAsXHJcbiAgICAgIFQsXHJcbiAgICAgIFJldHVyblR5cGU8UEE+IGV4dGVuZHMge1xyXG4gICAgICAgIGVycm9yOiBpbmZlciBFXHJcbiAgICAgIH1cclxuICAgICAgICA/IEVcclxuICAgICAgICA6IG5ldmVyLFxyXG4gICAgICBSZXR1cm5UeXBlPFBBPiBleHRlbmRzIHtcclxuICAgICAgICBtZXRhOiBpbmZlciBNXHJcbiAgICAgIH1cclxuICAgICAgICA/IE1cclxuICAgICAgICA6IG5ldmVyXHJcbiAgICA+XHJcbiAgOiB2b2lkXHJcblxyXG4vKipcclxuICogQmFzaWMgdHlwZSBmb3IgYWxsIGFjdGlvbiBjcmVhdG9ycy5cclxuICpcclxuICogQGluaGVyaXRkb2Mge3JlZHV4I0FjdGlvbkNyZWF0b3J9XHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VBY3Rpb25DcmVhdG9yPFAsIFQgZXh0ZW5kcyBzdHJpbmcsIE0gPSBuZXZlciwgRSA9IG5ldmVyPiB7XHJcbiAgdHlwZTogVFxyXG4gIG1hdGNoOiAoYWN0aW9uOiBBY3Rpb248dW5rbm93bj4pID0+IGFjdGlvbiBpcyBQYXlsb2FkQWN0aW9uPFAsIFQsIE0sIEU+XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhY3Rpb24gY3JlYXRvciB0aGF0IHRha2VzIG11bHRpcGxlIGFyZ3VtZW50cyB0aGF0IGFyZSBwYXNzZWRcclxuICogdG8gYSBgUHJlcGFyZUFjdGlvbmAgbWV0aG9kIHRvIGNyZWF0ZSB0aGUgZmluYWwgQWN0aW9uLlxyXG4gKiBAdHlwZVBhcmFtIEFyZ3MgYXJndW1lbnRzIGZvciB0aGUgYWN0aW9uIGNyZWF0b3IgZnVuY3Rpb25cclxuICogQHR5cGVQYXJhbSBQIGBwYXlsb2FkYCB0eXBlXHJcbiAqIEB0eXBlUGFyYW0gVCBgdHlwZWAgbmFtZVxyXG4gKiBAdHlwZVBhcmFtIEUgb3B0aW9uYWwgYGVycm9yYCB0eXBlXHJcbiAqIEB0eXBlUGFyYW0gTSBvcHRpb25hbCBgbWV0YWAgdHlwZVxyXG4gKlxyXG4gKiBAaW5oZXJpdGRvYyB7cmVkdXgjQWN0aW9uQ3JlYXRvcn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxcclxuICBBcmdzIGV4dGVuZHMgdW5rbm93bltdLFxyXG4gIFAsXHJcbiAgVCBleHRlbmRzIHN0cmluZyA9IHN0cmluZyxcclxuICBFID0gbmV2ZXIsXHJcbiAgTSA9IG5ldmVyXHJcbj4gZXh0ZW5kcyBCYXNlQWN0aW9uQ3JlYXRvcjxQLCBULCBNLCBFPiB7XHJcbiAgLyoqXHJcbiAgICogQ2FsbGluZyB0aGlzIHtAbGluayByZWR1eCNBY3Rpb25DcmVhdG9yfSB3aXRoIGBBcmdzYCB3aWxsIHJldHVyblxyXG4gICAqIGFuIEFjdGlvbiB3aXRoIGEgcGF5bG9hZCBvZiB0eXBlIGBQYCBhbmQgKGRlcGVuZGluZyBvbiB0aGUgYFByZXBhcmVBY3Rpb25gXHJcbiAgICogbWV0aG9kIHVzZWQpIGEgYG1ldGFgLSBhbmQgYGVycm9yYCBwcm9wZXJ0eSBvZiB0eXBlcyBgTWAgYW5kIGBFYCByZXNwZWN0aXZlbHkuXHJcbiAgICovXHJcbiAgKC4uLmFyZ3M6IEFyZ3MpOiBQYXlsb2FkQWN0aW9uPFAsIFQsIE0sIEU+XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhY3Rpb24gY3JlYXRvciBvZiB0eXBlIGBUYCB0aGF0IHRha2VzIGFuIG9wdGlvbmFsIHBheWxvYWQgb2YgdHlwZSBgUGAuXHJcbiAqXHJcbiAqIEBpbmhlcml0ZG9jIHtyZWR1eCNBY3Rpb25DcmVhdG9yfVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvbkNyZWF0b3JXaXRoT3B0aW9uYWxQYXlsb2FkPFAsIFQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmc+XHJcbiAgZXh0ZW5kcyBCYXNlQWN0aW9uQ3JlYXRvcjxQLCBUPiB7XHJcbiAgLyoqXHJcbiAgICogQ2FsbGluZyB0aGlzIHtAbGluayByZWR1eCNBY3Rpb25DcmVhdG9yfSB3aXRoIGFuIGFyZ3VtZW50IHdpbGxcclxuICAgKiByZXR1cm4gYSB7QGxpbmsgUGF5bG9hZEFjdGlvbn0gb2YgdHlwZSBgVGAgd2l0aCBhIHBheWxvYWQgb2YgYFBgLlxyXG4gICAqIENhbGxpbmcgaXQgd2l0aG91dCBhbiBhcmd1bWVudCB3aWxsIHJldHVybiBhIFBheWxvYWRBY3Rpb24gd2l0aCBhIHBheWxvYWQgb2YgYHVuZGVmaW5lZGAuXHJcbiAgICovXHJcbiAgKHBheWxvYWQ/OiBQKTogUGF5bG9hZEFjdGlvbjxQLCBUPlxyXG59XHJcblxyXG4vKipcclxuICogQW4gYWN0aW9uIGNyZWF0b3Igb2YgdHlwZSBgVGAgdGhhdCB0YWtlcyBubyBwYXlsb2FkLlxyXG4gKlxyXG4gKiBAaW5oZXJpdGRvYyB7cmVkdXgjQWN0aW9uQ3JlYXRvcn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25DcmVhdG9yV2l0aG91dFBheWxvYWQ8VCBleHRlbmRzIHN0cmluZyA9IHN0cmluZz5cclxuICBleHRlbmRzIEJhc2VBY3Rpb25DcmVhdG9yPHVuZGVmaW5lZCwgVD4ge1xyXG4gIC8qKlxyXG4gICAqIENhbGxpbmcgdGhpcyB7QGxpbmsgcmVkdXgjQWN0aW9uQ3JlYXRvcn0gd2lsbFxyXG4gICAqIHJldHVybiBhIHtAbGluayBQYXlsb2FkQWN0aW9ufSBvZiB0eXBlIGBUYCB3aXRoIGEgcGF5bG9hZCBvZiBgdW5kZWZpbmVkYFxyXG4gICAqL1xyXG4gIChub0FyZ3VtZW50OiB2b2lkKTogUGF5bG9hZEFjdGlvbjx1bmRlZmluZWQsIFQ+XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBhY3Rpb24gY3JlYXRvciBvZiB0eXBlIGBUYCB0aGF0IHJlcXVpcmVzIGEgcGF5bG9hZCBvZiB0eXBlIFAuXHJcbiAqXHJcbiAqIEBpbmhlcml0ZG9jIHtyZWR1eCNBY3Rpb25DcmVhdG9yfVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvbkNyZWF0b3JXaXRoUGF5bG9hZDxQLCBUIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nPlxyXG4gIGV4dGVuZHMgQmFzZUFjdGlvbkNyZWF0b3I8UCwgVD4ge1xyXG4gIC8qKlxyXG4gICAqIENhbGxpbmcgdGhpcyB7QGxpbmsgcmVkdXgjQWN0aW9uQ3JlYXRvcn0gd2l0aCBhbiBhcmd1bWVudCB3aWxsXHJcbiAgICogcmV0dXJuIGEge0BsaW5rIFBheWxvYWRBY3Rpb259IG9mIHR5cGUgYFRgIHdpdGggYSBwYXlsb2FkIG9mIGBQYFxyXG4gICAqL1xyXG4gIChwYXlsb2FkOiBQKTogUGF5bG9hZEFjdGlvbjxQLCBUPlxyXG59XHJcblxyXG4vKipcclxuICogQW4gYWN0aW9uIGNyZWF0b3Igb2YgdHlwZSBgVGAgd2hvc2UgYHBheWxvYWRgIHR5cGUgY291bGQgbm90IGJlIGluZmVycmVkLiBBY2NlcHRzIGV2ZXJ5dGhpbmcgYXMgYHBheWxvYWRgLlxyXG4gKlxyXG4gKiBAaW5oZXJpdGRvYyB7cmVkdXgjQWN0aW9uQ3JlYXRvcn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25DcmVhdG9yV2l0aE5vbkluZmVycmFibGVQYXlsb2FkPFxyXG4gIFQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmdcclxuPiBleHRlbmRzIEJhc2VBY3Rpb25DcmVhdG9yPHVua25vd24sIFQ+IHtcclxuICAvKipcclxuICAgKiBDYWxsaW5nIHRoaXMge0BsaW5rIHJlZHV4I0FjdGlvbkNyZWF0b3J9IHdpdGggYW4gYXJndW1lbnQgd2lsbFxyXG4gICAqIHJldHVybiBhIHtAbGluayBQYXlsb2FkQWN0aW9ufSBvZiB0eXBlIGBUYCB3aXRoIGEgcGF5bG9hZFxyXG4gICAqIG9mIGV4YWN0bHkgdGhlIHR5cGUgb2YgdGhlIGFyZ3VtZW50LlxyXG4gICAqL1xyXG4gIDxQVCBleHRlbmRzIHVua25vd24+KHBheWxvYWQ6IFBUKTogUGF5bG9hZEFjdGlvbjxQVCwgVD5cclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGFjdGlvbiBjcmVhdG9yIHRoYXQgcHJvZHVjZXMgYWN0aW9ucyB3aXRoIGEgYHBheWxvYWRgIGF0dHJpYnV0ZS5cclxuICpcclxuICogQHR5cGVQYXJhbSBQIHRoZSBgcGF5bG9hZGAgdHlwZVxyXG4gKiBAdHlwZVBhcmFtIFQgdGhlIGB0eXBlYCBvZiB0aGUgcmVzdWx0aW5nIGFjdGlvblxyXG4gKiBAdHlwZVBhcmFtIFBBIGlmIHRoZSByZXN1bHRpbmcgYWN0aW9uIGlzIHByZXByb2Nlc3NlZCBieSBhIGBwcmVwYXJlYCBtZXRob2QsIHRoZSBzaWduYXR1cmUgb2Ygc2FpZCBtZXRob2QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIFBheWxvYWRBY3Rpb25DcmVhdG9yPFxyXG4gIFAgPSB2b2lkLFxyXG4gIFQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmcsXHJcbiAgUEEgZXh0ZW5kcyBQcmVwYXJlQWN0aW9uPFA+IHwgdm9pZCA9IHZvaWRcclxuPiA9IElmUHJlcGFyZUFjdGlvbk1ldGhvZFByb3ZpZGVkPFxyXG4gIFBBLFxyXG4gIF9BY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxQQSwgVD4sXHJcbiAgLy8gZWxzZVxyXG4gIElzQW55PFxyXG4gICAgUCxcclxuICAgIEFjdGlvbkNyZWF0b3JXaXRoUGF5bG9hZDxhbnksIFQ+LFxyXG4gICAgSXNVbmtub3duT3JOb25JbmZlcnJhYmxlPFxyXG4gICAgICBQLFxyXG4gICAgICBBY3Rpb25DcmVhdG9yV2l0aE5vbkluZmVycmFibGVQYXlsb2FkPFQ+LFxyXG4gICAgICAvLyBlbHNlXHJcbiAgICAgIElmVm9pZDxcclxuICAgICAgICBQLFxyXG4gICAgICAgIEFjdGlvbkNyZWF0b3JXaXRob3V0UGF5bG9hZDxUPixcclxuICAgICAgICAvLyBlbHNlXHJcbiAgICAgICAgSWZNYXliZVVuZGVmaW5lZDxcclxuICAgICAgICAgIFAsXHJcbiAgICAgICAgICBBY3Rpb25DcmVhdG9yV2l0aE9wdGlvbmFsUGF5bG9hZDxQLCBUPixcclxuICAgICAgICAgIC8vIGVsc2VcclxuICAgICAgICAgIEFjdGlvbkNyZWF0b3JXaXRoUGF5bG9hZDxQLCBUPlxyXG4gICAgICAgID5cclxuICAgICAgPlxyXG4gICAgPlxyXG4gID5cclxuPlxyXG5cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBmdW5jdGlvbiB0byBjcmVhdGUgYW4gYWN0aW9uIGNyZWF0b3IgZm9yIHRoZSBnaXZlbiBhY3Rpb24gdHlwZVxyXG4gKiBzdHJpbmcuIFRoZSBhY3Rpb24gY3JlYXRvciBhY2NlcHRzIGEgc2luZ2xlIGFyZ3VtZW50LCB3aGljaCB3aWxsIGJlIGluY2x1ZGVkXHJcbiAqIGluIHRoZSBhY3Rpb24gb2JqZWN0IGFzIGEgZmllbGQgY2FsbGVkIHBheWxvYWQuIFRoZSBhY3Rpb24gY3JlYXRvciBmdW5jdGlvblxyXG4gKiB3aWxsIGFsc28gaGF2ZSBpdHMgdG9TdHJpbmcoKSBvdmVycmlkZW4gc28gdGhhdCBpdCByZXR1cm5zIHRoZSBhY3Rpb24gdHlwZSxcclxuICogYWxsb3dpbmcgaXQgdG8gYmUgdXNlZCBpbiByZWR1Y2VyIGxvZ2ljIHRoYXQgaXMgbG9va2luZyBmb3IgdGhhdCBhY3Rpb24gdHlwZS5cclxuICpcclxuICogQHBhcmFtIHR5cGUgVGhlIGFjdGlvbiB0eXBlIHRvIHVzZSBmb3IgY3JlYXRlZCBhY3Rpb25zLlxyXG4gKiBAcGFyYW0gcHJlcGFyZSAob3B0aW9uYWwpIGEgbWV0aG9kIHRoYXQgdGFrZXMgYW55IG51bWJlciBvZiBhcmd1bWVudHMgYW5kIHJldHVybnMgeyBwYXlsb2FkIH0gb3IgeyBwYXlsb2FkLCBtZXRhIH0uXHJcbiAqICAgICAgICAgICAgICAgIElmIHRoaXMgaXMgZ2l2ZW4sIHRoZSByZXN1bHRpbmcgYWN0aW9uIGNyZWF0b3Igd2lsbCBwYXNzIGl0cyBhcmd1bWVudHMgdG8gdGhpcyBtZXRob2QgdG8gY2FsY3VsYXRlIHBheWxvYWQgJiBtZXRhLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWN0aW9uPFAgPSB2b2lkLCBUIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nPihcclxuICB0eXBlOiBUXHJcbik6IFBheWxvYWRBY3Rpb25DcmVhdG9yPFAsIFQ+XHJcblxyXG4vKipcclxuICogQSB1dGlsaXR5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBhbiBhY3Rpb24gY3JlYXRvciBmb3IgdGhlIGdpdmVuIGFjdGlvbiB0eXBlXHJcbiAqIHN0cmluZy4gVGhlIGFjdGlvbiBjcmVhdG9yIGFjY2VwdHMgYSBzaW5nbGUgYXJndW1lbnQsIHdoaWNoIHdpbGwgYmUgaW5jbHVkZWRcclxuICogaW4gdGhlIGFjdGlvbiBvYmplY3QgYXMgYSBmaWVsZCBjYWxsZWQgcGF5bG9hZC4gVGhlIGFjdGlvbiBjcmVhdG9yIGZ1bmN0aW9uXHJcbiAqIHdpbGwgYWxzbyBoYXZlIGl0cyB0b1N0cmluZygpIG92ZXJyaWRlbiBzbyB0aGF0IGl0IHJldHVybnMgdGhlIGFjdGlvbiB0eXBlLFxyXG4gKiBhbGxvd2luZyBpdCB0byBiZSB1c2VkIGluIHJlZHVjZXIgbG9naWMgdGhhdCBpcyBsb29raW5nIGZvciB0aGF0IGFjdGlvbiB0eXBlLlxyXG4gKlxyXG4gKiBAcGFyYW0gdHlwZSBUaGUgYWN0aW9uIHR5cGUgdG8gdXNlIGZvciBjcmVhdGVkIGFjdGlvbnMuXHJcbiAqIEBwYXJhbSBwcmVwYXJlIChvcHRpb25hbCkgYSBtZXRob2QgdGhhdCB0YWtlcyBhbnkgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgcmV0dXJucyB7IHBheWxvYWQgfSBvciB7IHBheWxvYWQsIG1ldGEgfS5cclxuICogICAgICAgICAgICAgICAgSWYgdGhpcyBpcyBnaXZlbiwgdGhlIHJlc3VsdGluZyBhY3Rpb24gY3JlYXRvciB3aWxsIHBhc3MgaXRzIGFyZ3VtZW50cyB0byB0aGlzIG1ldGhvZCB0byBjYWxjdWxhdGUgcGF5bG9hZCAmIG1ldGEuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY3Rpb248XHJcbiAgUEEgZXh0ZW5kcyBQcmVwYXJlQWN0aW9uPGFueT4sXHJcbiAgVCBleHRlbmRzIHN0cmluZyA9IHN0cmluZ1xyXG4+KFxyXG4gIHR5cGU6IFQsXHJcbiAgcHJlcGFyZUFjdGlvbjogUEFcclxuKTogUGF5bG9hZEFjdGlvbkNyZWF0b3I8UmV0dXJuVHlwZTxQQT5bJ3BheWxvYWQnXSwgVCwgUEE+XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWN0aW9uKHR5cGU6IHN0cmluZywgcHJlcGFyZUFjdGlvbj86IEZ1bmN0aW9uKTogYW55IHtcclxuICBmdW5jdGlvbiBhY3Rpb25DcmVhdG9yKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICBpZiAocHJlcGFyZUFjdGlvbikge1xyXG4gICAgICBsZXQgcHJlcGFyZWQgPSBwcmVwYXJlQWN0aW9uKC4uLmFyZ3MpXHJcbiAgICAgIGlmICghcHJlcGFyZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ByZXBhcmVBY3Rpb24gZGlkIG5vdCByZXR1cm4gYW4gb2JqZWN0JylcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIHBheWxvYWQ6IHByZXBhcmVkLnBheWxvYWQsXHJcbiAgICAgICAgLi4uKCdtZXRhJyBpbiBwcmVwYXJlZCAmJiB7IG1ldGE6IHByZXBhcmVkLm1ldGEgfSksXHJcbiAgICAgICAgLi4uKCdlcnJvcicgaW4gcHJlcGFyZWQgJiYgeyBlcnJvcjogcHJlcGFyZWQuZXJyb3IgfSksXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7IHR5cGUsIHBheWxvYWQ6IGFyZ3NbMF0gfVxyXG4gIH1cclxuXHJcbiAgYWN0aW9uQ3JlYXRvci50b1N0cmluZyA9ICgpID0+IGAke3R5cGV9YFxyXG5cclxuICBhY3Rpb25DcmVhdG9yLnR5cGUgPSB0eXBlXHJcblxyXG4gIGFjdGlvbkNyZWF0b3IubWF0Y2ggPSAoYWN0aW9uOiBBY3Rpb248dW5rbm93bj4pOiBhY3Rpb24gaXMgUGF5bG9hZEFjdGlvbiA9PlxyXG4gICAgYWN0aW9uLnR5cGUgPT09IHR5cGVcclxuXHJcbiAgcmV0dXJuIGFjdGlvbkNyZWF0b3JcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRlNBKGFjdGlvbjogdW5rbm93bik6IGFjdGlvbiBpcyB7XHJcbiAgdHlwZTogc3RyaW5nXHJcbiAgcGF5bG9hZD86IHVua25vd25cclxuICBlcnJvcj86IHVua25vd25cclxuICBtZXRhPzogdW5rbm93blxyXG59IHtcclxuICByZXR1cm4gKFxyXG4gICAgaXNQbGFpbk9iamVjdChhY3Rpb24pICYmXHJcbiAgICB0eXBlb2YgKGFjdGlvbiBhcyBhbnkpLnR5cGUgPT09ICdzdHJpbmcnICYmXHJcbiAgICBPYmplY3Qua2V5cyhhY3Rpb24pLmV2ZXJ5KGlzVmFsaWRLZXkpXHJcbiAgKVxyXG59XHJcblxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleTogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIFsndHlwZScsICdwYXlsb2FkJywgJ2Vycm9yJywgJ21ldGEnXS5pbmRleE9mKGtleSkgPiAtMVxyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgYWN0aW9uIHR5cGUgb2YgdGhlIGFjdGlvbnMgY3JlYXRlZCBieSB0aGUgcGFzc2VkXHJcbiAqIGBjcmVhdGVBY3Rpb24oKWAtZ2VuZXJhdGVkIGFjdGlvbiBjcmVhdG9yIChhcmJpdHJhcnkgYWN0aW9uIGNyZWF0b3JzXHJcbiAqIGFyZSBub3Qgc3VwcG9ydGVkKS5cclxuICpcclxuICogQHBhcmFtIGFjdGlvbiBUaGUgYWN0aW9uIGNyZWF0b3Igd2hvc2UgYWN0aW9uIHR5cGUgdG8gZ2V0LlxyXG4gKiBAcmV0dXJucyBUaGUgYWN0aW9uIHR5cGUgdXNlZCBieSB0aGUgYWN0aW9uIGNyZWF0b3IuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUeXBlPFQgZXh0ZW5kcyBzdHJpbmc+KFxyXG4gIGFjdGlvbkNyZWF0b3I6IFBheWxvYWRBY3Rpb25DcmVhdG9yPGFueSwgVD5cclxuKTogVCB7XHJcbiAgcmV0dXJuIGAke2FjdGlvbkNyZWF0b3J9YCBhcyBUXHJcbn1cclxuXHJcbi8vIGhlbHBlciB0eXBlcyBmb3IgbW9yZSByZWFkYWJsZSB0eXBpbmdzXHJcblxyXG50eXBlIElmUHJlcGFyZUFjdGlvbk1ldGhvZFByb3ZpZGVkPFxyXG4gIFBBIGV4dGVuZHMgUHJlcGFyZUFjdGlvbjxhbnk+IHwgdm9pZCxcclxuICBUcnVlLFxyXG4gIEZhbHNlXHJcbj4gPSBQQSBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55ID8gVHJ1ZSA6IEZhbHNlXHJcbiIsImltcG9ydCB0eXBlIHsgRHJhZnQgfSBmcm9tICdpbW1lcidcclxuaW1wb3J0IGNyZWF0ZU5leHRTdGF0ZSwgeyBpc0RyYWZ0LCBpc0RyYWZ0YWJsZSB9IGZyb20gJ2ltbWVyJ1xyXG5pbXBvcnQgdHlwZSB7IEFueUFjdGlvbiwgQWN0aW9uLCBSZWR1Y2VyIH0gZnJvbSAncmVkdXgnXHJcbmltcG9ydCB0eXBlIHsgQWN0aW9uUmVkdWNlck1hcEJ1aWxkZXIgfSBmcm9tICcuL21hcEJ1aWxkZXJzJ1xyXG5pbXBvcnQgeyBleGVjdXRlUmVkdWNlckJ1aWxkZXJDYWxsYmFjayB9IGZyb20gJy4vbWFwQnVpbGRlcnMnXHJcbmltcG9ydCB0eXBlIHsgTm9JbmZlciB9IGZyb20gJy4vdHNIZWxwZXJzJ1xyXG5pbXBvcnQgeyBmcmVlemVEcmFmdGFibGUgfSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuLyoqXHJcbiAqIERlZmluZXMgYSBtYXBwaW5nIGZyb20gYWN0aW9uIHR5cGVzIHRvIGNvcnJlc3BvbmRpbmcgYWN0aW9uIG9iamVjdCBzaGFwZXMuXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFRoaXMgc2hvdWxkIG5vdCBiZSB1c2VkIG1hbnVhbGx5IC0gaXQgaXMgb25seSB1c2VkIGZvciBpbnRlcm5hbFxyXG4gKiAgICAgICAgICAgICBpbmZlcmVuY2UgcHVycG9zZXMgYW5kIHNob3VsZCBub3QgaGF2ZSBhbnkgZnVydGhlciB2YWx1ZS5cclxuICogICAgICAgICAgICAgSXQgbWlnaHQgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBBY3Rpb25zPFQgZXh0ZW5kcyBrZXlvZiBhbnkgPSBzdHJpbmc+ID0gUmVjb3JkPFQsIEFjdGlvbj5cclxuXHJcbi8qKlxyXG4gKiBAZGVwcmVjYXRlZCB1c2UgYFR5cGVHdWFyZGAgaW5zdGVhZFxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25NYXRjaGVyPEEgZXh0ZW5kcyBBbnlBY3Rpb24+IHtcclxuICAoYWN0aW9uOiBBbnlBY3Rpb24pOiBhY3Rpb24gaXMgQVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBBY3Rpb25NYXRjaGVyRGVzY3JpcHRpb248UywgQSBleHRlbmRzIEFueUFjdGlvbj4gPSB7XHJcbiAgbWF0Y2hlcjogQWN0aW9uTWF0Y2hlcjxBPlxyXG4gIHJlZHVjZXI6IENhc2VSZWR1Y2VyPFMsIE5vSW5mZXI8QT4+XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFJlYWRvbmx5QWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uQ29sbGVjdGlvbjxTPiA9IFJlYWRvbmx5QXJyYXk8XHJcbiAgQWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uPFMsIGFueT5cclxuPlxyXG5cclxuZXhwb3J0IHR5cGUgQWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uQ29sbGVjdGlvbjxTPiA9IEFycmF5PFxyXG4gIEFjdGlvbk1hdGNoZXJEZXNjcmlwdGlvbjxTLCBhbnk+XHJcbj5cclxuXHJcbi8qKlxyXG4gKiBBICpjYXNlIHJlZHVjZXIqIGlzIGEgcmVkdWNlciBmdW5jdGlvbiBmb3IgYSBzcGVjaWZpYyBhY3Rpb24gdHlwZS4gQ2FzZVxyXG4gKiByZWR1Y2VycyBjYW4gYmUgY29tcG9zZWQgdG8gZnVsbCByZWR1Y2VycyB1c2luZyBgY3JlYXRlUmVkdWNlcigpYC5cclxuICpcclxuICogVW5saWtlIGEgbm9ybWFsIFJlZHV4IHJlZHVjZXIsIGEgY2FzZSByZWR1Y2VyIGlzIG5ldmVyIGNhbGxlZCB3aXRoIGFuXHJcbiAqIGB1bmRlZmluZWRgIHN0YXRlIHRvIGRldGVybWluZSB0aGUgaW5pdGlhbCBzdGF0ZS4gSW5zdGVhZCwgdGhlIGluaXRpYWxcclxuICogc3RhdGUgaXMgZXhwbGljaXRseSBzcGVjaWZpZWQgYXMgYW4gYXJndW1lbnQgdG8gYGNyZWF0ZVJlZHVjZXIoKWAuXHJcbiAqXHJcbiAqIEluIGFkZGl0aW9uLCBhIGNhc2UgcmVkdWNlciBjYW4gY2hvb3NlIHRvIG11dGF0ZSB0aGUgcGFzc2VkLWluIGBzdGF0ZWBcclxuICogdmFsdWUgZGlyZWN0bHkgaW5zdGVhZCBvZiByZXR1cm5pbmcgYSBuZXcgc3RhdGUuIFRoaXMgZG9lcyBub3QgYWN0dWFsbHlcclxuICogY2F1c2UgdGhlIHN0b3JlIHN0YXRlIHRvIGJlIG11dGF0ZWQgZGlyZWN0bHk7IGluc3RlYWQsIHRoYW5rcyB0b1xyXG4gKiBbaW1tZXJdKGh0dHBzOi8vZ2l0aHViLmNvbS9td2VzdHN0cmF0ZS9pbW1lciksIHRoZSBtdXRhdGlvbnMgYXJlXHJcbiAqIHRyYW5zbGF0ZWQgdG8gY29weSBvcGVyYXRpb25zIHRoYXQgcmVzdWx0IGluIGEgbmV3IHN0YXRlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBDYXNlUmVkdWNlcjxTID0gYW55LCBBIGV4dGVuZHMgQWN0aW9uID0gQW55QWN0aW9uPiA9IChcclxuICBzdGF0ZTogRHJhZnQ8Uz4sXHJcbiAgYWN0aW9uOiBBXHJcbikgPT4gTm9JbmZlcjxTPiB8IHZvaWQgfCBEcmFmdDxOb0luZmVyPFM+PlxyXG5cclxuLyoqXHJcbiAqIEEgbWFwcGluZyBmcm9tIGFjdGlvbiB0eXBlcyB0byBjYXNlIHJlZHVjZXJzIGZvciBgY3JlYXRlUmVkdWNlcigpYC5cclxuICpcclxuICogQGRlcHJlY2F0ZWQgVGhpcyBzaG91bGQgbm90IGJlIHVzZWQgbWFudWFsbHkgLSBpdCBpcyBvbmx5IHVzZWRcclxuICogICAgICAgICAgICAgZm9yIGludGVybmFsIGluZmVyZW5jZSBwdXJwb3NlcyBhbmQgdXNpbmcgaXQgbWFudWFsbHlcclxuICogICAgICAgICAgICAgd291bGQgbGVhZCB0byB0eXBlIGVyYXN1cmUuXHJcbiAqICAgICAgICAgICAgIEl0IG1pZ2h0IGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgQ2FzZVJlZHVjZXJzPFMsIEFTIGV4dGVuZHMgQWN0aW9ucz4gPSB7XHJcbiAgW1QgaW4ga2V5b2YgQVNdOiBBU1tUXSBleHRlbmRzIEFjdGlvbiA/IENhc2VSZWR1Y2VyPFMsIEFTW1RdPiA6IHZvaWRcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgTm90RnVuY3Rpb248VD4gPSBUIGV4dGVuZHMgRnVuY3Rpb24gPyBuZXZlciA6IFRcclxuXHJcbmZ1bmN0aW9uIGlzU3RhdGVGdW5jdGlvbjxTPih4OiB1bmtub3duKTogeCBpcyAoKSA9PiBTIHtcclxuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbidcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUmVkdWNlcldpdGhJbml0aWFsU3RhdGU8UyBleHRlbmRzIE5vdEZ1bmN0aW9uPGFueT4+ID0gUmVkdWNlcjxTPiAmIHtcclxuICBnZXRJbml0aWFsU3RhdGU6ICgpID0+IFNcclxufVxyXG5cclxubGV0IGhhc1dhcm5lZEFib3V0T2JqZWN0Tm90YXRpb24gPSBmYWxzZVxyXG5cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBmdW5jdGlvbiB0aGF0IGFsbG93cyBkZWZpbmluZyBhIHJlZHVjZXIgYXMgYSBtYXBwaW5nIGZyb20gYWN0aW9uXHJcbiAqIHR5cGUgdG8gKmNhc2UgcmVkdWNlciogZnVuY3Rpb25zIHRoYXQgaGFuZGxlIHRoZXNlIGFjdGlvbiB0eXBlcy4gVGhlXHJcbiAqIHJlZHVjZXIncyBpbml0aWFsIHN0YXRlIGlzIHBhc3NlZCBhcyB0aGUgZmlyc3QgYXJndW1lbnQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSBib2R5IG9mIGV2ZXJ5IGNhc2UgcmVkdWNlciBpcyBpbXBsaWNpdGx5IHdyYXBwZWQgd2l0aCBhIGNhbGwgdG9cclxuICogYHByb2R1Y2UoKWAgZnJvbSB0aGUgW2ltbWVyXShodHRwczovL2dpdGh1Yi5jb20vbXdlc3RzdHJhdGUvaW1tZXIpIGxpYnJhcnkuXHJcbiAqIFRoaXMgbWVhbnMgdGhhdCByYXRoZXIgdGhhbiByZXR1cm5pbmcgYSBuZXcgc3RhdGUgb2JqZWN0LCB5b3UgY2FuIGFsc29cclxuICogbXV0YXRlIHRoZSBwYXNzZWQtaW4gc3RhdGUgb2JqZWN0IGRpcmVjdGx5OyB0aGVzZSBtdXRhdGlvbnMgd2lsbCB0aGVuIGJlXHJcbiAqIGF1dG9tYXRpY2FsbHkgYW5kIGVmZmljaWVudGx5IHRyYW5zbGF0ZWQgaW50byBjb3BpZXMsIGdpdmluZyB5b3UgYm90aFxyXG4gKiBjb252ZW5pZW5jZSBhbmQgaW1tdXRhYmlsaXR5LlxyXG4gKlxyXG4gKiBAb3ZlcmxvYWRTdW1tYXJ5XHJcbiAqIFRoaXMgb3ZlcmxvYWQgYWNjZXB0cyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgcmVjZWl2ZXMgYSBgYnVpbGRlcmAgb2JqZWN0IGFzIGl0cyBhcmd1bWVudC5cclxuICogVGhhdCBidWlsZGVyIHByb3ZpZGVzIGBhZGRDYXNlYCwgYGFkZE1hdGNoZXJgIGFuZCBgYWRkRGVmYXVsdENhc2VgIGZ1bmN0aW9ucyB0aGF0IG1heSBiZVxyXG4gKiBjYWxsZWQgdG8gZGVmaW5lIHdoYXQgYWN0aW9ucyB0aGlzIHJlZHVjZXIgd2lsbCBoYW5kbGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBpbml0aWFsU3RhdGUgLSBgU3RhdGUgfCAoKCkgPT4gU3RhdGUpYDogVGhlIGluaXRpYWwgc3RhdGUgdGhhdCBzaG91bGQgYmUgdXNlZCB3aGVuIHRoZSByZWR1Y2VyIGlzIGNhbGxlZCB0aGUgZmlyc3QgdGltZS4gVGhpcyBtYXkgYWxzbyBiZSBhIFwibGF6eSBpbml0aWFsaXplclwiIGZ1bmN0aW9uLCB3aGljaCBzaG91bGQgcmV0dXJuIGFuIGluaXRpYWwgc3RhdGUgdmFsdWUgd2hlbiBjYWxsZWQuIFRoaXMgd2lsbCBiZSB1c2VkIHdoZW5ldmVyIHRoZSByZWR1Y2VyIGlzIGNhbGxlZCB3aXRoIGB1bmRlZmluZWRgIGFzIGl0cyBzdGF0ZSB2YWx1ZSwgYW5kIGlzIHByaW1hcmlseSB1c2VmdWwgZm9yIGNhc2VzIGxpa2UgcmVhZGluZyBpbml0aWFsIHN0YXRlIGZyb20gYGxvY2FsU3RvcmFnZWAuXHJcbiAqIEBwYXJhbSBidWlsZGVyQ2FsbGJhY2sgLSBgKGJ1aWxkZXI6IEJ1aWxkZXIpID0+IHZvaWRgIEEgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyBhICpidWlsZGVyKiBvYmplY3QgdG8gZGVmaW5lXHJcbiAqICAgY2FzZSByZWR1Y2VycyB2aWEgY2FsbHMgdG8gYGJ1aWxkZXIuYWRkQ2FzZShhY3Rpb25DcmVhdG9yT3JUeXBlLCByZWR1Y2VyKWAuXHJcbiAqIEBleGFtcGxlXHJcbmBgYHRzXHJcbmltcG9ydCB7XHJcbiAgY3JlYXRlQWN0aW9uLFxyXG4gIGNyZWF0ZVJlZHVjZXIsXHJcbiAgQW55QWN0aW9uLFxyXG4gIFBheWxvYWRBY3Rpb24sXHJcbn0gZnJvbSBcIkByZWR1eGpzL3Rvb2xraXRcIjtcclxuXHJcbmNvbnN0IGluY3JlbWVudCA9IGNyZWF0ZUFjdGlvbjxudW1iZXI+KFwiaW5jcmVtZW50XCIpO1xyXG5jb25zdCBkZWNyZW1lbnQgPSBjcmVhdGVBY3Rpb248bnVtYmVyPihcImRlY3JlbWVudFwiKTtcclxuXHJcbmZ1bmN0aW9uIGlzQWN0aW9uV2l0aE51bWJlclBheWxvYWQoXHJcbiAgYWN0aW9uOiBBbnlBY3Rpb25cclxuKTogYWN0aW9uIGlzIFBheWxvYWRBY3Rpb248bnVtYmVyPiB7XHJcbiAgcmV0dXJuIHR5cGVvZiBhY3Rpb24ucGF5bG9hZCA9PT0gXCJudW1iZXJcIjtcclxufVxyXG5cclxuY29uc3QgcmVkdWNlciA9IGNyZWF0ZVJlZHVjZXIoXHJcbiAge1xyXG4gICAgY291bnRlcjogMCxcclxuICAgIHN1bU9mTnVtYmVyUGF5bG9hZHM6IDAsXHJcbiAgICB1bmhhbmRsZWRBY3Rpb25zOiAwLFxyXG4gIH0sXHJcbiAgKGJ1aWxkZXIpID0+IHtcclxuICAgIGJ1aWxkZXJcclxuICAgICAgLmFkZENhc2UoaW5jcmVtZW50LCAoc3RhdGUsIGFjdGlvbikgPT4ge1xyXG4gICAgICAgIC8vIGFjdGlvbiBpcyBpbmZlcnJlZCBjb3JyZWN0bHkgaGVyZVxyXG4gICAgICAgIHN0YXRlLmNvdW50ZXIgKz0gYWN0aW9uLnBheWxvYWQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vIFlvdSBjYW4gY2hhaW4gY2FsbHMsIG9yIGhhdmUgc2VwYXJhdGUgYGJ1aWxkZXIuYWRkQ2FzZSgpYCBsaW5lcyBlYWNoIHRpbWVcclxuICAgICAgLmFkZENhc2UoZGVjcmVtZW50LCAoc3RhdGUsIGFjdGlvbikgPT4ge1xyXG4gICAgICAgIHN0YXRlLmNvdW50ZXIgLT0gYWN0aW9uLnBheWxvYWQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vIFlvdSBjYW4gYXBwbHkgYSBcIm1hdGNoZXIgZnVuY3Rpb25cIiB0byBpbmNvbWluZyBhY3Rpb25zXHJcbiAgICAgIC5hZGRNYXRjaGVyKGlzQWN0aW9uV2l0aE51bWJlclBheWxvYWQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7fSlcclxuICAgICAgLy8gYW5kIHByb3ZpZGUgYSBkZWZhdWx0IGNhc2UgaWYgbm8gb3RoZXIgaGFuZGxlcnMgbWF0Y2hlZFxyXG4gICAgICAuYWRkRGVmYXVsdENhc2UoKHN0YXRlLCBhY3Rpb24pID0+IHt9KTtcclxuICB9XHJcbik7XHJcbmBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVkdWNlcjxTIGV4dGVuZHMgTm90RnVuY3Rpb248YW55Pj4oXHJcbiAgaW5pdGlhbFN0YXRlOiBTIHwgKCgpID0+IFMpLFxyXG4gIGJ1aWxkZXJDYWxsYmFjazogKGJ1aWxkZXI6IEFjdGlvblJlZHVjZXJNYXBCdWlsZGVyPFM+KSA9PiB2b2lkXHJcbik6IFJlZHVjZXJXaXRoSW5pdGlhbFN0YXRlPFM+XHJcblxyXG4vKipcclxuICogQSB1dGlsaXR5IGZ1bmN0aW9uIHRoYXQgYWxsb3dzIGRlZmluaW5nIGEgcmVkdWNlciBhcyBhIG1hcHBpbmcgZnJvbSBhY3Rpb25cclxuICogdHlwZSB0byAqY2FzZSByZWR1Y2VyKiBmdW5jdGlvbnMgdGhhdCBoYW5kbGUgdGhlc2UgYWN0aW9uIHR5cGVzLiBUaGVcclxuICogcmVkdWNlcidzIGluaXRpYWwgc3RhdGUgaXMgcGFzc2VkIGFzIHRoZSBmaXJzdCBhcmd1bWVudC5cclxuICpcclxuICogVGhlIGJvZHkgb2YgZXZlcnkgY2FzZSByZWR1Y2VyIGlzIGltcGxpY2l0bHkgd3JhcHBlZCB3aXRoIGEgY2FsbCB0b1xyXG4gKiBgcHJvZHVjZSgpYCBmcm9tIHRoZSBbaW1tZXJdKGh0dHBzOi8vZ2l0aHViLmNvbS9td2VzdHN0cmF0ZS9pbW1lcikgbGlicmFyeS5cclxuICogVGhpcyBtZWFucyB0aGF0IHJhdGhlciB0aGFuIHJldHVybmluZyBhIG5ldyBzdGF0ZSBvYmplY3QsIHlvdSBjYW4gYWxzb1xyXG4gKiBtdXRhdGUgdGhlIHBhc3NlZC1pbiBzdGF0ZSBvYmplY3QgZGlyZWN0bHk7IHRoZXNlIG11dGF0aW9ucyB3aWxsIHRoZW4gYmVcclxuICogYXV0b21hdGljYWxseSBhbmQgZWZmaWNpZW50bHkgdHJhbnNsYXRlZCBpbnRvIGNvcGllcywgZ2l2aW5nIHlvdSBib3RoXHJcbiAqIGNvbnZlbmllbmNlIGFuZCBpbW11dGFiaWxpdHkuXHJcbiAqIFxyXG4gKiBAb3ZlcmxvYWRTdW1tYXJ5XHJcbiAqIFRoaXMgb3ZlcmxvYWQgYWNjZXB0cyBhbiBvYmplY3Qgd2hlcmUgdGhlIGtleXMgYXJlIHN0cmluZyBhY3Rpb24gdHlwZXMsIGFuZCB0aGUgdmFsdWVzXHJcbiAqIGFyZSBjYXNlIHJlZHVjZXIgZnVuY3Rpb25zIHRvIGhhbmRsZSB0aG9zZSBhY3Rpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSBpbml0aWFsU3RhdGUgLSBgU3RhdGUgfCAoKCkgPT4gU3RhdGUpYDogVGhlIGluaXRpYWwgc3RhdGUgdGhhdCBzaG91bGQgYmUgdXNlZCB3aGVuIHRoZSByZWR1Y2VyIGlzIGNhbGxlZCB0aGUgZmlyc3QgdGltZS4gVGhpcyBtYXkgYWxzbyBiZSBhIFwibGF6eSBpbml0aWFsaXplclwiIGZ1bmN0aW9uLCB3aGljaCBzaG91bGQgcmV0dXJuIGFuIGluaXRpYWwgc3RhdGUgdmFsdWUgd2hlbiBjYWxsZWQuIFRoaXMgd2lsbCBiZSB1c2VkIHdoZW5ldmVyIHRoZSByZWR1Y2VyIGlzIGNhbGxlZCB3aXRoIGB1bmRlZmluZWRgIGFzIGl0cyBzdGF0ZSB2YWx1ZSwgYW5kIGlzIHByaW1hcmlseSB1c2VmdWwgZm9yIGNhc2VzIGxpa2UgcmVhZGluZyBpbml0aWFsIHN0YXRlIGZyb20gYGxvY2FsU3RvcmFnZWAuXHJcbiAqIEBwYXJhbSBhY3Rpb25zTWFwIC0gQW4gb2JqZWN0IG1hcHBpbmcgZnJvbSBhY3Rpb24gdHlwZXMgdG8gX2Nhc2UgcmVkdWNlcnNfLCBlYWNoIG9mIHdoaWNoIGhhbmRsZXMgb25lIHNwZWNpZmljIGFjdGlvbiB0eXBlLlxyXG4gKiBAcGFyYW0gYWN0aW9uTWF0Y2hlcnMgLSBBbiBhcnJheSBvZiBtYXRjaGVyIGRlZmluaXRpb25zIGluIHRoZSBmb3JtIGB7bWF0Y2hlciwgcmVkdWNlcn1gLlxyXG4gKiAgIEFsbCBtYXRjaGluZyByZWR1Y2VycyB3aWxsIGJlIGV4ZWN1dGVkIGluIG9yZGVyLCBpbmRlcGVuZGVudGx5IGlmIGEgY2FzZSByZWR1Y2VyIG1hdGNoZWQgb3Igbm90LlxyXG4gKiBAcGFyYW0gZGVmYXVsdENhc2VSZWR1Y2VyIC0gQSBcImRlZmF1bHQgY2FzZVwiIHJlZHVjZXIgdGhhdCBpcyBleGVjdXRlZCBpZiBubyBjYXNlIHJlZHVjZXIgYW5kIG5vIG1hdGNoZXJcclxuICogICByZWR1Y2VyIHdhcyBleGVjdXRlZCBmb3IgdGhpcyBhY3Rpb24uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbmBgYGpzXHJcbmNvbnN0IGNvdW50ZXJSZWR1Y2VyID0gY3JlYXRlUmVkdWNlcigwLCB7XHJcbiAgaW5jcmVtZW50OiAoc3RhdGUsIGFjdGlvbikgPT4gc3RhdGUgKyBhY3Rpb24ucGF5bG9hZCxcclxuICBkZWNyZW1lbnQ6IChzdGF0ZSwgYWN0aW9uKSA9PiBzdGF0ZSAtIGFjdGlvbi5wYXlsb2FkXHJcbn0pXHJcblxyXG4vLyBBbHRlcm5hdGVseSwgdXNlIGEgXCJsYXp5IGluaXRpYWxpemVyXCIgdG8gcHJvdmlkZSB0aGUgaW5pdGlhbCBzdGF0ZVxyXG4vLyAod29ya3Mgd2l0aCBlaXRoZXIgZm9ybSBvZiBjcmVhdGVSZWR1Y2VyKVxyXG5jb25zdCBpbml0aWFsU3RhdGUgPSAoKSA9PiAwXHJcbmNvbnN0IGNvdW50ZXJSZWR1Y2VyID0gY3JlYXRlUmVkdWNlcihpbml0aWFsU3RhdGUsIHtcclxuICBpbmNyZW1lbnQ6IChzdGF0ZSwgYWN0aW9uKSA9PiBzdGF0ZSArIGFjdGlvbi5wYXlsb2FkLFxyXG4gIGRlY3JlbWVudDogKHN0YXRlLCBhY3Rpb24pID0+IHN0YXRlIC0gYWN0aW9uLnBheWxvYWRcclxufSlcclxuYGBgXHJcbiBcclxuICogQWN0aW9uIGNyZWF0b3JzIHRoYXQgd2VyZSBnZW5lcmF0ZWQgdXNpbmcgW2BjcmVhdGVBY3Rpb25gXSguL2NyZWF0ZUFjdGlvbikgbWF5IGJlIHVzZWQgZGlyZWN0bHkgYXMgdGhlIGtleXMgaGVyZSwgdXNpbmcgY29tcHV0ZWQgcHJvcGVydHkgc3ludGF4OlxyXG5cclxuYGBganNcclxuY29uc3QgaW5jcmVtZW50ID0gY3JlYXRlQWN0aW9uKCdpbmNyZW1lbnQnKVxyXG5jb25zdCBkZWNyZW1lbnQgPSBjcmVhdGVBY3Rpb24oJ2RlY3JlbWVudCcpXHJcblxyXG5jb25zdCBjb3VudGVyUmVkdWNlciA9IGNyZWF0ZVJlZHVjZXIoMCwge1xyXG4gIFtpbmNyZW1lbnRdOiAoc3RhdGUsIGFjdGlvbikgPT4gc3RhdGUgKyBhY3Rpb24ucGF5bG9hZCxcclxuICBbZGVjcmVtZW50LnR5cGVdOiAoc3RhdGUsIGFjdGlvbikgPT4gc3RhdGUgLSBhY3Rpb24ucGF5bG9hZFxyXG59KVxyXG5gYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlZHVjZXI8XHJcbiAgUyBleHRlbmRzIE5vdEZ1bmN0aW9uPGFueT4sXHJcbiAgQ1IgZXh0ZW5kcyBDYXNlUmVkdWNlcnM8UywgYW55PiA9IENhc2VSZWR1Y2VyczxTLCBhbnk+XHJcbj4oXHJcbiAgaW5pdGlhbFN0YXRlOiBTIHwgKCgpID0+IFMpLFxyXG4gIGFjdGlvbnNNYXA6IENSLFxyXG4gIGFjdGlvbk1hdGNoZXJzPzogQWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uQ29sbGVjdGlvbjxTPixcclxuICBkZWZhdWx0Q2FzZVJlZHVjZXI/OiBDYXNlUmVkdWNlcjxTPlxyXG4pOiBSZWR1Y2VyV2l0aEluaXRpYWxTdGF0ZTxTPlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlZHVjZXI8UyBleHRlbmRzIE5vdEZ1bmN0aW9uPGFueT4+KFxyXG4gIGluaXRpYWxTdGF0ZTogUyB8ICgoKSA9PiBTKSxcclxuICBtYXBPckJ1aWxkZXJDYWxsYmFjazpcclxuICAgIHwgQ2FzZVJlZHVjZXJzPFMsIGFueT5cclxuICAgIHwgKChidWlsZGVyOiBBY3Rpb25SZWR1Y2VyTWFwQnVpbGRlcjxTPikgPT4gdm9pZCksXHJcbiAgYWN0aW9uTWF0Y2hlcnM6IFJlYWRvbmx5QWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uQ29sbGVjdGlvbjxTPiA9IFtdLFxyXG4gIGRlZmF1bHRDYXNlUmVkdWNlcj86IENhc2VSZWR1Y2VyPFM+XHJcbik6IFJlZHVjZXJXaXRoSW5pdGlhbFN0YXRlPFM+IHtcclxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgaWYgKHR5cGVvZiBtYXBPckJ1aWxkZXJDYWxsYmFjayA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgaWYgKCFoYXNXYXJuZWRBYm91dE9iamVjdE5vdGF0aW9uKSB7XHJcbiAgICAgICAgaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbiA9IHRydWVcclxuICAgICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgICBcIlRoZSBvYmplY3Qgbm90YXRpb24gZm9yIGBjcmVhdGVSZWR1Y2VyYCBpcyBkZXByZWNhdGVkLCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIFJUSyAyLjAuIFBsZWFzZSB1c2UgdGhlICdidWlsZGVyIGNhbGxiYWNrJyBub3RhdGlvbiBpbnN0ZWFkOiBodHRwczovL3JlZHV4LXRvb2xraXQuanMub3JnL2FwaS9jcmVhdGVSZWR1Y2VyXCJcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxldCBbYWN0aW9uc01hcCwgZmluYWxBY3Rpb25NYXRjaGVycywgZmluYWxEZWZhdWx0Q2FzZVJlZHVjZXJdID1cclxuICAgIHR5cGVvZiBtYXBPckJ1aWxkZXJDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICA/IGV4ZWN1dGVSZWR1Y2VyQnVpbGRlckNhbGxiYWNrKG1hcE9yQnVpbGRlckNhbGxiYWNrKVxyXG4gICAgICA6IFttYXBPckJ1aWxkZXJDYWxsYmFjaywgYWN0aW9uTWF0Y2hlcnMsIGRlZmF1bHRDYXNlUmVkdWNlcl1cclxuXHJcbiAgLy8gRW5zdXJlIHRoZSBpbml0aWFsIHN0YXRlIGdldHMgZnJvemVuIGVpdGhlciB3YXkgKGlmIGRyYWZ0YWJsZSlcclxuICBsZXQgZ2V0SW5pdGlhbFN0YXRlOiAoKSA9PiBTXHJcbiAgaWYgKGlzU3RhdGVGdW5jdGlvbihpbml0aWFsU3RhdGUpKSB7XHJcbiAgICBnZXRJbml0aWFsU3RhdGUgPSAoKSA9PiBmcmVlemVEcmFmdGFibGUoaW5pdGlhbFN0YXRlKCkpXHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IGZyb3plbkluaXRpYWxTdGF0ZSA9IGZyZWV6ZURyYWZ0YWJsZShpbml0aWFsU3RhdGUpXHJcbiAgICBnZXRJbml0aWFsU3RhdGUgPSAoKSA9PiBmcm96ZW5Jbml0aWFsU3RhdGVcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlZHVjZXIoc3RhdGUgPSBnZXRJbml0aWFsU3RhdGUoKSwgYWN0aW9uOiBhbnkpOiBTIHtcclxuICAgIGxldCBjYXNlUmVkdWNlcnMgPSBbXHJcbiAgICAgIGFjdGlvbnNNYXBbYWN0aW9uLnR5cGVdLFxyXG4gICAgICAuLi5maW5hbEFjdGlvbk1hdGNoZXJzXHJcbiAgICAgICAgLmZpbHRlcigoeyBtYXRjaGVyIH0pID0+IG1hdGNoZXIoYWN0aW9uKSlcclxuICAgICAgICAubWFwKCh7IHJlZHVjZXIgfSkgPT4gcmVkdWNlciksXHJcbiAgICBdXHJcbiAgICBpZiAoY2FzZVJlZHVjZXJzLmZpbHRlcigoY3IpID0+ICEhY3IpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjYXNlUmVkdWNlcnMgPSBbZmluYWxEZWZhdWx0Q2FzZVJlZHVjZXJdXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhc2VSZWR1Y2Vycy5yZWR1Y2UoKHByZXZpb3VzU3RhdGUsIGNhc2VSZWR1Y2VyKTogUyA9PiB7XHJcbiAgICAgIGlmIChjYXNlUmVkdWNlcikge1xyXG4gICAgICAgIGlmIChpc0RyYWZ0KHByZXZpb3VzU3RhdGUpKSB7XHJcbiAgICAgICAgICAvLyBJZiBpdCdzIGFscmVhZHkgYSBkcmFmdCwgd2UgbXVzdCBhbHJlYWR5IGJlIGluc2lkZSBhIGBjcmVhdGVOZXh0U3RhdGVgIGNhbGwsXHJcbiAgICAgICAgICAvLyBsaWtlbHkgYmVjYXVzZSB0aGlzIGlzIGJlaW5nIHdyYXBwZWQgaW4gYGNyZWF0ZVJlZHVjZXJgLCBgY3JlYXRlU2xpY2VgLCBvciBuZXN0ZWRcclxuICAgICAgICAgIC8vIGluc2lkZSBhbiBleGlzdGluZyBkcmFmdC4gSXQncyBzYWZlIHRvIGp1c3QgcGFzcyB0aGUgZHJhZnQgdG8gdGhlIG11dGF0b3IuXHJcbiAgICAgICAgICBjb25zdCBkcmFmdCA9IHByZXZpb3VzU3RhdGUgYXMgRHJhZnQ8Uz4gLy8gV2UgY2FuIGFzc3VtZSB0aGlzIGlzIGFscmVhZHkgYSBkcmFmdFxyXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FzZVJlZHVjZXIoZHJhZnQsIGFjdGlvbilcclxuXHJcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzU3RhdGVcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0IGFzIFNcclxuICAgICAgICB9IGVsc2UgaWYgKCFpc0RyYWZ0YWJsZShwcmV2aW91c1N0YXRlKSkge1xyXG4gICAgICAgICAgLy8gSWYgc3RhdGUgaXMgbm90IGRyYWZ0YWJsZSAoZXg6IGEgcHJpbWl0aXZlLCBzdWNoIGFzIDApLCB3ZSB3YW50IHRvIGRpcmVjdGx5XHJcbiAgICAgICAgICAvLyByZXR1cm4gdGhlIGNhc2VSZWR1Y2VyIGZ1bmMgYW5kIG5vdCB3cmFwIGl0IHdpdGggcHJvZHVjZS5cclxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhc2VSZWR1Y2VyKHByZXZpb3VzU3RhdGUgYXMgYW55LCBhY3Rpb24pXHJcblxyXG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c1N0YXRlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzU3RhdGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcclxuICAgICAgICAgICAgICAnQSBjYXNlIHJlZHVjZXIgb24gYSBub24tZHJhZnRhYmxlIHZhbHVlIG11c3Qgbm90IHJldHVybiB1bmRlZmluZWQnXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0IGFzIFNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gQHRzLWlnbm9yZSBjcmVhdGVOZXh0U3RhdGUoKSBwcm9kdWNlcyBhbiBJbW11dGFibGU8RHJhZnQ8Uz4+IHJhdGhlclxyXG4gICAgICAgICAgLy8gdGhhbiBhbiBJbW11dGFibGU8Uz4sIGFuZCBUeXBlU2NyaXB0IGNhbm5vdCBmaW5kIG91dCBob3cgdG8gcmVjb25jaWxlXHJcbiAgICAgICAgICAvLyB0aGVzZSB0d28gdHlwZXMuXHJcbiAgICAgICAgICByZXR1cm4gY3JlYXRlTmV4dFN0YXRlKHByZXZpb3VzU3RhdGUsIChkcmFmdDogRHJhZnQ8Uz4pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhc2VSZWR1Y2VyKGRyYWZ0LCBhY3Rpb24pXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHByZXZpb3VzU3RhdGVcclxuICAgIH0sIHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgcmVkdWNlci5nZXRJbml0aWFsU3RhdGUgPSBnZXRJbml0aWFsU3RhdGVcclxuXHJcbiAgcmV0dXJuIHJlZHVjZXIgYXMgUmVkdWNlcldpdGhJbml0aWFsU3RhdGU8Uz5cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IEFjdGlvbiwgQW55QWN0aW9uIH0gZnJvbSAncmVkdXgnXHJcbmltcG9ydCB0eXBlIHtcclxuICBDYXNlUmVkdWNlcixcclxuICBDYXNlUmVkdWNlcnMsXHJcbiAgQWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uQ29sbGVjdGlvbixcclxufSBmcm9tICcuL2NyZWF0ZVJlZHVjZXInXHJcbmltcG9ydCB0eXBlIHsgVHlwZUd1YXJkIH0gZnJvbSAnLi90c0hlbHBlcnMnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVkQWN0aW9uQ3JlYXRvcjxUeXBlIGV4dGVuZHMgc3RyaW5nPiB7XHJcbiAgKC4uLmFyZ3M6IGFueVtdKTogQWN0aW9uPFR5cGU+XHJcbiAgdHlwZTogVHlwZVxyXG59XHJcblxyXG4vKipcclxuICogQSBidWlsZGVyIGZvciBhbiBhY3Rpb24gPC0+IHJlZHVjZXIgbWFwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvblJlZHVjZXJNYXBCdWlsZGVyPFN0YXRlPiB7XHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIGNhc2UgcmVkdWNlciB0byBoYW5kbGUgYSBzaW5nbGUgZXhhY3QgYWN0aW9uIHR5cGUuXHJcbiAgICogQHJlbWFya3NcclxuICAgKiBBbGwgY2FsbHMgdG8gYGJ1aWxkZXIuYWRkQ2FzZWAgbXVzdCBjb21lIGJlZm9yZSBhbnkgY2FsbHMgdG8gYGJ1aWxkZXIuYWRkTWF0Y2hlcmAgb3IgYGJ1aWxkZXIuYWRkRGVmYXVsdENhc2VgLlxyXG4gICAqIEBwYXJhbSBhY3Rpb25DcmVhdG9yIC0gRWl0aGVyIGEgcGxhaW4gYWN0aW9uIHR5cGUgc3RyaW5nLCBvciBhbiBhY3Rpb24gY3JlYXRvciBnZW5lcmF0ZWQgYnkgW2BjcmVhdGVBY3Rpb25gXSguL2NyZWF0ZUFjdGlvbikgdGhhdCBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGFjdGlvbiB0eXBlLlxyXG4gICAqIEBwYXJhbSByZWR1Y2VyIC0gVGhlIGFjdHVhbCBjYXNlIHJlZHVjZXIgZnVuY3Rpb24uXHJcbiAgICovXHJcbiAgYWRkQ2FzZTxBY3Rpb25DcmVhdG9yIGV4dGVuZHMgVHlwZWRBY3Rpb25DcmVhdG9yPHN0cmluZz4+KFxyXG4gICAgYWN0aW9uQ3JlYXRvcjogQWN0aW9uQ3JlYXRvcixcclxuICAgIHJlZHVjZXI6IENhc2VSZWR1Y2VyPFN0YXRlLCBSZXR1cm5UeXBlPEFjdGlvbkNyZWF0b3I+PlxyXG4gICk6IEFjdGlvblJlZHVjZXJNYXBCdWlsZGVyPFN0YXRlPlxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBjYXNlIHJlZHVjZXIgdG8gaGFuZGxlIGEgc2luZ2xlIGV4YWN0IGFjdGlvbiB0eXBlLlxyXG4gICAqIEByZW1hcmtzXHJcbiAgICogQWxsIGNhbGxzIHRvIGBidWlsZGVyLmFkZENhc2VgIG11c3QgY29tZSBiZWZvcmUgYW55IGNhbGxzIHRvIGBidWlsZGVyLmFkZE1hdGNoZXJgIG9yIGBidWlsZGVyLmFkZERlZmF1bHRDYXNlYC5cclxuICAgKiBAcGFyYW0gYWN0aW9uQ3JlYXRvciAtIEVpdGhlciBhIHBsYWluIGFjdGlvbiB0eXBlIHN0cmluZywgb3IgYW4gYWN0aW9uIGNyZWF0b3IgZ2VuZXJhdGVkIGJ5IFtgY3JlYXRlQWN0aW9uYF0oLi9jcmVhdGVBY3Rpb24pIHRoYXQgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBhY3Rpb24gdHlwZS5cclxuICAgKiBAcGFyYW0gcmVkdWNlciAtIFRoZSBhY3R1YWwgY2FzZSByZWR1Y2VyIGZ1bmN0aW9uLlxyXG4gICAqL1xyXG4gIGFkZENhc2U8VHlwZSBleHRlbmRzIHN0cmluZywgQSBleHRlbmRzIEFjdGlvbjxUeXBlPj4oXHJcbiAgICB0eXBlOiBUeXBlLFxyXG4gICAgcmVkdWNlcjogQ2FzZVJlZHVjZXI8U3RhdGUsIEE+XHJcbiAgKTogQWN0aW9uUmVkdWNlck1hcEJ1aWxkZXI8U3RhdGU+XHJcblxyXG4gIC8qKlxyXG4gICAqIEFsbG93cyB5b3UgdG8gbWF0Y2ggeW91ciBpbmNvbWluZyBhY3Rpb25zIGFnYWluc3QgeW91ciBvd24gZmlsdGVyIGZ1bmN0aW9uIGluc3RlYWQgb2Ygb25seSB0aGUgYGFjdGlvbi50eXBlYCBwcm9wZXJ0eS5cclxuICAgKiBAcmVtYXJrc1xyXG4gICAqIElmIG11bHRpcGxlIG1hdGNoZXIgcmVkdWNlcnMgbWF0Y2gsIGFsbCBvZiB0aGVtIHdpbGwgYmUgZXhlY3V0ZWQgaW4gdGhlIG9yZGVyXHJcbiAgICogdGhleSB3ZXJlIGRlZmluZWQgaW4gLSBldmVuIGlmIGEgY2FzZSByZWR1Y2VyIGFscmVhZHkgbWF0Y2hlZC5cclxuICAgKiBBbGwgY2FsbHMgdG8gYGJ1aWxkZXIuYWRkTWF0Y2hlcmAgbXVzdCBjb21lIGFmdGVyIGFueSBjYWxscyB0byBgYnVpbGRlci5hZGRDYXNlYCBhbmQgYmVmb3JlIGFueSBjYWxscyB0byBgYnVpbGRlci5hZGREZWZhdWx0Q2FzZWAuXHJcbiAgICogQHBhcmFtIG1hdGNoZXIgLSBBIG1hdGNoZXIgZnVuY3Rpb24uIEluIFR5cGVTY3JpcHQsIHRoaXMgc2hvdWxkIGJlIGEgW3R5cGUgcHJlZGljYXRlXShodHRwczovL3d3dy50eXBlc2NyaXB0bGFuZy5vcmcvZG9jcy9oYW5kYm9vay9hZHZhbmNlZC10eXBlcy5odG1sI3VzaW5nLXR5cGUtcHJlZGljYXRlcylcclxuICAgKiAgIGZ1bmN0aW9uXHJcbiAgICogQHBhcmFtIHJlZHVjZXIgLSBUaGUgYWN0dWFsIGNhc2UgcmVkdWNlciBmdW5jdGlvbi5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbmBgYHRzXHJcbmltcG9ydCB7XHJcbiAgY3JlYXRlQWN0aW9uLFxyXG4gIGNyZWF0ZVJlZHVjZXIsXHJcbiAgQXN5bmNUaHVuayxcclxuICBBbnlBY3Rpb24sXHJcbn0gZnJvbSBcIkByZWR1eGpzL3Rvb2xraXRcIjtcclxuXHJcbnR5cGUgR2VuZXJpY0FzeW5jVGh1bmsgPSBBc3luY1RodW5rPHVua25vd24sIHVua25vd24sIGFueT47XHJcblxyXG50eXBlIFBlbmRpbmdBY3Rpb24gPSBSZXR1cm5UeXBlPEdlbmVyaWNBc3luY1RodW5rW1wicGVuZGluZ1wiXT47XHJcbnR5cGUgUmVqZWN0ZWRBY3Rpb24gPSBSZXR1cm5UeXBlPEdlbmVyaWNBc3luY1RodW5rW1wicmVqZWN0ZWRcIl0+O1xyXG50eXBlIEZ1bGZpbGxlZEFjdGlvbiA9IFJldHVyblR5cGU8R2VuZXJpY0FzeW5jVGh1bmtbXCJmdWxmaWxsZWRcIl0+O1xyXG5cclxuY29uc3QgaW5pdGlhbFN0YXRlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcbmNvbnN0IHJlc2V0QWN0aW9uID0gY3JlYXRlQWN0aW9uKFwicmVzZXQtdHJhY2tlZC1sb2FkaW5nLXN0YXRlXCIpO1xyXG5cclxuZnVuY3Rpb24gaXNQZW5kaW5nQWN0aW9uKGFjdGlvbjogQW55QWN0aW9uKTogYWN0aW9uIGlzIFBlbmRpbmdBY3Rpb24ge1xyXG4gIHJldHVybiBhY3Rpb24udHlwZS5lbmRzV2l0aChcIi9wZW5kaW5nXCIpO1xyXG59XHJcblxyXG5jb25zdCByZWR1Y2VyID0gY3JlYXRlUmVkdWNlcihpbml0aWFsU3RhdGUsIChidWlsZGVyKSA9PiB7XHJcbiAgYnVpbGRlclxyXG4gICAgLmFkZENhc2UocmVzZXRBY3Rpb24sICgpID0+IGluaXRpYWxTdGF0ZSlcclxuICAgIC8vIG1hdGNoZXIgY2FuIGJlIGRlZmluZWQgb3V0c2lkZSBhcyBhIHR5cGUgcHJlZGljYXRlIGZ1bmN0aW9uXHJcbiAgICAuYWRkTWF0Y2hlcihpc1BlbmRpbmdBY3Rpb24sIChzdGF0ZSwgYWN0aW9uKSA9PiB7XHJcbiAgICAgIHN0YXRlW2FjdGlvbi5tZXRhLnJlcXVlc3RJZF0gPSBcInBlbmRpbmdcIjtcclxuICAgIH0pXHJcbiAgICAuYWRkTWF0Y2hlcihcclxuICAgICAgLy8gbWF0Y2hlciBjYW4gYmUgZGVmaW5lZCBpbmxpbmUgYXMgYSB0eXBlIHByZWRpY2F0ZSBmdW5jdGlvblxyXG4gICAgICAoYWN0aW9uKTogYWN0aW9uIGlzIFJlamVjdGVkQWN0aW9uID0+IGFjdGlvbi50eXBlLmVuZHNXaXRoKFwiL3JlamVjdGVkXCIpLFxyXG4gICAgICAoc3RhdGUsIGFjdGlvbikgPT4ge1xyXG4gICAgICAgIHN0YXRlW2FjdGlvbi5tZXRhLnJlcXVlc3RJZF0gPSBcInJlamVjdGVkXCI7XHJcbiAgICAgIH1cclxuICAgIClcclxuICAgIC8vIG1hdGNoZXIgY2FuIGp1c3QgcmV0dXJuIGJvb2xlYW4gYW5kIHRoZSBtYXRjaGVyIGNhbiByZWNlaXZlIGEgZ2VuZXJpYyBhcmd1bWVudFxyXG4gICAgLmFkZE1hdGNoZXI8RnVsZmlsbGVkQWN0aW9uPihcclxuICAgICAgKGFjdGlvbikgPT4gYWN0aW9uLnR5cGUuZW5kc1dpdGgoXCIvZnVsZmlsbGVkXCIpLFxyXG4gICAgICAoc3RhdGUsIGFjdGlvbikgPT4ge1xyXG4gICAgICAgIHN0YXRlW2FjdGlvbi5tZXRhLnJlcXVlc3RJZF0gPSBcImZ1bGZpbGxlZFwiO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG59KTtcclxuYGBgXHJcbiAgICovXHJcbiAgYWRkTWF0Y2hlcjxBPihcclxuICAgIG1hdGNoZXI6IFR5cGVHdWFyZDxBPiB8ICgoYWN0aW9uOiBhbnkpID0+IGJvb2xlYW4pLFxyXG4gICAgcmVkdWNlcjogQ2FzZVJlZHVjZXI8U3RhdGUsIEEgZXh0ZW5kcyBBbnlBY3Rpb24gPyBBIDogQSAmIEFueUFjdGlvbj5cclxuICApOiBPbWl0PEFjdGlvblJlZHVjZXJNYXBCdWlsZGVyPFN0YXRlPiwgJ2FkZENhc2UnPlxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgXCJkZWZhdWx0IGNhc2VcIiByZWR1Y2VyIHRoYXQgaXMgZXhlY3V0ZWQgaWYgbm8gY2FzZSByZWR1Y2VyIGFuZCBubyBtYXRjaGVyXHJcbiAgICogcmVkdWNlciB3YXMgZXhlY3V0ZWQgZm9yIHRoaXMgYWN0aW9uLlxyXG4gICAqIEBwYXJhbSByZWR1Y2VyIC0gVGhlIGZhbGxiYWNrIFwiZGVmYXVsdCBjYXNlXCIgcmVkdWNlciBmdW5jdGlvbi5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlXHJcbmBgYHRzXHJcbmltcG9ydCB7IGNyZWF0ZVJlZHVjZXIgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0J1xyXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7IG90aGVyQWN0aW9uczogMCB9XHJcbmNvbnN0IHJlZHVjZXIgPSBjcmVhdGVSZWR1Y2VyKGluaXRpYWxTdGF0ZSwgYnVpbGRlciA9PiB7XHJcbiAgYnVpbGRlclxyXG4gICAgLy8gLmFkZENhc2UoLi4uKVxyXG4gICAgLy8gLmFkZE1hdGNoZXIoLi4uKVxyXG4gICAgLmFkZERlZmF1bHRDYXNlKChzdGF0ZSwgYWN0aW9uKSA9PiB7XHJcbiAgICAgIHN0YXRlLm90aGVyQWN0aW9ucysrXHJcbiAgICB9KVxyXG59KVxyXG5gYGBcclxuICAgKi9cclxuICBhZGREZWZhdWx0Q2FzZShyZWR1Y2VyOiBDYXNlUmVkdWNlcjxTdGF0ZSwgQW55QWN0aW9uPik6IHt9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBleGVjdXRlUmVkdWNlckJ1aWxkZXJDYWxsYmFjazxTPihcclxuICBidWlsZGVyQ2FsbGJhY2s6IChidWlsZGVyOiBBY3Rpb25SZWR1Y2VyTWFwQnVpbGRlcjxTPikgPT4gdm9pZFxyXG4pOiBbXHJcbiAgQ2FzZVJlZHVjZXJzPFMsIGFueT4sXHJcbiAgQWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uQ29sbGVjdGlvbjxTPixcclxuICBDYXNlUmVkdWNlcjxTLCBBbnlBY3Rpb24+IHwgdW5kZWZpbmVkXHJcbl0ge1xyXG4gIGNvbnN0IGFjdGlvbnNNYXA6IENhc2VSZWR1Y2VyczxTLCBhbnk+ID0ge31cclxuICBjb25zdCBhY3Rpb25NYXRjaGVyczogQWN0aW9uTWF0Y2hlckRlc2NyaXB0aW9uQ29sbGVjdGlvbjxTPiA9IFtdXHJcbiAgbGV0IGRlZmF1bHRDYXNlUmVkdWNlcjogQ2FzZVJlZHVjZXI8UywgQW55QWN0aW9uPiB8IHVuZGVmaW5lZFxyXG4gIGNvbnN0IGJ1aWxkZXIgPSB7XHJcbiAgICBhZGRDYXNlKFxyXG4gICAgICB0eXBlT3JBY3Rpb25DcmVhdG9yOiBzdHJpbmcgfCBUeXBlZEFjdGlvbkNyZWF0b3I8YW55PixcclxuICAgICAgcmVkdWNlcjogQ2FzZVJlZHVjZXI8Uz5cclxuICAgICkge1xyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgIHRvIGtlZXAgdGhlIGRlZmluaXRpb24gYnkgdGhlIHVzZXIgaW4gbGluZSB3aXRoIGFjdHVhbCBiZWhhdmlvciwgXHJcbiAgICAgICAgIHdlIGVuZm9yY2UgYGFkZENhc2VgIHRvIGFsd2F5cyBiZSBjYWxsZWQgYmVmb3JlIGNhbGxpbmcgYGFkZE1hdGNoZXJgXHJcbiAgICAgICAgIGFzIG1hdGNoaW5nIGNhc2VzIHRha2UgcHJlY2VkZW5jZSBvdmVyIG1hdGNoZXJzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWYgKGFjdGlvbk1hdGNoZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgJ2BidWlsZGVyLmFkZENhc2VgIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgYnVpbGRlci5hZGRNYXRjaGVyYCdcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRlZmF1bHRDYXNlUmVkdWNlcikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAnYGJ1aWxkZXIuYWRkQ2FzZWAgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBidWlsZGVyLmFkZERlZmF1bHRDYXNlYCdcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgdHlwZSA9XHJcbiAgICAgICAgdHlwZW9mIHR5cGVPckFjdGlvbkNyZWF0b3IgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICA/IHR5cGVPckFjdGlvbkNyZWF0b3JcclxuICAgICAgICAgIDogdHlwZU9yQWN0aW9uQ3JlYXRvci50eXBlXHJcbiAgICAgIGlmICh0eXBlIGluIGFjdGlvbnNNYXApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAnYWRkQ2FzZSBjYW5ub3QgYmUgY2FsbGVkIHdpdGggdHdvIHJlZHVjZXJzIGZvciB0aGUgc2FtZSBhY3Rpb24gdHlwZSdcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgYWN0aW9uc01hcFt0eXBlXSA9IHJlZHVjZXJcclxuICAgICAgcmV0dXJuIGJ1aWxkZXJcclxuICAgIH0sXHJcbiAgICBhZGRNYXRjaGVyPEE+KFxyXG4gICAgICBtYXRjaGVyOiBUeXBlR3VhcmQ8QT4sXHJcbiAgICAgIHJlZHVjZXI6IENhc2VSZWR1Y2VyPFMsIEEgZXh0ZW5kcyBBbnlBY3Rpb24gPyBBIDogQSAmIEFueUFjdGlvbj5cclxuICAgICkge1xyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgIGlmIChkZWZhdWx0Q2FzZVJlZHVjZXIpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgJ2BidWlsZGVyLmFkZE1hdGNoZXJgIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgYnVpbGRlci5hZGREZWZhdWx0Q2FzZWAnXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGFjdGlvbk1hdGNoZXJzLnB1c2goeyBtYXRjaGVyLCByZWR1Y2VyIH0pXHJcbiAgICAgIHJldHVybiBidWlsZGVyXHJcbiAgICB9LFxyXG4gICAgYWRkRGVmYXVsdENhc2UocmVkdWNlcjogQ2FzZVJlZHVjZXI8UywgQW55QWN0aW9uPikge1xyXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgIGlmIChkZWZhdWx0Q2FzZVJlZHVjZXIpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGJ1aWxkZXIuYWRkRGVmYXVsdENhc2VgIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlJylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZGVmYXVsdENhc2VSZWR1Y2VyID0gcmVkdWNlclxyXG4gICAgICByZXR1cm4gYnVpbGRlclxyXG4gICAgfSxcclxuICB9XHJcbiAgYnVpbGRlckNhbGxiYWNrKGJ1aWxkZXIpXHJcbiAgcmV0dXJuIFthY3Rpb25zTWFwLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyXVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgQW55QWN0aW9uLCBSZWR1Y2VyIH0gZnJvbSAncmVkdXgnXHJcbmltcG9ydCB7IGNyZWF0ZU5leHRTdGF0ZSB9IGZyb20gJy4nXHJcbmltcG9ydCB0eXBlIHtcclxuICBBY3Rpb25DcmVhdG9yV2l0aG91dFBheWxvYWQsXHJcbiAgUGF5bG9hZEFjdGlvbixcclxuICBQYXlsb2FkQWN0aW9uQ3JlYXRvcixcclxuICBQcmVwYXJlQWN0aW9uLFxyXG4gIF9BY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZCxcclxufSBmcm9tICcuL2NyZWF0ZUFjdGlvbidcclxuaW1wb3J0IHsgY3JlYXRlQWN0aW9uIH0gZnJvbSAnLi9jcmVhdGVBY3Rpb24nXHJcbmltcG9ydCB0eXBlIHtcclxuICBDYXNlUmVkdWNlcixcclxuICBDYXNlUmVkdWNlcnMsXHJcbiAgUmVkdWNlcldpdGhJbml0aWFsU3RhdGUsXHJcbn0gZnJvbSAnLi9jcmVhdGVSZWR1Y2VyJ1xyXG5pbXBvcnQgeyBjcmVhdGVSZWR1Y2VyLCBOb3RGdW5jdGlvbiB9IGZyb20gJy4vY3JlYXRlUmVkdWNlcidcclxuaW1wb3J0IHR5cGUgeyBBY3Rpb25SZWR1Y2VyTWFwQnVpbGRlciB9IGZyb20gJy4vbWFwQnVpbGRlcnMnXHJcbmltcG9ydCB7IGV4ZWN1dGVSZWR1Y2VyQnVpbGRlckNhbGxiYWNrIH0gZnJvbSAnLi9tYXBCdWlsZGVycydcclxuaW1wb3J0IHR5cGUgeyBOb0luZmVyIH0gZnJvbSAnLi90c0hlbHBlcnMnXHJcbmltcG9ydCB7IGZyZWV6ZURyYWZ0YWJsZSB9IGZyb20gJy4vdXRpbHMnXHJcblxyXG5sZXQgaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbiA9IGZhbHNlXHJcblxyXG4vKipcclxuICogQW4gYWN0aW9uIGNyZWF0b3IgYXR0YWNoZWQgdG8gYSBzbGljZS5cclxuICpcclxuICogQGRlcHJlY2F0ZWQgcGxlYXNlIHVzZSBQYXlsb2FkQWN0aW9uQ3JlYXRvciBkaXJlY3RseVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBTbGljZUFjdGlvbkNyZWF0b3I8UD4gPSBQYXlsb2FkQWN0aW9uQ3JlYXRvcjxQPlxyXG5cclxuLyoqXHJcbiAqIFRoZSByZXR1cm4gdmFsdWUgb2YgYGNyZWF0ZVNsaWNlYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNsaWNlPFxyXG4gIFN0YXRlID0gYW55LFxyXG4gIENhc2VSZWR1Y2VycyBleHRlbmRzIFNsaWNlQ2FzZVJlZHVjZXJzPFN0YXRlPiA9IFNsaWNlQ2FzZVJlZHVjZXJzPFN0YXRlPixcclxuICBOYW1lIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nXHJcbj4ge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzbGljZSBuYW1lLlxyXG4gICAqL1xyXG4gIG5hbWU6IE5hbWVcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHNsaWNlJ3MgcmVkdWNlci5cclxuICAgKi9cclxuICByZWR1Y2VyOiBSZWR1Y2VyPFN0YXRlPlxyXG5cclxuICAvKipcclxuICAgKiBBY3Rpb24gY3JlYXRvcnMgZm9yIHRoZSB0eXBlcyBvZiBhY3Rpb25zIHRoYXQgYXJlIGhhbmRsZWQgYnkgdGhlIHNsaWNlXHJcbiAgICogcmVkdWNlci5cclxuICAgKi9cclxuICBhY3Rpb25zOiBDYXNlUmVkdWNlckFjdGlvbnM8Q2FzZVJlZHVjZXJzLCBOYW1lPlxyXG5cclxuICAvKipcclxuICAgKiBUaGUgaW5kaXZpZHVhbCBjYXNlIHJlZHVjZXIgZnVuY3Rpb25zIHRoYXQgd2VyZSBwYXNzZWQgaW4gdGhlIGByZWR1Y2Vyc2AgcGFyYW1ldGVyLlxyXG4gICAqIFRoaXMgZW5hYmxlcyByZXVzZSBhbmQgdGVzdGluZyBpZiB0aGV5IHdlcmUgZGVmaW5lZCBpbmxpbmUgd2hlbiBjYWxsaW5nIGBjcmVhdGVTbGljZWAuXHJcbiAgICovXHJcbiAgY2FzZVJlZHVjZXJzOiBTbGljZURlZmluZWRDYXNlUmVkdWNlcnM8Q2FzZVJlZHVjZXJzPlxyXG5cclxuICAvKipcclxuICAgKiBQcm92aWRlcyBhY2Nlc3MgdG8gdGhlIGluaXRpYWwgc3RhdGUgdmFsdWUgZ2l2ZW4gdG8gdGhlIHNsaWNlLlxyXG4gICAqIElmIGEgbGF6eSBzdGF0ZSBpbml0aWFsaXplciB3YXMgcHJvdmlkZWQsIGl0IHdpbGwgYmUgY2FsbGVkIGFuZCBhIGZyZXNoIHZhbHVlIHJldHVybmVkLlxyXG4gICAqL1xyXG4gIGdldEluaXRpYWxTdGF0ZTogKCkgPT4gU3RhdGVcclxufVxyXG5cclxuLyoqXHJcbiAqIE9wdGlvbnMgZm9yIGBjcmVhdGVTbGljZSgpYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVTbGljZU9wdGlvbnM8XHJcbiAgU3RhdGUgPSBhbnksXHJcbiAgQ1IgZXh0ZW5kcyBTbGljZUNhc2VSZWR1Y2VyczxTdGF0ZT4gPSBTbGljZUNhc2VSZWR1Y2VyczxTdGF0ZT4sXHJcbiAgTmFtZSBleHRlbmRzIHN0cmluZyA9IHN0cmluZ1xyXG4+IHtcclxuICAvKipcclxuICAgKiBUaGUgc2xpY2UncyBuYW1lLiBVc2VkIHRvIG5hbWVzcGFjZSB0aGUgZ2VuZXJhdGVkIGFjdGlvbiB0eXBlcy5cclxuICAgKi9cclxuICBuYW1lOiBOYW1lXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBpbml0aWFsIHN0YXRlIHRoYXQgc2hvdWxkIGJlIHVzZWQgd2hlbiB0aGUgcmVkdWNlciBpcyBjYWxsZWQgdGhlIGZpcnN0IHRpbWUuIFRoaXMgbWF5IGFsc28gYmUgYSBcImxhenkgaW5pdGlhbGl6ZXJcIiBmdW5jdGlvbiwgd2hpY2ggc2hvdWxkIHJldHVybiBhbiBpbml0aWFsIHN0YXRlIHZhbHVlIHdoZW4gY2FsbGVkLiBUaGlzIHdpbGwgYmUgdXNlZCB3aGVuZXZlciB0aGUgcmVkdWNlciBpcyBjYWxsZWQgd2l0aCBgdW5kZWZpbmVkYCBhcyBpdHMgc3RhdGUgdmFsdWUsIGFuZCBpcyBwcmltYXJpbHkgdXNlZnVsIGZvciBjYXNlcyBsaWtlIHJlYWRpbmcgaW5pdGlhbCBzdGF0ZSBmcm9tIGBsb2NhbFN0b3JhZ2VgLlxyXG4gICAqL1xyXG4gIGluaXRpYWxTdGF0ZTogU3RhdGUgfCAoKCkgPT4gU3RhdGUpXHJcblxyXG4gIC8qKlxyXG4gICAqIEEgbWFwcGluZyBmcm9tIGFjdGlvbiB0eXBlcyB0byBhY3Rpb24tdHlwZS1zcGVjaWZpYyAqY2FzZSByZWR1Y2VyKlxyXG4gICAqIGZ1bmN0aW9ucy4gRm9yIGV2ZXJ5IGFjdGlvbiB0eXBlLCBhIG1hdGNoaW5nIGFjdGlvbiBjcmVhdG9yIHdpbGwgYmVcclxuICAgKiBnZW5lcmF0ZWQgdXNpbmcgYGNyZWF0ZUFjdGlvbigpYC5cclxuICAgKi9cclxuICByZWR1Y2VyczogVmFsaWRhdGVTbGljZUNhc2VSZWR1Y2VyczxTdGF0ZSwgQ1I+XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgY2FsbGJhY2sgdGhhdCByZWNlaXZlcyBhICpidWlsZGVyKiBvYmplY3QgdG8gZGVmaW5lXHJcbiAgICogY2FzZSByZWR1Y2VycyB2aWEgY2FsbHMgdG8gYGJ1aWxkZXIuYWRkQ2FzZShhY3Rpb25DcmVhdG9yT3JUeXBlLCByZWR1Y2VyKWAuXHJcbiAgICogXHJcbiAgICogQWx0ZXJuYXRpdmVseSwgYSBtYXBwaW5nIGZyb20gYWN0aW9uIHR5cGVzIHRvIGFjdGlvbi10eXBlLXNwZWNpZmljICpjYXNlIHJlZHVjZXIqXHJcbiAgICogZnVuY3Rpb25zLiBUaGVzZSByZWR1Y2VycyBzaG91bGQgaGF2ZSBleGlzdGluZyBhY3Rpb24gdHlwZXMgdXNlZFxyXG4gICAqIGFzIHRoZSBrZXlzLCBhbmQgYWN0aW9uIGNyZWF0b3JzIHdpbGwgX25vdF8gYmUgZ2VuZXJhdGVkLlxyXG4gICAqIFxyXG4gICAqIEBleGFtcGxlXHJcbmBgYHRzXHJcbmltcG9ydCB7IGNyZWF0ZUFjdGlvbiwgY3JlYXRlU2xpY2UsIEFjdGlvbiwgQW55QWN0aW9uIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCdcclxuY29uc3QgaW5jcmVtZW50QnkgPSBjcmVhdGVBY3Rpb248bnVtYmVyPignaW5jcmVtZW50QnknKVxyXG5jb25zdCBkZWNyZW1lbnQgPSBjcmVhdGVBY3Rpb24oJ2RlY3JlbWVudCcpXHJcblxyXG5pbnRlcmZhY2UgUmVqZWN0ZWRBY3Rpb24gZXh0ZW5kcyBBY3Rpb24ge1xyXG4gIGVycm9yOiBFcnJvclxyXG59XHJcblxyXG5mdW5jdGlvbiBpc1JlamVjdGVkQWN0aW9uKGFjdGlvbjogQW55QWN0aW9uKTogYWN0aW9uIGlzIFJlamVjdGVkQWN0aW9uIHtcclxuICByZXR1cm4gYWN0aW9uLnR5cGUuZW5kc1dpdGgoJ3JlamVjdGVkJylcclxufVxyXG5cclxuY3JlYXRlU2xpY2Uoe1xyXG4gIG5hbWU6ICdjb3VudGVyJyxcclxuICBpbml0aWFsU3RhdGU6IDAsXHJcbiAgcmVkdWNlcnM6IHt9LFxyXG4gIGV4dHJhUmVkdWNlcnM6IGJ1aWxkZXIgPT4ge1xyXG4gICAgYnVpbGRlclxyXG4gICAgICAuYWRkQ2FzZShpbmNyZW1lbnRCeSwgKHN0YXRlLCBhY3Rpb24pID0+IHtcclxuICAgICAgICAvLyBhY3Rpb24gaXMgaW5mZXJyZWQgY29ycmVjdGx5IGhlcmUgaWYgdXNpbmcgVFNcclxuICAgICAgfSlcclxuICAgICAgLy8gWW91IGNhbiBjaGFpbiBjYWxscywgb3IgaGF2ZSBzZXBhcmF0ZSBgYnVpbGRlci5hZGRDYXNlKClgIGxpbmVzIGVhY2ggdGltZVxyXG4gICAgICAuYWRkQ2FzZShkZWNyZW1lbnQsIChzdGF0ZSwgYWN0aW9uKSA9PiB7fSlcclxuICAgICAgLy8gWW91IGNhbiBtYXRjaCBhIHJhbmdlIG9mIGFjdGlvbiB0eXBlc1xyXG4gICAgICAuYWRkTWF0Y2hlcihcclxuICAgICAgICBpc1JlamVjdGVkQWN0aW9uLFxyXG4gICAgICAgIC8vIGBhY3Rpb25gIHdpbGwgYmUgaW5mZXJyZWQgYXMgYSBSZWplY3RlZEFjdGlvbiBkdWUgdG8gaXNSZWplY3RlZEFjdGlvbiBiZWluZyBkZWZpbmVkIGFzIGEgdHlwZSBndWFyZFxyXG4gICAgICAgIChzdGF0ZSwgYWN0aW9uKSA9PiB7fVxyXG4gICAgICApXHJcbiAgICAgIC8vIGFuZCBwcm92aWRlIGEgZGVmYXVsdCBjYXNlIGlmIG5vIG90aGVyIGhhbmRsZXJzIG1hdGNoZWRcclxuICAgICAgLmFkZERlZmF1bHRDYXNlKChzdGF0ZSwgYWN0aW9uKSA9PiB7fSlcclxuICAgIH1cclxufSlcclxuYGBgXHJcbiAgICovXHJcbiAgZXh0cmFSZWR1Y2Vycz86XHJcbiAgICB8IENhc2VSZWR1Y2VyczxOb0luZmVyPFN0YXRlPiwgYW55PlxyXG4gICAgfCAoKGJ1aWxkZXI6IEFjdGlvblJlZHVjZXJNYXBCdWlsZGVyPE5vSW5mZXI8U3RhdGU+PikgPT4gdm9pZClcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgQ2FzZVJlZHVjZXIgd2l0aCBhIGBwcmVwYXJlYCBtZXRob2QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIENhc2VSZWR1Y2VyV2l0aFByZXBhcmU8U3RhdGUsIEFjdGlvbiBleHRlbmRzIFBheWxvYWRBY3Rpb24+ID0ge1xyXG4gIHJlZHVjZXI6IENhc2VSZWR1Y2VyPFN0YXRlLCBBY3Rpb24+XHJcbiAgcHJlcGFyZTogUHJlcGFyZUFjdGlvbjxBY3Rpb25bJ3BheWxvYWQnXT5cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSB0eXBlIGRlc2NyaWJpbmcgYSBzbGljZSdzIGByZWR1Y2Vyc2Agb3B0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBTbGljZUNhc2VSZWR1Y2VyczxTdGF0ZT4gPSB7XHJcbiAgW0s6IHN0cmluZ106XHJcbiAgICB8IENhc2VSZWR1Y2VyPFN0YXRlLCBQYXlsb2FkQWN0aW9uPGFueT4+XHJcbiAgICB8IENhc2VSZWR1Y2VyV2l0aFByZXBhcmU8U3RhdGUsIFBheWxvYWRBY3Rpb248YW55LCBzdHJpbmcsIGFueSwgYW55Pj5cclxufVxyXG5cclxudHlwZSBTbGljZUFjdGlvblR5cGU8XHJcbiAgU2xpY2VOYW1lIGV4dGVuZHMgc3RyaW5nLFxyXG4gIEFjdGlvbk5hbWUgZXh0ZW5kcyBrZXlvZiBhbnlcclxuPiA9IEFjdGlvbk5hbWUgZXh0ZW5kcyBzdHJpbmcgfCBudW1iZXIgPyBgJHtTbGljZU5hbWV9LyR7QWN0aW9uTmFtZX1gIDogc3RyaW5nXHJcblxyXG4vKipcclxuICogRGVyaXZlcyB0aGUgc2xpY2UncyBgYWN0aW9uc2AgcHJvcGVydHkgZnJvbSB0aGUgYHJlZHVjZXJzYCBvcHRpb25zXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIENhc2VSZWR1Y2VyQWN0aW9uczxcclxuICBDYXNlUmVkdWNlcnMgZXh0ZW5kcyBTbGljZUNhc2VSZWR1Y2Vyczxhbnk+LFxyXG4gIFNsaWNlTmFtZSBleHRlbmRzIHN0cmluZ1xyXG4+ID0ge1xyXG4gIFtUeXBlIGluIGtleW9mIENhc2VSZWR1Y2Vyc106IENhc2VSZWR1Y2Vyc1tUeXBlXSBleHRlbmRzIHsgcHJlcGFyZTogYW55IH1cclxuICAgID8gQWN0aW9uQ3JlYXRvckZvckNhc2VSZWR1Y2VyV2l0aFByZXBhcmU8XHJcbiAgICAgICAgQ2FzZVJlZHVjZXJzW1R5cGVdLFxyXG4gICAgICAgIFNsaWNlQWN0aW9uVHlwZTxTbGljZU5hbWUsIFR5cGU+XHJcbiAgICAgID5cclxuICAgIDogQWN0aW9uQ3JlYXRvckZvckNhc2VSZWR1Y2VyPFxyXG4gICAgICAgIENhc2VSZWR1Y2Vyc1tUeXBlXSxcclxuICAgICAgICBTbGljZUFjdGlvblR5cGU8U2xpY2VOYW1lLCBUeXBlPlxyXG4gICAgICA+XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYSBgUGF5bG9hZEFjdGlvbkNyZWF0b3JgIHR5cGUgZm9yIGEgcGFzc2VkIGBDYXNlUmVkdWNlcldpdGhQcmVwYXJlYFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbnR5cGUgQWN0aW9uQ3JlYXRvckZvckNhc2VSZWR1Y2VyV2l0aFByZXBhcmU8XHJcbiAgQ1IgZXh0ZW5kcyB7IHByZXBhcmU6IGFueSB9LFxyXG4gIFR5cGUgZXh0ZW5kcyBzdHJpbmdcclxuPiA9IF9BY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxDUlsncHJlcGFyZSddLCBUeXBlPlxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGBQYXlsb2FkQWN0aW9uQ3JlYXRvcmAgdHlwZSBmb3IgYSBwYXNzZWQgYENhc2VSZWR1Y2VyYFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbnR5cGUgQWN0aW9uQ3JlYXRvckZvckNhc2VSZWR1Y2VyPENSLCBUeXBlIGV4dGVuZHMgc3RyaW5nPiA9IENSIGV4dGVuZHMgKFxyXG4gIHN0YXRlOiBhbnksXHJcbiAgYWN0aW9uOiBpbmZlciBBY3Rpb25cclxuKSA9PiBhbnlcclxuICA/IEFjdGlvbiBleHRlbmRzIHsgcGF5bG9hZDogaW5mZXIgUCB9XHJcbiAgICA/IFBheWxvYWRBY3Rpb25DcmVhdG9yPFAsIFR5cGU+XHJcbiAgICA6IEFjdGlvbkNyZWF0b3JXaXRob3V0UGF5bG9hZDxUeXBlPlxyXG4gIDogQWN0aW9uQ3JlYXRvcldpdGhvdXRQYXlsb2FkPFR5cGU+XHJcblxyXG4vKipcclxuICogRXh0cmFjdHMgdGhlIENhc2VSZWR1Y2VycyBvdXQgb2YgYSBgcmVkdWNlcnNgIG9iamVjdCwgZXZlbiBpZiB0aGV5IGFyZVxyXG4gKiB0ZXN0ZWQgaW50byBhIGBDYXNlUmVkdWNlcldpdGhQcmVwYXJlYC5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG50eXBlIFNsaWNlRGVmaW5lZENhc2VSZWR1Y2VyczxDYXNlUmVkdWNlcnMgZXh0ZW5kcyBTbGljZUNhc2VSZWR1Y2Vyczxhbnk+PiA9IHtcclxuICBbVHlwZSBpbiBrZXlvZiBDYXNlUmVkdWNlcnNdOiBDYXNlUmVkdWNlcnNbVHlwZV0gZXh0ZW5kcyB7XHJcbiAgICByZWR1Y2VyOiBpbmZlciBSZWR1Y2VyXHJcbiAgfVxyXG4gICAgPyBSZWR1Y2VyXHJcbiAgICA6IENhc2VSZWR1Y2Vyc1tUeXBlXVxyXG59XHJcblxyXG4vKipcclxuICogVXNlZCBvbiBhIFNsaWNlQ2FzZVJlZHVjZXJzIG9iamVjdC5cclxuICogRW5zdXJlcyB0aGF0IGlmIGEgQ2FzZVJlZHVjZXIgaXMgYSBgQ2FzZVJlZHVjZXJXaXRoUHJlcGFyZWAsIHRoYXRcclxuICogdGhlIGByZWR1Y2VyYCBhbmQgdGhlIGBwcmVwYXJlYCBmdW5jdGlvbiB1c2UgdGhlIHNhbWUgdHlwZSBvZiBgcGF5bG9hZGAuXHJcbiAqXHJcbiAqIE1pZ2h0IGRvIGFkZGl0aW9uYWwgc3VjaCBjaGVja3MgaW4gdGhlIGZ1dHVyZS5cclxuICpcclxuICogVGhpcyB0eXBlIGlzIG9ubHkgZXZlciB1c2VmdWwgaWYgeW91IHdhbnQgdG8gd3JpdGUgeW91ciBvd24gd3JhcHBlciBhcm91bmRcclxuICogYGNyZWF0ZVNsaWNlYC4gUGxlYXNlIGRvbid0IHVzZSBpdCBvdGhlcndpc2UhXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIFZhbGlkYXRlU2xpY2VDYXNlUmVkdWNlcnM8XHJcbiAgUyxcclxuICBBQ1IgZXh0ZW5kcyBTbGljZUNhc2VSZWR1Y2VyczxTPlxyXG4+ID0gQUNSICZcclxuICB7XHJcbiAgICBbVCBpbiBrZXlvZiBBQ1JdOiBBQ1JbVF0gZXh0ZW5kcyB7XHJcbiAgICAgIHJlZHVjZXIoczogUywgYWN0aW9uPzogaW5mZXIgQSk6IGFueVxyXG4gICAgfVxyXG4gICAgICA/IHtcclxuICAgICAgICAgIHByZXBhcmUoLi4uYTogbmV2ZXJbXSk6IE9taXQ8QSwgJ3R5cGUnPlxyXG4gICAgICAgIH1cclxuICAgICAgOiB7fVxyXG4gIH1cclxuXHJcbmZ1bmN0aW9uIGdldFR5cGUoc2xpY2U6IHN0cmluZywgYWN0aW9uS2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgJHtzbGljZX0vJHthY3Rpb25LZXl9YFxyXG59XHJcblxyXG4vKipcclxuICogQSBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgYW4gaW5pdGlhbCBzdGF0ZSwgYW4gb2JqZWN0IGZ1bGwgb2YgcmVkdWNlclxyXG4gKiBmdW5jdGlvbnMsIGFuZCBhIFwic2xpY2UgbmFtZVwiLCBhbmQgYXV0b21hdGljYWxseSBnZW5lcmF0ZXNcclxuICogYWN0aW9uIGNyZWF0b3JzIGFuZCBhY3Rpb24gdHlwZXMgdGhhdCBjb3JyZXNwb25kIHRvIHRoZVxyXG4gKiByZWR1Y2VycyBhbmQgc3RhdGUuXHJcbiAqXHJcbiAqIFRoZSBgcmVkdWNlcmAgYXJndW1lbnQgaXMgcGFzc2VkIHRvIGBjcmVhdGVSZWR1Y2VyKClgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2xpY2U8XHJcbiAgU3RhdGUsXHJcbiAgQ2FzZVJlZHVjZXJzIGV4dGVuZHMgU2xpY2VDYXNlUmVkdWNlcnM8U3RhdGU+LFxyXG4gIE5hbWUgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmdcclxuPihcclxuICBvcHRpb25zOiBDcmVhdGVTbGljZU9wdGlvbnM8U3RhdGUsIENhc2VSZWR1Y2VycywgTmFtZT5cclxuKTogU2xpY2U8U3RhdGUsIENhc2VSZWR1Y2VycywgTmFtZT4ge1xyXG4gIGNvbnN0IHsgbmFtZSB9ID0gb3B0aW9uc1xyXG4gIGlmICghbmFtZSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdgbmFtZWAgaXMgYSByZXF1aXJlZCBvcHRpb24gZm9yIGNyZWF0ZVNsaWNlJylcclxuICB9XHJcblxyXG4gIGlmIChcclxuICAgIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCdcclxuICApIHtcclxuICAgIGlmIChvcHRpb25zLmluaXRpYWxTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgJ1lvdSBtdXN0IHByb3ZpZGUgYW4gYGluaXRpYWxTdGF0ZWAgdmFsdWUgdGhhdCBpcyBub3QgYHVuZGVmaW5lZGAuIFlvdSBtYXkgaGF2ZSBtaXNzcGVsbGVkIGBpbml0aWFsU3RhdGVgJ1xyXG4gICAgICApXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBpbml0aWFsU3RhdGUgPVxyXG4gICAgdHlwZW9mIG9wdGlvbnMuaW5pdGlhbFN0YXRlID09ICdmdW5jdGlvbidcclxuICAgICAgPyBvcHRpb25zLmluaXRpYWxTdGF0ZVxyXG4gICAgICA6IGZyZWV6ZURyYWZ0YWJsZShvcHRpb25zLmluaXRpYWxTdGF0ZSlcclxuXHJcbiAgY29uc3QgcmVkdWNlcnMgPSBvcHRpb25zLnJlZHVjZXJzIHx8IHt9XHJcblxyXG4gIGNvbnN0IHJlZHVjZXJOYW1lcyA9IE9iamVjdC5rZXlzKHJlZHVjZXJzKVxyXG5cclxuICBjb25zdCBzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZTogUmVjb3JkPHN0cmluZywgQ2FzZVJlZHVjZXI+ID0ge31cclxuICBjb25zdCBzbGljZUNhc2VSZWR1Y2Vyc0J5VHlwZTogUmVjb3JkPHN0cmluZywgQ2FzZVJlZHVjZXI+ID0ge31cclxuICBjb25zdCBhY3Rpb25DcmVhdG9yczogUmVjb3JkPHN0cmluZywgRnVuY3Rpb24+ID0ge31cclxuXHJcbiAgcmVkdWNlck5hbWVzLmZvckVhY2goKHJlZHVjZXJOYW1lKSA9PiB7XHJcbiAgICBjb25zdCBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZSA9IHJlZHVjZXJzW3JlZHVjZXJOYW1lXVxyXG4gICAgY29uc3QgdHlwZSA9IGdldFR5cGUobmFtZSwgcmVkdWNlck5hbWUpXHJcblxyXG4gICAgbGV0IGNhc2VSZWR1Y2VyOiBDYXNlUmVkdWNlcjxTdGF0ZSwgYW55PlxyXG4gICAgbGV0IHByZXBhcmVDYWxsYmFjazogUHJlcGFyZUFjdGlvbjxhbnk+IHwgdW5kZWZpbmVkXHJcblxyXG4gICAgaWYgKCdyZWR1Y2VyJyBpbiBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZSkge1xyXG4gICAgICBjYXNlUmVkdWNlciA9IG1heWJlUmVkdWNlcldpdGhQcmVwYXJlLnJlZHVjZXJcclxuICAgICAgcHJlcGFyZUNhbGxiYWNrID0gbWF5YmVSZWR1Y2VyV2l0aFByZXBhcmUucHJlcGFyZVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FzZVJlZHVjZXIgPSBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZVxyXG4gICAgfVxyXG5cclxuICAgIHNsaWNlQ2FzZVJlZHVjZXJzQnlOYW1lW3JlZHVjZXJOYW1lXSA9IGNhc2VSZWR1Y2VyXHJcbiAgICBzbGljZUNhc2VSZWR1Y2Vyc0J5VHlwZVt0eXBlXSA9IGNhc2VSZWR1Y2VyXHJcbiAgICBhY3Rpb25DcmVhdG9yc1tyZWR1Y2VyTmFtZV0gPSBwcmVwYXJlQ2FsbGJhY2tcclxuICAgICAgPyBjcmVhdGVBY3Rpb24odHlwZSwgcHJlcGFyZUNhbGxiYWNrKVxyXG4gICAgICA6IGNyZWF0ZUFjdGlvbih0eXBlKVxyXG4gIH0pXHJcblxyXG4gIGZ1bmN0aW9uIGJ1aWxkUmVkdWNlcigpIHtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5leHRyYVJlZHVjZXJzID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmICghaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbikge1xyXG4gICAgICAgICAgaGFzV2FybmVkQWJvdXRPYmplY3ROb3RhdGlvbiA9IHRydWVcclxuICAgICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgICAgXCJUaGUgb2JqZWN0IG5vdGF0aW9uIGZvciBgY3JlYXRlU2xpY2UuZXh0cmFSZWR1Y2Vyc2AgaXMgZGVwcmVjYXRlZCwgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBSVEsgMi4wLiBQbGVhc2UgdXNlIHRoZSAnYnVpbGRlciBjYWxsYmFjaycgbm90YXRpb24gaW5zdGVhZDogaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy9hcGkvY3JlYXRlU2xpY2VcIlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgW1xyXG4gICAgICBleHRyYVJlZHVjZXJzID0ge30sXHJcbiAgICAgIGFjdGlvbk1hdGNoZXJzID0gW10sXHJcbiAgICAgIGRlZmF1bHRDYXNlUmVkdWNlciA9IHVuZGVmaW5lZCxcclxuICAgIF0gPVxyXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5leHRyYVJlZHVjZXJzID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgPyBleGVjdXRlUmVkdWNlckJ1aWxkZXJDYWxsYmFjayhvcHRpb25zLmV4dHJhUmVkdWNlcnMpXHJcbiAgICAgICAgOiBbb3B0aW9ucy5leHRyYVJlZHVjZXJzXVxyXG5cclxuICAgIGNvbnN0IGZpbmFsQ2FzZVJlZHVjZXJzID0geyAuLi5leHRyYVJlZHVjZXJzLCAuLi5zbGljZUNhc2VSZWR1Y2Vyc0J5VHlwZSB9XHJcblxyXG4gICAgcmV0dXJuIGNyZWF0ZVJlZHVjZXIoaW5pdGlhbFN0YXRlLCAoYnVpbGRlcikgPT4ge1xyXG4gICAgICBmb3IgKGxldCBrZXkgaW4gZmluYWxDYXNlUmVkdWNlcnMpIHtcclxuICAgICAgICBidWlsZGVyLmFkZENhc2Uoa2V5LCBmaW5hbENhc2VSZWR1Y2Vyc1trZXldIGFzIENhc2VSZWR1Y2VyPGFueT4pXHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgbSBvZiBhY3Rpb25NYXRjaGVycykge1xyXG4gICAgICAgIGJ1aWxkZXIuYWRkTWF0Y2hlcihtLm1hdGNoZXIsIG0ucmVkdWNlcilcclxuICAgICAgfVxyXG4gICAgICBpZiAoZGVmYXVsdENhc2VSZWR1Y2VyKSB7XHJcbiAgICAgICAgYnVpbGRlci5hZGREZWZhdWx0Q2FzZShkZWZhdWx0Q2FzZVJlZHVjZXIpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBsZXQgX3JlZHVjZXI6IFJlZHVjZXJXaXRoSW5pdGlhbFN0YXRlPFN0YXRlPlxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbmFtZSxcclxuICAgIHJlZHVjZXIoc3RhdGUsIGFjdGlvbikge1xyXG4gICAgICBpZiAoIV9yZWR1Y2VyKSBfcmVkdWNlciA9IGJ1aWxkUmVkdWNlcigpXHJcblxyXG4gICAgICByZXR1cm4gX3JlZHVjZXIoc3RhdGUsIGFjdGlvbilcclxuICAgIH0sXHJcbiAgICBhY3Rpb25zOiBhY3Rpb25DcmVhdG9ycyBhcyBhbnksXHJcbiAgICBjYXNlUmVkdWNlcnM6IHNsaWNlQ2FzZVJlZHVjZXJzQnlOYW1lIGFzIGFueSxcclxuICAgIGdldEluaXRpYWxTdGF0ZSgpIHtcclxuICAgICAgaWYgKCFfcmVkdWNlcikgX3JlZHVjZXIgPSBidWlsZFJlZHVjZXIoKVxyXG5cclxuICAgICAgcmV0dXJuIF9yZWR1Y2VyLmdldEluaXRpYWxTdGF0ZSgpXHJcbiAgICB9LFxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IEVudGl0eVN0YXRlIH0gZnJvbSAnLi9tb2RlbHMnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5pdGlhbEVudGl0eVN0YXRlPFY+KCk6IEVudGl0eVN0YXRlPFY+IHtcclxuICByZXR1cm4ge1xyXG4gICAgaWRzOiBbXSxcclxuICAgIGVudGl0aWVzOiB7fSxcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbml0aWFsU3RhdGVGYWN0b3J5PFY+KCkge1xyXG4gIGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpOiBFbnRpdHlTdGF0ZTxWPlxyXG4gIGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZTxTIGV4dGVuZHMgb2JqZWN0PihcclxuICAgIGFkZGl0aW9uYWxTdGF0ZTogU1xyXG4gICk6IEVudGl0eVN0YXRlPFY+ICYgU1xyXG4gIGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZShhZGRpdGlvbmFsU3RhdGU6IGFueSA9IHt9KTogYW55IHtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGdldEluaXRpYWxFbnRpdHlTdGF0ZSgpLCBhZGRpdGlvbmFsU3RhdGUpXHJcbiAgfVxyXG5cclxuICByZXR1cm4geyBnZXRJbml0aWFsU3RhdGUgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCdcclxuaW1wb3J0IHsgY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3IgfSBmcm9tICcuLi9jcmVhdGVEcmFmdFNhZmVTZWxlY3RvcidcclxuaW1wb3J0IHR5cGUge1xyXG4gIEVudGl0eVN0YXRlLFxyXG4gIEVudGl0eVNlbGVjdG9ycyxcclxuICBEaWN0aW9uYXJ5LFxyXG4gIEVudGl0eUlkLFxyXG59IGZyb20gJy4vbW9kZWxzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlbGVjdG9yc0ZhY3Rvcnk8VD4oKSB7XHJcbiAgZnVuY3Rpb24gZ2V0U2VsZWN0b3JzKCk6IEVudGl0eVNlbGVjdG9yczxULCBFbnRpdHlTdGF0ZTxUPj5cclxuICBmdW5jdGlvbiBnZXRTZWxlY3RvcnM8Vj4oXHJcbiAgICBzZWxlY3RTdGF0ZTogKHN0YXRlOiBWKSA9PiBFbnRpdHlTdGF0ZTxUPlxyXG4gICk6IEVudGl0eVNlbGVjdG9yczxULCBWPlxyXG4gIGZ1bmN0aW9uIGdldFNlbGVjdG9yczxWPihcclxuICAgIHNlbGVjdFN0YXRlPzogKHN0YXRlOiBWKSA9PiBFbnRpdHlTdGF0ZTxUPlxyXG4gICk6IEVudGl0eVNlbGVjdG9yczxULCBhbnk+IHtcclxuICAgIGNvbnN0IHNlbGVjdElkcyA9IChzdGF0ZTogRW50aXR5U3RhdGU8VD4pID0+IHN0YXRlLmlkc1xyXG5cclxuICAgIGNvbnN0IHNlbGVjdEVudGl0aWVzID0gKHN0YXRlOiBFbnRpdHlTdGF0ZTxUPikgPT4gc3RhdGUuZW50aXRpZXNcclxuXHJcbiAgICBjb25zdCBzZWxlY3RBbGwgPSBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihcclxuICAgICAgc2VsZWN0SWRzLFxyXG4gICAgICBzZWxlY3RFbnRpdGllcyxcclxuICAgICAgKGlkcywgZW50aXRpZXMpOiBUW10gPT4gaWRzLm1hcCgoaWQpID0+IGVudGl0aWVzW2lkXSEpXHJcbiAgICApXHJcblxyXG4gICAgY29uc3Qgc2VsZWN0SWQgPSAoXzogdW5rbm93biwgaWQ6IEVudGl0eUlkKSA9PiBpZFxyXG5cclxuICAgIGNvbnN0IHNlbGVjdEJ5SWQgPSAoZW50aXRpZXM6IERpY3Rpb25hcnk8VD4sIGlkOiBFbnRpdHlJZCkgPT4gZW50aXRpZXNbaWRdXHJcblxyXG4gICAgY29uc3Qgc2VsZWN0VG90YWwgPSBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RJZHMsIChpZHMpID0+IGlkcy5sZW5ndGgpXHJcblxyXG4gICAgaWYgKCFzZWxlY3RTdGF0ZSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHNlbGVjdElkcyxcclxuICAgICAgICBzZWxlY3RFbnRpdGllcyxcclxuICAgICAgICBzZWxlY3RBbGwsXHJcbiAgICAgICAgc2VsZWN0VG90YWwsXHJcbiAgICAgICAgc2VsZWN0QnlJZDogY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3IoXHJcbiAgICAgICAgICBzZWxlY3RFbnRpdGllcyxcclxuICAgICAgICAgIHNlbGVjdElkLFxyXG4gICAgICAgICAgc2VsZWN0QnlJZFxyXG4gICAgICAgICksXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMgPSBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihcclxuICAgICAgc2VsZWN0U3RhdGUgYXMgU2VsZWN0b3I8ViwgRW50aXR5U3RhdGU8VD4+LFxyXG4gICAgICBzZWxlY3RFbnRpdGllc1xyXG4gICAgKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNlbGVjdElkczogY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIHNlbGVjdElkcyksXHJcbiAgICAgIHNlbGVjdEVudGl0aWVzOiBzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMsXHJcbiAgICAgIHNlbGVjdEFsbDogY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIHNlbGVjdEFsbCksXHJcbiAgICAgIHNlbGVjdFRvdGFsOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgc2VsZWN0VG90YWwpLFxyXG4gICAgICBzZWxlY3RCeUlkOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihcclxuICAgICAgICBzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMsXHJcbiAgICAgICAgc2VsZWN0SWQsXHJcbiAgICAgICAgc2VsZWN0QnlJZFxyXG4gICAgICApLFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgZ2V0U2VsZWN0b3JzIH1cclxufVxyXG4iLCJpbXBvcnQgY3JlYXRlTmV4dFN0YXRlLCB7IGlzRHJhZnQgfSBmcm9tICdpbW1lcidcclxuaW1wb3J0IHR5cGUgeyBFbnRpdHlTdGF0ZSwgUHJldmVudEFueSB9IGZyb20gJy4vbW9kZWxzJ1xyXG5pbXBvcnQgdHlwZSB7IFBheWxvYWRBY3Rpb24gfSBmcm9tICcuLi9jcmVhdGVBY3Rpb24nXHJcbmltcG9ydCB7IGlzRlNBIH0gZnJvbSAnLi4vY3JlYXRlQWN0aW9uJ1xyXG5pbXBvcnQgeyBJc0FueSB9IGZyb20gJy4uL3RzSGVscGVycydcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTaW5nbGVBcmd1bWVudFN0YXRlT3BlcmF0b3I8Vj4oXHJcbiAgbXV0YXRvcjogKHN0YXRlOiBFbnRpdHlTdGF0ZTxWPikgPT4gdm9pZFxyXG4pIHtcclxuICBjb25zdCBvcGVyYXRvciA9IGNyZWF0ZVN0YXRlT3BlcmF0b3IoKF86IHVuZGVmaW5lZCwgc3RhdGU6IEVudGl0eVN0YXRlPFY+KSA9PlxyXG4gICAgbXV0YXRvcihzdGF0ZSlcclxuICApXHJcblxyXG4gIHJldHVybiBmdW5jdGlvbiBvcGVyYXRpb248UyBleHRlbmRzIEVudGl0eVN0YXRlPFY+PihcclxuICAgIHN0YXRlOiBQcmV2ZW50QW55PFMsIFY+XHJcbiAgKTogUyB7XHJcbiAgICByZXR1cm4gb3BlcmF0b3Ioc3RhdGUgYXMgUywgdW5kZWZpbmVkKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0YXRlT3BlcmF0b3I8ViwgUj4oXHJcbiAgbXV0YXRvcjogKGFyZzogUiwgc3RhdGU6IEVudGl0eVN0YXRlPFY+KSA9PiB2b2lkXHJcbikge1xyXG4gIHJldHVybiBmdW5jdGlvbiBvcGVyYXRpb248UyBleHRlbmRzIEVudGl0eVN0YXRlPFY+PihcclxuICAgIHN0YXRlOiBTLFxyXG4gICAgYXJnOiBSIHwgUGF5bG9hZEFjdGlvbjxSPlxyXG4gICk6IFMge1xyXG4gICAgZnVuY3Rpb24gaXNQYXlsb2FkQWN0aW9uQXJndW1lbnQoXHJcbiAgICAgIGFyZzogUiB8IFBheWxvYWRBY3Rpb248Uj5cclxuICAgICk6IGFyZyBpcyBQYXlsb2FkQWN0aW9uPFI+IHtcclxuICAgICAgcmV0dXJuIGlzRlNBKGFyZylcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBydW5NdXRhdG9yID0gKGRyYWZ0OiBFbnRpdHlTdGF0ZTxWPikgPT4ge1xyXG4gICAgICBpZiAoaXNQYXlsb2FkQWN0aW9uQXJndW1lbnQoYXJnKSkge1xyXG4gICAgICAgIG11dGF0b3IoYXJnLnBheWxvYWQsIGRyYWZ0KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG11dGF0b3IoYXJnLCBkcmFmdClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc0RyYWZ0KHN0YXRlKSkge1xyXG4gICAgICAvLyB3ZSBtdXN0IGFscmVhZHkgYmUgaW5zaWRlIGEgYGNyZWF0ZU5leHRTdGF0ZWAgY2FsbCwgbGlrZWx5IGJlY2F1c2VcclxuICAgICAgLy8gdGhpcyBpcyBiZWluZyB3cmFwcGVkIGluIGBjcmVhdGVSZWR1Y2VyYCBvciBgY3JlYXRlU2xpY2VgLlxyXG4gICAgICAvLyBJdCdzIHNhZmUgdG8ganVzdCBwYXNzIHRoZSBkcmFmdCB0byB0aGUgbXV0YXRvci5cclxuICAgICAgcnVuTXV0YXRvcihzdGF0ZSlcclxuXHJcbiAgICAgIC8vIHNpbmNlIGl0J3MgYSBkcmFmdCwgd2UnbGwganVzdCByZXR1cm4gaXRcclxuICAgICAgcmV0dXJuIHN0YXRlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBAdHMtaWdub3JlIGNyZWF0ZU5leHRTdGF0ZSgpIHByb2R1Y2VzIGFuIEltbXV0YWJsZTxEcmFmdDxTPj4gcmF0aGVyXHJcbiAgICAgIC8vIHRoYW4gYW4gSW1tdXRhYmxlPFM+LCBhbmQgVHlwZVNjcmlwdCBjYW5ub3QgZmluZCBvdXQgaG93IHRvIHJlY29uY2lsZVxyXG4gICAgICAvLyB0aGVzZSB0d28gdHlwZXMuXHJcbiAgICAgIHJldHVybiBjcmVhdGVOZXh0U3RhdGUoc3RhdGUsIHJ1bk11dGF0b3IpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHsgRW50aXR5U3RhdGUsIElkU2VsZWN0b3IsIFVwZGF0ZSwgRW50aXR5SWQgfSBmcm9tICcuL21vZGVscydcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RJZFZhbHVlPFQ+KGVudGl0eTogVCwgc2VsZWN0SWQ6IElkU2VsZWN0b3I8VD4pIHtcclxuICBjb25zdCBrZXkgPSBzZWxlY3RJZChlbnRpdHkpXHJcblxyXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGtleSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICdUaGUgZW50aXR5IHBhc3NlZCB0byB0aGUgYHNlbGVjdElkYCBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCB1bmRlZmluZWQuJyxcclxuICAgICAgJ1lvdSBzaG91bGQgcHJvYmFibHkgcHJvdmlkZSB5b3VyIG93biBgc2VsZWN0SWRgIGltcGxlbWVudGF0aW9uLicsXHJcbiAgICAgICdUaGUgZW50aXR5IHRoYXQgd2FzIHBhc3NlZDonLFxyXG4gICAgICBlbnRpdHksXHJcbiAgICAgICdUaGUgYHNlbGVjdElkYCBpbXBsZW1lbnRhdGlvbjonLFxyXG4gICAgICBzZWxlY3RJZC50b1N0cmluZygpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICByZXR1cm4ga2V5XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVFbnRpdGllc0FycmF5PFQ+KFxyXG4gIGVudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+XHJcbik6IHJlYWRvbmx5IFRbXSB7XHJcbiAgaWYgKCFBcnJheS5pc0FycmF5KGVudGl0aWVzKSkge1xyXG4gICAgZW50aXRpZXMgPSBPYmplY3QudmFsdWVzKGVudGl0aWVzKVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGVudGl0aWVzXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzcGxpdEFkZGVkVXBkYXRlZEVudGl0aWVzPFQ+KFxyXG4gIG5ld0VudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+LFxyXG4gIHNlbGVjdElkOiBJZFNlbGVjdG9yPFQ+LFxyXG4gIHN0YXRlOiBFbnRpdHlTdGF0ZTxUPlxyXG4pOiBbVFtdLCBVcGRhdGU8VD5bXV0ge1xyXG4gIG5ld0VudGl0aWVzID0gZW5zdXJlRW50aXRpZXNBcnJheShuZXdFbnRpdGllcylcclxuXHJcbiAgY29uc3QgYWRkZWQ6IFRbXSA9IFtdXHJcbiAgY29uc3QgdXBkYXRlZDogVXBkYXRlPFQ+W10gPSBbXVxyXG5cclxuICBmb3IgKGNvbnN0IGVudGl0eSBvZiBuZXdFbnRpdGllcykge1xyXG4gICAgY29uc3QgaWQgPSBzZWxlY3RJZFZhbHVlKGVudGl0eSwgc2VsZWN0SWQpXHJcbiAgICBpZiAoaWQgaW4gc3RhdGUuZW50aXRpZXMpIHtcclxuICAgICAgdXBkYXRlZC5wdXNoKHsgaWQsIGNoYW5nZXM6IGVudGl0eSB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWRkZWQucHVzaChlbnRpdHkpXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBbYWRkZWQsIHVwZGF0ZWRdXHJcbn1cclxuIiwiaW1wb3J0IHR5cGUge1xyXG4gIEVudGl0eVN0YXRlLFxyXG4gIEVudGl0eVN0YXRlQWRhcHRlcixcclxuICBJZFNlbGVjdG9yLFxyXG4gIFVwZGF0ZSxcclxuICBFbnRpdHlJZCxcclxufSBmcm9tICcuL21vZGVscydcclxuaW1wb3J0IHtcclxuICBjcmVhdGVTdGF0ZU9wZXJhdG9yLFxyXG4gIGNyZWF0ZVNpbmdsZUFyZ3VtZW50U3RhdGVPcGVyYXRvcixcclxufSBmcm9tICcuL3N0YXRlX2FkYXB0ZXInXHJcbmltcG9ydCB7XHJcbiAgc2VsZWN0SWRWYWx1ZSxcclxuICBlbnN1cmVFbnRpdGllc0FycmF5LFxyXG4gIHNwbGl0QWRkZWRVcGRhdGVkRW50aXRpZXMsXHJcbn0gZnJvbSAnLi91dGlscydcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVbnNvcnRlZFN0YXRlQWRhcHRlcjxUPihcclxuICBzZWxlY3RJZDogSWRTZWxlY3RvcjxUPlxyXG4pOiBFbnRpdHlTdGF0ZUFkYXB0ZXI8VD4ge1xyXG4gIHR5cGUgUiA9IEVudGl0eVN0YXRlPFQ+XHJcblxyXG4gIGZ1bmN0aW9uIGFkZE9uZU11dGFibHkoZW50aXR5OiBULCBzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgY29uc3Qga2V5ID0gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKVxyXG5cclxuICAgIGlmIChrZXkgaW4gc3RhdGUuZW50aXRpZXMpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGUuaWRzLnB1c2goa2V5KVxyXG4gICAgc3RhdGUuZW50aXRpZXNba2V5XSA9IGVudGl0eVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkTWFueU11dGFibHkoXHJcbiAgICBuZXdFbnRpdGllczogcmVhZG9ubHkgVFtdIHwgUmVjb3JkPEVudGl0eUlkLCBUPixcclxuICAgIHN0YXRlOiBSXHJcbiAgKTogdm9pZCB7XHJcbiAgICBuZXdFbnRpdGllcyA9IGVuc3VyZUVudGl0aWVzQXJyYXkobmV3RW50aXRpZXMpXHJcblxyXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgbmV3RW50aXRpZXMpIHtcclxuICAgICAgYWRkT25lTXV0YWJseShlbnRpdHksIHN0YXRlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0T25lTXV0YWJseShlbnRpdHk6IFQsIHN0YXRlOiBSKTogdm9pZCB7XHJcbiAgICBjb25zdCBrZXkgPSBzZWxlY3RJZFZhbHVlKGVudGl0eSwgc2VsZWN0SWQpXHJcbiAgICBpZiAoIShrZXkgaW4gc3RhdGUuZW50aXRpZXMpKSB7XHJcbiAgICAgIHN0YXRlLmlkcy5wdXNoKGtleSlcclxuICAgIH1cclxuICAgIHN0YXRlLmVudGl0aWVzW2tleV0gPSBlbnRpdHlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldE1hbnlNdXRhYmx5KFxyXG4gICAgbmV3RW50aXRpZXM6IHJlYWRvbmx5IFRbXSB8IFJlY29yZDxFbnRpdHlJZCwgVD4sXHJcbiAgICBzdGF0ZTogUlxyXG4gICk6IHZvaWQge1xyXG4gICAgbmV3RW50aXRpZXMgPSBlbnN1cmVFbnRpdGllc0FycmF5KG5ld0VudGl0aWVzKVxyXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgbmV3RW50aXRpZXMpIHtcclxuICAgICAgc2V0T25lTXV0YWJseShlbnRpdHksIHN0YXRlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0QWxsTXV0YWJseShcclxuICAgIG5ld0VudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+LFxyXG4gICAgc3RhdGU6IFJcclxuICApOiB2b2lkIHtcclxuICAgIG5ld0VudGl0aWVzID0gZW5zdXJlRW50aXRpZXNBcnJheShuZXdFbnRpdGllcylcclxuXHJcbiAgICBzdGF0ZS5pZHMgPSBbXVxyXG4gICAgc3RhdGUuZW50aXRpZXMgPSB7fVxyXG5cclxuICAgIGFkZE1hbnlNdXRhYmx5KG5ld0VudGl0aWVzLCBzdGF0ZSlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZU9uZU11dGFibHkoa2V5OiBFbnRpdHlJZCwgc3RhdGU6IFIpOiB2b2lkIHtcclxuICAgIHJldHVybiByZW1vdmVNYW55TXV0YWJseShba2V5XSwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW1vdmVNYW55TXV0YWJseShrZXlzOiByZWFkb25seSBFbnRpdHlJZFtdLCBzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgbGV0IGRpZE11dGF0ZSA9IGZhbHNlXHJcblxyXG4gICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgaWYgKGtleSBpbiBzdGF0ZS5lbnRpdGllcykge1xyXG4gICAgICAgIGRlbGV0ZSBzdGF0ZS5lbnRpdGllc1trZXldXHJcbiAgICAgICAgZGlkTXV0YXRlID0gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmIChkaWRNdXRhdGUpIHtcclxuICAgICAgc3RhdGUuaWRzID0gc3RhdGUuaWRzLmZpbHRlcigoaWQpID0+IGlkIGluIHN0YXRlLmVudGl0aWVzKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlQWxsTXV0YWJseShzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwge1xyXG4gICAgICBpZHM6IFtdLFxyXG4gICAgICBlbnRpdGllczoge30sXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdGFrZU5ld0tleShcclxuICAgIGtleXM6IHsgW2lkOiBzdHJpbmddOiBFbnRpdHlJZCB9LFxyXG4gICAgdXBkYXRlOiBVcGRhdGU8VD4sXHJcbiAgICBzdGF0ZTogUlxyXG4gICk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3Qgb3JpZ2luYWwgPSBzdGF0ZS5lbnRpdGllc1t1cGRhdGUuaWRdXHJcbiAgICBjb25zdCB1cGRhdGVkOiBUID0gT2JqZWN0LmFzc2lnbih7fSwgb3JpZ2luYWwsIHVwZGF0ZS5jaGFuZ2VzKVxyXG4gICAgY29uc3QgbmV3S2V5ID0gc2VsZWN0SWRWYWx1ZSh1cGRhdGVkLCBzZWxlY3RJZClcclxuICAgIGNvbnN0IGhhc05ld0tleSA9IG5ld0tleSAhPT0gdXBkYXRlLmlkXHJcblxyXG4gICAgaWYgKGhhc05ld0tleSkge1xyXG4gICAgICBrZXlzW3VwZGF0ZS5pZF0gPSBuZXdLZXlcclxuICAgICAgZGVsZXRlIHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0ZS5lbnRpdGllc1tuZXdLZXldID0gdXBkYXRlZFxyXG5cclxuICAgIHJldHVybiBoYXNOZXdLZXlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZU9uZU11dGFibHkodXBkYXRlOiBVcGRhdGU8VD4sIHN0YXRlOiBSKTogdm9pZCB7XHJcbiAgICByZXR1cm4gdXBkYXRlTWFueU11dGFibHkoW3VwZGF0ZV0sIHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlTWFueU11dGFibHkoXHJcbiAgICB1cGRhdGVzOiBSZWFkb25seUFycmF5PFVwZGF0ZTxUPj4sXHJcbiAgICBzdGF0ZTogUlxyXG4gICk6IHZvaWQge1xyXG4gICAgY29uc3QgbmV3S2V5czogeyBbaWQ6IHN0cmluZ106IEVudGl0eUlkIH0gPSB7fVxyXG5cclxuICAgIGNvbnN0IHVwZGF0ZXNQZXJFbnRpdHk6IHsgW2lkOiBzdHJpbmddOiBVcGRhdGU8VD4gfSA9IHt9XHJcblxyXG4gICAgdXBkYXRlcy5mb3JFYWNoKCh1cGRhdGUpID0+IHtcclxuICAgICAgLy8gT25seSBhcHBseSB1cGRhdGVzIHRvIGVudGl0aWVzIHRoYXQgY3VycmVudGx5IGV4aXN0XHJcbiAgICAgIGlmICh1cGRhdGUuaWQgaW4gc3RhdGUuZW50aXRpZXMpIHtcclxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgdXBkYXRlcyB0byBvbmUgZW50aXR5LCBtZXJnZSB0aGVtIHRvZ2V0aGVyXHJcbiAgICAgICAgdXBkYXRlc1BlckVudGl0eVt1cGRhdGUuaWRdID0ge1xyXG4gICAgICAgICAgaWQ6IHVwZGF0ZS5pZCxcclxuICAgICAgICAgIC8vIFNwcmVhZHMgaWdub3JlIGZhbHN5IHZhbHVlcywgc28gdGhpcyB3b3JrcyBldmVuIGlmIHRoZXJlIGlzbid0XHJcbiAgICAgICAgICAvLyBhbiBleGlzdGluZyB1cGRhdGUgYWxyZWFkeSBhdCB0aGlzIGtleVxyXG4gICAgICAgICAgY2hhbmdlczoge1xyXG4gICAgICAgICAgICAuLi4odXBkYXRlc1BlckVudGl0eVt1cGRhdGUuaWRdXHJcbiAgICAgICAgICAgICAgPyB1cGRhdGVzUGVyRW50aXR5W3VwZGF0ZS5pZF0uY2hhbmdlc1xyXG4gICAgICAgICAgICAgIDogbnVsbCksXHJcbiAgICAgICAgICAgIC4uLnVwZGF0ZS5jaGFuZ2VzLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdXBkYXRlcyA9IE9iamVjdC52YWx1ZXModXBkYXRlc1BlckVudGl0eSlcclxuXHJcbiAgICBjb25zdCBkaWRNdXRhdGVFbnRpdGllcyA9IHVwZGF0ZXMubGVuZ3RoID4gMFxyXG5cclxuICAgIGlmIChkaWRNdXRhdGVFbnRpdGllcykge1xyXG4gICAgICBjb25zdCBkaWRNdXRhdGVJZHMgPVxyXG4gICAgICAgIHVwZGF0ZXMuZmlsdGVyKCh1cGRhdGUpID0+IHRha2VOZXdLZXkobmV3S2V5cywgdXBkYXRlLCBzdGF0ZSkpLmxlbmd0aCA+XHJcbiAgICAgICAgMFxyXG5cclxuICAgICAgaWYgKGRpZE11dGF0ZUlkcykge1xyXG4gICAgICAgIHN0YXRlLmlkcyA9IE9iamVjdC5rZXlzKHN0YXRlLmVudGl0aWVzKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cHNlcnRPbmVNdXRhYmx5KGVudGl0eTogVCwgc3RhdGU6IFIpOiB2b2lkIHtcclxuICAgIHJldHVybiB1cHNlcnRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cHNlcnRNYW55TXV0YWJseShcclxuICAgIG5ld0VudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+LFxyXG4gICAgc3RhdGU6IFJcclxuICApOiB2b2lkIHtcclxuICAgIGNvbnN0IFthZGRlZCwgdXBkYXRlZF0gPSBzcGxpdEFkZGVkVXBkYXRlZEVudGl0aWVzPFQ+KFxyXG4gICAgICBuZXdFbnRpdGllcyxcclxuICAgICAgc2VsZWN0SWQsXHJcbiAgICAgIHN0YXRlXHJcbiAgICApXHJcblxyXG4gICAgdXBkYXRlTWFueU11dGFibHkodXBkYXRlZCwgc3RhdGUpXHJcbiAgICBhZGRNYW55TXV0YWJseShhZGRlZCwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVtb3ZlQWxsOiBjcmVhdGVTaW5nbGVBcmd1bWVudFN0YXRlT3BlcmF0b3IocmVtb3ZlQWxsTXV0YWJseSksXHJcbiAgICBhZGRPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IoYWRkT25lTXV0YWJseSksXHJcbiAgICBhZGRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE1hbnlNdXRhYmx5KSxcclxuICAgIHNldE9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRPbmVNdXRhYmx5KSxcclxuICAgIHNldE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3Ioc2V0TWFueU11dGFibHkpLFxyXG4gICAgc2V0QWxsOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHNldEFsbE11dGFibHkpLFxyXG4gICAgdXBkYXRlT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwZGF0ZU9uZU11dGFibHkpLFxyXG4gICAgdXBkYXRlTWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcih1cGRhdGVNYW55TXV0YWJseSksXHJcbiAgICB1cHNlcnRPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBzZXJ0T25lTXV0YWJseSksXHJcbiAgICB1cHNlcnRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE1hbnlNdXRhYmx5KSxcclxuICAgIHJlbW92ZU9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcihyZW1vdmVPbmVNdXRhYmx5KSxcclxuICAgIHJlbW92ZU1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IocmVtb3ZlTWFueU11dGFibHkpLFxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7XHJcbiAgRW50aXR5U3RhdGUsXHJcbiAgSWRTZWxlY3RvcixcclxuICBDb21wYXJlcixcclxuICBFbnRpdHlTdGF0ZUFkYXB0ZXIsXHJcbiAgVXBkYXRlLFxyXG4gIEVudGl0eUlkLFxyXG59IGZyb20gJy4vbW9kZWxzJ1xyXG5pbXBvcnQgeyBjcmVhdGVTdGF0ZU9wZXJhdG9yIH0gZnJvbSAnLi9zdGF0ZV9hZGFwdGVyJ1xyXG5pbXBvcnQgeyBjcmVhdGVVbnNvcnRlZFN0YXRlQWRhcHRlciB9IGZyb20gJy4vdW5zb3J0ZWRfc3RhdGVfYWRhcHRlcidcclxuaW1wb3J0IHtcclxuICBzZWxlY3RJZFZhbHVlLFxyXG4gIGVuc3VyZUVudGl0aWVzQXJyYXksXHJcbiAgc3BsaXRBZGRlZFVwZGF0ZWRFbnRpdGllcyxcclxufSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNvcnRlZFN0YXRlQWRhcHRlcjxUPihcclxuICBzZWxlY3RJZDogSWRTZWxlY3RvcjxUPixcclxuICBzb3J0OiBDb21wYXJlcjxUPlxyXG4pOiBFbnRpdHlTdGF0ZUFkYXB0ZXI8VD4ge1xyXG4gIHR5cGUgUiA9IEVudGl0eVN0YXRlPFQ+XHJcblxyXG4gIGNvbnN0IHsgcmVtb3ZlT25lLCByZW1vdmVNYW55LCByZW1vdmVBbGwgfSA9XHJcbiAgICBjcmVhdGVVbnNvcnRlZFN0YXRlQWRhcHRlcihzZWxlY3RJZClcclxuXHJcbiAgZnVuY3Rpb24gYWRkT25lTXV0YWJseShlbnRpdHk6IFQsIHN0YXRlOiBSKTogdm9pZCB7XHJcbiAgICByZXR1cm4gYWRkTWFueU11dGFibHkoW2VudGl0eV0sIHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkTWFueU11dGFibHkoXHJcbiAgICBuZXdFbnRpdGllczogcmVhZG9ubHkgVFtdIHwgUmVjb3JkPEVudGl0eUlkLCBUPixcclxuICAgIHN0YXRlOiBSXHJcbiAgKTogdm9pZCB7XHJcbiAgICBuZXdFbnRpdGllcyA9IGVuc3VyZUVudGl0aWVzQXJyYXkobmV3RW50aXRpZXMpXHJcblxyXG4gICAgY29uc3QgbW9kZWxzID0gbmV3RW50aXRpZXMuZmlsdGVyKFxyXG4gICAgICAobW9kZWwpID0+ICEoc2VsZWN0SWRWYWx1ZShtb2RlbCwgc2VsZWN0SWQpIGluIHN0YXRlLmVudGl0aWVzKVxyXG4gICAgKVxyXG5cclxuICAgIGlmIChtb2RlbHMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgIG1lcmdlKG1vZGVscywgc3RhdGUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRPbmVNdXRhYmx5KGVudGl0eTogVCwgc3RhdGU6IFIpOiB2b2lkIHtcclxuICAgIHJldHVybiBzZXRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRNYW55TXV0YWJseShcclxuICAgIG5ld0VudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+LFxyXG4gICAgc3RhdGU6IFJcclxuICApOiB2b2lkIHtcclxuICAgIG5ld0VudGl0aWVzID0gZW5zdXJlRW50aXRpZXNBcnJheShuZXdFbnRpdGllcylcclxuICAgIGlmIChuZXdFbnRpdGllcy5sZW5ndGggIT09IDApIHtcclxuICAgICAgbWVyZ2UobmV3RW50aXRpZXMsIHN0YXRlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0QWxsTXV0YWJseShcclxuICAgIG5ld0VudGl0aWVzOiByZWFkb25seSBUW10gfCBSZWNvcmQ8RW50aXR5SWQsIFQ+LFxyXG4gICAgc3RhdGU6IFJcclxuICApOiB2b2lkIHtcclxuICAgIG5ld0VudGl0aWVzID0gZW5zdXJlRW50aXRpZXNBcnJheShuZXdFbnRpdGllcylcclxuICAgIHN0YXRlLmVudGl0aWVzID0ge31cclxuICAgIHN0YXRlLmlkcyA9IFtdXHJcblxyXG4gICAgYWRkTWFueU11dGFibHkobmV3RW50aXRpZXMsIHN0YXRlKVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlT25lTXV0YWJseSh1cGRhdGU6IFVwZGF0ZTxUPiwgc3RhdGU6IFIpOiB2b2lkIHtcclxuICAgIHJldHVybiB1cGRhdGVNYW55TXV0YWJseShbdXBkYXRlXSwgc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVNYW55TXV0YWJseShcclxuICAgIHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8VXBkYXRlPFQ+PixcclxuICAgIHN0YXRlOiBSXHJcbiAgKTogdm9pZCB7XHJcbiAgICBsZXQgYXBwbGllZFVwZGF0ZXMgPSBmYWxzZVxyXG5cclxuICAgIGZvciAobGV0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XHJcbiAgICAgIGNvbnN0IGVudGl0eSA9IHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF1cclxuICAgICAgaWYgKCFlbnRpdHkpIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcblxyXG4gICAgICBhcHBsaWVkVXBkYXRlcyA9IHRydWVcclxuXHJcbiAgICAgIE9iamVjdC5hc3NpZ24oZW50aXR5LCB1cGRhdGUuY2hhbmdlcylcclxuICAgICAgY29uc3QgbmV3SWQgPSBzZWxlY3RJZChlbnRpdHkpXHJcbiAgICAgIGlmICh1cGRhdGUuaWQgIT09IG5ld0lkKSB7XHJcbiAgICAgICAgZGVsZXRlIHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF1cclxuICAgICAgICBzdGF0ZS5lbnRpdGllc1tuZXdJZF0gPSBlbnRpdHlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChhcHBsaWVkVXBkYXRlcykge1xyXG4gICAgICByZXNvcnRFbnRpdGllcyhzdGF0ZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwc2VydE9uZU11dGFibHkoZW50aXR5OiBULCBzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgcmV0dXJuIHVwc2VydE1hbnlNdXRhYmx5KFtlbnRpdHldLCBzdGF0ZSlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwc2VydE1hbnlNdXRhYmx5KFxyXG4gICAgbmV3RW50aXRpZXM6IHJlYWRvbmx5IFRbXSB8IFJlY29yZDxFbnRpdHlJZCwgVD4sXHJcbiAgICBzdGF0ZTogUlxyXG4gICk6IHZvaWQge1xyXG4gICAgY29uc3QgW2FkZGVkLCB1cGRhdGVkXSA9IHNwbGl0QWRkZWRVcGRhdGVkRW50aXRpZXM8VD4oXHJcbiAgICAgIG5ld0VudGl0aWVzLFxyXG4gICAgICBzZWxlY3RJZCxcclxuICAgICAgc3RhdGVcclxuICAgIClcclxuXHJcbiAgICB1cGRhdGVNYW55TXV0YWJseSh1cGRhdGVkLCBzdGF0ZSlcclxuICAgIGFkZE1hbnlNdXRhYmx5KGFkZGVkLCBzdGF0ZSlcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFyZUFycmF5c0VxdWFsKGE6IHJlYWRvbmx5IHVua25vd25bXSwgYjogcmVhZG9ubHkgdW5rbm93bltdKSB7XHJcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGggJiYgaSA8IGIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGFbaV0gPT09IGJbaV0pIHtcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG1lcmdlKG1vZGVsczogcmVhZG9ubHkgVFtdLCBzdGF0ZTogUik6IHZvaWQge1xyXG4gICAgLy8gSW5zZXJ0L292ZXJ3cml0ZSBhbGwgbmV3L3VwZGF0ZWRcclxuICAgIG1vZGVscy5mb3JFYWNoKChtb2RlbCkgPT4ge1xyXG4gICAgICBzdGF0ZS5lbnRpdGllc1tzZWxlY3RJZChtb2RlbCldID0gbW9kZWxcclxuICAgIH0pXHJcblxyXG4gICAgcmVzb3J0RW50aXRpZXMoc3RhdGUpXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZXNvcnRFbnRpdGllcyhzdGF0ZTogUikge1xyXG4gICAgY29uc3QgYWxsRW50aXRpZXMgPSBPYmplY3QudmFsdWVzKHN0YXRlLmVudGl0aWVzKSBhcyBUW11cclxuICAgIGFsbEVudGl0aWVzLnNvcnQoc29ydClcclxuXHJcbiAgICBjb25zdCBuZXdTb3J0ZWRJZHMgPSBhbGxFbnRpdGllcy5tYXAoc2VsZWN0SWQpXHJcbiAgICBjb25zdCB7IGlkcyB9ID0gc3RhdGVcclxuXHJcbiAgICBpZiAoIWFyZUFycmF5c0VxdWFsKGlkcywgbmV3U29ydGVkSWRzKSkge1xyXG4gICAgICBzdGF0ZS5pZHMgPSBuZXdTb3J0ZWRJZHNcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByZW1vdmVPbmUsXHJcbiAgICByZW1vdmVNYW55LFxyXG4gICAgcmVtb3ZlQWxsLFxyXG4gICAgYWRkT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE9uZU11dGFibHkpLFxyXG4gICAgdXBkYXRlT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwZGF0ZU9uZU11dGFibHkpLFxyXG4gICAgdXBzZXJ0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE9uZU11dGFibHkpLFxyXG4gICAgc2V0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHNldE9uZU11dGFibHkpLFxyXG4gICAgc2V0TWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRNYW55TXV0YWJseSksXHJcbiAgICBzZXRBbGw6IGNyZWF0ZVN0YXRlT3BlcmF0b3Ioc2V0QWxsTXV0YWJseSksXHJcbiAgICBhZGRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE1hbnlNdXRhYmx5KSxcclxuICAgIHVwZGF0ZU1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBkYXRlTWFueU11dGFibHkpLFxyXG4gICAgdXBzZXJ0TWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcih1cHNlcnRNYW55TXV0YWJseSksXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB0eXBlIHtcclxuICBFbnRpdHlEZWZpbml0aW9uLFxyXG4gIENvbXBhcmVyLFxyXG4gIElkU2VsZWN0b3IsXHJcbiAgRW50aXR5QWRhcHRlcixcclxufSBmcm9tICcuL21vZGVscydcclxuaW1wb3J0IHsgY3JlYXRlSW5pdGlhbFN0YXRlRmFjdG9yeSB9IGZyb20gJy4vZW50aXR5X3N0YXRlJ1xyXG5pbXBvcnQgeyBjcmVhdGVTZWxlY3RvcnNGYWN0b3J5IH0gZnJvbSAnLi9zdGF0ZV9zZWxlY3RvcnMnXHJcbmltcG9ydCB7IGNyZWF0ZVNvcnRlZFN0YXRlQWRhcHRlciB9IGZyb20gJy4vc29ydGVkX3N0YXRlX2FkYXB0ZXInXHJcbmltcG9ydCB7IGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyIH0gZnJvbSAnLi91bnNvcnRlZF9zdGF0ZV9hZGFwdGVyJ1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBvcHRpb25zXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbnRpdHlBZGFwdGVyPFQ+KFxyXG4gIG9wdGlvbnM6IHtcclxuICAgIHNlbGVjdElkPzogSWRTZWxlY3RvcjxUPlxyXG4gICAgc29ydENvbXBhcmVyPzogZmFsc2UgfCBDb21wYXJlcjxUPlxyXG4gIH0gPSB7fVxyXG4pOiBFbnRpdHlBZGFwdGVyPFQ+IHtcclxuICBjb25zdCB7IHNlbGVjdElkLCBzb3J0Q29tcGFyZXIgfTogRW50aXR5RGVmaW5pdGlvbjxUPiA9IHtcclxuICAgIHNvcnRDb21wYXJlcjogZmFsc2UsXHJcbiAgICBzZWxlY3RJZDogKGluc3RhbmNlOiBhbnkpID0+IGluc3RhbmNlLmlkLFxyXG4gICAgLi4ub3B0aW9ucyxcclxuICB9XHJcblxyXG4gIGNvbnN0IHN0YXRlRmFjdG9yeSA9IGNyZWF0ZUluaXRpYWxTdGF0ZUZhY3Rvcnk8VD4oKVxyXG4gIGNvbnN0IHNlbGVjdG9yc0ZhY3RvcnkgPSBjcmVhdGVTZWxlY3RvcnNGYWN0b3J5PFQ+KClcclxuICBjb25zdCBzdGF0ZUFkYXB0ZXIgPSBzb3J0Q29tcGFyZXJcclxuICAgID8gY3JlYXRlU29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkLCBzb3J0Q29tcGFyZXIpXHJcbiAgICA6IGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2VsZWN0SWQsXHJcbiAgICBzb3J0Q29tcGFyZXIsXHJcbiAgICAuLi5zdGF0ZUZhY3RvcnksXHJcbiAgICAuLi5zZWxlY3RvcnNGYWN0b3J5LFxyXG4gICAgLi4uc3RhdGVBZGFwdGVyLFxyXG4gIH1cclxufVxyXG4iLCIvLyBCb3Jyb3dlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9haS9uYW5vaWQvYmxvYi8zLjAuMi9ub24tc2VjdXJlL2luZGV4LmpzXHJcbi8vIFRoaXMgYWxwaGFiZXQgdXNlcyBgQS1aYS16MC05Xy1gIHN5bWJvbHMuIEEgZ2VuZXRpYyBhbGdvcml0aG0gaGVscGVkXHJcbi8vIG9wdGltaXplIHRoZSBnemlwIGNvbXByZXNzaW9uIGZvciB0aGlzIGFscGhhYmV0LlxyXG5sZXQgdXJsQWxwaGFiZXQgPVxyXG4gICdNb2R1bGVTeW1iaGFzT3duUHItMDEyMzQ1Njc4OUFCQ0RFRkdITlJWZmdjdGlVdnpfS3FZVEprTHhwWlhJalFXJ1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBsZXQgbmFub2lkID0gKHNpemUgPSAyMSkgPT4ge1xyXG4gIGxldCBpZCA9ICcnXHJcbiAgLy8gQSBjb21wYWN0IGFsdGVybmF0aXZlIGZvciBgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGVwOyBpKyspYC5cclxuICBsZXQgaSA9IHNpemVcclxuICB3aGlsZSAoaS0tKSB7XHJcbiAgICAvLyBgfCAwYCBpcyBtb3JlIGNvbXBhY3QgYW5kIGZhc3RlciB0aGFuIGBNYXRoLmZsb29yKClgLlxyXG4gICAgaWQgKz0gdXJsQWxwaGFiZXRbKE1hdGgucmFuZG9tKCkgKiA2NCkgfCAwXVxyXG4gIH1cclxuICByZXR1cm4gaWRcclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IERpc3BhdGNoLCBBbnlBY3Rpb24gfSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHR5cGUge1xyXG4gIFBheWxvYWRBY3Rpb24sXHJcbiAgQWN0aW9uQ3JlYXRvcldpdGhQcmVwYXJlZFBheWxvYWQsXHJcbn0gZnJvbSAnLi9jcmVhdGVBY3Rpb24nXHJcbmltcG9ydCB7IGNyZWF0ZUFjdGlvbiB9IGZyb20gJy4vY3JlYXRlQWN0aW9uJ1xyXG5pbXBvcnQgdHlwZSB7IFRodW5rRGlzcGF0Y2ggfSBmcm9tICdyZWR1eC10aHVuaydcclxuaW1wb3J0IHR5cGUgeyBGYWxsYmFja0lmVW5rbm93biwgSWQsIElzQW55LCBJc1Vua25vd24gfSBmcm9tICcuL3RzSGVscGVycydcclxuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnLi9uYW5vaWQnXHJcblxyXG4vLyBAdHMtaWdub3JlIHdlIG5lZWQgdGhlIGltcG9ydCBvZiB0aGVzZSB0eXBlcyBkdWUgdG8gYSBidW5kbGluZyBpc3N1ZS5cclxudHlwZSBfS2VlcCA9IFBheWxvYWRBY3Rpb24gfCBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxhbnksIHVua25vd24+XHJcblxyXG5leHBvcnQgdHlwZSBCYXNlVGh1bmtBUEk8XHJcbiAgUyxcclxuICBFLFxyXG4gIEQgZXh0ZW5kcyBEaXNwYXRjaCA9IERpc3BhdGNoLFxyXG4gIFJlamVjdGVkVmFsdWUgPSB1bmRlZmluZWQsXHJcbiAgUmVqZWN0ZWRNZXRhID0gdW5rbm93bixcclxuICBGdWxmaWxsZWRNZXRhID0gdW5rbm93blxyXG4+ID0ge1xyXG4gIGRpc3BhdGNoOiBEXHJcbiAgZ2V0U3RhdGU6ICgpID0+IFNcclxuICBleHRyYTogRVxyXG4gIHJlcXVlc3RJZDogc3RyaW5nXHJcbiAgc2lnbmFsOiBBYm9ydFNpZ25hbFxyXG4gIGFib3J0OiAocmVhc29uPzogc3RyaW5nKSA9PiB2b2lkXHJcbiAgcmVqZWN0V2l0aFZhbHVlOiBJc1Vua25vd248XHJcbiAgICBSZWplY3RlZE1ldGEsXHJcbiAgICAodmFsdWU6IFJlamVjdGVkVmFsdWUpID0+IFJlamVjdFdpdGhWYWx1ZTxSZWplY3RlZFZhbHVlLCBSZWplY3RlZE1ldGE+LFxyXG4gICAgKFxyXG4gICAgICB2YWx1ZTogUmVqZWN0ZWRWYWx1ZSxcclxuICAgICAgbWV0YTogUmVqZWN0ZWRNZXRhXHJcbiAgICApID0+IFJlamVjdFdpdGhWYWx1ZTxSZWplY3RlZFZhbHVlLCBSZWplY3RlZE1ldGE+XHJcbiAgPlxyXG4gIGZ1bGZpbGxXaXRoVmFsdWU6IElzVW5rbm93bjxcclxuICAgIEZ1bGZpbGxlZE1ldGEsXHJcbiAgICA8RnVsZmlsbGVkVmFsdWU+KHZhbHVlOiBGdWxmaWxsZWRWYWx1ZSkgPT4gRnVsZmlsbGVkVmFsdWUsXHJcbiAgICA8RnVsZmlsbGVkVmFsdWU+KFxyXG4gICAgICB2YWx1ZTogRnVsZmlsbGVkVmFsdWUsXHJcbiAgICAgIG1ldGE6IEZ1bGZpbGxlZE1ldGFcclxuICAgICkgPT4gRnVsZmlsbFdpdGhNZXRhPEZ1bGZpbGxlZFZhbHVlLCBGdWxmaWxsZWRNZXRhPlxyXG4gID5cclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VyaWFsaXplZEVycm9yIHtcclxuICBuYW1lPzogc3RyaW5nXHJcbiAgbWVzc2FnZT86IHN0cmluZ1xyXG4gIHN0YWNrPzogc3RyaW5nXHJcbiAgY29kZT86IHN0cmluZ1xyXG59XHJcblxyXG5jb25zdCBjb21tb25Qcm9wZXJ0aWVzOiBBcnJheTxrZXlvZiBTZXJpYWxpemVkRXJyb3I+ID0gW1xyXG4gICduYW1lJyxcclxuICAnbWVzc2FnZScsXHJcbiAgJ3N0YWNrJyxcclxuICAnY29kZScsXHJcbl1cclxuXHJcbmNsYXNzIFJlamVjdFdpdGhWYWx1ZTxQYXlsb2FkLCBSZWplY3RlZE1ldGE+IHtcclxuICAvKlxyXG4gIHR5cGUtb25seSBwcm9wZXJ0eSB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuIFJlamVjdFdpdGhWYWx1ZSBhbmQgRnVsZmlsbFdpdGhNZXRhXHJcbiAgZG9lcyBub3QgZXhpc3QgYXQgcnVudGltZVxyXG4gICovXHJcbiAgcHJpdmF0ZSByZWFkb25seSBfdHlwZSE6ICdSZWplY3RXaXRoVmFsdWUnXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGF5bG9hZDogUGF5bG9hZCxcclxuICAgIHB1YmxpYyByZWFkb25seSBtZXRhOiBSZWplY3RlZE1ldGFcclxuICApIHt9XHJcbn1cclxuXHJcbmNsYXNzIEZ1bGZpbGxXaXRoTWV0YTxQYXlsb2FkLCBGdWxmaWxsZWRNZXRhPiB7XHJcbiAgLypcclxuICB0eXBlLW9ubHkgcHJvcGVydHkgdG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiBSZWplY3RXaXRoVmFsdWUgYW5kIEZ1bGZpbGxXaXRoTWV0YVxyXG4gIGRvZXMgbm90IGV4aXN0IGF0IHJ1bnRpbWVcclxuICAqL1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgX3R5cGUhOiAnRnVsZmlsbFdpdGhNZXRhJ1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHVibGljIHJlYWRvbmx5IHBheWxvYWQ6IFBheWxvYWQsXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWV0YTogRnVsZmlsbGVkTWV0YVxyXG4gICkge31cclxufVxyXG5cclxuLyoqXHJcbiAqIFNlcmlhbGl6ZXMgYW4gZXJyb3IgaW50byBhIHBsYWluIG9iamVjdC5cclxuICogUmV3b3JrZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vc2luZHJlc29yaHVzL3NlcmlhbGl6ZS1lcnJvclxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWluaVNlcmlhbGl6ZUVycm9yID0gKHZhbHVlOiBhbnkpOiBTZXJpYWxpemVkRXJyb3IgPT4ge1xyXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICBjb25zdCBzaW1wbGVFcnJvcjogU2VyaWFsaXplZEVycm9yID0ge31cclxuICAgIGZvciAoY29uc3QgcHJvcGVydHkgb2YgY29tbW9uUHJvcGVydGllcykge1xyXG4gICAgICBpZiAodHlwZW9mIHZhbHVlW3Byb3BlcnR5XSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBzaW1wbGVFcnJvcltwcm9wZXJ0eV0gPSB2YWx1ZVtwcm9wZXJ0eV1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzaW1wbGVFcnJvclxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgbWVzc2FnZTogU3RyaW5nKHZhbHVlKSB9XHJcbn1cclxuXHJcbnR5cGUgQXN5bmNUaHVua0NvbmZpZyA9IHtcclxuICBzdGF0ZT86IHVua25vd25cclxuICBkaXNwYXRjaD86IERpc3BhdGNoXHJcbiAgZXh0cmE/OiB1bmtub3duXHJcbiAgcmVqZWN0VmFsdWU/OiB1bmtub3duXHJcbiAgc2VyaWFsaXplZEVycm9yVHlwZT86IHVua25vd25cclxuICBwZW5kaW5nTWV0YT86IHVua25vd25cclxuICBmdWxmaWxsZWRNZXRhPzogdW5rbm93blxyXG4gIHJlamVjdGVkTWV0YT86IHVua25vd25cclxufVxyXG5cclxudHlwZSBHZXRTdGF0ZTxUaHVua0FwaUNvbmZpZz4gPSBUaHVua0FwaUNvbmZpZyBleHRlbmRzIHtcclxuICBzdGF0ZTogaW5mZXIgU3RhdGVcclxufVxyXG4gID8gU3RhdGVcclxuICA6IHVua25vd25cclxudHlwZSBHZXRFeHRyYTxUaHVua0FwaUNvbmZpZz4gPSBUaHVua0FwaUNvbmZpZyBleHRlbmRzIHsgZXh0cmE6IGluZmVyIEV4dHJhIH1cclxuICA/IEV4dHJhXHJcbiAgOiB1bmtub3duXHJcbnR5cGUgR2V0RGlzcGF0Y2g8VGh1bmtBcGlDb25maWc+ID0gVGh1bmtBcGlDb25maWcgZXh0ZW5kcyB7XHJcbiAgZGlzcGF0Y2g6IGluZmVyIERpc3BhdGNoXHJcbn1cclxuICA/IEZhbGxiYWNrSWZVbmtub3duPFxyXG4gICAgICBEaXNwYXRjaCxcclxuICAgICAgVGh1bmtEaXNwYXRjaDxcclxuICAgICAgICBHZXRTdGF0ZTxUaHVua0FwaUNvbmZpZz4sXHJcbiAgICAgICAgR2V0RXh0cmE8VGh1bmtBcGlDb25maWc+LFxyXG4gICAgICAgIEFueUFjdGlvblxyXG4gICAgICA+XHJcbiAgICA+XHJcbiAgOiBUaHVua0Rpc3BhdGNoPEdldFN0YXRlPFRodW5rQXBpQ29uZmlnPiwgR2V0RXh0cmE8VGh1bmtBcGlDb25maWc+LCBBbnlBY3Rpb24+XHJcblxyXG50eXBlIEdldFRodW5rQVBJPFRodW5rQXBpQ29uZmlnPiA9IEJhc2VUaHVua0FQSTxcclxuICBHZXRTdGF0ZTxUaHVua0FwaUNvbmZpZz4sXHJcbiAgR2V0RXh0cmE8VGh1bmtBcGlDb25maWc+LFxyXG4gIEdldERpc3BhdGNoPFRodW5rQXBpQ29uZmlnPixcclxuICBHZXRSZWplY3RWYWx1ZTxUaHVua0FwaUNvbmZpZz4sXHJcbiAgR2V0UmVqZWN0ZWRNZXRhPFRodW5rQXBpQ29uZmlnPixcclxuICBHZXRGdWxmaWxsZWRNZXRhPFRodW5rQXBpQ29uZmlnPlxyXG4+XHJcblxyXG50eXBlIEdldFJlamVjdFZhbHVlPFRodW5rQXBpQ29uZmlnPiA9IFRodW5rQXBpQ29uZmlnIGV4dGVuZHMge1xyXG4gIHJlamVjdFZhbHVlOiBpbmZlciBSZWplY3RWYWx1ZVxyXG59XHJcbiAgPyBSZWplY3RWYWx1ZVxyXG4gIDogdW5rbm93blxyXG5cclxudHlwZSBHZXRQZW5kaW5nTWV0YTxUaHVua0FwaUNvbmZpZz4gPSBUaHVua0FwaUNvbmZpZyBleHRlbmRzIHtcclxuICBwZW5kaW5nTWV0YTogaW5mZXIgUGVuZGluZ01ldGFcclxufVxyXG4gID8gUGVuZGluZ01ldGFcclxuICA6IHVua25vd25cclxuXHJcbnR5cGUgR2V0RnVsZmlsbGVkTWV0YTxUaHVua0FwaUNvbmZpZz4gPSBUaHVua0FwaUNvbmZpZyBleHRlbmRzIHtcclxuICBmdWxmaWxsZWRNZXRhOiBpbmZlciBGdWxmaWxsZWRNZXRhXHJcbn1cclxuICA/IEZ1bGZpbGxlZE1ldGFcclxuICA6IHVua25vd25cclxuXHJcbnR5cGUgR2V0UmVqZWN0ZWRNZXRhPFRodW5rQXBpQ29uZmlnPiA9IFRodW5rQXBpQ29uZmlnIGV4dGVuZHMge1xyXG4gIHJlamVjdGVkTWV0YTogaW5mZXIgUmVqZWN0ZWRNZXRhXHJcbn1cclxuICA/IFJlamVjdGVkTWV0YVxyXG4gIDogdW5rbm93blxyXG5cclxudHlwZSBHZXRTZXJpYWxpemVkRXJyb3JUeXBlPFRodW5rQXBpQ29uZmlnPiA9IFRodW5rQXBpQ29uZmlnIGV4dGVuZHMge1xyXG4gIHNlcmlhbGl6ZWRFcnJvclR5cGU6IGluZmVyIEdldFNlcmlhbGl6ZWRFcnJvclR5cGVcclxufVxyXG4gID8gR2V0U2VyaWFsaXplZEVycm9yVHlwZVxyXG4gIDogU2VyaWFsaXplZEVycm9yXHJcblxyXG50eXBlIE1heWJlUHJvbWlzZTxUPiA9IFQgfCBQcm9taXNlPFQ+IHwgKFQgZXh0ZW5kcyBhbnkgPyBQcm9taXNlPFQ+IDogbmV2ZXIpXHJcblxyXG4vKipcclxuICogQSB0eXBlIGRlc2NyaWJpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgYHBheWxvYWRDcmVhdG9yYCBhcmd1bWVudCB0byBgY3JlYXRlQXN5bmNUaHVua2AuXHJcbiAqIE1pZ2h0IGJlIHVzZWZ1bCBmb3Igd3JhcHBpbmcgYGNyZWF0ZUFzeW5jVGh1bmtgIGluIGN1c3RvbSBhYnN0cmFjdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIEFzeW5jVGh1bmtQYXlsb2FkQ3JlYXRvclJldHVyblZhbHVlPFxyXG4gIFJldHVybmVkLFxyXG4gIFRodW5rQXBpQ29uZmlnIGV4dGVuZHMgQXN5bmNUaHVua0NvbmZpZ1xyXG4+ID0gTWF5YmVQcm9taXNlPFxyXG4gIHwgSXNVbmtub3duPFxyXG4gICAgICBHZXRGdWxmaWxsZWRNZXRhPFRodW5rQXBpQ29uZmlnPixcclxuICAgICAgUmV0dXJuZWQsXHJcbiAgICAgIEZ1bGZpbGxXaXRoTWV0YTxSZXR1cm5lZCwgR2V0RnVsZmlsbGVkTWV0YTxUaHVua0FwaUNvbmZpZz4+XHJcbiAgICA+XHJcbiAgfCBSZWplY3RXaXRoVmFsdWU8XHJcbiAgICAgIEdldFJlamVjdFZhbHVlPFRodW5rQXBpQ29uZmlnPixcclxuICAgICAgR2V0UmVqZWN0ZWRNZXRhPFRodW5rQXBpQ29uZmlnPlxyXG4gICAgPlxyXG4+XHJcbi8qKlxyXG4gKiBBIHR5cGUgZGVzY3JpYmluZyB0aGUgYHBheWxvYWRDcmVhdG9yYCBhcmd1bWVudCB0byBgY3JlYXRlQXN5bmNUaHVua2AuXHJcbiAqIE1pZ2h0IGJlIHVzZWZ1bCBmb3Igd3JhcHBpbmcgYGNyZWF0ZUFzeW5jVGh1bmtgIGluIGN1c3RvbSBhYnN0cmFjdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIEFzeW5jVGh1bmtQYXlsb2FkQ3JlYXRvcjxcclxuICBSZXR1cm5lZCxcclxuICBUaHVua0FyZyA9IHZvaWQsXHJcbiAgVGh1bmtBcGlDb25maWcgZXh0ZW5kcyBBc3luY1RodW5rQ29uZmlnID0ge31cclxuPiA9IChcclxuICBhcmc6IFRodW5rQXJnLFxyXG4gIHRodW5rQVBJOiBHZXRUaHVua0FQSTxUaHVua0FwaUNvbmZpZz5cclxuKSA9PiBBc3luY1RodW5rUGF5bG9hZENyZWF0b3JSZXR1cm5WYWx1ZTxSZXR1cm5lZCwgVGh1bmtBcGlDb25maWc+XHJcblxyXG4vKipcclxuICogQSBUaHVua0FjdGlvbiBjcmVhdGVkIGJ5IGBjcmVhdGVBc3luY1RodW5rYC5cclxuICogRGlzcGF0Y2hpbmcgaXQgcmV0dXJucyBhIFByb21pc2UgZm9yIGVpdGhlciBhXHJcbiAqIGZ1bGZpbGxlZCBvciByZWplY3RlZCBhY3Rpb24uXHJcbiAqIEFsc28sIHRoZSByZXR1cm5lZCB2YWx1ZSBjb250YWlucyBhbiBgYWJvcnQoKWAgbWV0aG9kXHJcbiAqIHRoYXQgYWxsb3dzIHRoZSBhc3luY0FjdGlvbiB0byBiZSBjYW5jZWxsZWQgZnJvbSB0aGUgb3V0c2lkZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgQXN5bmNUaHVua0FjdGlvbjxcclxuICBSZXR1cm5lZCxcclxuICBUaHVua0FyZyxcclxuICBUaHVua0FwaUNvbmZpZyBleHRlbmRzIEFzeW5jVGh1bmtDb25maWdcclxuPiA9IChcclxuICBkaXNwYXRjaDogR2V0RGlzcGF0Y2g8VGh1bmtBcGlDb25maWc+LFxyXG4gIGdldFN0YXRlOiAoKSA9PiBHZXRTdGF0ZTxUaHVua0FwaUNvbmZpZz4sXHJcbiAgZXh0cmE6IEdldEV4dHJhPFRodW5rQXBpQ29uZmlnPlxyXG4pID0+IFByb21pc2U8XHJcbiAgfCBSZXR1cm5UeXBlPEFzeW5jVGh1bmtGdWxmaWxsZWRBY3Rpb25DcmVhdG9yPFJldHVybmVkLCBUaHVua0FyZz4+XHJcbiAgfCBSZXR1cm5UeXBlPEFzeW5jVGh1bmtSZWplY3RlZEFjdGlvbkNyZWF0b3I8VGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPj5cclxuPiAmIHtcclxuICBhYm9ydDogKHJlYXNvbj86IHN0cmluZykgPT4gdm9pZFxyXG4gIHJlcXVlc3RJZDogc3RyaW5nXHJcbiAgYXJnOiBUaHVua0FyZ1xyXG4gIHVud3JhcDogKCkgPT4gUHJvbWlzZTxSZXR1cm5lZD5cclxufVxyXG5cclxudHlwZSBBc3luY1RodW5rQWN0aW9uQ3JlYXRvcjxcclxuICBSZXR1cm5lZCxcclxuICBUaHVua0FyZyxcclxuICBUaHVua0FwaUNvbmZpZyBleHRlbmRzIEFzeW5jVGh1bmtDb25maWdcclxuPiA9IElzQW55PFxyXG4gIFRodW5rQXJnLFxyXG4gIC8vIGFueSBoYW5kbGluZ1xyXG4gIChhcmc6IFRodW5rQXJnKSA9PiBBc3luY1RodW5rQWN0aW9uPFJldHVybmVkLCBUaHVua0FyZywgVGh1bmtBcGlDb25maWc+LFxyXG4gIC8vIHVua25vd24gaGFuZGxpbmdcclxuICB1bmtub3duIGV4dGVuZHMgVGh1bmtBcmdcclxuICAgID8gKGFyZzogVGh1bmtBcmcpID0+IEFzeW5jVGh1bmtBY3Rpb248UmV0dXJuZWQsIFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4gLy8gYXJndW1lbnQgbm90IHNwZWNpZmllZCBvciBzcGVjaWZpZWQgYXMgdm9pZCBvciB1bmRlZmluZWRcclxuICAgIDogW1RodW5rQXJnXSBleHRlbmRzIFt2b2lkXSB8IFt1bmRlZmluZWRdXHJcbiAgICA/ICgpID0+IEFzeW5jVGh1bmtBY3Rpb248UmV0dXJuZWQsIFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4gLy8gYXJndW1lbnQgY29udGFpbnMgdm9pZFxyXG4gICAgOiBbdm9pZF0gZXh0ZW5kcyBbVGh1bmtBcmddIC8vIG1ha2Ugb3B0aW9uYWxcclxuICAgID8gKGFyZz86IFRodW5rQXJnKSA9PiBBc3luY1RodW5rQWN0aW9uPFJldHVybmVkLCBUaHVua0FyZywgVGh1bmtBcGlDb25maWc+IC8vIGFyZ3VtZW50IGNvbnRhaW5zIHVuZGVmaW5lZFxyXG4gICAgOiBbdW5kZWZpbmVkXSBleHRlbmRzIFtUaHVua0FyZ11cclxuICAgID8gV2l0aFN0cmljdE51bGxDaGVja3M8XHJcbiAgICAgICAgLy8gd2l0aCBzdHJpY3QgbnVsbENoZWNrczogbWFrZSBvcHRpb25hbFxyXG4gICAgICAgIChcclxuICAgICAgICAgIGFyZz86IFRodW5rQXJnXHJcbiAgICAgICAgKSA9PiBBc3luY1RodW5rQWN0aW9uPFJldHVybmVkLCBUaHVua0FyZywgVGh1bmtBcGlDb25maWc+LFxyXG4gICAgICAgIC8vIHdpdGhvdXQgc3RyaWN0IG51bGwgY2hlY2tzIHRoaXMgd2lsbCBtYXRjaCBldmVyeXRoaW5nLCBzbyBkb24ndCBtYWtlIGl0IG9wdGlvbmFsXHJcbiAgICAgICAgKGFyZzogVGh1bmtBcmcpID0+IEFzeW5jVGh1bmtBY3Rpb248UmV0dXJuZWQsIFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz5cclxuICAgICAgPiAvLyBkZWZhdWx0IGNhc2U6IG5vcm1hbCBhcmd1bWVudFxyXG4gICAgOiAoYXJnOiBUaHVua0FyZykgPT4gQXN5bmNUaHVua0FjdGlvbjxSZXR1cm5lZCwgVGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPlxyXG4+XHJcblxyXG4vKipcclxuICogT3B0aW9ucyBvYmplY3QgZm9yIGBjcmVhdGVBc3luY1RodW5rYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IHR5cGUgQXN5bmNUaHVua09wdGlvbnM8XHJcbiAgVGh1bmtBcmcgPSB2b2lkLFxyXG4gIFRodW5rQXBpQ29uZmlnIGV4dGVuZHMgQXN5bmNUaHVua0NvbmZpZyA9IHt9XHJcbj4gPSB7XHJcbiAgLyoqXHJcbiAgICogQSBtZXRob2QgdG8gY29udHJvbCB3aGV0aGVyIHRoZSBhc3luY1RodW5rIHNob3VsZCBiZSBleGVjdXRlZC4gSGFzIGFjY2VzcyB0byB0aGVcclxuICAgKiBgYXJnYCwgYGFwaS5nZXRTdGF0ZSgpYCBhbmQgYGFwaS5leHRyYWAgYXJndW1lbnRzLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgYGZhbHNlYCBpZiBpdCBzaG91bGQgYmUgc2tpcHBlZFxyXG4gICAqL1xyXG4gIGNvbmRpdGlvbj8oXHJcbiAgICBhcmc6IFRodW5rQXJnLFxyXG4gICAgYXBpOiBQaWNrPEdldFRodW5rQVBJPFRodW5rQXBpQ29uZmlnPiwgJ2dldFN0YXRlJyB8ICdleHRyYSc+XHJcbiAgKTogTWF5YmVQcm9taXNlPGJvb2xlYW4gfCB1bmRlZmluZWQ+XHJcbiAgLyoqXHJcbiAgICogSWYgYGNvbmRpdGlvbmAgcmV0dXJucyBgZmFsc2VgLCB0aGUgYXN5bmNUaHVuayB3aWxsIGJlIHNraXBwZWQuXHJcbiAgICogVGhpcyBvcHRpb24gYWxsb3dzIHlvdSB0byBjb250cm9sIHdoZXRoZXIgYSBgcmVqZWN0ZWRgIGFjdGlvbiB3aXRoIGBtZXRhLmNvbmRpdGlvbiA9PSBmYWxzZWBcclxuICAgKiB3aWxsIGJlIGRpc3BhdGNoZWQgb3Igbm90LlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgYGZhbHNlYFxyXG4gICAqL1xyXG4gIGRpc3BhdGNoQ29uZGl0aW9uUmVqZWN0aW9uPzogYm9vbGVhblxyXG5cclxuICBzZXJpYWxpemVFcnJvcj86ICh4OiB1bmtub3duKSA9PiBHZXRTZXJpYWxpemVkRXJyb3JUeXBlPFRodW5rQXBpQ29uZmlnPlxyXG5cclxuICAvKipcclxuICAgKiBBIGZ1bmN0aW9uIHRvIHVzZSB3aGVuIGdlbmVyYXRpbmcgdGhlIGByZXF1ZXN0SWRgIGZvciB0aGUgcmVxdWVzdCBzZXF1ZW5jZS5cclxuICAgKlxyXG4gICAqIEBkZWZhdWx0IGBuYW5vaWRgXHJcbiAgICovXHJcbiAgaWRHZW5lcmF0b3I/OiAoYXJnOiBUaHVua0FyZykgPT4gc3RyaW5nXHJcbn0gJiBJc1Vua25vd248XHJcbiAgR2V0UGVuZGluZ01ldGE8VGh1bmtBcGlDb25maWc+LFxyXG4gIHtcclxuICAgIC8qKlxyXG4gICAgICogQSBtZXRob2QgdG8gZ2VuZXJhdGUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIGBtZXRhYCBvZiB0aGUgcGVuZGluZyBhY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogVXNpbmcgdGhpcyBvcHRpb25hbCBvdmVybG9hZCB3aWxsIG5vdCBtb2RpZnkgdGhlIHR5cGVzIGNvcnJlY3RseSwgdGhpcyBvdmVybG9hZCBpcyBvbmx5IGluIHBsYWNlIHRvIHN1cHBvcnQgSmF2YVNjcmlwdCB1c2Vycy5cclxuICAgICAqIFBsZWFzZSB1c2UgdGhlIGBUaHVua0FwaUNvbmZpZ2AgcGFyYW1ldGVyIGBwZW5kaW5nTWV0YWAgdG8gZ2V0IGFjY2VzcyB0byBhIGNvcnJlY3RseSB0eXBlZCBvdmVybG9hZFxyXG4gICAgICovXHJcbiAgICBnZXRQZW5kaW5nTWV0YT8oXHJcbiAgICAgIGJhc2U6IHtcclxuICAgICAgICBhcmc6IFRodW5rQXJnXHJcbiAgICAgICAgcmVxdWVzdElkOiBzdHJpbmdcclxuICAgICAgfSxcclxuICAgICAgYXBpOiBQaWNrPEdldFRodW5rQVBJPFRodW5rQXBpQ29uZmlnPiwgJ2dldFN0YXRlJyB8ICdleHRyYSc+XHJcbiAgICApOiBHZXRQZW5kaW5nTWV0YTxUaHVua0FwaUNvbmZpZz5cclxuICB9LFxyXG4gIHtcclxuICAgIC8qKlxyXG4gICAgICogQSBtZXRob2QgdG8gZ2VuZXJhdGUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIGBtZXRhYCBvZiB0aGUgcGVuZGluZyBhY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIGdldFBlbmRpbmdNZXRhKFxyXG4gICAgICBiYXNlOiB7XHJcbiAgICAgICAgYXJnOiBUaHVua0FyZ1xyXG4gICAgICAgIHJlcXVlc3RJZDogc3RyaW5nXHJcbiAgICAgIH0sXHJcbiAgICAgIGFwaTogUGljazxHZXRUaHVua0FQSTxUaHVua0FwaUNvbmZpZz4sICdnZXRTdGF0ZScgfCAnZXh0cmEnPlxyXG4gICAgKTogR2V0UGVuZGluZ01ldGE8VGh1bmtBcGlDb25maWc+XHJcbiAgfVxyXG4+XHJcblxyXG5leHBvcnQgdHlwZSBBc3luY1RodW5rUGVuZGluZ0FjdGlvbkNyZWF0b3I8XHJcbiAgVGh1bmtBcmcsXHJcbiAgVGh1bmtBcGlDb25maWcgPSB7fVxyXG4+ID0gQWN0aW9uQ3JlYXRvcldpdGhQcmVwYXJlZFBheWxvYWQ8XHJcbiAgW3N0cmluZywgVGh1bmtBcmcsIEdldFBlbmRpbmdNZXRhPFRodW5rQXBpQ29uZmlnPj9dLFxyXG4gIHVuZGVmaW5lZCxcclxuICBzdHJpbmcsXHJcbiAgbmV2ZXIsXHJcbiAge1xyXG4gICAgYXJnOiBUaHVua0FyZ1xyXG4gICAgcmVxdWVzdElkOiBzdHJpbmdcclxuICAgIHJlcXVlc3RTdGF0dXM6ICdwZW5kaW5nJ1xyXG4gIH0gJiBHZXRQZW5kaW5nTWV0YTxUaHVua0FwaUNvbmZpZz5cclxuPlxyXG5cclxuZXhwb3J0IHR5cGUgQXN5bmNUaHVua1JlamVjdGVkQWN0aW9uQ3JlYXRvcjxcclxuICBUaHVua0FyZyxcclxuICBUaHVua0FwaUNvbmZpZyA9IHt9XHJcbj4gPSBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxcclxuICBbXHJcbiAgICBFcnJvciB8IG51bGwsXHJcbiAgICBzdHJpbmcsXHJcbiAgICBUaHVua0FyZyxcclxuICAgIEdldFJlamVjdFZhbHVlPFRodW5rQXBpQ29uZmlnPj8sXHJcbiAgICBHZXRSZWplY3RlZE1ldGE8VGh1bmtBcGlDb25maWc+P1xyXG4gIF0sXHJcbiAgR2V0UmVqZWN0VmFsdWU8VGh1bmtBcGlDb25maWc+IHwgdW5kZWZpbmVkLFxyXG4gIHN0cmluZyxcclxuICBHZXRTZXJpYWxpemVkRXJyb3JUeXBlPFRodW5rQXBpQ29uZmlnPixcclxuICB7XHJcbiAgICBhcmc6IFRodW5rQXJnXHJcbiAgICByZXF1ZXN0SWQ6IHN0cmluZ1xyXG4gICAgcmVxdWVzdFN0YXR1czogJ3JlamVjdGVkJ1xyXG4gICAgYWJvcnRlZDogYm9vbGVhblxyXG4gICAgY29uZGl0aW9uOiBib29sZWFuXHJcbiAgfSAmIChcclxuICAgIHwgKHsgcmVqZWN0ZWRXaXRoVmFsdWU6IGZhbHNlIH0gJiB7XHJcbiAgICAgICAgW0sgaW4ga2V5b2YgR2V0UmVqZWN0ZWRNZXRhPFRodW5rQXBpQ29uZmlnPl0/OiB1bmRlZmluZWRcclxuICAgICAgfSlcclxuICAgIHwgKHsgcmVqZWN0ZWRXaXRoVmFsdWU6IHRydWUgfSAmIEdldFJlamVjdGVkTWV0YTxUaHVua0FwaUNvbmZpZz4pXHJcbiAgKVxyXG4+XHJcblxyXG5leHBvcnQgdHlwZSBBc3luY1RodW5rRnVsZmlsbGVkQWN0aW9uQ3JlYXRvcjxcclxuICBSZXR1cm5lZCxcclxuICBUaHVua0FyZyxcclxuICBUaHVua0FwaUNvbmZpZyA9IHt9XHJcbj4gPSBBY3Rpb25DcmVhdG9yV2l0aFByZXBhcmVkUGF5bG9hZDxcclxuICBbUmV0dXJuZWQsIHN0cmluZywgVGh1bmtBcmcsIEdldEZ1bGZpbGxlZE1ldGE8VGh1bmtBcGlDb25maWc+P10sXHJcbiAgUmV0dXJuZWQsXHJcbiAgc3RyaW5nLFxyXG4gIG5ldmVyLFxyXG4gIHtcclxuICAgIGFyZzogVGh1bmtBcmdcclxuICAgIHJlcXVlc3RJZDogc3RyaW5nXHJcbiAgICByZXF1ZXN0U3RhdHVzOiAnZnVsZmlsbGVkJ1xyXG4gIH0gJiBHZXRGdWxmaWxsZWRNZXRhPFRodW5rQXBpQ29uZmlnPlxyXG4+XHJcblxyXG4vKipcclxuICogQSB0eXBlIGRlc2NyaWJpbmcgdGhlIHJldHVybiB2YWx1ZSBvZiBgY3JlYXRlQXN5bmNUaHVua2AuXHJcbiAqIE1pZ2h0IGJlIHVzZWZ1bCBmb3Igd3JhcHBpbmcgYGNyZWF0ZUFzeW5jVGh1bmtgIGluIGN1c3RvbSBhYnN0cmFjdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCB0eXBlIEFzeW5jVGh1bms8XHJcbiAgUmV0dXJuZWQsXHJcbiAgVGh1bmtBcmcsXHJcbiAgVGh1bmtBcGlDb25maWcgZXh0ZW5kcyBBc3luY1RodW5rQ29uZmlnXHJcbj4gPSBBc3luY1RodW5rQWN0aW9uQ3JlYXRvcjxSZXR1cm5lZCwgVGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPiAmIHtcclxuICBwZW5kaW5nOiBBc3luY1RodW5rUGVuZGluZ0FjdGlvbkNyZWF0b3I8VGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnPlxyXG4gIHJlamVjdGVkOiBBc3luY1RodW5rUmVqZWN0ZWRBY3Rpb25DcmVhdG9yPFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz5cclxuICBmdWxmaWxsZWQ6IEFzeW5jVGh1bmtGdWxmaWxsZWRBY3Rpb25DcmVhdG9yPFxyXG4gICAgUmV0dXJuZWQsXHJcbiAgICBUaHVua0FyZyxcclxuICAgIFRodW5rQXBpQ29uZmlnXHJcbiAgPlxyXG4gIHR5cGVQcmVmaXg6IHN0cmluZ1xyXG59XHJcblxyXG50eXBlIE92ZXJyaWRlVGh1bmtBcGlDb25maWdzPE9sZENvbmZpZywgTmV3Q29uZmlnPiA9IElkPFxyXG4gIE5ld0NvbmZpZyAmIE9taXQ8T2xkQ29uZmlnLCBrZXlvZiBOZXdDb25maWc+XHJcbj5cclxuXHJcbnR5cGUgQ3JlYXRlQXN5bmNUaHVuazxDdXJyaWVkVGh1bmtBcGlDb25maWcgZXh0ZW5kcyBBc3luY1RodW5rQ29uZmlnPiA9IHtcclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB0eXBlUHJlZml4XHJcbiAgICogQHBhcmFtIHBheWxvYWRDcmVhdG9yXHJcbiAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICAvLyBzZXBhcmF0ZSBzaWduYXR1cmUgd2l0aG91dCBgQXN5bmNUaHVua0NvbmZpZ2AgZm9yIGJldHRlciBpbmZlcmVuY2VcclxuICA8UmV0dXJuZWQsIFRodW5rQXJnID0gdm9pZD4oXHJcbiAgICB0eXBlUHJlZml4OiBzdHJpbmcsXHJcbiAgICBwYXlsb2FkQ3JlYXRvcjogQXN5bmNUaHVua1BheWxvYWRDcmVhdG9yPFxyXG4gICAgICBSZXR1cm5lZCxcclxuICAgICAgVGh1bmtBcmcsXHJcbiAgICAgIEN1cnJpZWRUaHVua0FwaUNvbmZpZ1xyXG4gICAgPixcclxuICAgIG9wdGlvbnM/OiBBc3luY1RodW5rT3B0aW9uczxUaHVua0FyZywgQ3VycmllZFRodW5rQXBpQ29uZmlnPlxyXG4gICk6IEFzeW5jVGh1bms8UmV0dXJuZWQsIFRodW5rQXJnLCBDdXJyaWVkVGh1bmtBcGlDb25maWc+XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHR5cGVQcmVmaXhcclxuICAgKiBAcGFyYW0gcGF5bG9hZENyZWF0b3JcclxuICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIDxSZXR1cm5lZCwgVGh1bmtBcmcsIFRodW5rQXBpQ29uZmlnIGV4dGVuZHMgQXN5bmNUaHVua0NvbmZpZz4oXHJcbiAgICB0eXBlUHJlZml4OiBzdHJpbmcsXHJcbiAgICBwYXlsb2FkQ3JlYXRvcjogQXN5bmNUaHVua1BheWxvYWRDcmVhdG9yPFxyXG4gICAgICBSZXR1cm5lZCxcclxuICAgICAgVGh1bmtBcmcsXHJcbiAgICAgIE92ZXJyaWRlVGh1bmtBcGlDb25maWdzPEN1cnJpZWRUaHVua0FwaUNvbmZpZywgVGh1bmtBcGlDb25maWc+XHJcbiAgICA+LFxyXG4gICAgb3B0aW9ucz86IEFzeW5jVGh1bmtPcHRpb25zPFxyXG4gICAgICBUaHVua0FyZyxcclxuICAgICAgT3ZlcnJpZGVUaHVua0FwaUNvbmZpZ3M8Q3VycmllZFRodW5rQXBpQ29uZmlnLCBUaHVua0FwaUNvbmZpZz5cclxuICAgID5cclxuICApOiBBc3luY1RodW5rPFxyXG4gICAgUmV0dXJuZWQsXHJcbiAgICBUaHVua0FyZyxcclxuICAgIE92ZXJyaWRlVGh1bmtBcGlDb25maWdzPEN1cnJpZWRUaHVua0FwaUNvbmZpZywgVGh1bmtBcGlDb25maWc+XHJcbiAgPlxyXG5cclxuICB3aXRoVHlwZXM8VGh1bmtBcGlDb25maWcgZXh0ZW5kcyBBc3luY1RodW5rQ29uZmlnPigpOiBDcmVhdGVBc3luY1RodW5rPFxyXG4gICAgT3ZlcnJpZGVUaHVua0FwaUNvbmZpZ3M8Q3VycmllZFRodW5rQXBpQ29uZmlnLCBUaHVua0FwaUNvbmZpZz5cclxuICA+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVBc3luY1RodW5rID0gKCgpID0+IHtcclxuICBmdW5jdGlvbiBjcmVhdGVBc3luY1RodW5rPFxyXG4gICAgUmV0dXJuZWQsXHJcbiAgICBUaHVua0FyZyxcclxuICAgIFRodW5rQXBpQ29uZmlnIGV4dGVuZHMgQXN5bmNUaHVua0NvbmZpZ1xyXG4gID4oXHJcbiAgICB0eXBlUHJlZml4OiBzdHJpbmcsXHJcbiAgICBwYXlsb2FkQ3JlYXRvcjogQXN5bmNUaHVua1BheWxvYWRDcmVhdG9yPFxyXG4gICAgICBSZXR1cm5lZCxcclxuICAgICAgVGh1bmtBcmcsXHJcbiAgICAgIFRodW5rQXBpQ29uZmlnXHJcbiAgICA+LFxyXG4gICAgb3B0aW9ucz86IEFzeW5jVGh1bmtPcHRpb25zPFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz5cclxuICApOiBBc3luY1RodW5rPFJldHVybmVkLCBUaHVua0FyZywgVGh1bmtBcGlDb25maWc+IHtcclxuICAgIHR5cGUgUmVqZWN0ZWRWYWx1ZSA9IEdldFJlamVjdFZhbHVlPFRodW5rQXBpQ29uZmlnPlxyXG4gICAgdHlwZSBQZW5kaW5nTWV0YSA9IEdldFBlbmRpbmdNZXRhPFRodW5rQXBpQ29uZmlnPlxyXG4gICAgdHlwZSBGdWxmaWxsZWRNZXRhID0gR2V0RnVsZmlsbGVkTWV0YTxUaHVua0FwaUNvbmZpZz5cclxuICAgIHR5cGUgUmVqZWN0ZWRNZXRhID0gR2V0UmVqZWN0ZWRNZXRhPFRodW5rQXBpQ29uZmlnPlxyXG5cclxuICAgIGNvbnN0IGZ1bGZpbGxlZDogQXN5bmNUaHVua0Z1bGZpbGxlZEFjdGlvbkNyZWF0b3I8XHJcbiAgICAgIFJldHVybmVkLFxyXG4gICAgICBUaHVua0FyZyxcclxuICAgICAgVGh1bmtBcGlDb25maWdcclxuICAgID4gPSBjcmVhdGVBY3Rpb24oXHJcbiAgICAgIHR5cGVQcmVmaXggKyAnL2Z1bGZpbGxlZCcsXHJcbiAgICAgIChcclxuICAgICAgICBwYXlsb2FkOiBSZXR1cm5lZCxcclxuICAgICAgICByZXF1ZXN0SWQ6IHN0cmluZyxcclxuICAgICAgICBhcmc6IFRodW5rQXJnLFxyXG4gICAgICAgIG1ldGE/OiBGdWxmaWxsZWRNZXRhXHJcbiAgICAgICkgPT4gKHtcclxuICAgICAgICBwYXlsb2FkLFxyXG4gICAgICAgIG1ldGE6IHtcclxuICAgICAgICAgIC4uLigobWV0YSBhcyBhbnkpIHx8IHt9KSxcclxuICAgICAgICAgIGFyZyxcclxuICAgICAgICAgIHJlcXVlc3RJZCxcclxuICAgICAgICAgIHJlcXVlc3RTdGF0dXM6ICdmdWxmaWxsZWQnIGFzIGNvbnN0LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pXHJcbiAgICApXHJcblxyXG4gICAgY29uc3QgcGVuZGluZzogQXN5bmNUaHVua1BlbmRpbmdBY3Rpb25DcmVhdG9yPFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4gPVxyXG4gICAgICBjcmVhdGVBY3Rpb24oXHJcbiAgICAgICAgdHlwZVByZWZpeCArICcvcGVuZGluZycsXHJcbiAgICAgICAgKHJlcXVlc3RJZDogc3RyaW5nLCBhcmc6IFRodW5rQXJnLCBtZXRhPzogUGVuZGluZ01ldGEpID0+ICh7XHJcbiAgICAgICAgICBwYXlsb2FkOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICBtZXRhOiB7XHJcbiAgICAgICAgICAgIC4uLigobWV0YSBhcyBhbnkpIHx8IHt9KSxcclxuICAgICAgICAgICAgYXJnLFxyXG4gICAgICAgICAgICByZXF1ZXN0SWQsXHJcbiAgICAgICAgICAgIHJlcXVlc3RTdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuICAgICAgKVxyXG5cclxuICAgIGNvbnN0IHJlamVjdGVkOiBBc3luY1RodW5rUmVqZWN0ZWRBY3Rpb25DcmVhdG9yPFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4gPVxyXG4gICAgICBjcmVhdGVBY3Rpb24oXHJcbiAgICAgICAgdHlwZVByZWZpeCArICcvcmVqZWN0ZWQnLFxyXG4gICAgICAgIChcclxuICAgICAgICAgIGVycm9yOiBFcnJvciB8IG51bGwsXHJcbiAgICAgICAgICByZXF1ZXN0SWQ6IHN0cmluZyxcclxuICAgICAgICAgIGFyZzogVGh1bmtBcmcsXHJcbiAgICAgICAgICBwYXlsb2FkPzogUmVqZWN0ZWRWYWx1ZSxcclxuICAgICAgICAgIG1ldGE/OiBSZWplY3RlZE1ldGFcclxuICAgICAgICApID0+ICh7XHJcbiAgICAgICAgICBwYXlsb2FkLFxyXG4gICAgICAgICAgZXJyb3I6ICgob3B0aW9ucyAmJiBvcHRpb25zLnNlcmlhbGl6ZUVycm9yKSB8fCBtaW5pU2VyaWFsaXplRXJyb3IpKFxyXG4gICAgICAgICAgICBlcnJvciB8fCAnUmVqZWN0ZWQnXHJcbiAgICAgICAgICApIGFzIEdldFNlcmlhbGl6ZWRFcnJvclR5cGU8VGh1bmtBcGlDb25maWc+LFxyXG4gICAgICAgICAgbWV0YToge1xyXG4gICAgICAgICAgICAuLi4oKG1ldGEgYXMgYW55KSB8fCB7fSksXHJcbiAgICAgICAgICAgIGFyZyxcclxuICAgICAgICAgICAgcmVxdWVzdElkLFxyXG4gICAgICAgICAgICByZWplY3RlZFdpdGhWYWx1ZTogISFwYXlsb2FkLFxyXG4gICAgICAgICAgICByZXF1ZXN0U3RhdHVzOiAncmVqZWN0ZWQnIGFzIGNvbnN0LFxyXG4gICAgICAgICAgICBhYm9ydGVkOiBlcnJvcj8ubmFtZSA9PT0gJ0Fib3J0RXJyb3InLFxyXG4gICAgICAgICAgICBjb25kaXRpb246IGVycm9yPy5uYW1lID09PSAnQ29uZGl0aW9uRXJyb3InLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcblxyXG4gICAgbGV0IGRpc3BsYXllZFdhcm5pbmcgPSBmYWxzZVxyXG5cclxuICAgIGNvbnN0IEFDID1cclxuICAgICAgdHlwZW9mIEFib3J0Q29udHJvbGxlciAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICA/IEFib3J0Q29udHJvbGxlclxyXG4gICAgICAgIDogY2xhc3MgaW1wbGVtZW50cyBBYm9ydENvbnRyb2xsZXIge1xyXG4gICAgICAgICAgICBzaWduYWwgPSB7XHJcbiAgICAgICAgICAgICAgYWJvcnRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigpIHt9LFxyXG4gICAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIG9uYWJvcnQoKSB7fSxcclxuICAgICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCkge30sXHJcbiAgICAgICAgICAgICAgcmVhc29uOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgdGhyb3dJZkFib3J0ZWQoKSB7fSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhYm9ydCgpIHtcclxuICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkaXNwbGF5ZWRXYXJuaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXllZFdhcm5pbmcgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcclxuICAgICAgICAgICAgICAgICAgICBgVGhpcyBwbGF0Zm9ybSBkb2VzIG5vdCBpbXBsZW1lbnQgQWJvcnRDb250cm9sbGVyLiBcclxuSWYgeW91IHdhbnQgdG8gdXNlIHRoZSBBYm9ydENvbnRyb2xsZXIgdG8gcmVhY3QgdG8gXFxgYWJvcnRcXGAgZXZlbnRzLCBwbGVhc2UgY29uc2lkZXIgaW1wb3J0aW5nIGEgcG9seWZpbGwgbGlrZSAnYWJvcnRjb250cm9sbGVyLXBvbHlmaWxsL2Rpc3QvYWJvcnRjb250cm9sbGVyLXBvbHlmaWxsLW9ubHknLmBcclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFjdGlvbkNyZWF0b3IoXHJcbiAgICAgIGFyZzogVGh1bmtBcmdcclxuICAgICk6IEFzeW5jVGh1bmtBY3Rpb248UmV0dXJuZWQsIFRodW5rQXJnLCBUaHVua0FwaUNvbmZpZz4ge1xyXG4gICAgICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSwgZXh0cmEpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0SWQgPSBvcHRpb25zPy5pZEdlbmVyYXRvclxyXG4gICAgICAgICAgPyBvcHRpb25zLmlkR2VuZXJhdG9yKGFyZylcclxuICAgICAgICAgIDogbmFub2lkKClcclxuXHJcbiAgICAgICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFDKClcclxuICAgICAgICBsZXQgYWJvcnRSZWFzb246IHN0cmluZyB8IHVuZGVmaW5lZFxyXG5cclxuICAgICAgICBsZXQgc3RhcnRlZCA9IGZhbHNlXHJcbiAgICAgICAgZnVuY3Rpb24gYWJvcnQocmVhc29uPzogc3RyaW5nKSB7XHJcbiAgICAgICAgICBhYm9ydFJlYXNvbiA9IHJlYXNvblxyXG4gICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSAoYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgbGV0IGZpbmFsQWN0aW9uOiBSZXR1cm5UeXBlPHR5cGVvZiBmdWxmaWxsZWQgfCB0eXBlb2YgcmVqZWN0ZWQ+XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgY29uZGl0aW9uUmVzdWx0ID0gb3B0aW9ucz8uY29uZGl0aW9uPy4oYXJnLCB7IGdldFN0YXRlLCBleHRyYSB9KVxyXG4gICAgICAgICAgICBpZiAoaXNUaGVuYWJsZShjb25kaXRpb25SZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgY29uZGl0aW9uUmVzdWx0ID0gYXdhaXQgY29uZGl0aW9uUmVzdWx0XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjb25kaXRpb25SZXN1bHQgPT09IGZhbHNlIHx8IGFib3J0Q29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xyXG4gICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsXHJcbiAgICAgICAgICAgICAgdGhyb3cge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0NvbmRpdGlvbkVycm9yJyxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBYm9ydGVkIGR1ZSB0byBjb25kaXRpb24gY2FsbGJhY2sgcmV0dXJuaW5nIGZhbHNlLicsXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlXHJcblxyXG4gICAgICAgICAgICBjb25zdCBhYm9ydGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlPG5ldmVyPigoXywgcmVqZWN0KSA9PlxyXG4gICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlci5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PlxyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHtcclxuICAgICAgICAgICAgICAgICAgbmFtZTogJ0Fib3J0RXJyb3InLFxyXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBhYm9ydFJlYXNvbiB8fCAnQWJvcnRlZCcsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBkaXNwYXRjaChcclxuICAgICAgICAgICAgICBwZW5kaW5nKFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdElkLFxyXG4gICAgICAgICAgICAgICAgYXJnLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucz8uZ2V0UGVuZGluZ01ldGE/LihcclxuICAgICAgICAgICAgICAgICAgeyByZXF1ZXN0SWQsIGFyZyB9LFxyXG4gICAgICAgICAgICAgICAgICB7IGdldFN0YXRlLCBleHRyYSB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIGZpbmFsQWN0aW9uID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcclxuICAgICAgICAgICAgICBhYm9ydGVkUHJvbWlzZSxcclxuICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkQ3JlYXRvcihhcmcsIHtcclxuICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gsXHJcbiAgICAgICAgICAgICAgICAgIGdldFN0YXRlLFxyXG4gICAgICAgICAgICAgICAgICBleHRyYSxcclxuICAgICAgICAgICAgICAgICAgcmVxdWVzdElkLFxyXG4gICAgICAgICAgICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWwsXHJcbiAgICAgICAgICAgICAgICAgIGFib3J0LFxyXG4gICAgICAgICAgICAgICAgICByZWplY3RXaXRoVmFsdWU6ICgoXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFJlamVjdGVkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YT86IFJlamVjdGVkTWV0YVxyXG4gICAgICAgICAgICAgICAgICApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlamVjdFdpdGhWYWx1ZSh2YWx1ZSwgbWV0YSlcclxuICAgICAgICAgICAgICAgICAgfSkgYXMgYW55LFxyXG4gICAgICAgICAgICAgICAgICBmdWxmaWxsV2l0aFZhbHVlOiAoKHZhbHVlOiB1bmtub3duLCBtZXRhPzogRnVsZmlsbGVkTWV0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRnVsZmlsbFdpdGhNZXRhKHZhbHVlLCBtZXRhKVxyXG4gICAgICAgICAgICAgICAgICB9KSBhcyBhbnksXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmVqZWN0V2l0aFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRocm93IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEZ1bGZpbGxXaXRoTWV0YSkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZnVsZmlsbGVkKHJlc3VsdC5wYXlsb2FkLCByZXF1ZXN0SWQsIGFyZywgcmVzdWx0Lm1ldGEpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVsZmlsbGVkKHJlc3VsdCBhcyBhbnksIHJlcXVlc3RJZCwgYXJnKVxyXG4gICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBdKVxyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGZpbmFsQWN0aW9uID1cclxuICAgICAgICAgICAgICBlcnIgaW5zdGFuY2VvZiBSZWplY3RXaXRoVmFsdWVcclxuICAgICAgICAgICAgICAgID8gcmVqZWN0ZWQobnVsbCwgcmVxdWVzdElkLCBhcmcsIGVyci5wYXlsb2FkLCBlcnIubWV0YSlcclxuICAgICAgICAgICAgICAgIDogcmVqZWN0ZWQoZXJyIGFzIGFueSwgcmVxdWVzdElkLCBhcmcpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBXZSBkaXNwYXRjaCB0aGUgcmVzdWx0IGFjdGlvbiBfYWZ0ZXJfIHRoZSBjYXRjaCwgdG8gYXZvaWQgaGF2aW5nIGFueSBlcnJvcnNcclxuICAgICAgICAgIC8vIGhlcmUgZ2V0IHN3YWxsb3dlZCBieSB0aGUgdHJ5L2NhdGNoIGJsb2NrLFxyXG4gICAgICAgICAgLy8gcGVyIGh0dHBzOi8vdHdpdHRlci5jb20vZGFuX2FicmFtb3Yvc3RhdHVzLzc3MDkxNDIyMTYzODk0MjcyMFxyXG4gICAgICAgICAgLy8gYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWR1eGpzL3JlZHV4LXRvb2xraXQvYmxvYi9lODVlYjE3YjM5YTIxMThkODU5ZjdiNzc0NmUwZjNmZWU1MjNlMDg5L2RvY3MvdHV0b3JpYWxzL2FkdmFuY2VkLXR1dG9yaWFsLm1kI2FzeW5jLWVycm9yLWhhbmRsaW5nLWxvZ2ljLWluLXRodW5rc1xyXG5cclxuICAgICAgICAgIGNvbnN0IHNraXBEaXNwYXRjaCA9XHJcbiAgICAgICAgICAgIG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgIW9wdGlvbnMuZGlzcGF0Y2hDb25kaXRpb25SZWplY3Rpb24gJiZcclxuICAgICAgICAgICAgcmVqZWN0ZWQubWF0Y2goZmluYWxBY3Rpb24pICYmXHJcbiAgICAgICAgICAgIChmaW5hbEFjdGlvbiBhcyBhbnkpLm1ldGEuY29uZGl0aW9uXHJcblxyXG4gICAgICAgICAgaWYgKCFza2lwRGlzcGF0Y2gpIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2goZmluYWxBY3Rpb24pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmluYWxBY3Rpb25cclxuICAgICAgICB9KSgpXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvbWlzZSBhcyBQcm9taXNlPGFueT4sIHtcclxuICAgICAgICAgIGFib3J0LFxyXG4gICAgICAgICAgcmVxdWVzdElkLFxyXG4gICAgICAgICAgYXJnLFxyXG4gICAgICAgICAgdW53cmFwKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuPGFueT4odW53cmFwUmVzdWx0KVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oXHJcbiAgICAgIGFjdGlvbkNyZWF0b3IgYXMgQXN5bmNUaHVua0FjdGlvbkNyZWF0b3I8XHJcbiAgICAgICAgUmV0dXJuZWQsXHJcbiAgICAgICAgVGh1bmtBcmcsXHJcbiAgICAgICAgVGh1bmtBcGlDb25maWdcclxuICAgICAgPixcclxuICAgICAge1xyXG4gICAgICAgIHBlbmRpbmcsXHJcbiAgICAgICAgcmVqZWN0ZWQsXHJcbiAgICAgICAgZnVsZmlsbGVkLFxyXG4gICAgICAgIHR5cGVQcmVmaXgsXHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcbiAgY3JlYXRlQXN5bmNUaHVuay53aXRoVHlwZXMgPSAoKSA9PiBjcmVhdGVBc3luY1RodW5rXHJcblxyXG4gIHJldHVybiBjcmVhdGVBc3luY1RodW5rIGFzIENyZWF0ZUFzeW5jVGh1bms8QXN5bmNUaHVua0NvbmZpZz5cclxufSkoKVxyXG5cclxuaW50ZXJmYWNlIFVud3JhcHBhYmxlQWN0aW9uIHtcclxuICBwYXlsb2FkOiBhbnlcclxuICBtZXRhPzogYW55XHJcbiAgZXJyb3I/OiBhbnlcclxufVxyXG5cclxudHlwZSBVbndyYXBwZWRBY3Rpb25QYXlsb2FkPFQgZXh0ZW5kcyBVbndyYXBwYWJsZUFjdGlvbj4gPSBFeGNsdWRlPFxyXG4gIFQsXHJcbiAgeyBlcnJvcjogYW55IH1cclxuPlsncGF5bG9hZCddXHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVud3JhcFJlc3VsdDxSIGV4dGVuZHMgVW53cmFwcGFibGVBY3Rpb24+KFxyXG4gIGFjdGlvbjogUlxyXG4pOiBVbndyYXBwZWRBY3Rpb25QYXlsb2FkPFI+IHtcclxuICBpZiAoYWN0aW9uLm1ldGEgJiYgYWN0aW9uLm1ldGEucmVqZWN0ZWRXaXRoVmFsdWUpIHtcclxuICAgIHRocm93IGFjdGlvbi5wYXlsb2FkXHJcbiAgfVxyXG4gIGlmIChhY3Rpb24uZXJyb3IpIHtcclxuICAgIHRocm93IGFjdGlvbi5lcnJvclxyXG4gIH1cclxuICByZXR1cm4gYWN0aW9uLnBheWxvYWRcclxufVxyXG5cclxudHlwZSBXaXRoU3RyaWN0TnVsbENoZWNrczxUcnVlLCBGYWxzZT4gPSB1bmRlZmluZWQgZXh0ZW5kcyBib29sZWFuXHJcbiAgPyBGYWxzZVxyXG4gIDogVHJ1ZVxyXG5cclxuZnVuY3Rpb24gaXNUaGVuYWJsZSh2YWx1ZTogYW55KTogdmFsdWUgaXMgUHJvbWlzZUxpa2U8YW55PiB7XHJcbiAgcmV0dXJuIChcclxuICAgIHZhbHVlICE9PSBudWxsICYmXHJcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXHJcbiAgICB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJ1xyXG4gIClcclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IE1pZGRsZXdhcmUsIFN0b3JlRW5oYW5jZXIgfSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlQXJyYXkgfSBmcm9tICcuL3V0aWxzJ1xyXG5cclxuLyoqXHJcbiAqIHJldHVybiBUcnVlIGlmIFQgaXMgYGFueWAsIG90aGVyd2lzZSByZXR1cm4gRmFsc2VcclxuICogdGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vam9vbmhvY2hvL3RzZGVmXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZXhwb3J0IHR5cGUgSXNBbnk8VCwgVHJ1ZSwgRmFsc2UgPSBuZXZlcj4gPVxyXG4gIC8vIHRlc3QgaWYgd2UgYXJlIGdvaW5nIHRoZSBsZWZ0IEFORCByaWdodCBwYXRoIGluIHRoZSBjb25kaXRpb25cclxuICB0cnVlIHwgZmFsc2UgZXh0ZW5kcyAoVCBleHRlbmRzIG5ldmVyID8gdHJ1ZSA6IGZhbHNlKSA/IFRydWUgOiBGYWxzZVxyXG5cclxuLyoqXHJcbiAqIHJldHVybiBUcnVlIGlmIFQgaXMgYHVua25vd25gLCBvdGhlcndpc2UgcmV0dXJuIEZhbHNlXHJcbiAqIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2pvb25ob2Noby90c2RlZlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmV4cG9ydCB0eXBlIElzVW5rbm93bjxULCBUcnVlLCBGYWxzZSA9IG5ldmVyPiA9IHVua25vd24gZXh0ZW5kcyBUXHJcbiAgPyBJc0FueTxULCBGYWxzZSwgVHJ1ZT5cclxuICA6IEZhbHNlXHJcblxyXG5leHBvcnQgdHlwZSBGYWxsYmFja0lmVW5rbm93bjxULCBGYWxsYmFjaz4gPSBJc1Vua25vd248VCwgRmFsbGJhY2ssIFQ+XHJcblxyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5leHBvcnQgdHlwZSBJZk1heWJlVW5kZWZpbmVkPFAsIFRydWUsIEZhbHNlPiA9IFt1bmRlZmluZWRdIGV4dGVuZHMgW1BdXHJcbiAgPyBUcnVlXHJcbiAgOiBGYWxzZVxyXG5cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZXhwb3J0IHR5cGUgSWZWb2lkPFAsIFRydWUsIEZhbHNlPiA9IFt2b2lkXSBleHRlbmRzIFtQXSA/IFRydWUgOiBGYWxzZVxyXG5cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZXhwb3J0IHR5cGUgSXNFbXB0eU9iajxULCBUcnVlLCBGYWxzZSA9IG5ldmVyPiA9IFQgZXh0ZW5kcyBhbnlcclxuICA/IGtleW9mIFQgZXh0ZW5kcyBuZXZlclxyXG4gICAgPyBJc1Vua25vd248VCwgRmFsc2UsIElmTWF5YmVVbmRlZmluZWQ8VCwgRmFsc2UsIElmVm9pZDxULCBGYWxzZSwgVHJ1ZT4+PlxyXG4gICAgOiBGYWxzZVxyXG4gIDogbmV2ZXJcclxuXHJcbi8qKlxyXG4gKiByZXR1cm5zIFRydWUgaWYgVFMgdmVyc2lvbiBpcyBhYm92ZSAzLjUsIEZhbHNlIGlmIGJlbG93LlxyXG4gKiB1c2VzIGZlYXR1cmUgZGV0ZWN0aW9uIHRvIGRldGVjdCBUUyB2ZXJzaW9uID49IDMuNVxyXG4gKiAqIHZlcnNpb25zIGJlbG93IDMuNSB3aWxsIHJldHVybiBge31gIGZvciB1bnJlc29sdmFibGUgaW50ZXJmZXJlbmNlXHJcbiAqICogdmVyc2lvbnMgYWJvdmUgd2lsbCByZXR1cm4gYHVua25vd25gXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZXhwb3J0IHR5cGUgQXRMZWFzdFRTMzU8VHJ1ZSwgRmFsc2U+ID0gW1RydWUsIEZhbHNlXVtJc1Vua25vd248XHJcbiAgUmV0dXJuVHlwZTw8VD4oKSA9PiBUPixcclxuICAwLFxyXG4gIDFcclxuPl1cclxuXHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmV4cG9ydCB0eXBlIElzVW5rbm93bk9yTm9uSW5mZXJyYWJsZTxULCBUcnVlLCBGYWxzZT4gPSBBdExlYXN0VFMzNTxcclxuICBJc1Vua25vd248VCwgVHJ1ZSwgRmFsc2U+LFxyXG4gIElzRW1wdHlPYmo8VCwgVHJ1ZSwgSXNVbmtub3duPFQsIFRydWUsIEZhbHNlPj5cclxuPlxyXG5cclxuLyoqXHJcbiAqIENvbnZlcnQgYSBVbmlvbiB0eXBlIGAoQXxCKWAgdG8gYW4gaW50ZXJzZWN0aW9uIHR5cGUgYChBJkIpYFxyXG4gKi9cclxuZXhwb3J0IHR5cGUgVW5pb25Ub0ludGVyc2VjdGlvbjxVPiA9IChcclxuICBVIGV4dGVuZHMgYW55ID8gKGs6IFUpID0+IHZvaWQgOiBuZXZlclxyXG4pIGV4dGVuZHMgKGs6IGluZmVyIEkpID0+IHZvaWRcclxuICA/IElcclxuICA6IG5ldmVyXHJcblxyXG4vLyBBcHBlYXJzIHRvIGhhdmUgYSBjb252ZW5pZW50IHNpZGUgZWZmZWN0IG9mIGlnbm9yaW5nIGBuZXZlcmAgZXZlbiBpZiB0aGF0J3Mgbm90IHdoYXQgeW91IHNwZWNpZmllZFxyXG5leHBvcnQgdHlwZSBFeGNsdWRlRnJvbVR1cGxlPFQsIEUsIEFjYyBleHRlbmRzIHVua25vd25bXSA9IFtdPiA9IFQgZXh0ZW5kcyBbXHJcbiAgaW5mZXIgSGVhZCxcclxuICAuLi5pbmZlciBUYWlsXHJcbl1cclxuICA/IEV4Y2x1ZGVGcm9tVHVwbGU8VGFpbCwgRSwgWy4uLkFjYywgLi4uKFtIZWFkXSBleHRlbmRzIFtFXSA/IFtdIDogW0hlYWRdKV0+XHJcbiAgOiBBY2NcclxuXHJcbnR5cGUgRXh0cmFjdERpc3BhdGNoRnJvbU1pZGRsZXdhcmVUdXBsZTxcclxuICBNaWRkbGV3YXJlVHVwbGUgZXh0ZW5kcyBhbnlbXSxcclxuICBBY2MgZXh0ZW5kcyB7fVxyXG4+ID0gTWlkZGxld2FyZVR1cGxlIGV4dGVuZHMgW2luZmVyIEhlYWQsIC4uLmluZmVyIFRhaWxdXHJcbiAgPyBFeHRyYWN0RGlzcGF0Y2hGcm9tTWlkZGxld2FyZVR1cGxlPFxyXG4gICAgICBUYWlsLFxyXG4gICAgICBBY2MgJiAoSGVhZCBleHRlbmRzIE1pZGRsZXdhcmU8aW5mZXIgRD4gPyBJc0FueTxELCB7fSwgRD4gOiB7fSlcclxuICAgID5cclxuICA6IEFjY1xyXG5cclxuZXhwb3J0IHR5cGUgRXh0cmFjdERpc3BhdGNoRXh0ZW5zaW9uczxNPiA9IE0gZXh0ZW5kcyBNaWRkbGV3YXJlQXJyYXk8XHJcbiAgaW5mZXIgTWlkZGxld2FyZVR1cGxlXHJcbj5cclxuICA/IEV4dHJhY3REaXNwYXRjaEZyb21NaWRkbGV3YXJlVHVwbGU8TWlkZGxld2FyZVR1cGxlLCB7fT5cclxuICA6IE0gZXh0ZW5kcyBSZWFkb25seUFycmF5PE1pZGRsZXdhcmU+XHJcbiAgPyBFeHRyYWN0RGlzcGF0Y2hGcm9tTWlkZGxld2FyZVR1cGxlPFsuLi5NXSwge30+XHJcbiAgOiBuZXZlclxyXG5cclxuZXhwb3J0IHR5cGUgRXh0cmFjdFN0b3JlRXh0ZW5zaW9uczxFPiA9IEUgZXh0ZW5kcyBhbnlbXVxyXG4gID8gVW5pb25Ub0ludGVyc2VjdGlvbjxFW251bWJlcl0gZXh0ZW5kcyBTdG9yZUVuaGFuY2VyPGluZmVyIEV4dD4gPyBFeHQgZXh0ZW5kcyB7fSA/IEV4dCA6IHt9IDoge30+XHJcbiAgOiB7fVxyXG5cclxuLyoqXHJcbiAqIEhlbHBlciB0eXBlLiBQYXNzZXMgVCBvdXQgYWdhaW4sIGJ1dCBib3hlcyBpdCBpbiBhIHdheSB0aGF0IGl0IGNhbm5vdFxyXG4gKiBcIndpZGVuXCIgdGhlIHR5cGUgYnkgYWNjaWRlbnQgaWYgaXQgaXMgYSBnZW5lcmljIHRoYXQgc2hvdWxkIGJlIGluZmVycmVkXHJcbiAqIGZyb20gZWxzZXdoZXJlLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmV4cG9ydCB0eXBlIE5vSW5mZXI8VD4gPSBbVF1bVCBleHRlbmRzIGFueSA/IDAgOiBuZXZlcl1cclxuXHJcbmV4cG9ydCB0eXBlIE9taXQ8VCwgSyBleHRlbmRzIGtleW9mIGFueT4gPSBQaWNrPFQsIEV4Y2x1ZGU8a2V5b2YgVCwgSz4+XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVHdWFyZDxUPiB7XHJcbiAgKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBUXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSGFzTWF0Y2hGdW5jdGlvbjxUPiB7XHJcbiAgbWF0Y2g6IFR5cGVHdWFyZDxUPlxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaGFzTWF0Y2hGdW5jdGlvbiA9IDxUPihcclxuICB2OiBNYXRjaGVyPFQ+XHJcbik6IHYgaXMgSGFzTWF0Y2hGdW5jdGlvbjxUPiA9PiB7XHJcbiAgcmV0dXJuIHYgJiYgdHlwZW9mICh2IGFzIEhhc01hdGNoRnVuY3Rpb248VD4pLm1hdGNoID09PSAnZnVuY3Rpb24nXHJcbn1cclxuXHJcbi8qKiBAcHVibGljICovXHJcbmV4cG9ydCB0eXBlIE1hdGNoZXI8VD4gPSBIYXNNYXRjaEZ1bmN0aW9uPFQ+IHwgVHlwZUd1YXJkPFQ+XHJcblxyXG4vKiogQHB1YmxpYyAqL1xyXG5leHBvcnQgdHlwZSBBY3Rpb25Gcm9tTWF0Y2hlcjxNIGV4dGVuZHMgTWF0Y2hlcjxhbnk+PiA9IE0gZXh0ZW5kcyBNYXRjaGVyPFxyXG4gIGluZmVyIFRcclxuPlxyXG4gID8gVFxyXG4gIDogbmV2ZXJcclxuXHJcbmV4cG9ydCB0eXBlIElkPFQ+ID0geyBbSyBpbiBrZXlvZiBUXTogVFtLXSB9ICYge31cclxuIiwiaW1wb3J0IHR5cGUge1xyXG4gIEFjdGlvbkZyb21NYXRjaGVyLFxyXG4gIE1hdGNoZXIsXHJcbiAgVW5pb25Ub0ludGVyc2VjdGlvbixcclxufSBmcm9tICcuL3RzSGVscGVycydcclxuaW1wb3J0IHsgaGFzTWF0Y2hGdW5jdGlvbiB9IGZyb20gJy4vdHNIZWxwZXJzJ1xyXG5pbXBvcnQgdHlwZSB7XHJcbiAgQXN5bmNUaHVuayxcclxuICBBc3luY1RodW5rRnVsZmlsbGVkQWN0aW9uQ3JlYXRvcixcclxuICBBc3luY1RodW5rUGVuZGluZ0FjdGlvbkNyZWF0b3IsXHJcbiAgQXN5bmNUaHVua1JlamVjdGVkQWN0aW9uQ3JlYXRvcixcclxufSBmcm9tICcuL2NyZWF0ZUFzeW5jVGh1bmsnXHJcblxyXG4vKiogQHB1YmxpYyAqL1xyXG5leHBvcnQgdHlwZSBBY3Rpb25NYXRjaGluZ0FueU9mPE1hdGNoZXJzIGV4dGVuZHMgWy4uLk1hdGNoZXI8YW55PltdXT4gPVxyXG4gIEFjdGlvbkZyb21NYXRjaGVyPE1hdGNoZXJzW251bWJlcl0+XHJcblxyXG4vKiogQHB1YmxpYyAqL1xyXG5leHBvcnQgdHlwZSBBY3Rpb25NYXRjaGluZ0FsbE9mPE1hdGNoZXJzIGV4dGVuZHMgWy4uLk1hdGNoZXI8YW55PltdXT4gPVxyXG4gIFVuaW9uVG9JbnRlcnNlY3Rpb248QWN0aW9uTWF0Y2hpbmdBbnlPZjxNYXRjaGVycz4+XHJcblxyXG5jb25zdCBtYXRjaGVzID0gKG1hdGNoZXI6IE1hdGNoZXI8YW55PiwgYWN0aW9uOiBhbnkpID0+IHtcclxuICBpZiAoaGFzTWF0Y2hGdW5jdGlvbihtYXRjaGVyKSkge1xyXG4gICAgcmV0dXJuIG1hdGNoZXIubWF0Y2goYWN0aW9uKVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gbWF0Y2hlcihhY3Rpb24pXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQSBoaWdoZXItb3JkZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBtYXkgYmUgdXNlZCB0byBjaGVja1xyXG4gKiB3aGV0aGVyIGFuIGFjdGlvbiBtYXRjaGVzIGFueSBvbmUgb2YgdGhlIHN1cHBsaWVkIHR5cGUgZ3VhcmRzIG9yIGFjdGlvblxyXG4gKiBjcmVhdG9ycy5cclxuICpcclxuICogQHBhcmFtIG1hdGNoZXJzIFRoZSB0eXBlIGd1YXJkcyBvciBhY3Rpb24gY3JlYXRvcnMgdG8gbWF0Y2ggYWdhaW5zdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQW55T2Y8TWF0Y2hlcnMgZXh0ZW5kcyBbLi4uTWF0Y2hlcjxhbnk+W11dPihcclxuICAuLi5tYXRjaGVyczogTWF0Y2hlcnNcclxuKSB7XHJcbiAgcmV0dXJuIChhY3Rpb246IGFueSk6IGFjdGlvbiBpcyBBY3Rpb25NYXRjaGluZ0FueU9mPE1hdGNoZXJzPiA9PiB7XHJcbiAgICByZXR1cm4gbWF0Y2hlcnMuc29tZSgobWF0Y2hlcikgPT4gbWF0Y2hlcyhtYXRjaGVyLCBhY3Rpb24pKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEEgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgbWF5IGJlIHVzZWQgdG8gY2hlY2tcclxuICogd2hldGhlciBhbiBhY3Rpb24gbWF0Y2hlcyBhbGwgb2YgdGhlIHN1cHBsaWVkIHR5cGUgZ3VhcmRzIG9yIGFjdGlvblxyXG4gKiBjcmVhdG9ycy5cclxuICpcclxuICogQHBhcmFtIG1hdGNoZXJzIFRoZSB0eXBlIGd1YXJkcyBvciBhY3Rpb24gY3JlYXRvcnMgdG8gbWF0Y2ggYWdhaW5zdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQWxsT2Y8TWF0Y2hlcnMgZXh0ZW5kcyBbLi4uTWF0Y2hlcjxhbnk+W11dPihcclxuICAuLi5tYXRjaGVyczogTWF0Y2hlcnNcclxuKSB7XHJcbiAgcmV0dXJuIChhY3Rpb246IGFueSk6IGFjdGlvbiBpcyBBY3Rpb25NYXRjaGluZ0FsbE9mPE1hdGNoZXJzPiA9PiB7XHJcbiAgICByZXR1cm4gbWF0Y2hlcnMuZXZlcnkoKG1hdGNoZXIpID0+IG1hdGNoZXMobWF0Y2hlciwgYWN0aW9uKSlcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0gYWN0aW9uIEEgcmVkdXggYWN0aW9uXHJcbiAqIEBwYXJhbSB2YWxpZFN0YXR1cyBBbiBhcnJheSBvZiB2YWxpZCBtZXRhLnJlcXVlc3RTdGF0dXMgdmFsdWVzXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKFxyXG4gIGFjdGlvbjogYW55LFxyXG4gIHZhbGlkU3RhdHVzOiByZWFkb25seSBzdHJpbmdbXVxyXG4pIHtcclxuICBpZiAoIWFjdGlvbiB8fCAhYWN0aW9uLm1ldGEpIHJldHVybiBmYWxzZVxyXG5cclxuICBjb25zdCBoYXNWYWxpZFJlcXVlc3RJZCA9IHR5cGVvZiBhY3Rpb24ubWV0YS5yZXF1ZXN0SWQgPT09ICdzdHJpbmcnXHJcbiAgY29uc3QgaGFzVmFsaWRSZXF1ZXN0U3RhdHVzID1cclxuICAgIHZhbGlkU3RhdHVzLmluZGV4T2YoYWN0aW9uLm1ldGEucmVxdWVzdFN0YXR1cykgPiAtMVxyXG5cclxuICByZXR1cm4gaGFzVmFsaWRSZXF1ZXN0SWQgJiYgaGFzVmFsaWRSZXF1ZXN0U3RhdHVzXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzQXN5bmNUaHVua0FycmF5KGE6IFthbnldIHwgQW55QXN5bmNUaHVua1tdKTogYSBpcyBBbnlBc3luY1RodW5rW10ge1xyXG4gIHJldHVybiAoXHJcbiAgICB0eXBlb2YgYVswXSA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgJ3BlbmRpbmcnIGluIGFbMF0gJiZcclxuICAgICdmdWxmaWxsZWQnIGluIGFbMF0gJiZcclxuICAgICdyZWplY3RlZCcgaW4gYVswXVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVW5rbm93bkFzeW5jVGh1bmtQZW5kaW5nQWN0aW9uID0gUmV0dXJuVHlwZTxcclxuICBBc3luY1RodW5rUGVuZGluZ0FjdGlvbkNyZWF0b3I8dW5rbm93bj5cclxuPlxyXG5cclxuZXhwb3J0IHR5cGUgUGVuZGluZ0FjdGlvbkZyb21Bc3luY1RodW5rPFQgZXh0ZW5kcyBBbnlBc3luY1RodW5rPiA9XHJcbiAgQWN0aW9uRnJvbU1hdGNoZXI8VFsncGVuZGluZyddPlxyXG5cclxuLyoqXHJcbiAqIEEgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgbWF5IGJlIHVzZWQgdG8gY2hlY2tcclxuICogd2hldGhlciBhbiBhY3Rpb24gd2FzIGNyZWF0ZWQgYnkgYW4gYXN5bmMgdGh1bmsgYWN0aW9uIGNyZWF0b3IsIGFuZCB0aGF0XHJcbiAqIHRoZSBhY3Rpb24gaXMgcGVuZGluZy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUGVuZGluZygpOiAoXHJcbiAgYWN0aW9uOiBhbnlcclxuKSA9PiBhY3Rpb24gaXMgVW5rbm93bkFzeW5jVGh1bmtQZW5kaW5nQWN0aW9uXHJcbi8qKlxyXG4gKiBBIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IG1heSBiZSB1c2VkIHRvIGNoZWNrXHJcbiAqIHdoZXRoZXIgYW4gYWN0aW9uIGJlbG9uZ3MgdG8gb25lIG9mIHRoZSBwcm92aWRlZCBhc3luYyB0aHVuayBhY3Rpb24gY3JlYXRvcnMsXHJcbiAqIGFuZCB0aGF0IHRoZSBhY3Rpb24gaXMgcGVuZGluZy5cclxuICpcclxuICogQHBhcmFtIGFzeW5jVGh1bmtzIChvcHRpb25hbCkgVGhlIGFzeW5jIHRodW5rIGFjdGlvbiBjcmVhdG9ycyB0byBtYXRjaCBhZ2FpbnN0LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNQZW5kaW5nPFxyXG4gIEFzeW5jVGh1bmtzIGV4dGVuZHMgW0FueUFzeW5jVGh1bmssIC4uLkFueUFzeW5jVGh1bmtbXV1cclxuPihcclxuICAuLi5hc3luY1RodW5rczogQXN5bmNUaHVua3NcclxuKTogKGFjdGlvbjogYW55KSA9PiBhY3Rpb24gaXMgUGVuZGluZ0FjdGlvbkZyb21Bc3luY1RodW5rPEFzeW5jVGh1bmtzW251bWJlcl0+XHJcbi8qKlxyXG4gKiBUZXN0cyBpZiBgYWN0aW9uYCBpcyBhIHBlbmRpbmcgdGh1bmsgYWN0aW9uXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BlbmRpbmcoYWN0aW9uOiBhbnkpOiBhY3Rpb24gaXMgVW5rbm93bkFzeW5jVGh1bmtQZW5kaW5nQWN0aW9uXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BlbmRpbmc8XHJcbiAgQXN5bmNUaHVua3MgZXh0ZW5kcyBbQW55QXN5bmNUaHVuaywgLi4uQW55QXN5bmNUaHVua1tdXVxyXG4+KC4uLmFzeW5jVGh1bmtzOiBBc3luY1RodW5rcyB8IFthbnldKSB7XHJcbiAgaWYgKGFzeW5jVGh1bmtzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIChhY3Rpb246IGFueSkgPT4gaGFzRXhwZWN0ZWRSZXF1ZXN0TWV0YWRhdGEoYWN0aW9uLCBbJ3BlbmRpbmcnXSlcclxuICB9XHJcblxyXG4gIGlmICghaXNBc3luY1RodW5rQXJyYXkoYXN5bmNUaHVua3MpKSB7XHJcbiAgICByZXR1cm4gaXNQZW5kaW5nKCkoYXN5bmNUaHVua3NbMF0pXHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgYWN0aW9uOiBhbnlcclxuICApOiBhY3Rpb24gaXMgUGVuZGluZ0FjdGlvbkZyb21Bc3luY1RodW5rPEFzeW5jVGh1bmtzW251bWJlcl0+ID0+IHtcclxuICAgIC8vIG5vdGU6IHRoaXMgdHlwZSB3aWxsIGJlIGNvcnJlY3QgYmVjYXVzZSB3ZSBoYXZlIGF0IGxlYXN0IDEgYXN5bmNUaHVua1xyXG4gICAgY29uc3QgbWF0Y2hlcnM6IFtNYXRjaGVyPGFueT4sIC4uLk1hdGNoZXI8YW55PltdXSA9IGFzeW5jVGh1bmtzLm1hcChcclxuICAgICAgKGFzeW5jVGh1bmspID0+IGFzeW5jVGh1bmsucGVuZGluZ1xyXG4gICAgKSBhcyBhbnlcclxuXHJcbiAgICBjb25zdCBjb21iaW5lZE1hdGNoZXIgPSBpc0FueU9mKC4uLm1hdGNoZXJzKVxyXG5cclxuICAgIHJldHVybiBjb21iaW5lZE1hdGNoZXIoYWN0aW9uKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVW5rbm93bkFzeW5jVGh1bmtSZWplY3RlZEFjdGlvbiA9IFJldHVyblR5cGU8XHJcbiAgQXN5bmNUaHVua1JlamVjdGVkQWN0aW9uQ3JlYXRvcjx1bmtub3duLCB1bmtub3duPlxyXG4+XHJcblxyXG5leHBvcnQgdHlwZSBSZWplY3RlZEFjdGlvbkZyb21Bc3luY1RodW5rPFQgZXh0ZW5kcyBBbnlBc3luY1RodW5rPiA9XHJcbiAgQWN0aW9uRnJvbU1hdGNoZXI8VFsncmVqZWN0ZWQnXT5cclxuXHJcbi8qKlxyXG4gKiBBIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IG1heSBiZSB1c2VkIHRvIGNoZWNrXHJcbiAqIHdoZXRoZXIgYW4gYWN0aW9uIHdhcyBjcmVhdGVkIGJ5IGFuIGFzeW5jIHRodW5rIGFjdGlvbiBjcmVhdG9yLCBhbmQgdGhhdFxyXG4gKiB0aGUgYWN0aW9uIGlzIHJlamVjdGVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNSZWplY3RlZCgpOiAoXHJcbiAgYWN0aW9uOiBhbnlcclxuKSA9PiBhY3Rpb24gaXMgVW5rbm93bkFzeW5jVGh1bmtSZWplY3RlZEFjdGlvblxyXG4vKipcclxuICogQSBoaWdoZXItb3JkZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBtYXkgYmUgdXNlZCB0byBjaGVja1xyXG4gKiB3aGV0aGVyIGFuIGFjdGlvbiBiZWxvbmdzIHRvIG9uZSBvZiB0aGUgcHJvdmlkZWQgYXN5bmMgdGh1bmsgYWN0aW9uIGNyZWF0b3JzLFxyXG4gKiBhbmQgdGhhdCB0aGUgYWN0aW9uIGlzIHJlamVjdGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXN5bmNUaHVua3MgKG9wdGlvbmFsKSBUaGUgYXN5bmMgdGh1bmsgYWN0aW9uIGNyZWF0b3JzIHRvIG1hdGNoIGFnYWluc3QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1JlamVjdGVkPFxyXG4gIEFzeW5jVGh1bmtzIGV4dGVuZHMgW0FueUFzeW5jVGh1bmssIC4uLkFueUFzeW5jVGh1bmtbXV1cclxuPihcclxuICAuLi5hc3luY1RodW5rczogQXN5bmNUaHVua3NcclxuKTogKGFjdGlvbjogYW55KSA9PiBhY3Rpb24gaXMgUmVqZWN0ZWRBY3Rpb25Gcm9tQXN5bmNUaHVuazxBc3luY1RodW5rc1tudW1iZXJdPlxyXG4vKipcclxuICogVGVzdHMgaWYgYGFjdGlvbmAgaXMgYSByZWplY3RlZCB0aHVuayBhY3Rpb25cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVqZWN0ZWQoXHJcbiAgYWN0aW9uOiBhbnlcclxuKTogYWN0aW9uIGlzIFVua25vd25Bc3luY1RodW5rUmVqZWN0ZWRBY3Rpb25cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVqZWN0ZWQ8XHJcbiAgQXN5bmNUaHVua3MgZXh0ZW5kcyBbQW55QXN5bmNUaHVuaywgLi4uQW55QXN5bmNUaHVua1tdXVxyXG4+KC4uLmFzeW5jVGh1bmtzOiBBc3luY1RodW5rcyB8IFthbnldKSB7XHJcbiAgaWYgKGFzeW5jVGh1bmtzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIChhY3Rpb246IGFueSkgPT4gaGFzRXhwZWN0ZWRSZXF1ZXN0TWV0YWRhdGEoYWN0aW9uLCBbJ3JlamVjdGVkJ10pXHJcbiAgfVxyXG5cclxuICBpZiAoIWlzQXN5bmNUaHVua0FycmF5KGFzeW5jVGh1bmtzKSkge1xyXG4gICAgcmV0dXJuIGlzUmVqZWN0ZWQoKShhc3luY1RodW5rc1swXSlcclxuICB9XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICBhY3Rpb246IGFueVxyXG4gICk6IGFjdGlvbiBpcyBSZWplY3RlZEFjdGlvbkZyb21Bc3luY1RodW5rPEFzeW5jVGh1bmtzW251bWJlcl0+ID0+IHtcclxuICAgIC8vIG5vdGU6IHRoaXMgdHlwZSB3aWxsIGJlIGNvcnJlY3QgYmVjYXVzZSB3ZSBoYXZlIGF0IGxlYXN0IDEgYXN5bmNUaHVua1xyXG4gICAgY29uc3QgbWF0Y2hlcnM6IFtNYXRjaGVyPGFueT4sIC4uLk1hdGNoZXI8YW55PltdXSA9IGFzeW5jVGh1bmtzLm1hcChcclxuICAgICAgKGFzeW5jVGh1bmspID0+IGFzeW5jVGh1bmsucmVqZWN0ZWRcclxuICAgICkgYXMgYW55XHJcblxyXG4gICAgY29uc3QgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZiguLi5tYXRjaGVycylcclxuXHJcbiAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbilcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFVua25vd25Bc3luY1RodW5rUmVqZWN0ZWRXaXRoVmFsdWVBY3Rpb24gPSBSZXR1cm5UeXBlPFxyXG4gIEFzeW5jVGh1bmtSZWplY3RlZEFjdGlvbkNyZWF0b3I8dW5rbm93biwgdW5rbm93bj5cclxuPlxyXG5cclxuZXhwb3J0IHR5cGUgUmVqZWN0ZWRXaXRoVmFsdWVBY3Rpb25Gcm9tQXN5bmNUaHVuazxUIGV4dGVuZHMgQW55QXN5bmNUaHVuaz4gPVxyXG4gIEFjdGlvbkZyb21NYXRjaGVyPFRbJ3JlamVjdGVkJ10+ICZcclxuICAgIChUIGV4dGVuZHMgQXN5bmNUaHVuazxhbnksIGFueSwgeyByZWplY3RWYWx1ZTogaW5mZXIgUmVqZWN0ZWRWYWx1ZSB9PlxyXG4gICAgICA/IHsgcGF5bG9hZDogUmVqZWN0ZWRWYWx1ZSB9XHJcbiAgICAgIDogdW5rbm93bilcclxuXHJcbi8qKlxyXG4gKiBBIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IG1heSBiZSB1c2VkIHRvIGNoZWNrXHJcbiAqIHdoZXRoZXIgYW4gYWN0aW9uIHdhcyBjcmVhdGVkIGJ5IGFuIGFzeW5jIHRodW5rIGFjdGlvbiBjcmVhdG9yLCBhbmQgdGhhdFxyXG4gKiB0aGUgYWN0aW9uIGlzIHJlamVjdGVkIHdpdGggdmFsdWUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1JlamVjdGVkV2l0aFZhbHVlKCk6IChcclxuICBhY3Rpb246IGFueVxyXG4pID0+IGFjdGlvbiBpcyBVbmtub3duQXN5bmNUaHVua1JlamVjdGVkQWN0aW9uXHJcbi8qKlxyXG4gKiBBIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IG1heSBiZSB1c2VkIHRvIGNoZWNrXHJcbiAqIHdoZXRoZXIgYW4gYWN0aW9uIGJlbG9uZ3MgdG8gb25lIG9mIHRoZSBwcm92aWRlZCBhc3luYyB0aHVuayBhY3Rpb24gY3JlYXRvcnMsXHJcbiAqIGFuZCB0aGF0IHRoZSBhY3Rpb24gaXMgcmVqZWN0ZWQgd2l0aCB2YWx1ZS5cclxuICpcclxuICogQHBhcmFtIGFzeW5jVGh1bmtzIChvcHRpb25hbCkgVGhlIGFzeW5jIHRodW5rIGFjdGlvbiBjcmVhdG9ycyB0byBtYXRjaCBhZ2FpbnN0LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNSZWplY3RlZFdpdGhWYWx1ZTxcclxuICBBc3luY1RodW5rcyBleHRlbmRzIFtBbnlBc3luY1RodW5rLCAuLi5BbnlBc3luY1RodW5rW11dXHJcbj4oXHJcbiAgLi4uYXN5bmNUaHVua3M6IEFzeW5jVGh1bmtzXHJcbik6IChcclxuICBhY3Rpb246IGFueVxyXG4pID0+IGFjdGlvbiBpcyBSZWplY3RlZFdpdGhWYWx1ZUFjdGlvbkZyb21Bc3luY1RodW5rPEFzeW5jVGh1bmtzW251bWJlcl0+XHJcbi8qKlxyXG4gKiBUZXN0cyBpZiBgYWN0aW9uYCBpcyBhIHJlamVjdGVkIHRodW5rIGFjdGlvbiB3aXRoIHZhbHVlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1JlamVjdGVkV2l0aFZhbHVlKFxyXG4gIGFjdGlvbjogYW55XHJcbik6IGFjdGlvbiBpcyBVbmtub3duQXN5bmNUaHVua1JlamVjdGVkQWN0aW9uXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1JlamVjdGVkV2l0aFZhbHVlPFxyXG4gIEFzeW5jVGh1bmtzIGV4dGVuZHMgW0FueUFzeW5jVGh1bmssIC4uLkFueUFzeW5jVGh1bmtbXV1cclxuPiguLi5hc3luY1RodW5rczogQXN5bmNUaHVua3MgfCBbYW55XSkge1xyXG4gIGNvbnN0IGhhc0ZsYWcgPSAoYWN0aW9uOiBhbnkpOiBhY3Rpb24gaXMgYW55ID0+IHtcclxuICAgIHJldHVybiBhY3Rpb24gJiYgYWN0aW9uLm1ldGEgJiYgYWN0aW9uLm1ldGEucmVqZWN0ZWRXaXRoVmFsdWVcclxuICB9XHJcblxyXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiAoYWN0aW9uOiBhbnkpID0+IHtcclxuICAgICAgY29uc3QgY29tYmluZWRNYXRjaGVyID0gaXNBbGxPZihpc1JlamVjdGVkKC4uLmFzeW5jVGh1bmtzKSwgaGFzRmxhZylcclxuXHJcbiAgICAgIHJldHVybiBjb21iaW5lZE1hdGNoZXIoYWN0aW9uKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCFpc0FzeW5jVGh1bmtBcnJheShhc3luY1RodW5rcykpIHtcclxuICAgIHJldHVybiBpc1JlamVjdGVkV2l0aFZhbHVlKCkoYXN5bmNUaHVua3NbMF0pXHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgYWN0aW9uOiBhbnlcclxuICApOiBhY3Rpb24gaXMgUmVqZWN0ZWRBY3Rpb25Gcm9tQXN5bmNUaHVuazxBc3luY1RodW5rc1tudW1iZXJdPiA9PiB7XHJcbiAgICBjb25zdCBjb21iaW5lZE1hdGNoZXIgPSBpc0FsbE9mKGlzUmVqZWN0ZWQoLi4uYXN5bmNUaHVua3MpLCBoYXNGbGFnKVxyXG5cclxuICAgIHJldHVybiBjb21iaW5lZE1hdGNoZXIoYWN0aW9uKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVW5rbm93bkFzeW5jVGh1bmtGdWxmaWxsZWRBY3Rpb24gPSBSZXR1cm5UeXBlPFxyXG4gIEFzeW5jVGh1bmtGdWxmaWxsZWRBY3Rpb25DcmVhdG9yPHVua25vd24sIHVua25vd24+XHJcbj5cclxuXHJcbmV4cG9ydCB0eXBlIEZ1bGZpbGxlZEFjdGlvbkZyb21Bc3luY1RodW5rPFQgZXh0ZW5kcyBBbnlBc3luY1RodW5rPiA9XHJcbiAgQWN0aW9uRnJvbU1hdGNoZXI8VFsnZnVsZmlsbGVkJ10+XHJcblxyXG4vKipcclxuICogQSBoaWdoZXItb3JkZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBtYXkgYmUgdXNlZCB0byBjaGVja1xyXG4gKiB3aGV0aGVyIGFuIGFjdGlvbiB3YXMgY3JlYXRlZCBieSBhbiBhc3luYyB0aHVuayBhY3Rpb24gY3JlYXRvciwgYW5kIHRoYXRcclxuICogdGhlIGFjdGlvbiBpcyBmdWxmaWxsZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bGZpbGxlZCgpOiAoXHJcbiAgYWN0aW9uOiBhbnlcclxuKSA9PiBhY3Rpb24gaXMgVW5rbm93bkFzeW5jVGh1bmtGdWxmaWxsZWRBY3Rpb25cclxuLyoqXHJcbiAqIEEgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgbWF5IGJlIHVzZWQgdG8gY2hlY2tcclxuICogd2hldGhlciBhbiBhY3Rpb24gYmVsb25ncyB0byBvbmUgb2YgdGhlIHByb3ZpZGVkIGFzeW5jIHRodW5rIGFjdGlvbiBjcmVhdG9ycyxcclxuICogYW5kIHRoYXQgdGhlIGFjdGlvbiBpcyBmdWxmaWxsZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhc3luY1RodW5rcyAob3B0aW9uYWwpIFRoZSBhc3luYyB0aHVuayBhY3Rpb24gY3JlYXRvcnMgdG8gbWF0Y2ggYWdhaW5zdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVsZmlsbGVkPFxyXG4gIEFzeW5jVGh1bmtzIGV4dGVuZHMgW0FueUFzeW5jVGh1bmssIC4uLkFueUFzeW5jVGh1bmtbXV1cclxuPihcclxuICAuLi5hc3luY1RodW5rczogQXN5bmNUaHVua3NcclxuKTogKGFjdGlvbjogYW55KSA9PiBhY3Rpb24gaXMgRnVsZmlsbGVkQWN0aW9uRnJvbUFzeW5jVGh1bms8QXN5bmNUaHVua3NbbnVtYmVyXT5cclxuLyoqXHJcbiAqIFRlc3RzIGlmIGBhY3Rpb25gIGlzIGEgZnVsZmlsbGVkIHRodW5rIGFjdGlvblxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNGdWxmaWxsZWQoXHJcbiAgYWN0aW9uOiBhbnlcclxuKTogYWN0aW9uIGlzIFVua25vd25Bc3luY1RodW5rRnVsZmlsbGVkQWN0aW9uXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bGZpbGxlZDxcclxuICBBc3luY1RodW5rcyBleHRlbmRzIFtBbnlBc3luY1RodW5rLCAuLi5BbnlBc3luY1RodW5rW11dXHJcbj4oLi4uYXN5bmNUaHVua3M6IEFzeW5jVGh1bmtzIHwgW2FueV0pIHtcclxuICBpZiAoYXN5bmNUaHVua3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXR1cm4gKGFjdGlvbjogYW55KSA9PiBoYXNFeHBlY3RlZFJlcXVlc3RNZXRhZGF0YShhY3Rpb24sIFsnZnVsZmlsbGVkJ10pXHJcbiAgfVxyXG5cclxuICBpZiAoIWlzQXN5bmNUaHVua0FycmF5KGFzeW5jVGh1bmtzKSkge1xyXG4gICAgcmV0dXJuIGlzRnVsZmlsbGVkKCkoYXN5bmNUaHVua3NbMF0pXHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgYWN0aW9uOiBhbnlcclxuICApOiBhY3Rpb24gaXMgRnVsZmlsbGVkQWN0aW9uRnJvbUFzeW5jVGh1bms8QXN5bmNUaHVua3NbbnVtYmVyXT4gPT4ge1xyXG4gICAgLy8gbm90ZTogdGhpcyB0eXBlIHdpbGwgYmUgY29ycmVjdCBiZWNhdXNlIHdlIGhhdmUgYXQgbGVhc3QgMSBhc3luY1RodW5rXHJcbiAgICBjb25zdCBtYXRjaGVyczogW01hdGNoZXI8YW55PiwgLi4uTWF0Y2hlcjxhbnk+W11dID0gYXN5bmNUaHVua3MubWFwKFxyXG4gICAgICAoYXN5bmNUaHVuaykgPT4gYXN5bmNUaHVuay5mdWxmaWxsZWRcclxuICAgICkgYXMgYW55XHJcblxyXG4gICAgY29uc3QgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZiguLi5tYXRjaGVycylcclxuXHJcbiAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbilcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFVua25vd25Bc3luY1RodW5rQWN0aW9uID1cclxuICB8IFVua25vd25Bc3luY1RodW5rUGVuZGluZ0FjdGlvblxyXG4gIHwgVW5rbm93bkFzeW5jVGh1bmtSZWplY3RlZEFjdGlvblxyXG4gIHwgVW5rbm93bkFzeW5jVGh1bmtGdWxmaWxsZWRBY3Rpb25cclxuXHJcbmV4cG9ydCB0eXBlIEFueUFzeW5jVGh1bmsgPSB7XHJcbiAgcGVuZGluZzogeyBtYXRjaDogKGFjdGlvbjogYW55KSA9PiBhY3Rpb24gaXMgYW55IH1cclxuICBmdWxmaWxsZWQ6IHsgbWF0Y2g6IChhY3Rpb246IGFueSkgPT4gYWN0aW9uIGlzIGFueSB9XHJcbiAgcmVqZWN0ZWQ6IHsgbWF0Y2g6IChhY3Rpb246IGFueSkgPT4gYWN0aW9uIGlzIGFueSB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEFjdGlvbnNGcm9tQXN5bmNUaHVuazxUIGV4dGVuZHMgQW55QXN5bmNUaHVuaz4gPVxyXG4gIHwgQWN0aW9uRnJvbU1hdGNoZXI8VFsncGVuZGluZyddPlxyXG4gIHwgQWN0aW9uRnJvbU1hdGNoZXI8VFsnZnVsZmlsbGVkJ10+XHJcbiAgfCBBY3Rpb25Gcm9tTWF0Y2hlcjxUWydyZWplY3RlZCddPlxyXG5cclxuLyoqXHJcbiAqIEEgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgbWF5IGJlIHVzZWQgdG8gY2hlY2tcclxuICogd2hldGhlciBhbiBhY3Rpb24gd2FzIGNyZWF0ZWQgYnkgYW4gYXN5bmMgdGh1bmsgYWN0aW9uIGNyZWF0b3IuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0FzeW5jVGh1bmtBY3Rpb24oKTogKFxyXG4gIGFjdGlvbjogYW55XHJcbikgPT4gYWN0aW9uIGlzIFVua25vd25Bc3luY1RodW5rQWN0aW9uXHJcbi8qKlxyXG4gKiBBIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IG1heSBiZSB1c2VkIHRvIGNoZWNrXHJcbiAqIHdoZXRoZXIgYW4gYWN0aW9uIGJlbG9uZ3MgdG8gb25lIG9mIHRoZSBwcm92aWRlZCBhc3luYyB0aHVuayBhY3Rpb24gY3JlYXRvcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSBhc3luY1RodW5rcyAob3B0aW9uYWwpIFRoZSBhc3luYyB0aHVuayBhY3Rpb24gY3JlYXRvcnMgdG8gbWF0Y2ggYWdhaW5zdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQXN5bmNUaHVua0FjdGlvbjxcclxuICBBc3luY1RodW5rcyBleHRlbmRzIFtBbnlBc3luY1RodW5rLCAuLi5BbnlBc3luY1RodW5rW11dXHJcbj4oXHJcbiAgLi4uYXN5bmNUaHVua3M6IEFzeW5jVGh1bmtzXHJcbik6IChhY3Rpb246IGFueSkgPT4gYWN0aW9uIGlzIEFjdGlvbnNGcm9tQXN5bmNUaHVuazxBc3luY1RodW5rc1tudW1iZXJdPlxyXG4vKipcclxuICogVGVzdHMgaWYgYGFjdGlvbmAgaXMgYSB0aHVuayBhY3Rpb25cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQXN5bmNUaHVua0FjdGlvbihcclxuICBhY3Rpb246IGFueVxyXG4pOiBhY3Rpb24gaXMgVW5rbm93bkFzeW5jVGh1bmtBY3Rpb25cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQXN5bmNUaHVua0FjdGlvbjxcclxuICBBc3luY1RodW5rcyBleHRlbmRzIFtBbnlBc3luY1RodW5rLCAuLi5BbnlBc3luY1RodW5rW11dXHJcbj4oLi4uYXN5bmNUaHVua3M6IEFzeW5jVGh1bmtzIHwgW2FueV0pIHtcclxuICBpZiAoYXN5bmNUaHVua3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXR1cm4gKGFjdGlvbjogYW55KSA9PlxyXG4gICAgICBoYXNFeHBlY3RlZFJlcXVlc3RNZXRhZGF0YShhY3Rpb24sIFsncGVuZGluZycsICdmdWxmaWxsZWQnLCAncmVqZWN0ZWQnXSlcclxuICB9XHJcblxyXG4gIGlmICghaXNBc3luY1RodW5rQXJyYXkoYXN5bmNUaHVua3MpKSB7XHJcbiAgICByZXR1cm4gaXNBc3luY1RodW5rQWN0aW9uKCkoYXN5bmNUaHVua3NbMF0pXHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgYWN0aW9uOiBhbnlcclxuICApOiBhY3Rpb24gaXMgQWN0aW9uc0Zyb21Bc3luY1RodW5rPEFzeW5jVGh1bmtzW251bWJlcl0+ID0+IHtcclxuICAgIC8vIG5vdGU6IHRoaXMgdHlwZSB3aWxsIGJlIGNvcnJlY3QgYmVjYXVzZSB3ZSBoYXZlIGF0IGxlYXN0IDEgYXN5bmNUaHVua1xyXG4gICAgY29uc3QgbWF0Y2hlcnM6IFtNYXRjaGVyPGFueT4sIC4uLk1hdGNoZXI8YW55PltdXSA9IFtdIGFzIGFueVxyXG5cclxuICAgIGZvciAoY29uc3QgYXN5bmNUaHVuayBvZiBhc3luY1RodW5rcykge1xyXG4gICAgICBtYXRjaGVycy5wdXNoKFxyXG4gICAgICAgIGFzeW5jVGh1bmsucGVuZGluZyxcclxuICAgICAgICBhc3luY1RodW5rLnJlamVjdGVkLFxyXG4gICAgICAgIGFzeW5jVGh1bmsuZnVsZmlsbGVkXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb21iaW5lZE1hdGNoZXIgPSBpc0FueU9mKC4uLm1hdGNoZXJzKVxyXG5cclxuICAgIHJldHVybiBjb21iaW5lZE1hdGNoZXIoYWN0aW9uKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IEFib3J0U2lnbmFsV2l0aFJlYXNvbiB9IGZyb20gJy4vdHlwZXMnXHJcblxyXG5leHBvcnQgY29uc3QgYXNzZXJ0RnVuY3Rpb246IChcclxuICBmdW5jOiB1bmtub3duLFxyXG4gIGV4cGVjdGVkOiBzdHJpbmdcclxuKSA9PiBhc3NlcnRzIGZ1bmMgaXMgKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gdW5rbm93biA9IChcclxuICBmdW5jOiB1bmtub3duLFxyXG4gIGV4cGVjdGVkOiBzdHJpbmdcclxuKSA9PiB7XHJcbiAgaWYgKHR5cGVvZiBmdW5jICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGAke2V4cGVjdGVkfSBpcyBub3QgYSBmdW5jdGlvbmApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgbm9vcCA9ICgpID0+IHt9XHJcblxyXG5leHBvcnQgY29uc3QgY2F0Y2hSZWplY3Rpb24gPSA8VD4oXHJcbiAgcHJvbWlzZTogUHJvbWlzZTxUPixcclxuICBvbkVycm9yID0gbm9vcFxyXG4pOiBQcm9taXNlPFQ+ID0+IHtcclxuICBwcm9taXNlLmNhdGNoKG9uRXJyb3IpXHJcblxyXG4gIHJldHVybiBwcm9taXNlXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBhZGRBYm9ydFNpZ25hbExpc3RlbmVyID0gKFxyXG4gIGFib3J0U2lnbmFsOiBBYm9ydFNpZ25hbCxcclxuICBjYWxsYmFjazogKGV2dDogRXZlbnQpID0+IHZvaWRcclxuKSA9PiB7XHJcbiAgYWJvcnRTaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pXHJcbiAgcmV0dXJuICgpID0+IGFib3J0U2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgY2FsbGJhY2spXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxscyBgYWJvcnRDb250cm9sbGVyLmFib3J0KHJlYXNvbilgIGFuZCBwYXRjaGVzIGBzaWduYWwucmVhc29uYC5cclxuICogaWYgaXQgaXMgbm90IHN1cHBvcnRlZC5cclxuICpcclxuICogQXQgdGhlIHRpbWUgb2Ygd3JpdGluZyBgc2lnbmFsLnJlYXNvbmAgaXMgYXZhaWxhYmxlIGluIEZGIGNocm9tZSwgZWRnZSBub2RlIDE3IGFuZCBkZW5vLlxyXG4gKiBAcGFyYW0gYWJvcnRDb250cm9sbGVyXHJcbiAqIEBwYXJhbSByZWFzb25cclxuICogQHJldHVybnNcclxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQWJvcnRTaWduYWwvcmVhc29uXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbiA9IDxUPihcclxuICBhYm9ydENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcclxuICByZWFzb246IFRcclxuKTogdm9pZCA9PiB7XHJcbiAgdHlwZSBDb25zdW1lcjxUPiA9ICh2YWw6IFQpID0+IHZvaWRcclxuXHJcbiAgY29uc3Qgc2lnbmFsID0gYWJvcnRDb250cm9sbGVyLnNpZ25hbCBhcyBBYm9ydFNpZ25hbFdpdGhSZWFzb248VD5cclxuXHJcbiAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XHJcbiAgICByZXR1cm5cclxuICB9XHJcblxyXG4gIC8vIFBhdGNoIGByZWFzb25gIGlmIG5lY2Vzc2FyeS5cclxuICAvLyAtIFdlIHVzZSBkZWZpbmVQcm9wZXJ0eSBoZXJlIGJlY2F1c2UgcmVhc29uIGlzIGEgZ2V0dGVyIG9mIGBBYm9ydFNpZ25hbC5fX3Byb3RvX19gLlxyXG4gIC8vIC0gV2UgbmVlZCB0byBwYXRjaCAncmVhc29uJyBiZWZvcmUgY2FsbGluZyBgLmFib3J0KClgIGJlY2F1c2UgbGlzdGVuZXJzIHRvIHRoZSAnYWJvcnQnXHJcbiAgLy8gZXZlbnQgYXJlIGFyZSBub3RpZmllZCBpbW1lZGlhdGVseS5cclxuICBpZiAoISgncmVhc29uJyBpbiBzaWduYWwpKSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2lnbmFsLCAncmVhc29uJywge1xyXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICB2YWx1ZTogcmVhc29uLFxyXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIDsoYWJvcnRDb250cm9sbGVyLmFib3J0IGFzIENvbnN1bWVyPHR5cGVvZiByZWFzb24+KShyZWFzb24pXHJcbn1cclxuIiwiaW1wb3J0IHR5cGUgeyBTZXJpYWxpemVkRXJyb3IgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0J1xyXG5cclxuY29uc3QgdGFzayA9ICd0YXNrJ1xyXG5jb25zdCBsaXN0ZW5lciA9ICdsaXN0ZW5lcidcclxuY29uc3QgY29tcGxldGVkID0gJ2NvbXBsZXRlZCdcclxuY29uc3QgY2FuY2VsbGVkID0gJ2NhbmNlbGxlZCdcclxuXHJcbi8qIFRhc2tBYm9ydEVycm9yIGVycm9yIGNvZGVzICAqL1xyXG5leHBvcnQgY29uc3QgdGFza0NhbmNlbGxlZCA9IGB0YXNrLSR7Y2FuY2VsbGVkfWAgYXMgY29uc3RcclxuZXhwb3J0IGNvbnN0IHRhc2tDb21wbGV0ZWQgPSBgdGFzay0ke2NvbXBsZXRlZH1gIGFzIGNvbnN0XHJcbmV4cG9ydCBjb25zdCBsaXN0ZW5lckNhbmNlbGxlZCA9IGAke2xpc3RlbmVyfS0ke2NhbmNlbGxlZH1gIGFzIGNvbnN0XHJcbmV4cG9ydCBjb25zdCBsaXN0ZW5lckNvbXBsZXRlZCA9IGAke2xpc3RlbmVyfS0ke2NvbXBsZXRlZH1gIGFzIGNvbnN0XHJcblxyXG5leHBvcnQgY2xhc3MgVGFza0Fib3J0RXJyb3IgaW1wbGVtZW50cyBTZXJpYWxpemVkRXJyb3Ige1xyXG4gIG5hbWUgPSAnVGFza0Fib3J0RXJyb3InXHJcbiAgbWVzc2FnZTogc3RyaW5nXHJcbiAgY29uc3RydWN0b3IocHVibGljIGNvZGU6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy5tZXNzYWdlID0gYCR7dGFza30gJHtjYW5jZWxsZWR9IChyZWFzb246ICR7Y29kZX0pYFxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBUYXNrQWJvcnRFcnJvciB9IGZyb20gJy4vZXhjZXB0aW9ucydcclxuaW1wb3J0IHR5cGUgeyBBYm9ydFNpZ25hbFdpdGhSZWFzb24sIFRhc2tSZXN1bHQgfSBmcm9tICcuL3R5cGVzJ1xyXG5pbXBvcnQgeyBhZGRBYm9ydFNpZ25hbExpc3RlbmVyLCBjYXRjaFJlamVjdGlvbiwgbm9vcCB9IGZyb20gJy4vdXRpbHMnXHJcblxyXG4vKipcclxuICogU3luY2hyb25vdXNseSByYWlzZXMge0BsaW5rIFRhc2tBYm9ydEVycm9yfSBpZiB0aGUgdGFzayB0aWVkIHRvIHRoZSBpbnB1dCBgc2lnbmFsYCBoYXMgYmVlbiBjYW5jZWxsZWQuXHJcbiAqIEBwYXJhbSBzaWduYWxcclxuICogQHBhcmFtIHJlYXNvblxyXG4gKiBAc2VlIHtUYXNrQWJvcnRFcnJvcn1cclxuICovXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUFjdGl2ZSA9IChzaWduYWw6IEFib3J0U2lnbmFsKTogdm9pZCA9PiB7XHJcbiAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XHJcbiAgICB0aHJvdyBuZXcgVGFza0Fib3J0RXJyb3IoKHNpZ25hbCBhcyBBYm9ydFNpZ25hbFdpdGhSZWFzb248c3RyaW5nPikucmVhc29uKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHJhY2UgYmV0d2VlbiB0aGUgcHJvbWlzZShzKSBhbmQgdGhlIEFib3J0U2lnbmFsXHJcbiAqIFRoaXMgYXZvaWRzIGBQcm9taXNlLnJhY2UoKWAtcmVsYXRlZCBtZW1vcnkgbGVha3M6XHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9pc3N1ZXMvMTc0NjkjaXNzdWVjb21tZW50LTM0OTc5NDkwOVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJhY2VXaXRoU2lnbmFsPFQ+KFxyXG4gIHNpZ25hbDogQWJvcnRTaWduYWxXaXRoUmVhc29uPHN0cmluZz4sXHJcbiAgcHJvbWlzZTogUHJvbWlzZTxUPlxyXG4pOiBQcm9taXNlPFQ+IHtcclxuICBsZXQgY2xlYW51cCA9IG5vb3BcclxuICByZXR1cm4gbmV3IFByb21pc2U8VD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3Qgbm90aWZ5UmVqZWN0aW9uID0gKCkgPT4gcmVqZWN0KG5ldyBUYXNrQWJvcnRFcnJvcihzaWduYWwucmVhc29uKSlcclxuXHJcbiAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcclxuICAgICAgbm90aWZ5UmVqZWN0aW9uKClcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY2xlYW51cCA9IGFkZEFib3J0U2lnbmFsTGlzdGVuZXIoc2lnbmFsLCBub3RpZnlSZWplY3Rpb24pXHJcbiAgICBwcm9taXNlLmZpbmFsbHkoKCkgPT4gY2xlYW51cCgpKS50aGVuKHJlc29sdmUsIHJlamVjdClcclxuICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgIC8vIGFmdGVyIHRoaXMgcG9pbnQsIHJlcGxhY2UgYGNsZWFudXBgIHdpdGggYSBub29wLCBzbyB0aGVyZSBpcyBubyByZWZlcmVuY2UgdG8gYHNpZ25hbGAgYW55IG1vcmVcclxuICAgIGNsZWFudXAgPSBub29wXHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIFJ1bnMgYSB0YXNrIGFuZCByZXR1cm5zIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB7QGxpbmsgVGFza1Jlc3VsdH0uXHJcbiAqIFNlY29uZCBhcmd1bWVudCBpcyBhbiBvcHRpb25hbCBgY2xlYW5VcGAgZnVuY3Rpb24gdGhhdCBhbHdheXMgcnVucyBhZnRlciB0YXNrLlxyXG4gKlxyXG4gKiAqKk5vdGU6KiogYHJ1blRhc2tgIHJ1bnMgdGhlIGV4ZWN1dG9yIGluIHRoZSBuZXh0IG1pY3JvdGFzay5cclxuICogQHJldHVybnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBydW5UYXNrID0gYXN5bmMgPFQ+KFxyXG4gIHRhc2s6ICgpID0+IFByb21pc2U8VD4sXHJcbiAgY2xlYW5VcD86ICgpID0+IHZvaWRcclxuKTogUHJvbWlzZTxUYXNrUmVzdWx0PFQ+PiA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHRhc2soKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3RhdHVzOiAnb2snLFxyXG4gICAgICB2YWx1ZSxcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdGF0dXM6IGVycm9yIGluc3RhbmNlb2YgVGFza0Fib3J0RXJyb3IgPyAnY2FuY2VsbGVkJyA6ICdyZWplY3RlZCcsXHJcbiAgICAgIGVycm9yLFxyXG4gICAgfVxyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjbGVhblVwPy4oKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdpdmVuIGFuIGlucHV0IGBBYm9ydFNpZ25hbGAgYW5kIGEgcHJvbWlzZSByZXR1cm5zIGFub3RoZXIgcHJvbWlzZSB0aGF0IHJlc29sdmVzXHJcbiAqIGFzIHNvb24gdGhlIGlucHV0IHByb21pc2UgaXMgcHJvdmlkZWQgb3IgcmVqZWN0cyBhcyBzb29uIGFzXHJcbiAqIGBBYm9ydFNpZ25hbC5hYm9ydGAgaXMgYHRydWVgLlxyXG4gKiBAcGFyYW0gc2lnbmFsXHJcbiAqIEByZXR1cm5zXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlUGF1c2UgPSA8VD4oc2lnbmFsOiBBYm9ydFNpZ25hbCkgPT4ge1xyXG4gIHJldHVybiAocHJvbWlzZTogUHJvbWlzZTxUPik6IFByb21pc2U8VD4gPT4ge1xyXG4gICAgcmV0dXJuIGNhdGNoUmVqZWN0aW9uKFxyXG4gICAgICByYWNlV2l0aFNpZ25hbChzaWduYWwsIHByb21pc2UpLnRoZW4oKG91dHB1dCkgPT4ge1xyXG4gICAgICAgIHZhbGlkYXRlQWN0aXZlKHNpZ25hbClcclxuICAgICAgICByZXR1cm4gb3V0cHV0XHJcbiAgICAgIH0pXHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2l2ZW4gYW4gaW5wdXQgYEFib3J0U2lnbmFsYCBhbmQgYHRpbWVvdXRNc2AgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlc1xyXG4gKiBhZnRlciBgdGltZW91dE1zYCBvciByZWplY3RzIGFzIHNvb24gYXMgYEFib3J0U2lnbmFsLmFib3J0YCBpcyBgdHJ1ZWAuXHJcbiAqIEBwYXJhbSBzaWduYWxcclxuICogQHJldHVybnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVEZWxheSA9IChzaWduYWw6IEFib3J0U2lnbmFsKSA9PiB7XHJcbiAgY29uc3QgcGF1c2UgPSBjcmVhdGVQYXVzZTx2b2lkPihzaWduYWwpXHJcbiAgcmV0dXJuICh0aW1lb3V0TXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gICAgcmV0dXJuIHBhdXNlKG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHRpbWVvdXRNcykpKVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IERpc3BhdGNoLCBBbnlBY3Rpb24sIE1pZGRsZXdhcmVBUEkgfSBmcm9tICdyZWR1eCdcclxuaW1wb3J0IHR5cGUgeyBUaHVua0Rpc3BhdGNoIH0gZnJvbSAncmVkdXgtdGh1bmsnXHJcbmltcG9ydCB7IGNyZWF0ZUFjdGlvbiB9IGZyb20gJy4uL2NyZWF0ZUFjdGlvbidcclxuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSAnLi4vbmFub2lkJ1xyXG5cclxuaW1wb3J0IHR5cGUge1xyXG4gIExpc3RlbmVyTWlkZGxld2FyZSxcclxuICBMaXN0ZW5lck1pZGRsZXdhcmVJbnN0YW5jZSxcclxuICBBZGRMaXN0ZW5lck92ZXJsb2FkcyxcclxuICBBbnlMaXN0ZW5lclByZWRpY2F0ZSxcclxuICBDcmVhdGVMaXN0ZW5lck1pZGRsZXdhcmVPcHRpb25zLFxyXG4gIFR5cGVkQWRkTGlzdGVuZXIsXHJcbiAgVHlwZWRDcmVhdGVMaXN0ZW5lckVudHJ5LFxyXG4gIEZhbGxiYWNrQWRkTGlzdGVuZXJPcHRpb25zLFxyXG4gIExpc3RlbmVyRW50cnksXHJcbiAgTGlzdGVuZXJFcnJvckhhbmRsZXIsXHJcbiAgVW5zdWJzY3JpYmVMaXN0ZW5lcixcclxuICBUYWtlUGF0dGVybixcclxuICBMaXN0ZW5lckVycm9ySW5mbyxcclxuICBGb3JrZWRUYXNrRXhlY3V0b3IsXHJcbiAgRm9ya2VkVGFzayxcclxuICBUeXBlZFJlbW92ZUxpc3RlbmVyLFxyXG4gIFRhc2tSZXN1bHQsXHJcbiAgQWJvcnRTaWduYWxXaXRoUmVhc29uLFxyXG4gIFVuc3Vic2NyaWJlTGlzdGVuZXJPcHRpb25zLFxyXG59IGZyb20gJy4vdHlwZXMnXHJcbmltcG9ydCB7XHJcbiAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbixcclxuICBhZGRBYm9ydFNpZ25hbExpc3RlbmVyLFxyXG4gIGFzc2VydEZ1bmN0aW9uLFxyXG4gIGNhdGNoUmVqZWN0aW9uLFxyXG59IGZyb20gJy4vdXRpbHMnXHJcbmltcG9ydCB7XHJcbiAgbGlzdGVuZXJDYW5jZWxsZWQsXHJcbiAgbGlzdGVuZXJDb21wbGV0ZWQsXHJcbiAgVGFza0Fib3J0RXJyb3IsXHJcbiAgdGFza0NhbmNlbGxlZCxcclxuICB0YXNrQ29tcGxldGVkLFxyXG59IGZyb20gJy4vZXhjZXB0aW9ucydcclxuaW1wb3J0IHtcclxuICBydW5UYXNrLFxyXG4gIHZhbGlkYXRlQWN0aXZlLFxyXG4gIGNyZWF0ZVBhdXNlLFxyXG4gIGNyZWF0ZURlbGF5LFxyXG4gIHJhY2VXaXRoU2lnbmFsLFxyXG59IGZyb20gJy4vdGFzaydcclxuZXhwb3J0IHsgVGFza0Fib3J0RXJyb3IgfSBmcm9tICcuL2V4Y2VwdGlvbnMnXHJcbmV4cG9ydCB0eXBlIHtcclxuICBMaXN0ZW5lckVmZmVjdCxcclxuICBMaXN0ZW5lck1pZGRsZXdhcmUsXHJcbiAgTGlzdGVuZXJFZmZlY3RBUEksXHJcbiAgTGlzdGVuZXJNaWRkbGV3YXJlSW5zdGFuY2UsXHJcbiAgQ3JlYXRlTGlzdGVuZXJNaWRkbGV3YXJlT3B0aW9ucyxcclxuICBMaXN0ZW5lckVycm9ySGFuZGxlcixcclxuICBUeXBlZFN0YXJ0TGlzdGVuaW5nLFxyXG4gIFR5cGVkQWRkTGlzdGVuZXIsXHJcbiAgVHlwZWRTdG9wTGlzdGVuaW5nLFxyXG4gIFR5cGVkUmVtb3ZlTGlzdGVuZXIsXHJcbiAgVW5zdWJzY3JpYmVMaXN0ZW5lcixcclxuICBVbnN1YnNjcmliZUxpc3RlbmVyT3B0aW9ucyxcclxuICBGb3JrZWRUYXNrRXhlY3V0b3IsXHJcbiAgRm9ya2VkVGFzayxcclxuICBGb3JrZWRUYXNrQVBJLFxyXG4gIEFzeW5jVGFza0V4ZWN1dG9yLFxyXG4gIFN5bmNUYXNrRXhlY3V0b3IsXHJcbiAgVGFza0NhbmNlbGxlZCxcclxuICBUYXNrUmVqZWN0ZWQsXHJcbiAgVGFza1Jlc29sdmVkLFxyXG4gIFRhc2tSZXN1bHQsXHJcbn0gZnJvbSAnLi90eXBlcydcclxuXHJcbi8vT3Zlcmx5LWFnZ3Jlc3NpdmUgYnl0ZS1zaGF2aW5nXHJcbmNvbnN0IHsgYXNzaWduIH0gPSBPYmplY3RcclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgSU5URVJOQUxfTklMX1RPS0VOID0ge30gYXMgY29uc3RcclxuXHJcbmNvbnN0IGFsbSA9ICdsaXN0ZW5lck1pZGRsZXdhcmUnIGFzIGNvbnN0XHJcblxyXG5jb25zdCBjcmVhdGVGb3JrID0gKHBhcmVudEFib3J0U2lnbmFsOiBBYm9ydFNpZ25hbFdpdGhSZWFzb248dW5rbm93bj4pID0+IHtcclxuICBjb25zdCBsaW5rQ29udHJvbGxlcnMgPSAoY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyKSA9PlxyXG4gICAgYWRkQWJvcnRTaWduYWxMaXN0ZW5lcihwYXJlbnRBYm9ydFNpZ25hbCwgKCkgPT5cclxuICAgICAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjb250cm9sbGVyLCBwYXJlbnRBYm9ydFNpZ25hbC5yZWFzb24pXHJcbiAgICApXHJcblxyXG4gIHJldHVybiA8VD4odGFza0V4ZWN1dG9yOiBGb3JrZWRUYXNrRXhlY3V0b3I8VD4pOiBGb3JrZWRUYXNrPFQ+ID0+IHtcclxuICAgIGFzc2VydEZ1bmN0aW9uKHRhc2tFeGVjdXRvciwgJ3Rhc2tFeGVjdXRvcicpXHJcbiAgICBjb25zdCBjaGlsZEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxyXG5cclxuICAgIGxpbmtDb250cm9sbGVycyhjaGlsZEFib3J0Q29udHJvbGxlcilcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBydW5UYXNrPFQ+KFxyXG4gICAgICBhc3luYyAoKTogUHJvbWlzZTxUPiA9PiB7XHJcbiAgICAgICAgdmFsaWRhdGVBY3RpdmUocGFyZW50QWJvcnRTaWduYWwpXHJcbiAgICAgICAgdmFsaWRhdGVBY3RpdmUoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCB0YXNrRXhlY3V0b3Ioe1xyXG4gICAgICAgICAgcGF1c2U6IGNyZWF0ZVBhdXNlKGNoaWxkQWJvcnRDb250cm9sbGVyLnNpZ25hbCksXHJcbiAgICAgICAgICBkZWxheTogY3JlYXRlRGVsYXkoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKSxcclxuICAgICAgICAgIHNpZ25hbDogY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxyXG4gICAgICAgIH0pKSBhcyBUXHJcbiAgICAgICAgdmFsaWRhdGVBY3RpdmUoY2hpbGRBYm9ydENvbnRyb2xsZXIuc2lnbmFsKVxyXG4gICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4gYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjaGlsZEFib3J0Q29udHJvbGxlciwgdGFza0NvbXBsZXRlZClcclxuICAgIClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXN1bHQ6IGNyZWF0ZVBhdXNlPFRhc2tSZXN1bHQ8VD4+KHBhcmVudEFib3J0U2lnbmFsKShyZXN1bHQpLFxyXG4gICAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjaGlsZEFib3J0Q29udHJvbGxlciwgdGFza0NhbmNlbGxlZClcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZVRha2VQYXR0ZXJuID0gPFM+KFxyXG4gIHN0YXJ0TGlzdGVuaW5nOiBBZGRMaXN0ZW5lck92ZXJsb2FkczxcclxuICAgIFVuc3Vic2NyaWJlTGlzdGVuZXIsXHJcbiAgICBTLFxyXG4gICAgRGlzcGF0Y2g8QW55QWN0aW9uPlxyXG4gID4sXHJcbiAgc2lnbmFsOiBBYm9ydFNpZ25hbFxyXG4pOiBUYWtlUGF0dGVybjxTPiA9PiB7XHJcbiAgLyoqXHJcbiAgICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgTGlzdGVuZXJQcmVkaWNhdGUgYW5kIGFuIG9wdGlvbmFsIHRpbWVvdXQsXHJcbiAgICogYW5kIHJlc29sdmVzIHdoZW4gZWl0aGVyIHRoZSBwcmVkaWNhdGUgcmV0dXJucyBgdHJ1ZWAgYmFzZWQgb24gYW4gYWN0aW9uXHJcbiAgICogc3RhdGUgY29tYmluYXRpb24gb3Igd2hlbiB0aGUgdGltZW91dCBleHBpcmVzLlxyXG4gICAqIElmIHRoZSBwYXJlbnQgbGlzdGVuZXIgaXMgY2FuY2VsZWQgd2hpbGUgd2FpdGluZywgdGhpcyB3aWxsIHRocm93IGFcclxuICAgKiBUYXNrQWJvcnRFcnJvci5cclxuICAgKi9cclxuICBjb25zdCB0YWtlID0gYXN5bmMgPFAgZXh0ZW5kcyBBbnlMaXN0ZW5lclByZWRpY2F0ZTxTPj4oXHJcbiAgICBwcmVkaWNhdGU6IFAsXHJcbiAgICB0aW1lb3V0OiBudW1iZXIgfCB1bmRlZmluZWRcclxuICApID0+IHtcclxuICAgIHZhbGlkYXRlQWN0aXZlKHNpZ25hbClcclxuXHJcbiAgICAvLyBQbGFjZWhvbGRlciB1bnN1YnNjcmliZSBmdW5jdGlvbiB1bnRpbCB0aGUgbGlzdGVuZXIgaXMgYWRkZWRcclxuICAgIGxldCB1bnN1YnNjcmliZTogVW5zdWJzY3JpYmVMaXN0ZW5lciA9ICgpID0+IHt9XHJcblxyXG4gICAgY29uc3QgdHVwbGVQcm9taXNlID0gbmV3IFByb21pc2U8W0FueUFjdGlvbiwgUywgU10+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgLy8gSW5zaWRlIHRoZSBQcm9taXNlLCB3ZSBzeW5jaHJvbm91c2x5IGFkZCB0aGUgbGlzdGVuZXIuXHJcbiAgICAgIGxldCBzdG9wTGlzdGVuaW5nID0gc3RhcnRMaXN0ZW5pbmcoe1xyXG4gICAgICAgIHByZWRpY2F0ZTogcHJlZGljYXRlIGFzIGFueSxcclxuICAgICAgICBlZmZlY3Q6IChhY3Rpb24sIGxpc3RlbmVyQXBpKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAvLyBPbmUtc2hvdCBsaXN0ZW5lciB0aGF0IGNsZWFucyB1cCBhcyBzb29uIGFzIHRoZSBwcmVkaWNhdGUgcGFzc2VzXHJcbiAgICAgICAgICBsaXN0ZW5lckFwaS51bnN1YnNjcmliZSgpXHJcbiAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIHRoZSBwcmVkaWNhdGUgc2F3XHJcbiAgICAgICAgICByZXNvbHZlKFtcclxuICAgICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgICBsaXN0ZW5lckFwaS5nZXRTdGF0ZSgpLFxyXG4gICAgICAgICAgICBsaXN0ZW5lckFwaS5nZXRPcmlnaW5hbFN0YXRlKCksXHJcbiAgICAgICAgICBdKVxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pXHJcbiAgICAgIHVuc3Vic2NyaWJlID0gKCkgPT4ge1xyXG4gICAgICAgIHN0b3BMaXN0ZW5pbmcoKVxyXG4gICAgICAgIHJlamVjdCgpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgcHJvbWlzZXM6IChQcm9taXNlPG51bGw+IHwgUHJvbWlzZTxbQW55QWN0aW9uLCBTLCBTXT4pW10gPSBbXHJcbiAgICAgIHR1cGxlUHJvbWlzZSxcclxuICAgIF1cclxuXHJcbiAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XHJcbiAgICAgIHByb21pc2VzLnB1c2goXHJcbiAgICAgICAgbmV3IFByb21pc2U8bnVsbD4oKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZW91dCwgbnVsbCkpXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCByYWNlV2l0aFNpZ25hbChzaWduYWwsIFByb21pc2UucmFjZShwcm9taXNlcykpXHJcblxyXG4gICAgICB2YWxpZGF0ZUFjdGl2ZShzaWduYWwpXHJcbiAgICAgIHJldHVybiBvdXRwdXRcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIC8vIEFsd2F5cyBjbGVhbiB1cCB0aGUgbGlzdGVuZXJcclxuICAgICAgdW5zdWJzY3JpYmUoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuICgocHJlZGljYXRlOiBBbnlMaXN0ZW5lclByZWRpY2F0ZTxTPiwgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkKSA9PlxyXG4gICAgY2F0Y2hSZWplY3Rpb24odGFrZShwcmVkaWNhdGUsIHRpbWVvdXQpKSkgYXMgVGFrZVBhdHRlcm48Uz5cclxufVxyXG5cclxuY29uc3QgZ2V0TGlzdGVuZXJFbnRyeVByb3BzRnJvbSA9IChvcHRpb25zOiBGYWxsYmFja0FkZExpc3RlbmVyT3B0aW9ucykgPT4ge1xyXG4gIGxldCB7IHR5cGUsIGFjdGlvbkNyZWF0b3IsIG1hdGNoZXIsIHByZWRpY2F0ZSwgZWZmZWN0IH0gPSBvcHRpb25zXHJcblxyXG4gIGlmICh0eXBlKSB7XHJcbiAgICBwcmVkaWNhdGUgPSBjcmVhdGVBY3Rpb24odHlwZSkubWF0Y2hcclxuICB9IGVsc2UgaWYgKGFjdGlvbkNyZWF0b3IpIHtcclxuICAgIHR5cGUgPSBhY3Rpb25DcmVhdG9yIS50eXBlXHJcbiAgICBwcmVkaWNhdGUgPSBhY3Rpb25DcmVhdG9yLm1hdGNoXHJcbiAgfSBlbHNlIGlmIChtYXRjaGVyKSB7XHJcbiAgICBwcmVkaWNhdGUgPSBtYXRjaGVyXHJcbiAgfSBlbHNlIGlmIChwcmVkaWNhdGUpIHtcclxuICAgIC8vIHBhc3NcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAnQ3JlYXRpbmcgb3IgcmVtb3ZpbmcgYSBsaXN0ZW5lciByZXF1aXJlcyBvbmUgb2YgdGhlIGtub3duIGZpZWxkcyBmb3IgbWF0Y2hpbmcgYW4gYWN0aW9uJ1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYXNzZXJ0RnVuY3Rpb24oZWZmZWN0LCAnb3B0aW9ucy5saXN0ZW5lcicpXHJcblxyXG4gIHJldHVybiB7IHByZWRpY2F0ZSwgdHlwZSwgZWZmZWN0IH1cclxufVxyXG5cclxuLyoqIEFjY2VwdHMgdGhlIHBvc3NpYmxlIG9wdGlvbnMgZm9yIGNyZWF0aW5nIGEgbGlzdGVuZXIsIGFuZCByZXR1cm5zIGEgZm9ybWF0dGVkIGxpc3RlbmVyIGVudHJ5ICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVMaXN0ZW5lckVudHJ5OiBUeXBlZENyZWF0ZUxpc3RlbmVyRW50cnk8dW5rbm93bj4gPSAoXHJcbiAgb3B0aW9uczogRmFsbGJhY2tBZGRMaXN0ZW5lck9wdGlvbnNcclxuKSA9PiB7XHJcbiAgY29uc3QgeyB0eXBlLCBwcmVkaWNhdGUsIGVmZmVjdCB9ID0gZ2V0TGlzdGVuZXJFbnRyeVByb3BzRnJvbShvcHRpb25zKVxyXG5cclxuICBjb25zdCBpZCA9IG5hbm9pZCgpXHJcbiAgY29uc3QgZW50cnk6IExpc3RlbmVyRW50cnk8dW5rbm93bj4gPSB7XHJcbiAgICBpZCxcclxuICAgIGVmZmVjdCxcclxuICAgIHR5cGUsXHJcbiAgICBwcmVkaWNhdGUsXHJcbiAgICBwZW5kaW5nOiBuZXcgU2V0PEFib3J0Q29udHJvbGxlcj4oKSxcclxuICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdWJzY3JpYmUgbm90IGluaXRpYWxpemVkJylcclxuICAgIH0sXHJcbiAgfVxyXG5cclxuICByZXR1cm4gZW50cnlcclxufVxyXG5cclxuY29uc3QgY2FuY2VsQWN0aXZlTGlzdGVuZXJzID0gKFxyXG4gIGVudHJ5OiBMaXN0ZW5lckVudHJ5PHVua25vd24sIERpc3BhdGNoPEFueUFjdGlvbj4+XHJcbikgPT4ge1xyXG4gIGVudHJ5LnBlbmRpbmcuZm9yRWFjaCgoY29udHJvbGxlcikgPT4ge1xyXG4gICAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjb250cm9sbGVyLCBsaXN0ZW5lckNhbmNlbGxlZClcclxuICB9KVxyXG59XHJcblxyXG5jb25zdCBjcmVhdGVDbGVhckxpc3RlbmVyTWlkZGxld2FyZSA9IChcclxuICBsaXN0ZW5lck1hcDogTWFwPHN0cmluZywgTGlzdGVuZXJFbnRyeT5cclxuKSA9PiB7XHJcbiAgcmV0dXJuICgpID0+IHtcclxuICAgIGxpc3RlbmVyTWFwLmZvckVhY2goY2FuY2VsQWN0aXZlTGlzdGVuZXJzKVxyXG5cclxuICAgIGxpc3RlbmVyTWFwLmNsZWFyKClcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTYWZlbHkgcmVwb3J0cyBlcnJvcnMgdG8gdGhlIGBlcnJvckhhbmRsZXJgIHByb3ZpZGVkLlxyXG4gKiBFcnJvcnMgdGhhdCBvY2N1ciBpbnNpZGUgYGVycm9ySGFuZGxlcmAgYXJlIG5vdGlmaWVkIGluIGEgbmV3IHRhc2suXHJcbiAqIEluc3BpcmVkIGJ5IFtyeGpzIHJlcG9ydFVuaGFuZGxlZEVycm9yXShodHRwczovL2dpdGh1Yi5jb20vUmVhY3RpdmVYL3J4anMvYmxvYi82ZmFmY2Y1M2RjOWU1NTc0MzliMjVkZWJhZWFkZmQyMjRiMjQ1YTY2L3NyYy9pbnRlcm5hbC91dGlsL3JlcG9ydFVuaGFuZGxlZEVycm9yLnRzKVxyXG4gKiBAcGFyYW0gZXJyb3JIYW5kbGVyXHJcbiAqIEBwYXJhbSBlcnJvclRvTm90aWZ5XHJcbiAqL1xyXG5jb25zdCBzYWZlbHlOb3RpZnlFcnJvciA9IChcclxuICBlcnJvckhhbmRsZXI6IExpc3RlbmVyRXJyb3JIYW5kbGVyLFxyXG4gIGVycm9yVG9Ob3RpZnk6IHVua25vd24sXHJcbiAgZXJyb3JJbmZvOiBMaXN0ZW5lckVycm9ySW5mb1xyXG4pOiB2b2lkID0+IHtcclxuICB0cnkge1xyXG4gICAgZXJyb3JIYW5kbGVyKGVycm9yVG9Ob3RpZnksIGVycm9ySW5mbylcclxuICB9IGNhdGNoIChlcnJvckhhbmRsZXJFcnJvcikge1xyXG4gICAgLy8gV2UgY2Fubm90IGxldCBhbiBlcnJvciByYWlzZWQgaGVyZSBibG9jayB0aGUgbGlzdGVuZXIgcXVldWUuXHJcbiAgICAvLyBUaGUgZXJyb3IgcmFpc2VkIGhlcmUgd2lsbCBiZSBwaWNrZWQgdXAgYnkgYHdpbmRvdy5vbmVycm9yYCwgYHByb2Nlc3Mub24oJ2Vycm9yJylgIGV0Yy4uLlxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRocm93IGVycm9ySGFuZGxlckVycm9yXHJcbiAgICB9LCAwKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBjb25zdCBhZGRMaXN0ZW5lciA9IGNyZWF0ZUFjdGlvbihcclxuICBgJHthbG19L2FkZGBcclxuKSBhcyBUeXBlZEFkZExpc3RlbmVyPHVua25vd24+XHJcblxyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNsZWFyQWxsTGlzdGVuZXJzID0gY3JlYXRlQWN0aW9uKGAke2FsbX0vcmVtb3ZlQWxsYClcclxuXHJcbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlTGlzdGVuZXIgPSBjcmVhdGVBY3Rpb24oXHJcbiAgYCR7YWxtfS9yZW1vdmVgXHJcbikgYXMgVHlwZWRSZW1vdmVMaXN0ZW5lcjx1bmtub3duPlxyXG5cclxuY29uc3QgZGVmYXVsdEVycm9ySGFuZGxlcjogTGlzdGVuZXJFcnJvckhhbmRsZXIgPSAoLi4uYXJnczogdW5rbm93bltdKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihgJHthbG19L2Vycm9yYCwgLi4uYXJncylcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMaXN0ZW5lck1pZGRsZXdhcmU8XHJcbiAgUyA9IHVua25vd24sXHJcbiAgRCBleHRlbmRzIERpc3BhdGNoPEFueUFjdGlvbj4gPSBUaHVua0Rpc3BhdGNoPFMsIHVua25vd24sIEFueUFjdGlvbj4sXHJcbiAgRXh0cmFBcmd1bWVudCA9IHVua25vd25cclxuPihtaWRkbGV3YXJlT3B0aW9uczogQ3JlYXRlTGlzdGVuZXJNaWRkbGV3YXJlT3B0aW9uczxFeHRyYUFyZ3VtZW50PiA9IHt9KSB7XHJcbiAgY29uc3QgbGlzdGVuZXJNYXAgPSBuZXcgTWFwPHN0cmluZywgTGlzdGVuZXJFbnRyeT4oKVxyXG4gIGNvbnN0IHsgZXh0cmEsIG9uRXJyb3IgPSBkZWZhdWx0RXJyb3JIYW5kbGVyIH0gPSBtaWRkbGV3YXJlT3B0aW9uc1xyXG5cclxuICBhc3NlcnRGdW5jdGlvbihvbkVycm9yLCAnb25FcnJvcicpXHJcblxyXG4gIGNvbnN0IGluc2VydEVudHJ5ID0gKGVudHJ5OiBMaXN0ZW5lckVudHJ5KSA9PiB7XHJcbiAgICBlbnRyeS51bnN1YnNjcmliZSA9ICgpID0+IGxpc3RlbmVyTWFwLmRlbGV0ZShlbnRyeSEuaWQpXHJcblxyXG4gICAgbGlzdGVuZXJNYXAuc2V0KGVudHJ5LmlkLCBlbnRyeSlcclxuICAgIHJldHVybiAoY2FuY2VsT3B0aW9ucz86IFVuc3Vic2NyaWJlTGlzdGVuZXJPcHRpb25zKSA9PiB7XHJcbiAgICAgIGVudHJ5LnVuc3Vic2NyaWJlKClcclxuICAgICAgaWYgKGNhbmNlbE9wdGlvbnM/LmNhbmNlbEFjdGl2ZSkge1xyXG4gICAgICAgIGNhbmNlbEFjdGl2ZUxpc3RlbmVycyhlbnRyeSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZmluZExpc3RlbmVyRW50cnkgPSAoXHJcbiAgICBjb21wYXJhdG9yOiAoZW50cnk6IExpc3RlbmVyRW50cnkpID0+IGJvb2xlYW5cclxuICApOiBMaXN0ZW5lckVudHJ5IHwgdW5kZWZpbmVkID0+IHtcclxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgQXJyYXkuZnJvbShsaXN0ZW5lck1hcC52YWx1ZXMoKSkpIHtcclxuICAgICAgaWYgKGNvbXBhcmF0b3IoZW50cnkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBjb25zdCBzdGFydExpc3RlbmluZyA9IChvcHRpb25zOiBGYWxsYmFja0FkZExpc3RlbmVyT3B0aW9ucykgPT4ge1xyXG4gICAgbGV0IGVudHJ5ID0gZmluZExpc3RlbmVyRW50cnkoXHJcbiAgICAgIChleGlzdGluZ0VudHJ5KSA9PiBleGlzdGluZ0VudHJ5LmVmZmVjdCA9PT0gb3B0aW9ucy5lZmZlY3RcclxuICAgIClcclxuXHJcbiAgICBpZiAoIWVudHJ5KSB7XHJcbiAgICAgIGVudHJ5ID0gY3JlYXRlTGlzdGVuZXJFbnRyeShvcHRpb25zIGFzIGFueSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaW5zZXJ0RW50cnkoZW50cnkpXHJcbiAgfVxyXG5cclxuICBjb25zdCBzdG9wTGlzdGVuaW5nID0gKFxyXG4gICAgb3B0aW9uczogRmFsbGJhY2tBZGRMaXN0ZW5lck9wdGlvbnMgJiBVbnN1YnNjcmliZUxpc3RlbmVyT3B0aW9uc1xyXG4gICk6IGJvb2xlYW4gPT4ge1xyXG4gICAgY29uc3QgeyB0eXBlLCBlZmZlY3QsIHByZWRpY2F0ZSB9ID0gZ2V0TGlzdGVuZXJFbnRyeVByb3BzRnJvbShvcHRpb25zKVxyXG5cclxuICAgIGNvbnN0IGVudHJ5ID0gZmluZExpc3RlbmVyRW50cnkoKGVudHJ5KSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hdGNoUHJlZGljYXRlT3JUeXBlID1cclxuICAgICAgICB0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZydcclxuICAgICAgICAgID8gZW50cnkudHlwZSA9PT0gdHlwZVxyXG4gICAgICAgICAgOiBlbnRyeS5wcmVkaWNhdGUgPT09IHByZWRpY2F0ZVxyXG5cclxuICAgICAgcmV0dXJuIG1hdGNoUHJlZGljYXRlT3JUeXBlICYmIGVudHJ5LmVmZmVjdCA9PT0gZWZmZWN0XHJcbiAgICB9KVxyXG5cclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICBlbnRyeS51bnN1YnNjcmliZSgpXHJcbiAgICAgIGlmIChvcHRpb25zLmNhbmNlbEFjdGl2ZSkge1xyXG4gICAgICAgIGNhbmNlbEFjdGl2ZUxpc3RlbmVycyhlbnRyeSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAhIWVudHJ5XHJcbiAgfVxyXG5cclxuICBjb25zdCBub3RpZnlMaXN0ZW5lciA9IGFzeW5jIChcclxuICAgIGVudHJ5OiBMaXN0ZW5lckVudHJ5PHVua25vd24sIERpc3BhdGNoPEFueUFjdGlvbj4+LFxyXG4gICAgYWN0aW9uOiBBbnlBY3Rpb24sXHJcbiAgICBhcGk6IE1pZGRsZXdhcmVBUEksXHJcbiAgICBnZXRPcmlnaW5hbFN0YXRlOiAoKSA9PiBTXHJcbiAgKSA9PiB7XHJcbiAgICBjb25zdCBpbnRlcm5hbFRhc2tDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXHJcbiAgICBjb25zdCB0YWtlID0gY3JlYXRlVGFrZVBhdHRlcm4oXHJcbiAgICAgIHN0YXJ0TGlzdGVuaW5nLFxyXG4gICAgICBpbnRlcm5hbFRhc2tDb250cm9sbGVyLnNpZ25hbFxyXG4gICAgKVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGVudHJ5LnBlbmRpbmcuYWRkKGludGVybmFsVGFza0NvbnRyb2xsZXIpXHJcbiAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZShcclxuICAgICAgICBlbnRyeS5lZmZlY3QoXHJcbiAgICAgICAgICBhY3Rpb24sXHJcbiAgICAgICAgICAvLyBVc2UgYXNzaWduKCkgcmF0aGVyIHRoYW4gLi4uIHRvIGF2b2lkIGV4dHJhIGhlbHBlciBmdW5jdGlvbnMgYWRkZWQgdG8gYnVuZGxlXHJcbiAgICAgICAgICBhc3NpZ24oe30sIGFwaSwge1xyXG4gICAgICAgICAgICBnZXRPcmlnaW5hbFN0YXRlLFxyXG4gICAgICAgICAgICBjb25kaXRpb246IChcclxuICAgICAgICAgICAgICBwcmVkaWNhdGU6IEFueUxpc3RlbmVyUHJlZGljYXRlPGFueT4sXHJcbiAgICAgICAgICAgICAgdGltZW91dD86IG51bWJlclxyXG4gICAgICAgICAgICApID0+IHRha2UocHJlZGljYXRlLCB0aW1lb3V0KS50aGVuKEJvb2xlYW4pLFxyXG4gICAgICAgICAgICB0YWtlLFxyXG4gICAgICAgICAgICBkZWxheTogY3JlYXRlRGVsYXkoaW50ZXJuYWxUYXNrQ29udHJvbGxlci5zaWduYWwpLFxyXG4gICAgICAgICAgICBwYXVzZTogY3JlYXRlUGF1c2U8YW55PihpbnRlcm5hbFRhc2tDb250cm9sbGVyLnNpZ25hbCksXHJcbiAgICAgICAgICAgIGV4dHJhLFxyXG4gICAgICAgICAgICBzaWduYWw6IGludGVybmFsVGFza0NvbnRyb2xsZXIuc2lnbmFsLFxyXG4gICAgICAgICAgICBmb3JrOiBjcmVhdGVGb3JrKGludGVybmFsVGFza0NvbnRyb2xsZXIuc2lnbmFsKSxcclxuICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGVudHJ5LnVuc3Vic2NyaWJlLFxyXG4gICAgICAgICAgICBzdWJzY3JpYmU6ICgpID0+IHtcclxuICAgICAgICAgICAgICBsaXN0ZW5lck1hcC5zZXQoZW50cnkuaWQsIGVudHJ5KVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYW5jZWxBY3RpdmVMaXN0ZW5lcnM6ICgpID0+IHtcclxuICAgICAgICAgICAgICBlbnRyeS5wZW5kaW5nLmZvckVhY2goKGNvbnRyb2xsZXIsIF8sIHNldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIgIT09IGludGVybmFsVGFza0NvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyV2l0aFJlYXNvbihjb250cm9sbGVyLCBsaXN0ZW5lckNhbmNlbGxlZClcclxuICAgICAgICAgICAgICAgICAgc2V0LmRlbGV0ZShjb250cm9sbGVyKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIClcclxuICAgICAgKVxyXG4gICAgfSBjYXRjaCAobGlzdGVuZXJFcnJvcikge1xyXG4gICAgICBpZiAoIShsaXN0ZW5lckVycm9yIGluc3RhbmNlb2YgVGFza0Fib3J0RXJyb3IpKSB7XHJcbiAgICAgICAgc2FmZWx5Tm90aWZ5RXJyb3Iob25FcnJvciwgbGlzdGVuZXJFcnJvciwge1xyXG4gICAgICAgICAgcmFpc2VkQnk6ICdlZmZlY3QnLFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIGFib3J0Q29udHJvbGxlcldpdGhSZWFzb24oaW50ZXJuYWxUYXNrQ29udHJvbGxlciwgbGlzdGVuZXJDb21wbGV0ZWQpIC8vIE5vdGlmeSB0aGF0IHRoZSB0YXNrIGhhcyBjb21wbGV0ZWRcclxuICAgICAgZW50cnkucGVuZGluZy5kZWxldGUoaW50ZXJuYWxUYXNrQ29udHJvbGxlcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IGNsZWFyTGlzdGVuZXJNaWRkbGV3YXJlID0gY3JlYXRlQ2xlYXJMaXN0ZW5lck1pZGRsZXdhcmUobGlzdGVuZXJNYXApXHJcblxyXG4gIGNvbnN0IG1pZGRsZXdhcmU6IExpc3RlbmVyTWlkZGxld2FyZTxTLCBELCBFeHRyYUFyZ3VtZW50PiA9XHJcbiAgICAoYXBpKSA9PiAobmV4dCkgPT4gKGFjdGlvbikgPT4ge1xyXG4gICAgICBpZiAoYWRkTGlzdGVuZXIubWF0Y2goYWN0aW9uKSkge1xyXG4gICAgICAgIHJldHVybiBzdGFydExpc3RlbmluZyhhY3Rpb24ucGF5bG9hZClcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGNsZWFyQWxsTGlzdGVuZXJzLm1hdGNoKGFjdGlvbikpIHtcclxuICAgICAgICBjbGVhckxpc3RlbmVyTWlkZGxld2FyZSgpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChyZW1vdmVMaXN0ZW5lci5tYXRjaChhY3Rpb24pKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0b3BMaXN0ZW5pbmcoYWN0aW9uLnBheWxvYWQpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIE5lZWQgdG8gZ2V0IHRoaXMgc3RhdGUgX2JlZm9yZV8gdGhlIHJlZHVjZXIgcHJvY2Vzc2VzIHRoZSBhY3Rpb25cclxuICAgICAgbGV0IG9yaWdpbmFsU3RhdGU6IFMgfCB0eXBlb2YgSU5URVJOQUxfTklMX1RPS0VOID0gYXBpLmdldFN0YXRlKClcclxuXHJcbiAgICAgIC8vIGBnZXRPcmlnaW5hbFN0YXRlYCBjYW4gb25seSBiZSBjYWxsZWQgc3luY2hyb25vdXNseS5cclxuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vcmVkdXhqcy9yZWR1eC10b29sa2l0L2Rpc2N1c3Npb25zLzE2NDgjZGlzY3Vzc2lvbmNvbW1lbnQtMTkzMjgyMFxyXG4gICAgICBjb25zdCBnZXRPcmlnaW5hbFN0YXRlID0gKCk6IFMgPT4ge1xyXG4gICAgICAgIGlmIChvcmlnaW5hbFN0YXRlID09PSBJTlRFUk5BTF9OSUxfVE9LRU4pIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgYCR7YWxtfTogZ2V0T3JpZ2luYWxTdGF0ZSBjYW4gb25seSBiZSBjYWxsZWQgc3luY2hyb25vdXNseWBcclxuICAgICAgICAgIClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbFN0YXRlIGFzIFNcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHJlc3VsdDogdW5rbm93blxyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBBY3R1YWxseSBmb3J3YXJkIHRoZSBhY3Rpb24gdG8gdGhlIHJlZHVjZXIgYmVmb3JlIHdlIGhhbmRsZSBsaXN0ZW5lcnNcclxuICAgICAgICByZXN1bHQgPSBuZXh0KGFjdGlvbilcclxuXHJcbiAgICAgICAgaWYgKGxpc3RlbmVyTWFwLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICBsZXQgY3VycmVudFN0YXRlID0gYXBpLmdldFN0YXRlKClcclxuICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIEVTQnVpbGQrVFMgdHJhbnNwaWxhdGlvbiBpc3N1ZVxyXG4gICAgICAgICAgY29uc3QgbGlzdGVuZXJFbnRyaWVzID0gQXJyYXkuZnJvbShsaXN0ZW5lck1hcC52YWx1ZXMoKSlcclxuICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGxpc3RlbmVyRW50cmllcykge1xyXG4gICAgICAgICAgICBsZXQgcnVuTGlzdGVuZXIgPSBmYWxzZVxyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBydW5MaXN0ZW5lciA9IGVudHJ5LnByZWRpY2F0ZShhY3Rpb24sIGN1cnJlbnRTdGF0ZSwgb3JpZ2luYWxTdGF0ZSlcclxuICAgICAgICAgICAgfSBjYXRjaCAocHJlZGljYXRlRXJyb3IpIHtcclxuICAgICAgICAgICAgICBydW5MaXN0ZW5lciA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICAgIHNhZmVseU5vdGlmeUVycm9yKG9uRXJyb3IsIHByZWRpY2F0ZUVycm9yLCB7XHJcbiAgICAgICAgICAgICAgICByYWlzZWRCeTogJ3ByZWRpY2F0ZScsXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFydW5MaXN0ZW5lcikge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5vdGlmeUxpc3RlbmVyKGVudHJ5LCBhY3Rpb24sIGFwaSwgZ2V0T3JpZ2luYWxTdGF0ZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGBvcmlnaW5hbFN0YXRlYCBzdG9yZSBmcm9tIHRoaXMgc2NvcGUuXHJcbiAgICAgICAgb3JpZ2luYWxTdGF0ZSA9IElOVEVSTkFMX05JTF9UT0tFTlxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBtaWRkbGV3YXJlLFxyXG4gICAgc3RhcnRMaXN0ZW5pbmcsXHJcbiAgICBzdG9wTGlzdGVuaW5nLFxyXG4gICAgY2xlYXJMaXN0ZW5lcnM6IGNsZWFyTGlzdGVuZXJNaWRkbGV3YXJlLFxyXG4gIH0gYXMgTGlzdGVuZXJNaWRkbGV3YXJlSW5zdGFuY2U8UywgRCwgRXh0cmFBcmd1bWVudD5cclxufVxyXG4iLCJpbXBvcnQgdHlwZSB7IFN0b3JlRW5oYW5jZXIgfSBmcm9tICdyZWR1eCdcclxuXHJcbmV4cG9ydCBjb25zdCBTSE9VTERfQVVUT0JBVENIID0gJ1JUS19hdXRvQmF0Y2gnXHJcblxyXG5leHBvcnQgY29uc3QgcHJlcGFyZUF1dG9CYXRjaGVkID1cclxuICA8VD4oKSA9PlxyXG4gIChwYXlsb2FkOiBUKTogeyBwYXlsb2FkOiBUOyBtZXRhOiB1bmtub3duIH0gPT4gKHtcclxuICAgIHBheWxvYWQsXHJcbiAgICBtZXRhOiB7IFtTSE9VTERfQVVUT0JBVENIXTogdHJ1ZSB9LFxyXG4gIH0pXHJcblxyXG4vLyBUT0RPIFJlbW92ZSB0aGlzIGluIDIuMFxyXG4vLyBDb3BpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL3F1ZXVlLW1pY3JvdGFza1xyXG5sZXQgcHJvbWlzZTogUHJvbWlzZTxhbnk+XHJcbmNvbnN0IHF1ZXVlTWljcm90YXNrU2hpbSA9XHJcbiAgdHlwZW9mIHF1ZXVlTWljcm90YXNrID09PSAnZnVuY3Rpb24nXHJcbiAgICA/IHF1ZXVlTWljcm90YXNrLmJpbmQoXHJcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgID8gd2luZG93XHJcbiAgICAgICAgICA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICA/IGdsb2JhbFxyXG4gICAgICAgICAgOiBnbG9iYWxUaGlzXHJcbiAgICAgIClcclxuICAgIDogLy8gcmV1c2UgcmVzb2x2ZWQgcHJvbWlzZSwgYW5kIGFsbG9jYXRlIGl0IGxhemlseVxyXG4gICAgICAoY2I6ICgpID0+IHZvaWQpID0+XHJcbiAgICAgICAgKHByb21pc2UgfHwgKHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKSkpLnRoZW4oY2IpLmNhdGNoKChlcnI6IGFueSkgPT5cclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJcclxuICAgICAgICAgIH0sIDApXHJcbiAgICAgICAgKVxyXG5cclxuY29uc3QgY3JlYXRlUXVldWVXaXRoVGltZXIgPSAodGltZW91dDogbnVtYmVyKSA9PiB7XHJcbiAgcmV0dXJuIChub3RpZnk6ICgpID0+IHZvaWQpID0+IHtcclxuICAgIHNldFRpbWVvdXQobm90aWZ5LCB0aW1lb3V0KVxyXG4gIH1cclxufVxyXG5cclxuLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHdvbid0IGV4aXN0IGluIFNTUiBlbnZpcm9ubWVudHMuXHJcbi8vIEZhbGwgYmFjayB0byBhIHZhZ3VlIGFwcHJveGltYXRpb24ganVzdCB0byBrZWVwIGZyb20gZXJyb3JpbmcuXHJcbmNvbnN0IHJBRiA9XHJcbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZVxyXG4gICAgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lXHJcbiAgICA6IGNyZWF0ZVF1ZXVlV2l0aFRpbWVyKDEwKVxyXG5cclxuZXhwb3J0IHR5cGUgQXV0b0JhdGNoT3B0aW9ucyA9XHJcbiAgfCB7IHR5cGU6ICd0aWNrJyB9XHJcbiAgfCB7IHR5cGU6ICd0aW1lcic7IHRpbWVvdXQ6IG51bWJlciB9XHJcbiAgfCB7IHR5cGU6ICdyYWYnIH1cclxuICB8IHsgdHlwZTogJ2NhbGxiYWNrJzsgcXVldWVOb3RpZmljYXRpb246IChub3RpZnk6ICgpID0+IHZvaWQpID0+IHZvaWQgfVxyXG5cclxuLyoqXHJcbiAqIEEgUmVkdXggc3RvcmUgZW5oYW5jZXIgdGhhdCB3YXRjaGVzIGZvciBcImxvdy1wcmlvcml0eVwiIGFjdGlvbnMsIGFuZCBkZWxheXNcclxuICogbm90aWZ5aW5nIHN1YnNjcmliZXJzIHVudGlsIGVpdGhlciB0aGUgcXVldWVkIGNhbGxiYWNrIGV4ZWN1dGVzIG9yIHRoZVxyXG4gKiBuZXh0IFwic3RhbmRhcmQtcHJpb3JpdHlcIiBhY3Rpb24gaXMgZGlzcGF0Y2hlZC5cclxuICpcclxuICogVGhpcyBhbGxvd3MgZGlzcGF0Y2hpbmcgbXVsdGlwbGUgXCJsb3ctcHJpb3JpdHlcIiBhY3Rpb25zIGluIGEgcm93IHdpdGggb25seVxyXG4gKiBhIHNpbmdsZSBzdWJzY3JpYmVyIG5vdGlmaWNhdGlvbiB0byB0aGUgVUkgYWZ0ZXIgdGhlIHNlcXVlbmNlIG9mIGFjdGlvbnNcclxuICogaXMgZmluaXNoZWQsIHRodXMgaW1wcm92aW5nIFVJIHJlLXJlbmRlciBwZXJmb3JtYW5jZS5cclxuICpcclxuICogV2F0Y2hlcyBmb3IgYWN0aW9ucyB3aXRoIHRoZSBgYWN0aW9uLm1ldGFbU0hPVUxEX0FVVE9CQVRDSF1gIGF0dHJpYnV0ZS5cclxuICogVGhpcyBjYW4gYmUgYWRkZWQgdG8gYGFjdGlvbi5tZXRhYCBtYW51YWxseSwgb3IgYnkgdXNpbmcgdGhlXHJcbiAqIGBwcmVwYXJlQXV0b0JhdGNoZWRgIGhlbHBlci5cclxuICpcclxuICogQnkgZGVmYXVsdCwgaXQgd2lsbCBxdWV1ZSBhIG5vdGlmaWNhdGlvbiBmb3IgdGhlIGVuZCBvZiB0aGUgZXZlbnQgbG9vcCB0aWNrLlxyXG4gKiBIb3dldmVyLCB5b3UgY2FuIHBhc3Mgc2V2ZXJhbCBvdGhlciBvcHRpb25zIHRvIGNvbmZpZ3VyZSB0aGUgYmVoYXZpb3I6XHJcbiAqIC0gYHt0eXBlOiAndGljayd9OiBxdWV1ZXMgdXNpbmcgYHF1ZXVlTWljcm90YXNrYCAoZGVmYXVsdClcclxuICogLSBge3R5cGU6ICd0aW1lciwgdGltZW91dDogbnVtYmVyfWA6IHF1ZXVlcyB1c2luZyBgc2V0VGltZW91dGBcclxuICogLSBge3R5cGU6ICdyYWYnfWA6IHF1ZXVlcyB1c2luZyBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxyXG4gKiAtIGB7dHlwZTogJ2NhbGxiYWNrJywgcXVldWVOb3RpZmljYXRpb246IChub3RpZnk6ICgpID0+IHZvaWQpID0+IHZvaWR9OiBsZXRzIHlvdSBwcm92aWRlIHlvdXIgb3duIGNhbGxiYWNrXHJcbiAqXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgYXV0b0JhdGNoRW5oYW5jZXIgPVxyXG4gIChvcHRpb25zOiBBdXRvQmF0Y2hPcHRpb25zID0geyB0eXBlOiAncmFmJyB9KTogU3RvcmVFbmhhbmNlciA9PlxyXG4gIChuZXh0KSA9PlxyXG4gICguLi5hcmdzKSA9PiB7XHJcbiAgICBjb25zdCBzdG9yZSA9IG5leHQoLi4uYXJncylcclxuXHJcbiAgICBsZXQgbm90aWZ5aW5nID0gdHJ1ZVxyXG4gICAgbGV0IHNob3VsZE5vdGlmeUF0RW5kT2ZUaWNrID0gZmFsc2VcclxuICAgIGxldCBub3RpZmljYXRpb25RdWV1ZWQgPSBmYWxzZVxyXG5cclxuICAgIGNvbnN0IGxpc3RlbmVycyA9IG5ldyBTZXQ8KCkgPT4gdm9pZD4oKVxyXG5cclxuICAgIGNvbnN0IHF1ZXVlQ2FsbGJhY2sgPVxyXG4gICAgICBvcHRpb25zLnR5cGUgPT09ICd0aWNrJ1xyXG4gICAgICAgID8gcXVldWVNaWNyb3Rhc2tTaGltXHJcbiAgICAgICAgOiBvcHRpb25zLnR5cGUgPT09ICdyYWYnXHJcbiAgICAgICAgPyByQUZcclxuICAgICAgICA6IG9wdGlvbnMudHlwZSA9PT0gJ2NhbGxiYWNrJ1xyXG4gICAgICAgID8gb3B0aW9ucy5xdWV1ZU5vdGlmaWNhdGlvblxyXG4gICAgICAgIDogY3JlYXRlUXVldWVXaXRoVGltZXIob3B0aW9ucy50aW1lb3V0KVxyXG5cclxuICAgIGNvbnN0IG5vdGlmeUxpc3RlbmVycyA9ICgpID0+IHtcclxuICAgICAgLy8gV2UncmUgcnVubmluZyBhdCB0aGUgZW5kIG9mIHRoZSBldmVudCBsb29wIHRpY2suXHJcbiAgICAgIC8vIFJ1biB0aGUgcmVhbCBsaXN0ZW5lciBjYWxsYmFja3MgdG8gYWN0dWFsbHkgdXBkYXRlIHRoZSBVSS5cclxuICAgICAgbm90aWZpY2F0aW9uUXVldWVkID0gZmFsc2VcclxuICAgICAgaWYgKHNob3VsZE5vdGlmeUF0RW5kT2ZUaWNrKSB7XHJcbiAgICAgICAgc2hvdWxkTm90aWZ5QXRFbmRPZlRpY2sgPSBmYWxzZVxyXG4gICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKChsKSA9PiBsKCkpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RvcmUsIHtcclxuICAgICAgLy8gT3ZlcnJpZGUgdGhlIGJhc2UgYHN0b3JlLnN1YnNjcmliZWAgbWV0aG9kIHRvIGtlZXAgb3JpZ2luYWwgbGlzdGVuZXJzXHJcbiAgICAgIC8vIGZyb20gcnVubmluZyBpZiB3ZSdyZSBkZWxheWluZyBub3RpZmljYXRpb25zXHJcbiAgICAgIHN1YnNjcmliZShsaXN0ZW5lcjogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIC8vIEVhY2ggd3JhcHBlZCBsaXN0ZW5lciB3aWxsIG9ubHkgY2FsbCB0aGUgcmVhbCBsaXN0ZW5lciBpZlxyXG4gICAgICAgIC8vIHRoZSBgbm90aWZ5aW5nYCBmbGFnIGlzIGN1cnJlbnRseSBhY3RpdmUgd2hlbiBpdCdzIGNhbGxlZC5cclxuICAgICAgICAvLyBUaGlzIGxldHMgdGhlIGJhc2Ugc3RvcmUgd29yayBhcyBub3JtYWwsIHdoaWxlIHRoZSBhY3R1YWwgVUlcclxuICAgICAgICAvLyB1cGRhdGUgYmVjb21lcyBjb250cm9sbGVkIGJ5IHRoaXMgZW5oYW5jZXIuXHJcbiAgICAgICAgY29uc3Qgd3JhcHBlZExpc3RlbmVyOiB0eXBlb2YgbGlzdGVuZXIgPSAoKSA9PiBub3RpZnlpbmcgJiYgbGlzdGVuZXIoKVxyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gc3RvcmUuc3Vic2NyaWJlKHdyYXBwZWRMaXN0ZW5lcilcclxuICAgICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICB1bnN1YnNjcmliZSgpXHJcbiAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgLy8gT3ZlcnJpZGUgdGhlIGJhc2UgYHN0b3JlLmRpc3BhdGNoYCBtZXRob2Qgc28gdGhhdCB3ZSBjYW4gY2hlY2sgYWN0aW9uc1xyXG4gICAgICAvLyBmb3IgdGhlIGBzaG91bGRBdXRvQmF0Y2hgIGZsYWcgYW5kIGRldGVybWluZSBpZiBiYXRjaGluZyBpcyBhY3RpdmVcclxuICAgICAgZGlzcGF0Y2goYWN0aW9uOiBhbnkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gSWYgdGhlIGFjdGlvbiBkb2VzIF9ub3RfIGhhdmUgdGhlIGBzaG91bGRBdXRvQmF0Y2hgIGZsYWcsXHJcbiAgICAgICAgICAvLyB3ZSByZXN1bWUvY29udGludWUgbm9ybWFsIG5vdGlmeS1hZnRlci1lYWNoLWRpc3BhdGNoIGJlaGF2aW9yXHJcbiAgICAgICAgICBub3RpZnlpbmcgPSAhYWN0aW9uPy5tZXRhPy5bU0hPVUxEX0FVVE9CQVRDSF1cclxuICAgICAgICAgIC8vIElmIGEgYG5vdGlmeUxpc3RlbmVyc2AgbWljcm90YXNrIHdhcyBxdWV1ZWQsIHlvdSBjYW4ndCBjYW5jZWwgaXQuXHJcbiAgICAgICAgICAvLyBJbnN0ZWFkLCB3ZSBzZXQgYSBmbGFnIHNvIHRoYXQgaXQncyBhIG5vLW9wIHdoZW4gaXQgZG9lcyBydW5cclxuICAgICAgICAgIHNob3VsZE5vdGlmeUF0RW5kT2ZUaWNrID0gIW5vdGlmeWluZ1xyXG4gICAgICAgICAgaWYgKHNob3VsZE5vdGlmeUF0RW5kT2ZUaWNrKSB7XHJcbiAgICAgICAgICAgIC8vIFdlJ3ZlIHNlZW4gYXQgbGVhc3QgMSBhY3Rpb24gd2l0aCBgU0hPVUxEX0FVVE9CQVRDSGAuIFRyeSB0byBxdWV1ZVxyXG4gICAgICAgICAgICAvLyBhIG1pY3JvdGFzayB0byBub3RpZnkgbGlzdGVuZXJzIGF0IHRoZSBlbmQgb2YgdGhlIGV2ZW50IGxvb3AgdGljay5cclxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIG9ubHkgZW5xdWV1ZSB0aGlzIF9vbmNlXyBwZXIgdGljay5cclxuICAgICAgICAgICAgaWYgKCFub3RpZmljYXRpb25RdWV1ZWQpIHtcclxuICAgICAgICAgICAgICBub3RpZmljYXRpb25RdWV1ZWQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgcXVldWVDYWxsYmFjayhub3RpZnlMaXN0ZW5lcnMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIEdvIGFoZWFkIGFuZCBwcm9jZXNzIHRoZSBhY3Rpb24gYXMgdXN1YWwsIGluY2x1ZGluZyByZWR1Y2Vycy5cclxuICAgICAgICAgIC8vIElmIG5vcm1hbCBub3RpZmljYXRpb24gYmVoYXZpb3IgaXMgZW5hYmxlZCwgdGhlIHN0b3JlIHdpbGwgbm90aWZ5XHJcbiAgICAgICAgICAvLyBhbGwgb2YgaXRzIG93biBsaXN0ZW5lcnMsIGFuZCB0aGUgd3JhcHBlciBjYWxsYmFja3MgYWJvdmUgd2lsbFxyXG4gICAgICAgICAgLy8gc2VlIGBub3RpZnlpbmdgIGlzIHRydWUgYW5kIHBhc3Mgb24gdG8gdGhlIHJlYWwgbGlzdGVuZXIgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgLy8gSWYgd2UncmUgXCJiYXRjaGluZ1wiIGJlaGF2aW9yLCB0aGVuIHRoZSB3cmFwcGVkIGNhbGxiYWNrcyB3aWxsXHJcbiAgICAgICAgICAvLyBiYWlsIG91dCwgY2F1c2luZyB0aGUgYmFzZSBzdG9yZSBub3RpZmljYXRpb24gYmVoYXZpb3IgdG8gYmUgbm8tb3BzLlxyXG4gICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKGFjdGlvbilcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgLy8gQXNzdW1lIHdlJ3JlIGJhY2sgdG8gbm9ybWFsIGJlaGF2aW9yIGFmdGVyIGVhY2ggYWN0aW9uXHJcbiAgICAgICAgICBub3RpZnlpbmcgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICB9XHJcbiJdfQ==