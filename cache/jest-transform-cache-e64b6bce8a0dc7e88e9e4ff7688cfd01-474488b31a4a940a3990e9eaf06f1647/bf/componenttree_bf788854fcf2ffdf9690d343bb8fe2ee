693684d66bc07de53b276b3c70cf8fd4
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getCompositeParentOfType = getCompositeParentOfType;
exports.getHostChildren = getHostChildren;
exports.getHostParent = getHostParent;
exports.getHostSelf = getHostSelf;
exports.getHostSelves = getHostSelves;
exports.getHostSiblings = getHostSiblings;
exports.isHostElement = isHostElement;
exports.isHostElementForType = isHostElementForType;
function isHostElement(element) {
  return typeof (element == null ? void 0 : element.type) === 'string';
}
function getHostParent(element) {
  if (element == null) {
    return null;
  }
  var current = element.parent;
  while (current) {
    if (isHostElement(current)) {
      return current;
    }
    current = current.parent;
  }
  return null;
}
function getHostChildren(element) {
  if (element == null) {
    return [];
  }
  var hostChildren = [];
  element.children.forEach(function (child) {
    if (typeof child !== 'object') {
      return;
    }
    if (isHostElement(child)) {
      hostChildren.push(child);
    } else {
      hostChildren.push.apply(hostChildren, (0, _toConsumableArray2.default)(getHostChildren(child)));
    }
  });
  return hostChildren;
}
function getHostSelf(element) {
  var hostSelves = getHostSelves(element);
  if (hostSelves.length === 0) {
    throw new Error("Expected exactly one host element, but found none.");
  }
  if (hostSelves.length > 1) {
    throw new Error("Expected exactly one host element, but found " + hostSelves.length + ".");
  }
  return hostSelves[0];
}
function getHostSelves(element) {
  return typeof (element == null ? void 0 : element.type) === 'string' ? [element] : getHostChildren(element);
}
function getHostSiblings(element) {
  var hostParent = getHostParent(element);
  var hostSelves = getHostSelves(element);
  return getHostChildren(hostParent).filter(function (sibling) {
    return !hostSelves.includes(sibling);
  });
}
function getCompositeParentOfType(element, type) {
  var current = element.parent;
  while (!isHostElement(current)) {
    if (!current) {
      return null;
    }
    if (current.type === type) {
      return current;
    }
    current = current.parent;
  }
  return null;
}
function isHostElementForType(element, type) {
  if (!isHostElement(element)) return false;
  return getCompositeParentOfType(element, type) !== null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLTyxTQUFTa0Isb0JBQW9CLENBQ2xDdEIsT0FBMEIsRUFDMUJDLElBQXlCLEVBQ3pCO0VBRUEsSUFBSSxDQUFDRixhQUFhLENBQUNDLE9BQU8sQ0FBQyxFQUFFLE9BQU8sS0FBSztFQUV6QyxPQUFPcUIsd0JBQXdCLENBQUNyQixPQUFPLEVBQUVDLElBQUksQ0FBQyxLQUFLLElBQUk7QUFDekQiLCJuYW1lcyI6WyJpc0hvc3RFbGVtZW50IiwiZWxlbWVudCIsInR5cGUiLCJnZXRIb3N0UGFyZW50IiwiY3VycmVudCIsInBhcmVudCIsImdldEhvc3RDaGlsZHJlbiIsImhvc3RDaGlsZHJlbiIsImNoaWxkcmVuIiwiZm9yRWFjaCIsImNoaWxkIiwicHVzaCIsImdldEhvc3RTZWxmIiwiaG9zdFNlbHZlcyIsImdldEhvc3RTZWx2ZXMiLCJsZW5ndGgiLCJFcnJvciIsImdldEhvc3RTaWJsaW5ncyIsImhvc3RQYXJlbnQiLCJmaWx0ZXIiLCJzaWJsaW5nIiwiaW5jbHVkZXMiLCJnZXRDb21wb3NpdGVQYXJlbnRPZlR5cGUiLCJpc0hvc3RFbGVtZW50Rm9yVHlwZSJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9oZWxwZXJzL2NvbXBvbmVudC10cmVlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlYWN0VGVzdEluc3RhbmNlIH0gZnJvbSAncmVhY3QtdGVzdC1yZW5kZXJlcic7XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBlbGVtZW50IGlzIGEgaG9zdCBlbGVtZW50LlxuICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gY2hlY2suXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3RFbGVtZW50KGVsZW1lbnQ/OiBSZWFjdFRlc3RJbnN0YW5jZSB8IG51bGwpOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiBlbGVtZW50Py50eXBlID09PSAnc3RyaW5nJztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGZpcnN0IGhvc3QgYW5jZXN0b3IgZm9yIGdpdmVuIGVsZW1lbnQuXG4gKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCBzdGFydCB0cmF2ZXJzaW5nIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIb3N0UGFyZW50KFxuICBlbGVtZW50OiBSZWFjdFRlc3RJbnN0YW5jZSB8IG51bGxcbik6IFJlYWN0VGVzdEluc3RhbmNlIHwgbnVsbCB7XG4gIGlmIChlbGVtZW50ID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGxldCBjdXJyZW50ID0gZWxlbWVudC5wYXJlbnQ7XG4gIHdoaWxlIChjdXJyZW50KSB7XG4gICAgaWYgKGlzSG9zdEVsZW1lbnQoY3VycmVudCkpIHtcbiAgICAgIHJldHVybiBjdXJyZW50O1xuICAgIH1cblxuICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgaG9zdCBjaGlsZHJlbiBmb3IgZ2l2ZW4gZWxlbWVudC5cbiAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHN0YXJ0IHRyYXZlcnNpbmcgZnJvbS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhvc3RDaGlsZHJlbihcbiAgZWxlbWVudDogUmVhY3RUZXN0SW5zdGFuY2UgfCBudWxsXG4pOiBSZWFjdFRlc3RJbnN0YW5jZVtdIHtcbiAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IGhvc3RDaGlsZHJlbjogUmVhY3RUZXN0SW5zdGFuY2VbXSA9IFtdO1xuXG4gIGVsZW1lbnQuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICBpZiAodHlwZW9mIGNoaWxkICE9PSAnb2JqZWN0Jykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0hvc3RFbGVtZW50KGNoaWxkKSkge1xuICAgICAgaG9zdENoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBob3N0Q2hpbGRyZW4ucHVzaCguLi5nZXRIb3N0Q2hpbGRyZW4oY2hpbGQpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBob3N0Q2hpbGRyZW47XG59XG5cbi8qKlxuICogUmV0dXJuIGEgc2luZ2xlIGhvc3QgZWxlbWVudCB0aGF0IHJlcHJlc2VudCB0aGUgcGFzc2VkIGhvc3Qgb3IgY29tcG9zaXRlIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgc3RhcnQgdHJhdmVyc2luZyBmcm9tLlxuICogQHRocm93cyBFcnJvciBpZiB0aGUgcGFzc2VkIGVsZW1lbnQgaXMgYSBjb21wb3NpdGUgZWxlbWVudCBhbmQgaGFzIG5vIGhvc3QgY2hpbGRyZW4gb3IgaGFzIG1vcmUgdGhhbiBvbmUgaG9zdCBjaGlsZC5cbiAqIEByZXR1cm5zIElmIHRoZSBwYXNzZWQgZWxlbWVudCBpcyBhIGhvc3QgZWxlbWVudCwgaXQgd2lsbCByZXR1cm4gaXRzZWxmLCBpZiB0aGUgcGFzc2VkIGVsZW1lbnQgaXMgYSBjb21wb3NpdGVcbiAqIGVsZW1lbnQsIGl0IHdpbGwgcmV0dXJuIGEgc2luZ2xlIGhvc3QgZGVzY2VuZGFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhvc3RTZWxmKFxuICBlbGVtZW50OiBSZWFjdFRlc3RJbnN0YW5jZSB8IG51bGxcbik6IFJlYWN0VGVzdEluc3RhbmNlIHtcbiAgY29uc3QgaG9zdFNlbHZlcyA9IGdldEhvc3RTZWx2ZXMoZWxlbWVudCk7XG5cbiAgaWYgKGhvc3RTZWx2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBleGFjdGx5IG9uZSBob3N0IGVsZW1lbnQsIGJ1dCBmb3VuZCBub25lLmApO1xuICB9XG5cbiAgaWYgKGhvc3RTZWx2ZXMubGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBFeHBlY3RlZCBleGFjdGx5IG9uZSBob3N0IGVsZW1lbnQsIGJ1dCBmb3VuZCAke2hvc3RTZWx2ZXMubGVuZ3RofS5gXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBob3N0U2VsdmVzWzBdO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgYXJyYXkgb2YgaG9zdCBlbGVtZW50cyB0aGF0IHJlcHJlc2VudCB0aGUgcGFzc2VkIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgc3RhcnQgdHJhdmVyc2luZyBmcm9tLlxuICogQHJldHVybnMgSWYgdGhlIHBhc3NlZCBlbGVtZW50IGlzIGEgaG9zdCBlbGVtZW50LCBpdCB3aWxsIHJldHVybiBhbiBhcnJheSBjb250YWluaW5nIG9ubHkgdGhhdCBlbGVtZW50LFxuICogaWYgdGhlIHBhc3NlZCBlbGVtZW50IGlzIGEgY29tcG9zaXRlIGVsZW1lbnQsIGl0IHdpbGwgcmV0dXJuIGFuIGFycmF5IGNvbnRhaW5pbmcgaXRzIGhvc3QgY2hpbGRyZW4gKHplcm8sIG9uZSBvciBtYW55KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhvc3RTZWx2ZXMoXG4gIGVsZW1lbnQ6IFJlYWN0VGVzdEluc3RhbmNlIHwgbnVsbFxuKTogUmVhY3RUZXN0SW5zdGFuY2VbXSB7XG4gIHJldHVybiB0eXBlb2YgZWxlbWVudD8udHlwZSA9PT0gJ3N0cmluZydcbiAgICA/IFtlbGVtZW50XVxuICAgIDogZ2V0SG9zdENoaWxkcmVuKGVsZW1lbnQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgaG9zdCBzaWJsaW5ncyBmb3IgZ2l2ZW4gZWxlbWVudC5cbiAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHN0YXJ0IHRyYXZlcnNpbmcgZnJvbS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhvc3RTaWJsaW5ncyhcbiAgZWxlbWVudDogUmVhY3RUZXN0SW5zdGFuY2UgfCBudWxsXG4pOiBSZWFjdFRlc3RJbnN0YW5jZVtdIHtcbiAgY29uc3QgaG9zdFBhcmVudCA9IGdldEhvc3RQYXJlbnQoZWxlbWVudCk7XG4gIGNvbnN0IGhvc3RTZWx2ZXMgPSBnZXRIb3N0U2VsdmVzKGVsZW1lbnQpO1xuICByZXR1cm4gZ2V0SG9zdENoaWxkcmVuKGhvc3RQYXJlbnQpLmZpbHRlcihcbiAgICAoc2libGluZykgPT4gIWhvc3RTZWx2ZXMuaW5jbHVkZXMoc2libGluZylcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBvc2l0ZVBhcmVudE9mVHlwZShcbiAgZWxlbWVudDogUmVhY3RUZXN0SW5zdGFuY2UsXG4gIHR5cGU6IFJlYWN0LkNvbXBvbmVudFR5cGVcbikge1xuICBsZXQgY3VycmVudCA9IGVsZW1lbnQucGFyZW50O1xuXG4gIHdoaWxlICghaXNIb3N0RWxlbWVudChjdXJyZW50KSkge1xuICAgIC8vIFdlJ3JlIGF0IHRoZSByb290IG9mIHRoZSB0cmVlXG4gICAgaWYgKCFjdXJyZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoY3VycmVudC50eXBlID09PSB0eXBlKSB7XG4gICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9XG4gICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogTm90ZTogdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgZ2VuZXJhbGx5IHVzZWQgZm9yIGNvcmUgUmVhY3QgTmF0aXZlIHR5cGVzIGxpa2UgYFZpZXdgLCBgVGV4dGAsIGBUZXh0SW5wdXRgLCBldGMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3RFbGVtZW50Rm9yVHlwZShcbiAgZWxlbWVudDogUmVhY3RUZXN0SW5zdGFuY2UsXG4gIHR5cGU6IFJlYWN0LkNvbXBvbmVudFR5cGVcbikge1xuICAvLyBOb3QgYSBob3N0IGVsZW1lbnRcbiAgaWYgKCFpc0hvc3RFbGVtZW50KGVsZW1lbnQpKSByZXR1cm4gZmFsc2U7XG5cbiAgcmV0dXJuIGdldENvbXBvc2l0ZVBhcmVudE9mVHlwZShlbGVtZW50LCB0eXBlKSAhPT0gbnVsbDtcbn1cbiJdfQ==