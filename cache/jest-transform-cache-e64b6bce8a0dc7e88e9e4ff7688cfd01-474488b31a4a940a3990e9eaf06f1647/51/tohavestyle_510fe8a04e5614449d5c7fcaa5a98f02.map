{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","toHaveStyle","react_native_1","require","jest_matcher_utils_1","jest_diff_1","chalk_1","utils_1","printoutStyles","style","keys","sort","map","prop","Array","isArray","JSON","stringify","join","narrow","expected","received","filter","reduce","obj","assign","expectedDiff","receivedNarrow","diffOutput","diff","replace","default","red","element","checkReactElement","StyleSheet","flatten","props","pass","entries","every","equals","message","matcher","isNot","matcherHint"],"sources":["to-have-style.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toHaveStyle = void 0;\nconst react_native_1 = require(\"react-native\");\nconst jest_matcher_utils_1 = require(\"jest-matcher-utils\");\nconst jest_diff_1 = require(\"jest-diff\");\nconst chalk_1 = __importDefault(require(\"chalk\"));\nconst utils_1 = require(\"./utils\");\nfunction printoutStyles(style) {\n    return Object.keys(style)\n        .sort()\n        .map((prop) => Array.isArray(style[prop])\n        ? `${prop}: ${JSON.stringify(style[prop], null, 2)};`\n        : `${prop}: ${style[prop]};`)\n        .join('\\n');\n}\n/**\n * Narrows down the properties in received to those with counterparts in expected\n */\nfunction narrow(expected, received) {\n    return Object.keys(received)\n        .filter((prop) => expected[prop])\n        .reduce((obj, prop) => Object.assign(obj, {\n        [prop]: received[prop],\n    }), {});\n}\n// Highlights only style rules that were expected but were not found in the\n// received computed styles\nfunction expectedDiff(expected, received) {\n    const receivedNarrow = narrow(expected, received);\n    const diffOutput = (0, jest_diff_1.diff)(printoutStyles(expected), printoutStyles(receivedNarrow));\n    // Remove the \"+ Received\" annotation because this is a one-way diff\n    return diffOutput?.replace(`${chalk_1.default.red('+ Received')}\\n`, '') ?? '';\n}\nfunction toHaveStyle(element, style) {\n    (0, utils_1.checkReactElement)(element, toHaveStyle, this);\n    const expected = (react_native_1.StyleSheet.flatten(style) ?? {});\n    const received = (react_native_1.StyleSheet.flatten(element.props.style) ?? {});\n    return {\n        pass: Object.entries(expected).every(([prop, value]) => this.equals(received?.[prop], value)),\n        message: () => {\n            const matcher = `${this.isNot ? '.not' : ''}.toHaveStyle`;\n            return [(0, jest_matcher_utils_1.matcherHint)(matcher, 'element', ''), expectedDiff(expected, received)].join('\\n\\n');\n        },\n    };\n}\nexports.toHaveStyle = toHaveStyle;\n"],"mappings":"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"}