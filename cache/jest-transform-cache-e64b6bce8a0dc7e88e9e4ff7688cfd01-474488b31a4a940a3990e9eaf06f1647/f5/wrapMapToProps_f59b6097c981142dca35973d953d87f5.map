{"version":3,"names":["_interopRequireDefault","require","exports","__esModule","wrapMapToPropsConstant","getDependsOnOwnProps","wrapMapToPropsFunc","_verifyPlainObject","getConstant","initConstantSelector","dispatch","constant","constantSelector","dependsOnOwnProps","mapToProps","Boolean","length","methodName","initProxySelector","displayName","proxy","mapToPropsProxy","stateOrDispatch","ownProps","undefined","detectFactoryAndVerify","props","process","env","NODE_ENV","default"],"sources":["wrapMapToProps.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.wrapMapToPropsConstant = wrapMapToPropsConstant;\nexports.getDependsOnOwnProps = getDependsOnOwnProps;\nexports.wrapMapToPropsFunc = wrapMapToPropsFunc;\n\nvar _verifyPlainObject = _interopRequireDefault(require(\"../utils/verifyPlainObject\"));\n\nfunction wrapMapToPropsConstant( // * Note:\n//  It seems that the dispatch argument\n//  could be a dispatch function in some cases (ex: whenMapDispatchToPropsIsMissing)\n//  and a state object in some others (ex: whenMapStateToPropsIsMissing)\n// eslint-disable-next-line no-unused-vars\ngetConstant) {\n  return function initConstantSelector(dispatch) {\n    const constant = getConstant(dispatch);\n\n    function constantSelector() {\n      return constant;\n    }\n\n    constantSelector.dependsOnOwnProps = false;\n    return constantSelector;\n  };\n} // dependsOnOwnProps is used by createMapToPropsProxy to determine whether to pass props as args\n// to the mapToProps function being wrapped. It is also used by makePurePropsSelector to determine\n// whether mapToProps needs to be invoked when props have changed.\n//\n// A length of one signals that mapToProps does not depend on props from the parent component.\n// A length of zero is assumed to mean mapToProps is getting args via arguments or ...args and\n// therefore not reporting its length accurately..\n// TODO Can this get pulled out so that we can subscribe directly to the store if we don't need ownProps?\n\n\nfunction getDependsOnOwnProps(mapToProps) {\n  return mapToProps.dependsOnOwnProps ? Boolean(mapToProps.dependsOnOwnProps) : mapToProps.length !== 1;\n} // Used by whenMapStateToPropsIsFunction and whenMapDispatchToPropsIsFunction,\n// this function wraps mapToProps in a proxy function which does several things:\n//\n//  * Detects whether the mapToProps function being called depends on props, which\n//    is used by selectorFactory to decide if it should reinvoke on props changes.\n//\n//  * On first call, handles mapToProps if returns another function, and treats that\n//    new function as the true mapToProps for subsequent calls.\n//\n//  * On first call, verifies the first result is a plain object, in order to warn\n//    the developer that their mapToProps function is not returning a valid result.\n//\n\n\nfunction wrapMapToPropsFunc(mapToProps, methodName) {\n  return function initProxySelector(dispatch, {\n    displayName\n  }) {\n    const proxy = function mapToPropsProxy(stateOrDispatch, ownProps) {\n      return proxy.dependsOnOwnProps ? proxy.mapToProps(stateOrDispatch, ownProps) : proxy.mapToProps(stateOrDispatch, undefined);\n    }; // allow detectFactoryAndVerify to get ownProps\n\n\n    proxy.dependsOnOwnProps = true;\n\n    proxy.mapToProps = function detectFactoryAndVerify(stateOrDispatch, ownProps) {\n      proxy.mapToProps = mapToProps;\n      proxy.dependsOnOwnProps = getDependsOnOwnProps(mapToProps);\n      let props = proxy(stateOrDispatch, ownProps);\n\n      if (typeof props === 'function') {\n        proxy.mapToProps = props;\n        proxy.dependsOnOwnProps = getDependsOnOwnProps(props);\n        props = proxy(stateOrDispatch, ownProps);\n      }\n\n      if (process.env.NODE_ENV !== 'production') (0, _verifyPlainObject.default)(props, displayName, methodName);\n      return props;\n    };\n\n    return proxy;\n  };\n}"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AAEpFC,OAAO,CAACC,UAAU,GAAG,IAAI;AACzBD,OAAO,CAACE,sBAAsB,GAAGA,sBAAsB;AACvDF,OAAO,CAACG,oBAAoB,GAAGA,oBAAoB;AACnDH,OAAO,CAACI,kBAAkB,GAAGA,kBAAkB;AAE/C,IAAIC,kBAAkB,GAAGP,sBAAsB,CAACC,OAAO,CAAC,4BAA4B,CAAC,CAAC;AAEtF,SAASG,sBAAsB,CAK/BI,WAAW,EAAE;EACX,OAAO,SAASC,oBAAoB,CAACC,QAAQ,EAAE;IAC7C,IAAMC,QAAQ,GAAGH,WAAW,CAACE,QAAQ,CAAC;IAEtC,SAASE,gBAAgB,GAAG;MAC1B,OAAOD,QAAQ;IACjB;IAEAC,gBAAgB,CAACC,iBAAiB,GAAG,KAAK;IAC1C,OAAOD,gBAAgB;EACzB,CAAC;AACH;AAUA,SAASP,oBAAoB,CAACS,UAAU,EAAE;EACxC,OAAOA,UAAU,CAACD,iBAAiB,GAAGE,OAAO,CAACD,UAAU,CAACD,iBAAiB,CAAC,GAAGC,UAAU,CAACE,MAAM,KAAK,CAAC;AACvG;AAcA,SAASV,kBAAkB,CAACQ,UAAU,EAAEG,UAAU,EAAE;EAClD,OAAO,SAASC,iBAAiB,CAACR,QAAQ,QAEvC;IAAA,IADDS,WAAW,QAAXA,WAAW;IAEX,IAAMC,KAAK,GAAG,SAASC,eAAe,CAACC,eAAe,EAAEC,QAAQ,EAAE;MAChE,OAAOH,KAAK,CAACP,iBAAiB,GAAGO,KAAK,CAACN,UAAU,CAACQ,eAAe,EAAEC,QAAQ,CAAC,GAAGH,KAAK,CAACN,UAAU,CAACQ,eAAe,EAAEE,SAAS,CAAC;IAC7H,CAAC;IAGDJ,KAAK,CAACP,iBAAiB,GAAG,IAAI;IAE9BO,KAAK,CAACN,UAAU,GAAG,SAASW,sBAAsB,CAACH,eAAe,EAAEC,QAAQ,EAAE;MAC5EH,KAAK,CAACN,UAAU,GAAGA,UAAU;MAC7BM,KAAK,CAACP,iBAAiB,GAAGR,oBAAoB,CAACS,UAAU,CAAC;MAC1D,IAAIY,KAAK,GAAGN,KAAK,CAACE,eAAe,EAAEC,QAAQ,CAAC;MAE5C,IAAI,OAAOG,KAAK,KAAK,UAAU,EAAE;QAC/BN,KAAK,CAACN,UAAU,GAAGY,KAAK;QACxBN,KAAK,CAACP,iBAAiB,GAAGR,oBAAoB,CAACqB,KAAK,CAAC;QACrDA,KAAK,GAAGN,KAAK,CAACE,eAAe,EAAEC,QAAQ,CAAC;MAC1C;MAEA,IAAII,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE,CAAC,CAAC,EAAEtB,kBAAkB,CAACuB,OAAO,EAAEJ,KAAK,EAAEP,WAAW,EAAEF,UAAU,CAAC;MAC1G,OAAOS,KAAK;IACd,CAAC;IAED,OAAON,KAAK;EACd,CAAC;AACH"}