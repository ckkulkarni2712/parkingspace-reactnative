c2663010cf73b2af260af20347cd771a
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _rng = _interopRequireDefault(require("./rng.js"));
var _stringify = _interopRequireDefault(require("./stringify.js"));
var _nodeId;
var _clockseq;
var _lastMSecs = 0;
var _lastNSecs = 0;
function v1(options, buf, offset) {
  var i = buf && offset || 0;
  var b = buf || new Array(16);
  options = options || {};
  var node = options.node || _nodeId;
  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;
  if (node == null || clockseq == null) {
    var seedBytes = options.random || (options.rng || _rng.default)();
    if (node == null) {
      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];
    }
    if (clockseq == null) {
      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;
    }
  }
  var msecs = options.msecs !== undefined ? options.msecs : Date.now();
  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;
  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000;
  if (dt < 0 && options.clockseq === undefined) {
    clockseq = clockseq + 1 & 0x3fff;
  }
  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {
    nsecs = 0;
  }
  if (nsecs >= 10000) {
    throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
  }
  _lastMSecs = msecs;
  _lastNSecs = nsecs;
  _clockseq = clockseq;
  msecs += 12219292800000;
  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;
  b[i++] = tl >>> 24 & 0xff;
  b[i++] = tl >>> 16 & 0xff;
  b[i++] = tl >>> 8 & 0xff;
  b[i++] = tl & 0xff;
  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;
  b[i++] = tmh >>> 8 & 0xff;
  b[i++] = tmh & 0xff;
  b[i++] = tmh >>> 24 & 0xf | 0x10;
  b[i++] = tmh >>> 16 & 0xff;
  b[i++] = clockseq >>> 8 | 0x80;
  b[i++] = clockseq & 0xff;
  for (var n = 0; n < 6; ++n) {
    b[i + n] = node[n];
  }
  return buf || (0, _stringify.default)(b);
}
var _default = v1;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUlkIiwiX2Nsb2Nrc2VxIiwiX2xhc3RNU2VjcyIsIl9sYXN0TlNlY3MiLCJ2MSIsIm9wdGlvbnMiLCJidWYiLCJvZmZzZXQiLCJpIiwiYiIsIkFycmF5Iiwibm9kZSIsImNsb2Nrc2VxIiwidW5kZWZpbmVkIiwic2VlZEJ5dGVzIiwicmFuZG9tIiwicm5nIiwibXNlY3MiLCJEYXRlIiwibm93IiwibnNlY3MiLCJkdCIsIkVycm9yIiwidGwiLCJ0bWgiLCJuIiwic3RyaW5naWZ5Il0sInNvdXJjZXMiOlsidjEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJzsgLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcblxudmFyIF9jbG9ja3NlcTsgLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG5cblxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwOyAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgdmFyIGIgPSBidWYgfHwgbmV3IEFycmF5KDE2KTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7IC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuXG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIHZhciBzZWVkQnl0ZXMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtzZWVkQnl0ZXNbMF0gfCAweDAxLCBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XV07XG4gICAgfVxuXG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9IC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuXG5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IERhdGUubm93KCk7IC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcblxuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7IC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcblxuICB2YXIgZHQgPSBtc2VjcyAtIF9sYXN0TVNlY3MgKyAobnNlY3MgLSBfbGFzdE5TZWNzKSAvIDEwMDAwOyAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG5cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfSAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG5cblxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfSAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG5cblxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1dWlkLnYxKCk6IENhbid0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlY1wiKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTsgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG5cbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7IC8vIGB0aW1lX2xvd2BcblxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmOyAvLyBgdGltZV9taWRgXG5cbiAgdmFyIHRtaCA9IG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjsgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcblxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG5cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7IC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDsgLy8gYGNsb2NrX3NlcV9sb3dgXG5cbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmOyAvLyBgbm9kZWBcblxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgfHwgc3RyaW5naWZ5KGIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2MTsiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUtBLElBQUlBLE9BQU87QUFFWCxJQUFJQyxTQUFTO0FBR2IsSUFBSUMsVUFBVSxHQUFHLENBQUM7QUFDbEIsSUFBSUMsVUFBVSxHQUFHLENBQUM7QUFFbEIsU0FBU0MsRUFBRSxDQUFDQyxPQUFPLEVBQUVDLEdBQUcsRUFBRUMsTUFBTSxFQUFFO0VBQ2hDLElBQUlDLENBQUMsR0FBR0YsR0FBRyxJQUFJQyxNQUFNLElBQUksQ0FBQztFQUMxQixJQUFJRSxDQUFDLEdBQUdILEdBQUcsSUFBSSxJQUFJSSxLQUFLLENBQUMsRUFBRSxDQUFDO0VBQzVCTCxPQUFPLEdBQUdBLE9BQU8sSUFBSSxDQUFDLENBQUM7RUFDdkIsSUFBSU0sSUFBSSxHQUFHTixPQUFPLENBQUNNLElBQUksSUFBSVgsT0FBTztFQUNsQyxJQUFJWSxRQUFRLEdBQUdQLE9BQU8sQ0FBQ08sUUFBUSxLQUFLQyxTQUFTLEdBQUdSLE9BQU8sQ0FBQ08sUUFBUSxHQUFHWCxTQUFTO0VBSTVFLElBQUlVLElBQUksSUFBSSxJQUFJLElBQUlDLFFBQVEsSUFBSSxJQUFJLEVBQUU7SUFDcEMsSUFBSUUsU0FBUyxHQUFHVCxPQUFPLENBQUNVLE1BQU0sSUFBSSxDQUFDVixPQUFPLENBQUNXLEdBQUcsSUFBSUEsWUFBRyxHQUFHO0lBRXhELElBQUlMLElBQUksSUFBSSxJQUFJLEVBQUU7TUFFaEJBLElBQUksR0FBR1gsT0FBTyxHQUFHLENBQUNjLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUVBLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRUEsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFQSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUVBLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRUEsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlHO0lBRUEs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