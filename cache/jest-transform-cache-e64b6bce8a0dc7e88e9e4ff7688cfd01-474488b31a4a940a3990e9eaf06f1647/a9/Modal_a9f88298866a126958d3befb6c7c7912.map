{"version":3,"names":["MODAL_ANIM_DURATION","MODAL_BACKDROP_OPACITY","Modal","state","isVisible","props","deviceWidth","Dimensions","get","width","deviceHeight","height","animVal","Animated","Value","_isMounted","handleDimensionsUpdate","dimensionsUpdate","window","setState","show","timing","easing","Easing","inOut","quad","useNativeDriver","duration","toValue","start","hide","onHide","_deviceEventEmitter","DeviceEventEmitter","addListener","remove","prevProps","children","onBackdropPress","contentStyle","backdropStyle","otherProps","backdropAnimatedStyle","opacity","interpolate","inputRange","outputRange","contentAnimatedStyle","transform","translateY","extrapolate","styles","backdrop","content","Component","propTypes","PropTypes","func","bool","any","defaultProps","StyleSheet","create","container","position","top","left","right","bottom","backgroundColor","flex","justifyContent"],"sources":["Modal.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Animated,\n  DeviceEventEmitter,\n  Dimensions,\n  Easing,\n  Modal as ReactNativeModal,\n  StyleSheet,\n  TouchableWithoutFeedback,\n} from \"react-native\";\n\nconst MODAL_ANIM_DURATION = 300;\nconst MODAL_BACKDROP_OPACITY = 0.4;\n\nexport class Modal extends Component {\n  static propTypes = {\n    onBackdropPress: PropTypes.func,\n    onHide: PropTypes.func,\n    isVisible: PropTypes.bool,\n    contentStyle: PropTypes.any,\n  };\n\n  static defaultProps = {\n    onBackdropPress: () => null,\n    onHide: () => null,\n    isVisible: false,\n  };\n\n  state = {\n    isVisible: this.props.isVisible,\n    deviceWidth: Dimensions.get(\"window\").width,\n    deviceHeight: Dimensions.get(\"window\").height,\n  };\n\n  animVal = new Animated.Value(0);\n  _isMounted = false;\n\n  static _deviceEventEmitter = null;\n\n  componentDidMount() {\n    this._isMounted = true;\n    if (this.state.isVisible) {\n      this.show();\n    }\n    this._deviceEventEmitter = DeviceEventEmitter.addListener(\n      \"didUpdateDimensions\",\n      this.handleDimensionsUpdate\n    );\n  }\n\n  componentWillUnmount() {\n    this._deviceEventEmitter.remove();\n    this._isMounted = false;\n  }\n\n  componentDidUpdate(prevProps: ModalPropsType) {\n    if (this.props.isVisible && !prevProps.isVisible) {\n      this.show();\n    } else if (!this.props.isVisible && prevProps.isVisible) {\n      this.hide();\n    }\n  }\n\n  handleDimensionsUpdate = (dimensionsUpdate) => {\n    const deviceWidth = dimensionsUpdate.window.width;\n    const deviceHeight = dimensionsUpdate.window.height;\n    if (\n      deviceWidth !== this.state.deviceWidth ||\n      deviceHeight !== this.state.deviceHeight\n    ) {\n      this.setState({ deviceWidth, deviceHeight });\n    }\n  };\n\n  show = () => {\n    this.setState({ isVisible: true });\n    Animated.timing(this.animVal, {\n      easing: Easing.inOut(Easing.quad),\n      // Using native driver in the modal makes the content flash\n      useNativeDriver: false,\n      duration: MODAL_ANIM_DURATION,\n      toValue: 1,\n    }).start();\n  };\n\n  hide = () => {\n    Animated.timing(this.animVal, {\n      easing: Easing.inOut(Easing.quad),\n      // Using native driver in the modal makes the content flash\n      useNativeDriver: false,\n      duration: MODAL_ANIM_DURATION,\n      toValue: 0,\n    }).start(() => {\n      if (this._isMounted) {\n        this.setState({ isVisible: false }, this.props.onHide);\n      }\n    });\n  };\n\n  render() {\n    const {\n      children,\n      onBackdropPress,\n      contentStyle,\n      backdropStyle,\n      ...otherProps\n    } = this.props;\n    const { deviceHeight, deviceWidth, isVisible } = this.state;\n    const backdropAnimatedStyle = {\n      opacity: this.animVal.interpolate({\n        inputRange: [0, 1],\n        outputRange: [0, MODAL_BACKDROP_OPACITY],\n      }),\n    };\n    const contentAnimatedStyle = {\n      transform: [\n        {\n          translateY: this.animVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [deviceHeight, 0],\n            extrapolate: \"clamp\",\n          }),\n        },\n      ],\n    };\n    return (\n      <ReactNativeModal\n        transparent\n        animationType=\"none\"\n        visible={isVisible}\n        {...otherProps}\n      >\n        <TouchableWithoutFeedback onPress={onBackdropPress}>\n          <Animated.View\n            style={[\n              styles.backdrop,\n              backdropAnimatedStyle,\n              { width: deviceWidth, height: deviceHeight },\n              backdropStyle,\n            ]}\n          />\n        </TouchableWithoutFeedback>\n        {isVisible && (\n          <Animated.View\n            style={[styles.content, contentAnimatedStyle, contentStyle]}\n            pointerEvents=\"box-none\"\n          >\n            {children}\n          </Animated.View>\n        )}\n      </ReactNativeModal>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  },\n  backdrop: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: \"black\",\n    opacity: 0,\n  },\n  content: {\n    flex: 1,\n    justifyContent: \"flex-end\",\n  },\n});\n\nexport default Modal;\n"],"mappings":"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"}