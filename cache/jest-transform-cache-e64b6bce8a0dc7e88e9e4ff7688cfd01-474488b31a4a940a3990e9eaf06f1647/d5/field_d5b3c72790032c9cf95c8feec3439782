5b4f6c3442321c7c23caf5c85258281f
"use strict";

module.exports = Field;
var ReflectionObject = require("./object");
((Field.prototype = Object.create(ReflectionObject.prototype)).constructor = Field).className = "Field";
var Enum = require("./enum"),
  types = require("./types"),
  util = require("./util");
var Type;
var ruleRe = /^required|optional|repeated$/;
Field.fromJSON = function fromJSON(name, json) {
  return new Field(name, json.id, json.type, json.rule, json.extend, json.options, json.comment);
};
function Field(name, id, type, rule, extend, options, comment) {
  if (util.isObject(rule)) {
    comment = extend;
    options = rule;
    rule = extend = undefined;
  } else if (util.isObject(extend)) {
    comment = options;
    options = extend;
    extend = undefined;
  }
  ReflectionObject.call(this, name, options);
  if (!util.isInteger(id) || id < 0) throw TypeError("id must be a non-negative integer");
  if (!util.isString(type)) throw TypeError("type must be a string");
  if (rule !== undefined && !ruleRe.test(rule = rule.toString().toLowerCase())) throw TypeError("rule must be a string rule");
  if (extend !== undefined && !util.isString(extend)) throw TypeError("extend must be a string");
  if (rule === "proto3_optional") {
    rule = "optional";
  }
  this.rule = rule && rule !== "optional" ? rule : undefined;
  this.type = type;
  this.id = id;
  this.extend = extend || undefined;
  this.required = rule === "required";
  this.optional = !this.required;
  this.repeated = rule === "repeated";
  this.map = false;
  this.message = null;
  this.partOf = null;
  this.typeDefault = null;
  this.defaultValue = null;
  this.long = util.Long ? types.long[type] !== undefined : false;
  this.bytes = type === "bytes";
  this.resolvedType = null;
  this.extensionField = null;
  this.declaringField = null;
  this._packed = null;
  this.comment = comment;
}
Object.defineProperty(Field.prototype, "packed", {
  get: function get() {
    if (this._packed === null) this._packed = this.getOption("packed") !== false;
    return this._packed;
  }
});
Field.prototype.setOption = function setOption(name, value, ifNotSet) {
  if (name === "packed") this._packed = null;
  return ReflectionObject.prototype.setOption.call(this, name, value, ifNotSet);
};
Field.prototype.toJSON = function toJSON(toJSONOptions) {
  var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;
  return util.toObject(["rule", this.rule !== "optional" && this.rule || undefined, "type", this.type, "id", this.id, "extend", this.extend, "options", this.options, "comment", keepComments ? this.comment : undefined]);
};
Field.prototype.resolve = function resolve() {
  if (this.resolved) return this;
  if ((this.typeDefault = types.defaults[this.type]) === undefined) {
    this.resolvedType = (this.declaringField ? this.declaringField.parent : this.parent).lookupTypeOrEnum(this.type);
    if (this.resolvedType instanceof Type) this.typeDefault = null;else this.typeDefault = this.resolvedType.values[Object.keys(this.resolvedType.values)[0]];
  }
  if (this.options && this.options["default"] != null) {
    this.typeDefault = this.options["default"];
    if (this.resolvedType instanceof Enum && typeof this.typeDefault === "string") this.typeDefault = this.resolvedType.values[this.typeDefault];
  }
  if (this.options) {
    if (this.options.packed === true || this.options.packed !== undefined && this.resolvedType && !(this.resolvedType instanceof Enum)) delete this.options.packed;
    if (!Object.keys(this.options).length) this.options = undefined;
  }
  if (this.long) {
    this.typeDefault = util.Long.fromNumber(this.typeDefault, this.type.charAt(0) === "u");
    if (Object.freeze) Object.freeze(this.typeDefault);
  } else if (this.bytes && typeof this.typeDefault === "string") {
    var buf;
    if (util.base64.test(this.typeDefault)) util.base64.decode(this.typeDefault, buf = util.newBuffer(util.base64.length(this.typeDefault)), 0);else util.utf8.write(this.typeDefault, buf = util.newBuffer(util.utf8.length(this.typeDefault)), 0);
    this.typeDefault = buf;
  }
  if (this.map) this.defaultValue = util.emptyObject;else if (this.repeated) this.defaultValue = util.emptyArray;else this.defaultValue = this.typeDefault;
  if (this.parent instanceof Type) this.parent.ctor.prototype[this.name] = this.defaultValue;
  return ReflectionObject.prototype.resolve.call(this);
};
Field.d = function decorateField(fieldId, fieldType, fieldRule, defaultValue) {
  if (typeof fieldType === "function") fieldType = util.decorateType(fieldType).name;else if (fieldType && typeof fieldType === "object") fieldType = util.decorateEnum(fieldType).name;
  return function fieldDecorator(prototype, fieldName) {
    util.decorateType(prototype.constructor).add(new Field(fieldName, fieldId, fieldType, fieldRule, {
      "default": defaultValue
    }));
  };
};
Field._configure = function configure(Type_) {
  Type = Type_;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiRmllbGQiLCJSZWZsZWN0aW9uT2JqZWN0IiwicmVxdWlyZSIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiY2xhc3NOYW1lIiwiRW51bSIsInR5cGVzIiwidXRpbCIsIlR5cGUiLCJydWxlUmUiLCJmcm9tSlNPTiIsIm5hbWUiLCJqc29uIiwiaWQiLCJ0eXBlIiwicnVsZSIsImV4dGVuZCIsIm9wdGlvbnMiLCJjb21tZW50IiwiaXNPYmplY3QiLCJ1bmRlZmluZWQiLCJjYWxsIiwiaXNJbnRlZ2VyIiwiVHlwZUVycm9yIiwiaXNTdHJpbmciLCJ0ZXN0IiwidG9TdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInJlcXVpcmVkIiwib3B0aW9uYWwiLCJyZXBlYXRlZCIsIm1hcCIsIm1lc3NhZ2UiLCJwYXJ0T2YiLCJ0eXBlRGVmYXVsdCIsImRlZmF1bHRWYWx1ZSIsImxvbmciLCJMb25nIiwiYnl0ZXMiLCJyZXNvbHZlZFR5cGUiLCJleHRlbnNpb25GaWVsZCIsImRlY2xhcmluZ0ZpZWxkIiwiX3BhY2tlZCIsImRlZmluZVByb3BlcnR5IiwiZ2V0IiwiZ2V0T3B0aW9uIiwic2V0T3B0aW9uIiwidmFsdWUiLCJpZk5vdFNldCIsInRvSlNPTiIsInRvSlNPTk9wdGlvbnMiLCJrZWVwQ29tbWVudHMiLCJCb29sZWFuIiwidG9PYmplY3QiLCJyZXNvbHZlIiwicmVzb2x2ZWQiLCJkZWZhdWx0cyIsInBhcmVudCIsImxvb2t1cFR5cGVPckVudW0iLCJ2YWx1ZXMiLCJrZXlzIiwicGFja2VkIiwibGVuZ3RoIiwiZnJvbU51bWJlciIsImNoYXJBdCIsImZyZWV6ZSIsImJ1ZiIsImJhc2U2NCIsImRlY29kZSIsIm5ld0J1ZmZlciIsInV0ZjgiLCJ3cml0ZSIsImVtcHR5T2JqZWN0IiwiZW1wdHlBcnJheSIsImN0b3IiLCJkIiwiZGVjb3JhdGVGaWVsZCIsImZpZWxkSWQiLCJmaWVsZFR5cGUiLCJmaWVsZFJ1bGUiLCJkZWNvcmF0ZVR5cGUiLCJkZWNvcmF0ZUVudW0iLCJmaWVsZERlY29yYXRvciIsImZpZWxkTmFtZSIsImFkZCIsIl9jb25maWd1cmUiLCJjb25maWd1cmUiLCJUeXBlXyJdLCJzb3VyY2VzIjpbImZpZWxkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBGaWVsZDtcblxuLy8gZXh0ZW5kcyBSZWZsZWN0aW9uT2JqZWN0XG52YXIgUmVmbGVjdGlvbk9iamVjdCA9IHJlcXVpcmUoXCIuL29iamVjdFwiKTtcbigoRmllbGQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShSZWZsZWN0aW9uT2JqZWN0LnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yID0gRmllbGQpLmNsYXNzTmFtZSA9IFwiRmllbGRcIjtcblxudmFyIEVudW0gID0gcmVxdWlyZShcIi4vZW51bVwiKSxcbiAgICB0eXBlcyA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpLFxuICAgIHV0aWwgID0gcmVxdWlyZShcIi4vdXRpbFwiKTtcblxudmFyIFR5cGU7IC8vIGN5Y2xpY1xuXG52YXIgcnVsZVJlID0gL15yZXF1aXJlZHxvcHRpb25hbHxyZXBlYXRlZCQvO1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBuZXcgbWVzc2FnZSBmaWVsZCBpbnN0YW5jZS4gTm90ZSB0aGF0IHtAbGluayBNYXBGaWVsZHxtYXAgZmllbGRzfSBoYXZlIHRoZWlyIG93biBjbGFzcy5cbiAqIEBuYW1lIEZpZWxkXG4gKiBAY2xhc3NkZXNjIFJlZmxlY3RlZCBtZXNzYWdlIGZpZWxkLlxuICogQGV4dGVuZHMgRmllbGRCYXNlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFVuaXF1ZSBuYW1lIHdpdGhpbiBpdHMgbmFtZXNwYWNlXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgVW5pcXVlIGlkIHdpdGhpbiBpdHMgbmFtZXNwYWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBWYWx1ZSB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZywqPn0gW3J1bGU9XCJvcHRpb25hbFwiXSBGaWVsZCBydWxlXG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZywqPn0gW2V4dGVuZF0gRXh0ZW5kZWQgdHlwZSBpZiBkaWZmZXJlbnQgZnJvbSBwYXJlbnRcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IFtvcHRpb25zXSBEZWNsYXJlZCBvcHRpb25zXG4gKi9cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgZmllbGQgZnJvbSBhIGZpZWxkIGRlc2NyaXB0b3IuXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBGaWVsZCBuYW1lXG4gKiBAcGFyYW0ge0lGaWVsZH0ganNvbiBGaWVsZCBkZXNjcmlwdG9yXG4gKiBAcmV0dXJucyB7RmllbGR9IENyZWF0ZWQgZmllbGRcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gSWYgYXJndW1lbnRzIGFyZSBpbnZhbGlkXG4gKi9cbkZpZWxkLmZyb21KU09OID0gZnVuY3Rpb24gZnJvbUpTT04obmFtZSwganNvbikge1xuICAgIHJldHVybiBuZXcgRmllbGQobmFtZSwganNvbi5pZCwganNvbi50eXBlLCBqc29uLnJ1bGUsIGpzb24uZXh0ZW5kLCBqc29uLm9wdGlvbnMsIGpzb24uY29tbWVudCk7XG59O1xuXG4vKipcbiAqIE5vdCBhbiBhY3R1YWwgY29uc3RydWN0b3IuIFVzZSB7QGxpbmsgRmllbGR9IGluc3RlYWQuXG4gKiBAY2xhc3NkZXNjIEJhc2UgY2xhc3Mgb2YgYWxsIHJlZmxlY3RlZCBtZXNzYWdlIGZpZWxkcy4gVGhpcyBpcyBub3QgYW4gYWN0dWFsIGNsYXNzIGJ1dCBoZXJlIGZvciB0aGUgc2FrZSBvZiBoYXZpbmcgY29uc2lzdGVudCB0eXBlIGRlZmluaXRpb25zLlxuICogQGV4cG9ydHMgRmllbGRCYXNlXG4gKiBAZXh0ZW5kcyBSZWZsZWN0aW9uT2JqZWN0XG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFVuaXF1ZSBuYW1lIHdpdGhpbiBpdHMgbmFtZXNwYWNlXG4gKiBAcGFyYW0ge251bWJlcn0gaWQgVW5pcXVlIGlkIHdpdGhpbiBpdHMgbmFtZXNwYWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBWYWx1ZSB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZywqPn0gW3J1bGU9XCJvcHRpb25hbFwiXSBGaWVsZCBydWxlXG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3QuPHN0cmluZywqPn0gW2V4dGVuZF0gRXh0ZW5kZWQgdHlwZSBpZiBkaWZmZXJlbnQgZnJvbSBwYXJlbnRcbiAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsKj59IFtvcHRpb25zXSBEZWNsYXJlZCBvcHRpb25zXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvbW1lbnRdIENvbW1lbnQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZmllbGRcbiAqL1xuZnVuY3Rpb24gRmllbGQobmFtZSwgaWQsIHR5cGUsIHJ1bGUsIGV4dGVuZCwgb3B0aW9ucywgY29tbWVudCkge1xuXG4gICAgaWYgKHV0aWwuaXNPYmplY3QocnVsZSkpIHtcbiAgICAgICAgY29tbWVudCA9IGV4dGVuZDtcbiAgICAgICAgb3B0aW9ucyA9IHJ1bGU7XG4gICAgICAgIHJ1bGUgPSBleHRlbmQgPSB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmICh1dGlsLmlzT2JqZWN0KGV4dGVuZCkpIHtcbiAgICAgICAgY29tbWVudCA9IG9wdGlvbnM7XG4gICAgICAgIG9wdGlvbnMgPSBleHRlbmQ7XG4gICAgICAgIGV4dGVuZCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBSZWZsZWN0aW9uT2JqZWN0LmNhbGwodGhpcywgbmFtZSwgb3B0aW9ucyk7XG5cbiAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlkKSB8fCBpZCA8IDApXG4gICAgICAgIHRocm93IFR5cGVFcnJvcihcImlkIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlclwiKTtcblxuICAgIGlmICghdXRpbC5pc1N0cmluZyh0eXBlKSlcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwidHlwZSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuXG4gICAgaWYgKHJ1bGUgIT09IHVuZGVmaW5lZCAmJiAhcnVsZVJlLnRlc3QocnVsZSA9IHJ1bGUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwicnVsZSBtdXN0IGJlIGEgc3RyaW5nIHJ1bGVcIik7XG5cbiAgICBpZiAoZXh0ZW5kICE9PSB1bmRlZmluZWQgJiYgIXV0aWwuaXNTdHJpbmcoZXh0ZW5kKSlcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiZXh0ZW5kIG11c3QgYmUgYSBzdHJpbmdcIik7XG5cbiAgICBpZiAocnVsZSA9PT0gXCJwcm90bzNfb3B0aW9uYWxcIikge1xuICAgICAgICBydWxlID0gXCJvcHRpb25hbFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWVsZCBydWxlLCBpZiBhbnkuXG4gICAgICogQHR5cGUge3N0cmluZ3x1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5ydWxlID0gcnVsZSAmJiBydWxlICE9PSBcIm9wdGlvbmFsXCIgPyBydWxlIDogdW5kZWZpbmVkOyAvLyB0b0pTT05cblxuICAgIC8qKlxuICAgICAqIEZpZWxkIHR5cGUuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnR5cGUgPSB0eXBlOyAvLyB0b0pTT05cblxuICAgIC8qKlxuICAgICAqIFVuaXF1ZSBmaWVsZCBpZC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaWQgPSBpZDsgLy8gdG9KU09OLCBtYXJrZXJcblxuICAgIC8qKlxuICAgICAqIEV4dGVuZGVkIHR5cGUgaWYgZGlmZmVyZW50IGZyb20gcGFyZW50LlxuICAgICAqIEB0eXBlIHtzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuZXh0ZW5kID0gZXh0ZW5kIHx8IHVuZGVmaW5lZDsgLy8gdG9KU09OXG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgZmllbGQgaXMgcmVxdWlyZWQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZXF1aXJlZCA9IHJ1bGUgPT09IFwicmVxdWlyZWRcIjtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyBmaWVsZCBpcyBvcHRpb25hbC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm9wdGlvbmFsID0gIXRoaXMucmVxdWlyZWQ7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgZmllbGQgaXMgcmVwZWF0ZWQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZXBlYXRlZCA9IHJ1bGUgPT09IFwicmVwZWF0ZWRcIjtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyBmaWVsZCBpcyBhIG1hcCBvciBub3QuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5tYXAgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIE1lc3NhZ2UgdGhpcyBmaWVsZCBiZWxvbmdzIHRvLlxuICAgICAqIEB0eXBlIHtUeXBlfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5tZXNzYWdlID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIE9uZU9mIHRoaXMgZmllbGQgYmVsb25ncyB0bywgaWYgYW55LFxuICAgICAqIEB0eXBlIHtPbmVPZnxudWxsfVxuICAgICAqL1xuICAgIHRoaXMucGFydE9mID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCB0eXBlJ3MgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAdHlwZSB7Kn1cbiAgICAgKi9cbiAgICB0aGlzLnR5cGVEZWZhdWx0ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCdzIGRlZmF1bHQgdmFsdWUgb24gcHJvdG90eXBlcy5cbiAgICAgKiBAdHlwZSB7Kn1cbiAgICAgKi9cbiAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgZmllbGQncyB2YWx1ZSBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIGxvbmcuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5sb25nID0gdXRpbC5Mb25nID8gdHlwZXMubG9uZ1t0eXBlXSAhPT0gdW5kZWZpbmVkIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgZmllbGQncyB2YWx1ZSBpcyBhIGJ1ZmZlci5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmJ5dGVzID0gdHlwZSA9PT0gXCJieXRlc1wiO1xuXG4gICAgLyoqXG4gICAgICogUmVzb2x2ZWQgdHlwZSBpZiBub3QgYSBiYXNpYyB0eXBlLlxuICAgICAqIEB0eXBlIHtUeXBlfEVudW18bnVsbH1cbiAgICAgKi9cbiAgICB0aGlzLnJlc29sdmVkVHlwZSA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBTaXN0ZXItZmllbGQgd2l0aGluIHRoZSBleHRlbmRlZCB0eXBlIGlmIGEgZGVjbGFyaW5nIGV4dGVuc2lvbiBmaWVsZC5cbiAgICAgKiBAdHlwZSB7RmllbGR8bnVsbH1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVuc2lvbkZpZWxkID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFNpc3Rlci1maWVsZCB3aXRoaW4gdGhlIGRlY2xhcmluZyBuYW1lc3BhY2UgaWYgYW4gZXh0ZW5kZWQgZmllbGQuXG4gICAgICogQHR5cGUge0ZpZWxkfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5kZWNsYXJpbmdGaWVsZCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbGx5IHJlbWVtYmVycyB3aGV0aGVyIHRoaXMgZmllbGQgaXMgcGFja2VkLlxuICAgICAqIEB0eXBlIHtib29sZWFufG51bGx9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9wYWNrZWQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQ29tbWVudCBmb3IgdGhpcyBmaWVsZC5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfG51bGx9XG4gICAgICovXG4gICAgdGhpcy5jb21tZW50ID0gY29tbWVudDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhpcyBmaWVsZCBpcyBwYWNrZWQuIE9ubHkgcmVsZXZhbnQgd2hlbiByZXBlYXRlZCBhbmQgd29ya2luZyB3aXRoIHByb3RvMi5cbiAqIEBuYW1lIEZpZWxkI3BhY2tlZFxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAcmVhZG9ubHlcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpZWxkLnByb3RvdHlwZSwgXCJwYWNrZWRcIiwge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGRlZmF1bHRzIHRvIHBhY2tlZD10cnVlIGlmIG5vdCBleHBsaWNpdHkgc2V0IHRvIGZhbHNlXG4gICAgICAgIGlmICh0aGlzLl9wYWNrZWQgPT09IG51bGwpXG4gICAgICAgICAgICB0aGlzLl9wYWNrZWQgPSB0aGlzLmdldE9wdGlvbihcInBhY2tlZFwiKSAhPT0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYWNrZWQ7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQG92ZXJyaWRlXG4gKi9cbkZpZWxkLnByb3RvdHlwZS5zZXRPcHRpb24gPSBmdW5jdGlvbiBzZXRPcHRpb24obmFtZSwgdmFsdWUsIGlmTm90U2V0KSB7XG4gICAgaWYgKG5hbWUgPT09IFwicGFja2VkXCIpIC8vIGNsZWFyIGNhY2hlZCBiZWZvcmUgc2V0dGluZ1xuICAgICAgICB0aGlzLl9wYWNrZWQgPSBudWxsO1xuICAgIHJldHVybiBSZWZsZWN0aW9uT2JqZWN0LnByb3RvdHlwZS5zZXRPcHRpb24uY2FsbCh0aGlzLCBuYW1lLCB2YWx1ZSwgaWZOb3RTZXQpO1xufTtcblxuLyoqXG4gKiBGaWVsZCBkZXNjcmlwdG9yLlxuICogQGludGVyZmFjZSBJRmllbGRcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcnVsZT1cIm9wdGlvbmFsXCJdIEZpZWxkIHJ1bGVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIEZpZWxkIHR5cGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpZCBGaWVsZCBpZFxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywqPn0gW29wdGlvbnNdIEZpZWxkIG9wdGlvbnNcbiAqL1xuXG4vKipcbiAqIEV4dGVuc2lvbiBmaWVsZCBkZXNjcmlwdG9yLlxuICogQGludGVyZmFjZSBJRXh0ZW5zaW9uRmllbGRcbiAqIEBleHRlbmRzIElGaWVsZFxuICogQHByb3BlcnR5IHtzdHJpbmd9IGV4dGVuZCBFeHRlbmRlZCB0eXBlXG4gKi9cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGZpZWxkIHRvIGEgZmllbGQgZGVzY3JpcHRvci5cbiAqIEBwYXJhbSB7SVRvSlNPTk9wdGlvbnN9IFt0b0pTT05PcHRpb25zXSBKU09OIGNvbnZlcnNpb24gb3B0aW9uc1xuICogQHJldHVybnMge0lGaWVsZH0gRmllbGQgZGVzY3JpcHRvclxuICovXG5GaWVsZC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKHRvSlNPTk9wdGlvbnMpIHtcbiAgICB2YXIga2VlcENvbW1lbnRzID0gdG9KU09OT3B0aW9ucyA/IEJvb2xlYW4odG9KU09OT3B0aW9ucy5rZWVwQ29tbWVudHMpIDogZmFsc2U7XG4gICAgcmV0dXJuIHV0aWwudG9PYmplY3QoW1xuICAgICAgICBcInJ1bGVcIiAgICAsIHRoaXMucnVsZSAhPT0gXCJvcHRpb25hbFwiICYmIHRoaXMucnVsZSB8fCB1bmRlZmluZWQsXG4gICAgICAgIFwidHlwZVwiICAgICwgdGhpcy50eXBlLFxuICAgICAgICBcImlkXCIgICAgICAsIHRoaXMuaWQsXG4gICAgICAgIFwiZXh0ZW5kXCIgICwgdGhpcy5leHRlbmQsXG4gICAgICAgIFwib3B0aW9uc1wiICwgdGhpcy5vcHRpb25zLFxuICAgICAgICBcImNvbW1lbnRcIiAsIGtlZXBDb21tZW50cyA/IHRoaXMuY29tbWVudCA6IHVuZGVmaW5lZFxuICAgIF0pO1xufTtcblxuLyoqXG4gKiBSZXNvbHZlcyB0aGlzIGZpZWxkJ3MgdHlwZSByZWZlcmVuY2VzLlxuICogQHJldHVybnMge0ZpZWxkfSBgdGhpc2BcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBhbnkgcmVmZXJlbmNlIGNhbm5vdCBiZSByZXNvbHZlZFxuICovXG5GaWVsZC5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uIHJlc29sdmUoKSB7XG5cbiAgICBpZiAodGhpcy5yZXNvbHZlZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAoKHRoaXMudHlwZURlZmF1bHQgPSB0eXBlcy5kZWZhdWx0c1t0aGlzLnR5cGVdKSA9PT0gdW5kZWZpbmVkKSB7IC8vIGlmIG5vdCBhIGJhc2ljIHR5cGUsIHJlc29sdmUgaXRcbiAgICAgICAgdGhpcy5yZXNvbHZlZFR5cGUgPSAodGhpcy5kZWNsYXJpbmdGaWVsZCA/IHRoaXMuZGVjbGFyaW5nRmllbGQucGFyZW50IDogdGhpcy5wYXJlbnQpLmxvb2t1cFR5cGVPckVudW0odGhpcy50eXBlKTtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZWRUeXBlIGluc3RhbmNlb2YgVHlwZSlcbiAgICAgICAgICAgIHRoaXMudHlwZURlZmF1bHQgPSBudWxsO1xuICAgICAgICBlbHNlIC8vIGluc3RhbmNlb2YgRW51bVxuICAgICAgICAgICAgdGhpcy50eXBlRGVmYXVsdCA9IHRoaXMucmVzb2x2ZWRUeXBlLnZhbHVlc1tPYmplY3Qua2V5cyh0aGlzLnJlc29sdmVkVHlwZS52YWx1ZXMpWzBdXTsgLy8gZmlyc3QgZGVmaW5lZFxuICAgIH1cblxuICAgIC8vIHVzZSBleHBsaWNpdGx5IHNldCBkZWZhdWx0IHZhbHVlIGlmIHByZXNlbnRcbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9uc1tcImRlZmF1bHRcIl0gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnR5cGVEZWZhdWx0ID0gdGhpcy5vcHRpb25zW1wiZGVmYXVsdFwiXTtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZWRUeXBlIGluc3RhbmNlb2YgRW51bSAmJiB0eXBlb2YgdGhpcy50eXBlRGVmYXVsdCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHRoaXMudHlwZURlZmF1bHQgPSB0aGlzLnJlc29sdmVkVHlwZS52YWx1ZXNbdGhpcy50eXBlRGVmYXVsdF07XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIHVubmVjZXNzYXJ5IG9wdGlvbnNcbiAgICBpZiAodGhpcy5vcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFja2VkID09PSB0cnVlIHx8IHRoaXMub3B0aW9ucy5wYWNrZWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJlc29sdmVkVHlwZSAmJiAhKHRoaXMucmVzb2x2ZWRUeXBlIGluc3RhbmNlb2YgRW51bSkpXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zLnBhY2tlZDtcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBjb252ZXJ0IHRvIGludGVybmFsIGRhdGEgdHlwZSBpZiBuZWNlc3NzYXJ5XG4gICAgaWYgKHRoaXMubG9uZykge1xuICAgICAgICB0aGlzLnR5cGVEZWZhdWx0ID0gdXRpbC5Mb25nLmZyb21OdW1iZXIodGhpcy50eXBlRGVmYXVsdCwgdGhpcy50eXBlLmNoYXJBdCgwKSA9PT0gXCJ1XCIpO1xuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgIGlmIChPYmplY3QuZnJlZXplKVxuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZSh0aGlzLnR5cGVEZWZhdWx0KTsgLy8gbG9uZyBpbnN0YW5jZXMgYXJlIG1lYW50IHRvIGJlIGltbXV0YWJsZSBhbnl3YXkgKGkuZS4gdXNlIHNtYWxsIGludCBjYWNoZSB0aGF0IGV2ZW4gcmVxdWlyZXMgaXQpXG5cbiAgICB9IGVsc2UgaWYgKHRoaXMuYnl0ZXMgJiYgdHlwZW9mIHRoaXMudHlwZURlZmF1bHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdmFyIGJ1ZjtcbiAgICAgICAgaWYgKHV0aWwuYmFzZTY0LnRlc3QodGhpcy50eXBlRGVmYXVsdCkpXG4gICAgICAgICAgICB1dGlsLmJhc2U2NC5kZWNvZGUodGhpcy50eXBlRGVmYXVsdCwgYnVmID0gdXRpbC5uZXdCdWZmZXIodXRpbC5iYXNlNjQubGVuZ3RoKHRoaXMudHlwZURlZmF1bHQpKSwgMCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHV0aWwudXRmOC53cml0ZSh0aGlzLnR5cGVEZWZhdWx0LCBidWYgPSB1dGlsLm5ld0J1ZmZlcih1dGlsLnV0ZjgubGVuZ3RoKHRoaXMudHlwZURlZmF1bHQpKSwgMCk7XG4gICAgICAgIHRoaXMudHlwZURlZmF1bHQgPSBidWY7XG4gICAgfVxuXG4gICAgLy8gdGFrZSBzcGVjaWFsIGNhcmUgb2YgbWFwcyBhbmQgcmVwZWF0ZWQgZmllbGRzXG4gICAgaWYgKHRoaXMubWFwKVxuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IHV0aWwuZW1wdHlPYmplY3Q7XG4gICAgZWxzZSBpZiAodGhpcy5yZXBlYXRlZClcbiAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSB1dGlsLmVtcHR5QXJyYXk7XG4gICAgZWxzZVxuICAgICAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IHRoaXMudHlwZURlZmF1bHQ7XG5cbiAgICAvLyBlbnN1cmUgcHJvcGVyIHZhbHVlIG9uIHByb3RvdHlwZVxuICAgIGlmICh0aGlzLnBhcmVudCBpbnN0YW5jZW9mIFR5cGUpXG4gICAgICAgIHRoaXMucGFyZW50LmN0b3IucHJvdG90eXBlW3RoaXMubmFtZV0gPSB0aGlzLmRlZmF1bHRWYWx1ZTtcblxuICAgIHJldHVybiBSZWZsZWN0aW9uT2JqZWN0LnByb3RvdHlwZS5yZXNvbHZlLmNhbGwodGhpcyk7XG59O1xuXG4vKipcbiAqIERlY29yYXRvciBmdW5jdGlvbiBhcyByZXR1cm5lZCBieSB7QGxpbmsgRmllbGQuZH0gYW5kIHtAbGluayBNYXBGaWVsZC5kfSAoVHlwZVNjcmlwdCkuXG4gKiBAdHlwZWRlZiBGaWVsZERlY29yYXRvclxuICogQHR5cGUge2Z1bmN0aW9ufVxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvdHlwZSBUYXJnZXQgcHJvdG90eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGROYW1lIEZpZWxkIG5hbWVcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cblxuLyoqXG4gKiBGaWVsZCBkZWNvcmF0b3IgKFR5cGVTY3JpcHQpLlxuICogQG5hbWUgRmllbGQuZFxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gZmllbGRJZCBGaWVsZCBpZFxuICogQHBhcmFtIHtcImRvdWJsZVwifFwiZmxvYXRcInxcImludDMyXCJ8XCJ1aW50MzJcInxcInNpbnQzMlwifFwiZml4ZWQzMlwifFwic2ZpeGVkMzJcInxcImludDY0XCJ8XCJ1aW50NjRcInxcInNpbnQ2NFwifFwiZml4ZWQ2NFwifFwic2ZpeGVkNjRcInxcInN0cmluZ1wifFwiYm9vbFwifFwiYnl0ZXNcInxPYmplY3R9IGZpZWxkVHlwZSBGaWVsZCB0eXBlXG4gKiBAcGFyYW0ge1wib3B0aW9uYWxcInxcInJlcXVpcmVkXCJ8XCJyZXBlYXRlZFwifSBbZmllbGRSdWxlPVwib3B0aW9uYWxcIl0gRmllbGQgcnVsZVxuICogQHBhcmFtIHtUfSBbZGVmYXVsdFZhbHVlXSBEZWZhdWx0IHZhbHVlXG4gKiBAcmV0dXJucyB7RmllbGREZWNvcmF0b3J9IERlY29yYXRvciBmdW5jdGlvblxuICogQHRlbXBsYXRlIFQgZXh0ZW5kcyBudW1iZXIgfCBudW1iZXJbXSB8IExvbmcgfCBMb25nW10gfCBzdHJpbmcgfCBzdHJpbmdbXSB8IGJvb2xlYW4gfCBib29sZWFuW10gfCBVaW50OEFycmF5IHwgVWludDhBcnJheVtdIHwgQnVmZmVyIHwgQnVmZmVyW11cbiAqL1xuRmllbGQuZCA9IGZ1bmN0aW9uIGRlY29yYXRlRmllbGQoZmllbGRJZCwgZmllbGRUeXBlLCBmaWVsZFJ1bGUsIGRlZmF1bHRWYWx1ZSkge1xuXG4gICAgLy8gc3VibWVzc2FnZTogZGVjb3JhdGUgdGhlIHN1Ym1lc3NhZ2UgYW5kIHVzZSBpdHMgbmFtZSBhcyB0aGUgdHlwZVxuICAgIGlmICh0eXBlb2YgZmllbGRUeXBlID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIGZpZWxkVHlwZSA9IHV0aWwuZGVjb3JhdGVUeXBlKGZpZWxkVHlwZSkubmFtZTtcblxuICAgIC8vIGVudW0gcmVmZXJlbmNlOiBjcmVhdGUgYSByZWZsZWN0ZWQgY29weSBvZiB0aGUgZW51bSBhbmQga2VlcCByZXVzZWluZyBpdFxuICAgIGVsc2UgaWYgKGZpZWxkVHlwZSAmJiB0eXBlb2YgZmllbGRUeXBlID09PSBcIm9iamVjdFwiKVxuICAgICAgICBmaWVsZFR5cGUgPSB1dGlsLmRlY29yYXRlRW51bShmaWVsZFR5cGUpLm5hbWU7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gZmllbGREZWNvcmF0b3IocHJvdG90eXBlLCBmaWVsZE5hbWUpIHtcbiAgICAgICAgdXRpbC5kZWNvcmF0ZVR5cGUocHJvdG90eXBlLmNvbnN0cnVjdG9yKVxuICAgICAgICAgICAgLmFkZChuZXcgRmllbGQoZmllbGROYW1lLCBmaWVsZElkLCBmaWVsZFR5cGUsIGZpZWxkUnVsZSwgeyBcImRlZmF1bHRcIjogZGVmYXVsdFZhbHVlIH0pKTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBGaWVsZCBkZWNvcmF0b3IgKFR5cGVTY3JpcHQpLlxuICogQG5hbWUgRmllbGQuZFxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gZmllbGRJZCBGaWVsZCBpZFxuICogQHBhcmFtIHtDb25zdHJ1Y3RvcjxUPnxzdHJpbmd9IGZpZWxkVHlwZSBGaWVsZCB0eXBlXG4gKiBAcGFyYW0ge1wib3B0aW9uYWxcInxcInJlcXVpcmVkXCJ8XCJyZXBlYXRlZFwifSBbZmllbGRSdWxlPVwib3B0aW9uYWxcIl0gRmllbGQgcnVsZVxuICogQHJldHVybnMge0ZpZWxkRGVjb3JhdG9yfSBEZWNvcmF0b3IgZnVuY3Rpb25cbiAqIEB0ZW1wbGF0ZSBUIGV4dGVuZHMgTWVzc2FnZTxUPlxuICogQHZhcmlhdGlvbiAyXG4gKi9cbi8vIGxpa2UgRmllbGQuZCBidXQgd2l0aG91dCBhIGRlZmF1bHQgdmFsdWVcblxuLy8gU2V0cyB1cCBjeWNsaWMgZGVwZW5kZW5jaWVzIChjYWxsZWQgaW4gaW5kZXgtbGlnaHQpXG5GaWVsZC5fY29uZmlndXJlID0gZnVuY3Rpb24gY29uZmlndXJlKFR5cGVfKSB7XG4gICAgVHlwZSA9IFR5cGVfO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWkEsTUFBTSxDQUFDQyxPQUFPLEdBQUdDLEtBQUs7QUFHdEIsSUFBSUMsZ0JBQWdCLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDMUMsQ0FBQyxDQUFDRixLQUFLLENBQUNHLFNBQVMsR0FBR0MsTUFBTSxDQUFDQyxNQUFNLENBQUNKLGdCQUFnQixDQUFDRSxTQUFTLENBQUMsRUFBRUcsV0FBVyxHQUFHTixLQUFLLEVBQUVPLFNBQVMsR0FBRyxPQUFPO0FBRXZHLElBQUlDLElBQUksR0FBSU4sT0FBTyxDQUFDLFFBQVEsQ0FBQztFQUN6Qk8sS0FBSyxHQUFHUCxPQUFPLENBQUMsU0FBUyxDQUFDO0VBQzFCUSxJQUFJLEdBQUlSLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFN0IsSUFBSVMsSUFBSTtBQUVSLElBQUlDLE1BQU0sR0FBRyw4QkFBOEI7QUF1QjNDWixLQUFLLENBQUNhLFFBQVEsR0FBRyxTQUFTQSxRQUFRLENBQUNDLElBQUksRUFBRUMsSUFBSSxFQUFFO0VB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