{"version":3,"names":["Object","defineProperty","exports","value","createCacheKeyComparator","defaultEqualityCheck","defaultMemoize","NOT_FOUND","createSingletonCache","equals","entry","get","key","put","getEntries","clear","undefined","createLruCache","maxSize","entries","cacheIndex","findIndex","splice","unshift","length","pop","a","b","equalityCheck","areArgumentsShallowlyEqual","prev","next","i","func","equalityCheckOrOptions","providedOptions","_providedOptions$equa","_providedOptions$maxS","resultEqualityCheck","comparator","cache","memoized","arguments","apply","matchingEntry","find","clearCache"],"sources":["defaultMemoize.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createCacheKeyComparator = createCacheKeyComparator;\nexports.defaultEqualityCheck = void 0;\nexports.defaultMemoize = defaultMemoize;\n// Cache implementation based on Erik Rasmussen's `lru-memoize`:\n// https://github.com/erikras/lru-memoize\nvar NOT_FOUND = 'NOT_FOUND';\n\nfunction createSingletonCache(equals) {\n  var entry;\n  return {\n    get: function get(key) {\n      if (entry && equals(entry.key, key)) {\n        return entry.value;\n      }\n\n      return NOT_FOUND;\n    },\n    put: function put(key, value) {\n      entry = {\n        key: key,\n        value: value\n      };\n    },\n    getEntries: function getEntries() {\n      return entry ? [entry] : [];\n    },\n    clear: function clear() {\n      entry = undefined;\n    }\n  };\n}\n\nfunction createLruCache(maxSize, equals) {\n  var entries = [];\n\n  function get(key) {\n    var cacheIndex = entries.findIndex(function (entry) {\n      return equals(key, entry.key);\n    }); // We found a cached entry\n\n    if (cacheIndex > -1) {\n      var entry = entries[cacheIndex]; // Cached entry not at top of cache, move it to the top\n\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n\n      return entry.value;\n    } // No entry found in cache, return sentinel\n\n\n    return NOT_FOUND;\n  }\n\n  function put(key, value) {\n    if (get(key) === NOT_FOUND) {\n      // TODO Is unshift slow?\n      entries.unshift({\n        key: key,\n        value: value\n      });\n\n      if (entries.length > maxSize) {\n        entries.pop();\n      }\n    }\n  }\n\n  function getEntries() {\n    return entries;\n  }\n\n  function clear() {\n    entries = [];\n  }\n\n  return {\n    get: get,\n    put: put,\n    getEntries: getEntries,\n    clear: clear\n  };\n}\n\nvar defaultEqualityCheck = function defaultEqualityCheck(a, b) {\n  return a === b;\n};\n\nexports.defaultEqualityCheck = defaultEqualityCheck;\n\nfunction createCacheKeyComparator(equalityCheck) {\n  return function areArgumentsShallowlyEqual(prev, next) {\n    if (prev === null || next === null || prev.length !== next.length) {\n      return false;\n    } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n    var length = prev.length;\n\n    for (var i = 0; i < length; i++) {\n      if (!equalityCheck(prev[i], next[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n}\n\n// defaultMemoize now supports a configurable cache size with LRU behavior,\n// and optional comparison of the result value with existing values\nfunction defaultMemoize(func, equalityCheckOrOptions) {\n  var providedOptions = typeof equalityCheckOrOptions === 'object' ? equalityCheckOrOptions : {\n    equalityCheck: equalityCheckOrOptions\n  };\n  var _providedOptions$equa = providedOptions.equalityCheck,\n      equalityCheck = _providedOptions$equa === void 0 ? defaultEqualityCheck : _providedOptions$equa,\n      _providedOptions$maxS = providedOptions.maxSize,\n      maxSize = _providedOptions$maxS === void 0 ? 1 : _providedOptions$maxS,\n      resultEqualityCheck = providedOptions.resultEqualityCheck;\n  var comparator = createCacheKeyComparator(equalityCheck);\n  var cache = maxSize === 1 ? createSingletonCache(comparator) : createLruCache(maxSize, comparator); // we reference arguments instead of spreading them for performance reasons\n\n  function memoized() {\n    var value = cache.get(arguments);\n\n    if (value === NOT_FOUND) {\n      // @ts-ignore\n      value = func.apply(null, arguments);\n\n      if (resultEqualityCheck) {\n        var entries = cache.getEntries();\n        var matchingEntry = entries.find(function (entry) {\n          return resultEqualityCheck(entry.value, value);\n        });\n\n        if (matchingEntry) {\n          value = matchingEntry.value;\n        }\n      }\n\n      cache.put(arguments, value);\n    }\n\n    return value;\n  }\n\n  memoized.clearCache = function () {\n    return cache.clear();\n  };\n\n  return memoized;\n}"],"mappings":"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"}