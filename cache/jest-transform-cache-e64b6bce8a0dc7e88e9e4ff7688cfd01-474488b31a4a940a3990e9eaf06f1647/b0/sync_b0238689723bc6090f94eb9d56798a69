bdeb0497dd59fcdd8ed5e778ce180086
module.exports = globSync;
globSync.GlobSync = GlobSync;
var rp = require('fs.realpath');
var minimatch = require('minimatch');
var Minimatch = minimatch.Minimatch;
var Glob = require('./glob.js').Glob;
var util = require('util');
var path = require('path');
var assert = require('assert');
var isAbsolute = require('path-is-absolute');
var common = require('./common.js');
var setopts = common.setopts;
var ownProp = common.ownProp;
var childrenIgnored = common.childrenIgnored;
var isIgnored = common.isIgnored;
function globSync(pattern, options) {
  if (typeof options === 'function' || arguments.length === 3) throw new TypeError('callback provided to sync glob\n' + 'See: https://github.com/isaacs/node-glob/issues/167');
  return new GlobSync(pattern, options).found;
}
function GlobSync(pattern, options) {
  if (!pattern) throw new Error('must provide pattern');
  if (typeof options === 'function' || arguments.length === 3) throw new TypeError('callback provided to sync glob\n' + 'See: https://github.com/isaacs/node-glob/issues/167');
  if (!(this instanceof GlobSync)) return new GlobSync(pattern, options);
  setopts(this, pattern, options);
  if (this.noprocess) return this;
  var n = this.minimatch.set.length;
  this.matches = new Array(n);
  for (var i = 0; i < n; i++) {
    this._process(this.minimatch.set[i], i, false);
  }
  this._finish();
}
GlobSync.prototype._finish = function () {
  assert.ok(this instanceof GlobSync);
  if (this.realpath) {
    var self = this;
    this.matches.forEach(function (matchset, index) {
      var set = self.matches[index] = Object.create(null);
      for (var p in matchset) {
        try {
          p = self._makeAbs(p);
          var real = rp.realpathSync(p, self.realpathCache);
          set[real] = true;
        } catch (er) {
          if (er.syscall === 'stat') set[self._makeAbs(p)] = true;else throw er;
        }
      }
    });
  }
  common.finish(this);
};
GlobSync.prototype._process = function (pattern, index, inGlobStar) {
  assert.ok(this instanceof GlobSync);
  var n = 0;
  while (typeof pattern[n] === 'string') {
    n++;
  }
  var prefix;
  switch (n) {
    case pattern.length:
      this._processSimple(pattern.join('/'), index);
      return;
    case 0:
      prefix = null;
      break;
    default:
      prefix = pattern.slice(0, n).join('/');
      break;
  }
  var remain = pattern.slice(n);
  var read;
  if (prefix === null) read = '.';else if (isAbsolute(prefix) || isAbsolute(pattern.map(function (p) {
    return typeof p === 'string' ? p : '[*]';
  }).join('/'))) {
    if (!prefix || !isAbsolute(prefix)) prefix = '/' + prefix;
    read = prefix;
  } else read = prefix;
  var abs = this._makeAbs(read);
  if (childrenIgnored(this, read)) return;
  var isGlobStar = remain[0] === minimatch.GLOBSTAR;
  if (isGlobStar) this._processGlobStar(prefix, read, abs, remain, index, inGlobStar);else this._processReaddir(prefix, read, abs, remain, index, inGlobStar);
};
GlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {
  var entries = this._readdir(abs, inGlobStar);
  if (!entries) return;
  var pn = remain[0];
  var negate = !!this.minimatch.negate;
  var rawGlob = pn._glob;
  var dotOk = this.dot || rawGlob.charAt(0) === '.';
  var matchedEntries = [];
  for (var i = 0; i < entries.length; i++) {
    var e = entries[i];
    if (e.charAt(0) !== '.' || dotOk) {
      var m;
      if (negate && !prefix) {
        m = !e.match(pn);
      } else {
        m = e.match(pn);
      }
      if (m) matchedEntries.push(e);
    }
  }
  var len = matchedEntries.length;
  if (len === 0) return;
  if (remain.length === 1 && !this.mark && !this.stat) {
    if (!this.matches[index]) this.matches[index] = Object.create(null);
    for (var i = 0; i < len; i++) {
      var e = matchedEntries[i];
      if (prefix) {
        if (prefix.slice(-1) !== '/') e = prefix + '/' + e;else e = prefix + e;
      }
      if (e.charAt(0) === '/' && !this.nomount) {
        e = path.join(this.root, e);
      }
      this._emitMatch(index, e);
    }
    return;
  }
  remain.shift();
  for (var i = 0; i < len; i++) {
    var e = matchedEntries[i];
    var newPattern;
    if (prefix) newPattern = [prefix, e];else newPattern = [e];
    this._process(newPattern.concat(remain), index, inGlobStar);
  }
};
GlobSync.prototype._emitMatch = function (index, e) {
  if (isIgnored(this, e)) return;
  var abs = this._makeAbs(e);
  if (this.mark) e = this._mark(e);
  if (this.absolute) {
    e = abs;
  }
  if (this.matches[index][e]) return;
  if (this.nodir) {
    var c = this.cache[abs];
    if (c === 'DIR' || Array.isArray(c)) return;
  }
  this.matches[index][e] = true;
  if (this.stat) this._stat(e);
};
GlobSync.prototype._readdirInGlobStar = function (abs) {
  if (this.follow) return this._readdir(abs, false);
  var entries;
  var lstat;
  var stat;
  try {
    lstat = this.fs.lstatSync(abs);
  } catch (er) {
    if (er.code === 'ENOENT') {
      return null;
    }
  }
  var isSym = lstat && lstat.isSymbolicLink();
  this.symlinks[abs] = isSym;
  if (!isSym && lstat && !lstat.isDirectory()) this.cache[abs] = 'FILE';else entries = this._readdir(abs, false);
  return entries;
};
GlobSync.prototype._readdir = function (abs, inGlobStar) {
  var entries;
  if (inGlobStar && !ownProp(this.symlinks, abs)) return this._readdirInGlobStar(abs);
  if (ownProp(this.cache, abs)) {
    var c = this.cache[abs];
    if (!c || c === 'FILE') return null;
    if (Array.isArray(c)) return c;
  }
  try {
    return this._readdirEntries(abs, this.fs.readdirSync(abs));
  } catch (er) {
    this._readdirError(abs, er);
    return null;
  }
};
GlobSync.prototype._readdirEntries = function (abs, entries) {
  if (!this.mark && !this.stat) {
    for (var i = 0; i < entries.length; i++) {
      var e = entries[i];
      if (abs === '/') e = abs + e;else e = abs + '/' + e;
      this.cache[e] = true;
    }
  }
  this.cache[abs] = entries;
  return entries;
};
GlobSync.prototype._readdirError = function (f, er) {
  switch (er.code) {
    case 'ENOTSUP':
    case 'ENOTDIR':
      var abs = this._makeAbs(f);
      this.cache[abs] = 'FILE';
      if (abs === this.cwdAbs) {
        var error = new Error(er.code + ' invalid cwd ' + this.cwd);
        error.path = this.cwd;
        error.code = er.code;
        throw error;
      }
      break;
    case 'ENOENT':
    case 'ELOOP':
    case 'ENAMETOOLONG':
    case 'UNKNOWN':
      this.cache[this._makeAbs(f)] = false;
      break;
    default:
      this.cache[this._makeAbs(f)] = false;
      if (this.strict) throw er;
      if (!this.silent) console.error('glob error', er);
      break;
  }
};
GlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {
  var entries = this._readdir(abs, inGlobStar);
  if (!entries) return;
  var remainWithoutGlobStar = remain.slice(1);
  var gspref = prefix ? [prefix] : [];
  var noGlobStar = gspref.concat(remainWithoutGlobStar);
  this._process(noGlobStar, index, false);
  var len = entries.length;
  var isSym = this.symlinks[abs];
  if (isSym && inGlobStar) return;
  for (var i = 0; i < len; i++) {
    var e = entries[i];
    if (e.charAt(0) === '.' && !this.dot) continue;
    var instead = gspref.concat(entries[i], remainWithoutGlobStar);
    this._process(instead, index, true);
    var below = gspref.concat(entries[i], remain);
    this._process(below, index, true);
  }
};
GlobSync.prototype._processSimple = function (prefix, index) {
  var exists = this._stat(prefix);
  if (!this.matches[index]) this.matches[index] = Object.create(null);
  if (!exists) return;
  if (prefix && isAbsolute(prefix) && !this.nomount) {
    var trail = /[\/\\]$/.test(prefix);
    if (prefix.charAt(0) === '/') {
      prefix = path.join(this.root, prefix);
    } else {
      prefix = path.resolve(this.root, prefix);
      if (trail) prefix += '/';
    }
  }
  if (process.platform === 'win32') prefix = prefix.replace(/\\/g, '/');
  this._emitMatch(index, prefix);
};
GlobSync.prototype._stat = function (f) {
  var abs = this._makeAbs(f);
  var needDir = f.slice(-1) === '/';
  if (f.length > this.maxLength) return false;
  if (!this.stat && ownProp(this.cache, abs)) {
    var c = this.cache[abs];
    if (Array.isArray(c)) c = 'DIR';
    if (!needDir || c === 'DIR') return c;
    if (needDir && c === 'FILE') return false;
  }
  var exists;
  var stat = this.statCache[abs];
  if (!stat) {
    var lstat;
    try {
      lstat = this.fs.lstatSync(abs);
    } catch (er) {
      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {
        this.statCache[abs] = false;
        return false;
      }
    }
    if (lstat && lstat.isSymbolicLink()) {
      try {
        stat = this.fs.statSync(abs);
      } catch (er) {
        stat = lstat;
      }
    } else {
      stat = lstat;
    }
  }
  this.statCache[abs] = stat;
  var c = true;
  if (stat) c = stat.isDirectory() ? 'DIR' : 'FILE';
  this.cache[abs] = this.cache[abs] || c;
  if (needDir && c === 'FILE') return false;
  return c;
};
GlobSync.prototype._mark = function (p) {
  return common.mark(this, p);
};
GlobSync.prototype._makeAbs = function (f) {
  return common.makeAbs(this, f);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiZ2xvYlN5bmMiLCJHbG9iU3luYyIsInJwIiwicmVxdWlyZSIsIm1pbmltYXRjaCIsIk1pbmltYXRjaCIsIkdsb2IiLCJ1dGlsIiwicGF0aCIsImFzc2VydCIsImlzQWJzb2x1dGUiLCJjb21tb24iLCJzZXRvcHRzIiwib3duUHJvcCIsImNoaWxkcmVuSWdub3JlZCIsImlzSWdub3JlZCIsInBhdHRlcm4iLCJvcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiVHlwZUVycm9yIiwiZm91bmQiLCJFcnJvciIsIm5vcHJvY2VzcyIsIm4iLCJzZXQiLCJtYXRjaGVzIiwiQXJyYXkiLCJpIiwiX3Byb2Nlc3MiLCJfZmluaXNoIiwicHJvdG90eXBlIiwib2siLCJyZWFscGF0aCIsInNlbGYiLCJmb3JFYWNoIiwibWF0Y2hzZXQiLCJpbmRleCIsIk9iamVjdCIsImNyZWF0ZSIsInAiLCJfbWFrZUFicyIsInJlYWwiLCJyZWFscGF0aFN5bmMiLCJyZWFscGF0aENhY2hlIiwiZXIiLCJzeXNjYWxsIiwiZmluaXNoIiwiaW5HbG9iU3RhciIsInByZWZpeCIsIl9wcm9jZXNzU2ltcGxlIiwiam9pbiIsInNsaWNlIiwicmVtYWluIiwicmVhZCIsIm1hcCIsImFicyIsImlzR2xvYlN0YXIiLCJHTE9CU1RBUiIsIl9wcm9jZXNzR2xvYlN0YXIiLCJfcHJvY2Vzc1JlYWRkaXIiLCJlbnRyaWVzIiwiX3JlYWRkaXIiLCJwbiIsIm5lZ2F0ZSIsInJhd0dsb2IiLCJfZ2xvYiIsImRvdE9rIiwiZG90IiwiY2hhckF0IiwibWF0Y2hlZEVudHJpZXMiLCJlIiwibSIsIm1hdGNoIiwicHVzaCIsImxlbiIsIm1hcmsiLCJzdGF0Iiwibm9tb3VudCIsInJvb3QiLCJfZW1pdE1hdGNoIiwic2hpZnQiLCJuZXdQYXR0ZXJuIiwiY29uY2F0IiwiX21hcmsiLCJhYnNvbHV0ZSIsIm5vZGlyIiwiYyIsImNhY2hlIiwiaXNBcnJheSIsIl9zdGF0IiwiX3JlYWRkaXJJbkdsb2JTdGFyIiwiZm9sbG93IiwibHN0YXQiLCJmcyIsImxzdGF0U3luYyIsImNvZGUiLCJpc1N5bSIsImlzU3ltYm9saWNMaW5rIiwic3ltbGlua3MiLCJpc0RpcmVjdG9yeSIsIl9yZWFkZGlyRW50cmllcyIsInJlYWRkaXJTeW5jIiwiX3JlYWRkaXJFcnJvciIsImYiLCJjd2RBYnMiLCJlcnJvciIsImN3ZCIsInN0cmljdCIsInNpbGVudCIsImNvbnNvbGUiLCJyZW1haW5XaXRob3V0R2xvYlN0YXIiLCJnc3ByZWYiLCJub0dsb2JTdGFyIiwiaW5zdGVhZCIsImJlbG93IiwiZXhpc3RzIiwidHJhaWwiLCJ0ZXN0IiwicmVzb2x2ZSIsInByb2Nlc3MiLCJwbGF0Zm9ybSIsInJlcGxhY2UiLCJuZWVkRGlyIiwibWF4TGVuZ3RoIiwic3RhdENhY2hlIiwic3RhdFN5bmMiLCJtYWtlQWJzIl0sInNvdXJjZXMiOlsic3luYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGdsb2JTeW5jXG5nbG9iU3luYy5HbG9iU3luYyA9IEdsb2JTeW5jXG5cbnZhciBycCA9IHJlcXVpcmUoJ2ZzLnJlYWxwYXRoJylcbnZhciBtaW5pbWF0Y2ggPSByZXF1aXJlKCdtaW5pbWF0Y2gnKVxudmFyIE1pbmltYXRjaCA9IG1pbmltYXRjaC5NaW5pbWF0Y2hcbnZhciBHbG9iID0gcmVxdWlyZSgnLi9nbG9iLmpzJykuR2xvYlxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJylcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpXG52YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0JylcbnZhciBpc0Fic29sdXRlID0gcmVxdWlyZSgncGF0aC1pcy1hYnNvbHV0ZScpXG52YXIgY29tbW9uID0gcmVxdWlyZSgnLi9jb21tb24uanMnKVxudmFyIHNldG9wdHMgPSBjb21tb24uc2V0b3B0c1xudmFyIG93blByb3AgPSBjb21tb24ub3duUHJvcFxudmFyIGNoaWxkcmVuSWdub3JlZCA9IGNvbW1vbi5jaGlsZHJlbklnbm9yZWRcbnZhciBpc0lnbm9yZWQgPSBjb21tb24uaXNJZ25vcmVkXG5cbmZ1bmN0aW9uIGdsb2JTeW5jIChwYXR0ZXJuLCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJyB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAzKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NhbGxiYWNrIHByb3ZpZGVkIHRvIHN5bmMgZ2xvYlxcbicrXG4gICAgICAgICAgICAgICAgICAgICAgICAnU2VlOiBodHRwczovL2dpdGh1Yi5jb20vaXNhYWNzL25vZGUtZ2xvYi9pc3N1ZXMvMTY3JylcblxuICByZXR1cm4gbmV3IEdsb2JTeW5jKHBhdHRlcm4sIG9wdGlvbnMpLmZvdW5kXG59XG5cbmZ1bmN0aW9uIEdsb2JTeW5jIChwYXR0ZXJuLCBvcHRpb25zKSB7XG4gIGlmICghcGF0dGVybilcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ211c3QgcHJvdmlkZSBwYXR0ZXJuJylcblxuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMylcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjYWxsYmFjayBwcm92aWRlZCB0byBzeW5jIGdsb2JcXG4nK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1NlZTogaHR0cHM6Ly9naXRodWIuY29tL2lzYWFjcy9ub2RlLWdsb2IvaXNzdWVzLzE2NycpXG5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEdsb2JTeW5jKSlcbiAgICByZXR1cm4gbmV3IEdsb2JTeW5jKHBhdHRlcm4sIG9wdGlvbnMpXG5cbiAgc2V0b3B0cyh0aGlzLCBwYXR0ZXJuLCBvcHRpb25zKVxuXG4gIGlmICh0aGlzLm5vcHJvY2VzcylcbiAgICByZXR1cm4gdGhpc1xuXG4gIHZhciBuID0gdGhpcy5taW5pbWF0Y2guc2V0Lmxlbmd0aFxuICB0aGlzLm1hdGNoZXMgPSBuZXcgQXJyYXkobilcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpICsrKSB7XG4gICAgdGhpcy5fcHJvY2Vzcyh0aGlzLm1pbmltYXRjaC5zZXRbaV0sIGksIGZhbHNlKVxuICB9XG4gIHRoaXMuX2ZpbmlzaCgpXG59XG5cbkdsb2JTeW5jLnByb3RvdHlwZS5fZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICBhc3NlcnQub2sodGhpcyBpbnN0YW5jZW9mIEdsb2JTeW5jKVxuICBpZiAodGhpcy5yZWFscGF0aCkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHRoaXMubWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChtYXRjaHNldCwgaW5kZXgpIHtcbiAgICAgIHZhciBzZXQgPSBzZWxmLm1hdGNoZXNbaW5kZXhdID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICAgICAgZm9yICh2YXIgcCBpbiBtYXRjaHNldCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHAgPSBzZWxmLl9tYWtlQWJzKHApXG4gICAgICAgICAgdmFyIHJlYWwgPSBycC5yZWFscGF0aFN5bmMocCwgc2VsZi5yZWFscGF0aENhY2hlKVxuICAgICAgICAgIHNldFtyZWFsXSA9IHRydWVcbiAgICAgICAgfSBjYXRjaCAoZXIpIHtcbiAgICAgICAgICBpZiAoZXIuc3lzY2FsbCA9PT0gJ3N0YXQnKVxuICAgICAgICAgICAgc2V0W3NlbGYuX21ha2VBYnMocCldID0gdHJ1ZVxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IGVyXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIGNvbW1vbi5maW5pc2godGhpcylcbn1cblxuXG5HbG9iU3luYy5wcm90b3R5cGUuX3Byb2Nlc3MgPSBmdW5jdGlvbiAocGF0dGVybiwgaW5kZXgsIGluR2xvYlN0YXIpIHtcbiAgYXNzZXJ0Lm9rKHRoaXMgaW5zdGFuY2VvZiBHbG9iU3luYylcblxuICAvLyBHZXQgdGhlIGZpcnN0IFtuXSBwYXJ0cyBvZiBwYXR0ZXJuIHRoYXQgYXJlIGFsbCBzdHJpbmdzLlxuICB2YXIgbiA9IDBcbiAgd2hpbGUgKHR5cGVvZiBwYXR0ZXJuW25dID09PSAnc3RyaW5nJykge1xuICAgIG4gKytcbiAgfVxuICAvLyBub3cgbiBpcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IG9uZSB0aGF0IGlzICpub3QqIGEgc3RyaW5nLlxuXG4gIC8vIFNlZSBpZiB0aGVyZSdzIGFueXRoaW5nIGVsc2VcbiAgdmFyIHByZWZpeFxuICBzd2l0Y2ggKG4pIHtcbiAgICAvLyBpZiBub3QsIHRoZW4gdGhpcyBpcyByYXRoZXIgc2ltcGxlXG4gICAgY2FzZSBwYXR0ZXJuLmxlbmd0aDpcbiAgICAgIHRoaXMuX3Byb2Nlc3NTaW1wbGUocGF0dGVybi5qb2luKCcvJyksIGluZGV4KVxuICAgICAgcmV0dXJuXG5cbiAgICBjYXNlIDA6XG4gICAgICAvLyBwYXR0ZXJuICpzdGFydHMqIHdpdGggc29tZSBub24tdHJpdmlhbCBpdGVtLlxuICAgICAgLy8gZ29pbmcgdG8gcmVhZGRpcihjd2QpLCBidXQgbm90IGluY2x1ZGUgdGhlIHByZWZpeCBpbiBtYXRjaGVzLlxuICAgICAgcHJlZml4ID0gbnVsbFxuICAgICAgYnJlYWtcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBwYXR0ZXJuIGhhcyBzb21lIHN0cmluZyBiaXRzIGluIHRoZSBmcm9udC5cbiAgICAgIC8vIHdoYXRldmVyIGl0IHN0YXJ0cyB3aXRoLCB3aGV0aGVyIHRoYXQncyAnYWJzb2x1dGUnIGxpa2UgL2Zvby9iYXIsXG4gICAgICAvLyBvciAncmVsYXRpdmUnIGxpa2UgJy4uL2JheidcbiAgICAgIHByZWZpeCA9IHBhdHRlcm4uc2xpY2UoMCwgbikuam9pbignLycpXG4gICAgICBicmVha1xuICB9XG5cbiAgdmFyIHJlbWFpbiA9IHBhdHRlcm4uc2xpY2UobilcblxuICAvLyBnZXQgdGhlIGxpc3Qgb2YgZW50cmllcy5cbiAgdmFyIHJlYWRcbiAgaWYgKHByZWZpeCA9PT0gbnVsbClcbiAgICByZWFkID0gJy4nXG4gIGVsc2UgaWYgKGlzQWJzb2x1dGUocHJlZml4KSB8fFxuICAgICAgaXNBYnNvbHV0ZShwYXR0ZXJuLm1hcChmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHAgPT09ICdzdHJpbmcnID8gcCA6ICdbKl0nXG4gICAgICB9KS5qb2luKCcvJykpKSB7XG4gICAgaWYgKCFwcmVmaXggfHwgIWlzQWJzb2x1dGUocHJlZml4KSlcbiAgICAgIHByZWZpeCA9ICcvJyArIHByZWZpeFxuICAgIHJlYWQgPSBwcmVmaXhcbiAgfSBlbHNlXG4gICAgcmVhZCA9IHByZWZpeFxuXG4gIHZhciBhYnMgPSB0aGlzLl9tYWtlQWJzKHJlYWQpXG5cbiAgLy9pZiBpZ25vcmVkLCBza2lwIHByb2Nlc3NpbmdcbiAgaWYgKGNoaWxkcmVuSWdub3JlZCh0aGlzLCByZWFkKSlcbiAgICByZXR1cm5cblxuICB2YXIgaXNHbG9iU3RhciA9IHJlbWFpblswXSA9PT0gbWluaW1hdGNoLkdMT0JTVEFSXG4gIGlmIChpc0dsb2JTdGFyKVxuICAgIHRoaXMuX3Byb2Nlc3NHbG9iU3RhcihwcmVmaXgsIHJlYWQsIGFicywgcmVtYWluLCBpbmRleCwgaW5HbG9iU3RhcilcbiAgZWxzZVxuICAgIHRoaXMuX3Byb2Nlc3NSZWFkZGlyKHByZWZpeCwgcmVhZCwgYWJzLCByZW1haW4sIGluZGV4LCBpbkdsb2JTdGFyKVxufVxuXG5cbkdsb2JTeW5jLnByb3RvdHlwZS5fcHJvY2Vzc1JlYWRkaXIgPSBmdW5jdGlvbiAocHJlZml4LCByZWFkLCBhYnMsIHJlbWFpbiwgaW5kZXgsIGluR2xvYlN0YXIpIHtcbiAgdmFyIGVudHJpZXMgPSB0aGlzLl9yZWFkZGlyKGFicywgaW5HbG9iU3RhcilcblxuICAvLyBpZiB0aGUgYWJzIGlzbid0IGEgZGlyLCB0aGVuIG5vdGhpbmcgY2FuIG1hdGNoIVxuICBpZiAoIWVudHJpZXMpXG4gICAgcmV0dXJuXG5cbiAgLy8gSXQgd2lsbCBvbmx5IG1hdGNoIGRvdCBlbnRyaWVzIGlmIGl0IHN0YXJ0cyB3aXRoIGEgZG90LCBvciBpZlxuICAvLyBkb3QgaXMgc2V0LiAgU3R1ZmYgbGlrZSBAKC5mb298LmJhcikgaXNuJ3QgYWxsb3dlZC5cbiAgdmFyIHBuID0gcmVtYWluWzBdXG4gIHZhciBuZWdhdGUgPSAhIXRoaXMubWluaW1hdGNoLm5lZ2F0ZVxuICB2YXIgcmF3R2xvYiA9IHBuLl9nbG9iXG4gIHZhciBkb3RPayA9IHRoaXMuZG90IHx8IHJhd0dsb2IuY2hhckF0KDApID09PSAnLidcblxuICB2YXIgbWF0Y2hlZEVudHJpZXMgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZSA9IGVudHJpZXNbaV1cbiAgICBpZiAoZS5jaGFyQXQoMCkgIT09ICcuJyB8fCBkb3RPaykge1xuICAgICAgdmFyIG1cbiAgICAgIGlmIChuZWdhdGUgJiYgIXByZWZpeCkge1xuICAgICAgICBtID0gIWUubWF0Y2gocG4pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtID0gZS5tYXRjaChwbilcbiAgICAgIH1cbiAgICAgIGlmIChtKVxuICAgICAgICBtYXRjaGVkRW50cmllcy5wdXNoKGUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGxlbiA9IG1hdGNoZWRFbnRyaWVzLmxlbmd0aFxuICAvLyBJZiB0aGVyZSBhcmUgbm8gbWF0Y2hlZCBlbnRyaWVzLCB0aGVuIG5vdGhpbmcgbWF0Y2hlcy5cbiAgaWYgKGxlbiA9PT0gMClcbiAgICByZXR1cm5cblxuICAvLyBpZiB0aGlzIGlzIHRoZSBsYXN0IHJlbWFpbmluZyBwYXR0ZXJuIGJpdCwgdGhlbiBubyBuZWVkIGZvclxuICAvLyBhbiBhZGRpdGlvbmFsIHN0YXQgKnVubGVzcyogdGhlIHVzZXIgaGFzIHNwZWNpZmllZCBtYXJrIG9yXG4gIC8vIHN0YXQgZXhwbGljaXRseS4gIFdlIGtub3cgdGhleSBleGlzdCwgc2luY2UgcmVhZGRpciByZXR1cm5lZFxuICAvLyB0aGVtLlxuXG4gIGlmIChyZW1haW4ubGVuZ3RoID09PSAxICYmICF0aGlzLm1hcmsgJiYgIXRoaXMuc3RhdCkge1xuICAgIGlmICghdGhpcy5tYXRjaGVzW2luZGV4XSlcbiAgICAgIHRoaXMubWF0Y2hlc1tpbmRleF0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArKykge1xuICAgICAgdmFyIGUgPSBtYXRjaGVkRW50cmllc1tpXVxuICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICBpZiAocHJlZml4LnNsaWNlKC0xKSAhPT0gJy8nKVxuICAgICAgICAgIGUgPSBwcmVmaXggKyAnLycgKyBlXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBlID0gcHJlZml4ICsgZVxuICAgICAgfVxuXG4gICAgICBpZiAoZS5jaGFyQXQoMCkgPT09ICcvJyAmJiAhdGhpcy5ub21vdW50KSB7XG4gICAgICAgIGUgPSBwYXRoLmpvaW4odGhpcy5yb290LCBlKVxuICAgICAgfVxuICAgICAgdGhpcy5fZW1pdE1hdGNoKGluZGV4LCBlKVxuICAgIH1cbiAgICAvLyBUaGlzIHdhcyB0aGUgbGFzdCBvbmUsIGFuZCBubyBzdGF0cyB3ZXJlIG5lZWRlZFxuICAgIHJldHVyblxuICB9XG5cbiAgLy8gbm93IHRlc3QgYWxsIG1hdGNoZWQgZW50cmllcyBhcyBzdGFuZC1pbnMgZm9yIHRoYXQgcGFydFxuICAvLyBvZiB0aGUgcGF0dGVybi5cbiAgcmVtYWluLnNoaWZ0KClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKyspIHtcbiAgICB2YXIgZSA9IG1hdGNoZWRFbnRyaWVzW2ldXG4gICAgdmFyIG5ld1BhdHRlcm5cbiAgICBpZiAocHJlZml4KVxuICAgICAgbmV3UGF0dGVybiA9IFtwcmVmaXgsIGVdXG4gICAgZWxzZVxuICAgICAgbmV3UGF0dGVybiA9IFtlXVxuICAgIHRoaXMuX3Byb2Nlc3MobmV3UGF0dGVybi5jb25jYXQocmVtYWluKSwgaW5kZXgsIGluR2xvYlN0YXIpXG4gIH1cbn1cblxuXG5HbG9iU3luYy5wcm90b3R5cGUuX2VtaXRNYXRjaCA9IGZ1bmN0aW9uIChpbmRleCwgZSkge1xuICBpZiAoaXNJZ25vcmVkKHRoaXMsIGUpKVxuICAgIHJldHVyblxuXG4gIHZhciBhYnMgPSB0aGlzLl9tYWtlQWJzKGUpXG5cbiAgaWYgKHRoaXMubWFyaylcbiAgICBlID0gdGhpcy5fbWFyayhlKVxuXG4gIGlmICh0aGlzLmFic29sdXRlKSB7XG4gICAgZSA9IGFic1xuICB9XG5cbiAgaWYgKHRoaXMubWF0Y2hlc1tpbmRleF1bZV0pXG4gICAgcmV0dXJuXG5cbiAgaWYgKHRoaXMubm9kaXIpIHtcbiAgICB2YXIgYyA9IHRoaXMuY2FjaGVbYWJzXVxuICAgIGlmIChjID09PSAnRElSJyB8fCBBcnJheS5pc0FycmF5KGMpKVxuICAgICAgcmV0dXJuXG4gIH1cblxuICB0aGlzLm1hdGNoZXNbaW5kZXhdW2VdID0gdHJ1ZVxuXG4gIGlmICh0aGlzLnN0YXQpXG4gICAgdGhpcy5fc3RhdChlKVxufVxuXG5cbkdsb2JTeW5jLnByb3RvdHlwZS5fcmVhZGRpckluR2xvYlN0YXIgPSBmdW5jdGlvbiAoYWJzKSB7XG4gIC8vIGZvbGxvdyBhbGwgc3ltbGlua2VkIGRpcmVjdG9yaWVzIGZvcmV2ZXJcbiAgLy8ganVzdCBwcm9jZWVkIGFzIGlmIHRoaXMgaXMgYSBub24tZ2xvYnN0YXIgc2l0dWF0aW9uXG4gIGlmICh0aGlzLmZvbGxvdylcbiAgICByZXR1cm4gdGhpcy5fcmVhZGRpcihhYnMsIGZhbHNlKVxuXG4gIHZhciBlbnRyaWVzXG4gIHZhciBsc3RhdFxuICB2YXIgc3RhdFxuICB0cnkge1xuICAgIGxzdGF0ID0gdGhpcy5mcy5sc3RhdFN5bmMoYWJzKVxuICB9IGNhdGNoIChlcikge1xuICAgIGlmIChlci5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgLy8gbHN0YXQgZmFpbGVkLCBkb2Vzbid0IGV4aXN0XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHZhciBpc1N5bSA9IGxzdGF0ICYmIGxzdGF0LmlzU3ltYm9saWNMaW5rKClcbiAgdGhpcy5zeW1saW5rc1thYnNdID0gaXNTeW1cblxuICAvLyBJZiBpdCdzIG5vdCBhIHN5bWxpbmsgb3IgYSBkaXIsIHRoZW4gaXQncyBkZWZpbml0ZWx5IGEgcmVndWxhciBmaWxlLlxuICAvLyBkb24ndCBib3RoZXIgZG9pbmcgYSByZWFkZGlyIGluIHRoYXQgY2FzZS5cbiAgaWYgKCFpc1N5bSAmJiBsc3RhdCAmJiAhbHN0YXQuaXNEaXJlY3RvcnkoKSlcbiAgICB0aGlzLmNhY2hlW2Fic10gPSAnRklMRSdcbiAgZWxzZVxuICAgIGVudHJpZXMgPSB0aGlzLl9yZWFkZGlyKGFicywgZmFsc2UpXG5cbiAgcmV0dXJuIGVudHJpZXNcbn1cblxuR2xvYlN5bmMucHJvdG90eXBlLl9yZWFkZGlyID0gZnVuY3Rpb24gKGFicywgaW5HbG9iU3Rhcikge1xuICB2YXIgZW50cmllc1xuXG4gIGlmIChpbkdsb2JTdGFyICYmICFvd25Qcm9wKHRoaXMuc3ltbGlua3MsIGFicykpXG4gICAgcmV0dXJuIHRoaXMuX3JlYWRkaXJJbkdsb2JTdGFyKGFicylcblxuICBpZiAob3duUHJvcCh0aGlzLmNhY2hlLCBhYnMpKSB7XG4gICAgdmFyIGMgPSB0aGlzLmNhY2hlW2Fic11cbiAgICBpZiAoIWMgfHwgYyA9PT0gJ0ZJTEUnKVxuICAgICAgcmV0dXJuIG51bGxcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGMpKVxuICAgICAgcmV0dXJuIGNcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlYWRkaXJFbnRyaWVzKGFicywgdGhpcy5mcy5yZWFkZGlyU3luYyhhYnMpKVxuICB9IGNhdGNoIChlcikge1xuICAgIHRoaXMuX3JlYWRkaXJFcnJvcihhYnMsIGVyKVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuR2xvYlN5bmMucHJvdG90eXBlLl9yZWFkZGlyRW50cmllcyA9IGZ1bmN0aW9uIChhYnMsIGVudHJpZXMpIHtcbiAgLy8gaWYgd2UgaGF2ZW4ndCBhc2tlZCB0byBzdGF0IGV2ZXJ5dGhpbmcsIHRoZW4ganVzdFxuICAvLyBhc3N1bWUgdGhhdCBldmVyeXRoaW5nIGluIHRoZXJlIGV4aXN0cywgc28gd2UgY2FuIGF2b2lkXG4gIC8vIGhhdmluZyB0byBzdGF0IGl0IGEgc2Vjb25kIHRpbWUuXG4gIGlmICghdGhpcy5tYXJrICYmICF0aGlzLnN0YXQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpICsrKSB7XG4gICAgICB2YXIgZSA9IGVudHJpZXNbaV1cbiAgICAgIGlmIChhYnMgPT09ICcvJylcbiAgICAgICAgZSA9IGFicyArIGVcbiAgICAgIGVsc2VcbiAgICAgICAgZSA9IGFicyArICcvJyArIGVcbiAgICAgIHRoaXMuY2FjaGVbZV0gPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgdGhpcy5jYWNoZVthYnNdID0gZW50cmllc1xuXG4gIC8vIG1hcmsgYW5kIGNhY2hlIGRpci1uZXNzXG4gIHJldHVybiBlbnRyaWVzXG59XG5cbkdsb2JTeW5jLnByb3RvdHlwZS5fcmVhZGRpckVycm9yID0gZnVuY3Rpb24gKGYsIGVyKSB7XG4gIC8vIGhhbmRsZSBlcnJvcnMsIGFuZCBjYWNoZSB0aGUgaW5mb3JtYXRpb25cbiAgc3dpdGNoIChlci5jb2RlKSB7XG4gICAgY2FzZSAnRU5PVFNVUCc6IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9pc2FhY3Mvbm9kZS1nbG9iL2lzc3Vlcy8yMDVcbiAgICBjYXNlICdFTk9URElSJzogLy8gdG90YWxseSBub3JtYWwuIG1lYW5zIGl0ICpkb2VzKiBleGlzdC5cbiAgICAgIHZhciBhYnMgPSB0aGlzLl9tYWtlQWJzKGYpXG4gICAgICB0aGlzLmNhY2hlW2Fic10gPSAnRklMRSdcbiAgICAgIGlmIChhYnMgPT09IHRoaXMuY3dkQWJzKSB7XG4gICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihlci5jb2RlICsgJyBpbnZhbGlkIGN3ZCAnICsgdGhpcy5jd2QpXG4gICAgICAgIGVycm9yLnBhdGggPSB0aGlzLmN3ZFxuICAgICAgICBlcnJvci5jb2RlID0gZXIuY29kZVxuICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgfVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ0VOT0VOVCc6IC8vIG5vdCB0ZXJyaWJseSB1bnVzdWFsXG4gICAgY2FzZSAnRUxPT1AnOlxuICAgIGNhc2UgJ0VOQU1FVE9PTE9ORyc6XG4gICAgY2FzZSAnVU5LTk9XTic6XG4gICAgICB0aGlzLmNhY2hlW3RoaXMuX21ha2VBYnMoZildID0gZmFsc2VcbiAgICAgIGJyZWFrXG5cbiAgICBkZWZhdWx0OiAvLyBzb21lIHVudXN1YWwgZXJyb3IuICBUcmVhdCBhcyBmYWlsdXJlLlxuICAgICAgdGhpcy5jYWNoZVt0aGlzLl9tYWtlQWJzKGYpXSA9IGZhbHNlXG4gICAgICBpZiAodGhpcy5zdHJpY3QpXG4gICAgICAgIHRocm93IGVyXG4gICAgICBpZiAoIXRoaXMuc2lsZW50KVxuICAgICAgICBjb25zb2xlLmVycm9yKCdnbG9iIGVycm9yJywgZXIpXG4gICAgICBicmVha1xuICB9XG59XG5cbkdsb2JTeW5jLnByb3RvdHlwZS5fcHJvY2Vzc0dsb2JTdGFyID0gZnVuY3Rpb24gKHByZWZpeCwgcmVhZCwgYWJzLCByZW1haW4sIGluZGV4LCBpbkdsb2JTdGFyKSB7XG5cbiAgdmFyIGVudHJpZXMgPSB0aGlzLl9yZWFkZGlyKGFicywgaW5HbG9iU3RhcilcblxuICAvLyBubyBlbnRyaWVzIG1lYW5zIG5vdCBhIGRpciwgc28gaXQgY2FuIG5ldmVyIGhhdmUgbWF0Y2hlc1xuICAvLyBmb28udHh0LyoqIGRvZXNuJ3QgbWF0Y2ggZm9vLnR4dFxuICBpZiAoIWVudHJpZXMpXG4gICAgcmV0dXJuXG5cbiAgLy8gdGVzdCB3aXRob3V0IHRoZSBnbG9ic3RhciwgYW5kIHdpdGggZXZlcnkgY2hpbGQgYm90aCBiZWxvd1xuICAvLyBhbmQgcmVwbGFjaW5nIHRoZSBnbG9ic3Rhci5cbiAgdmFyIHJlbWFpbldpdGhvdXRHbG9iU3RhciA9IHJlbWFpbi5zbGljZSgxKVxuICB2YXIgZ3NwcmVmID0gcHJlZml4ID8gWyBwcmVmaXggXSA6IFtdXG4gIHZhciBub0dsb2JTdGFyID0gZ3NwcmVmLmNvbmNhdChyZW1haW5XaXRob3V0R2xvYlN0YXIpXG5cbiAgLy8gdGhlIG5vR2xvYlN0YXIgcGF0dGVybiBleGl0cyB0aGUgaW5HbG9iU3RhciBzdGF0ZVxuICB0aGlzLl9wcm9jZXNzKG5vR2xvYlN0YXIsIGluZGV4LCBmYWxzZSlcblxuICB2YXIgbGVuID0gZW50cmllcy5sZW5ndGhcbiAgdmFyIGlzU3ltID0gdGhpcy5zeW1saW5rc1thYnNdXG5cbiAgLy8gSWYgaXQncyBhIHN5bWxpbmssIGFuZCB3ZSdyZSBpbiBhIGdsb2JzdGFyLCB0aGVuIHN0b3BcbiAgaWYgKGlzU3ltICYmIGluR2xvYlN0YXIpXG4gICAgcmV0dXJuXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBlID0gZW50cmllc1tpXVxuICAgIGlmIChlLmNoYXJBdCgwKSA9PT0gJy4nICYmICF0aGlzLmRvdClcbiAgICAgIGNvbnRpbnVlXG5cbiAgICAvLyB0aGVzZSB0d28gY2FzZXMgZW50ZXIgdGhlIGluR2xvYlN0YXIgc3RhdGVcbiAgICB2YXIgaW5zdGVhZCA9IGdzcHJlZi5jb25jYXQoZW50cmllc1tpXSwgcmVtYWluV2l0aG91dEdsb2JTdGFyKVxuICAgIHRoaXMuX3Byb2Nlc3MoaW5zdGVhZCwgaW5kZXgsIHRydWUpXG5cbiAgICB2YXIgYmVsb3cgPSBnc3ByZWYuY29uY2F0KGVudHJpZXNbaV0sIHJlbWFpbilcbiAgICB0aGlzLl9wcm9jZXNzKGJlbG93LCBpbmRleCwgdHJ1ZSlcbiAgfVxufVxuXG5HbG9iU3luYy5wcm90b3R5cGUuX3Byb2Nlc3NTaW1wbGUgPSBmdW5jdGlvbiAocHJlZml4LCBpbmRleCkge1xuICAvLyBYWFggcmV2aWV3IHRoaXMuICBTaG91bGRuJ3QgaXQgYmUgZG9pbmcgdGhlIG1vdW50aW5nIGV0Y1xuICAvLyBiZWZvcmUgZG9pbmcgc3RhdD8gIGtpbmRhIHdlaXJkP1xuICB2YXIgZXhpc3RzID0gdGhpcy5fc3RhdChwcmVmaXgpXG5cbiAgaWYgKCF0aGlzLm1hdGNoZXNbaW5kZXhdKVxuICAgIHRoaXMubWF0Y2hlc1tpbmRleF0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgLy8gSWYgaXQgZG9lc24ndCBleGlzdCwgdGhlbiBqdXN0IG1hcmsgdGhlIGxhY2sgb2YgcmVzdWx0c1xuICBpZiAoIWV4aXN0cylcbiAgICByZXR1cm5cblxuICBpZiAocHJlZml4ICYmIGlzQWJzb2x1dGUocHJlZml4KSAmJiAhdGhpcy5ub21vdW50KSB7XG4gICAgdmFyIHRyYWlsID0gL1tcXC9cXFxcXSQvLnRlc3QocHJlZml4KVxuICAgIGlmIChwcmVmaXguY2hhckF0KDApID09PSAnLycpIHtcbiAgICAgIHByZWZpeCA9IHBhdGguam9pbih0aGlzLnJvb3QsIHByZWZpeClcbiAgICB9IGVsc2Uge1xuICAgICAgcHJlZml4ID0gcGF0aC5yZXNvbHZlKHRoaXMucm9vdCwgcHJlZml4KVxuICAgICAgaWYgKHRyYWlsKVxuICAgICAgICBwcmVmaXggKz0gJy8nXG4gICAgfVxuICB9XG5cbiAgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicpXG4gICAgcHJlZml4ID0gcHJlZml4LnJlcGxhY2UoL1xcXFwvZywgJy8nKVxuXG4gIC8vIE1hcmsgdGhpcyBhcyBhIG1hdGNoXG4gIHRoaXMuX2VtaXRNYXRjaChpbmRleCwgcHJlZml4KVxufVxuXG4vLyBSZXR1cm5zIGVpdGhlciAnRElSJywgJ0ZJTEUnLCBvciBmYWxzZVxuR2xvYlN5bmMucHJvdG90eXBlLl9zdGF0ID0gZnVuY3Rpb24gKGYpIHtcbiAgdmFyIGFicyA9IHRoaXMuX21ha2VBYnMoZilcbiAgdmFyIG5lZWREaXIgPSBmLnNsaWNlKC0xKSA9PT0gJy8nXG5cbiAgaWYgKGYubGVuZ3RoID4gdGhpcy5tYXhMZW5ndGgpXG4gICAgcmV0dXJuIGZhbHNlXG5cbiAgaWYgKCF0aGlzLnN0YXQgJiYgb3duUHJvcCh0aGlzLmNhY2hlLCBhYnMpKSB7XG4gICAgdmFyIGMgPSB0aGlzLmNhY2hlW2Fic11cblxuICAgIGlmIChBcnJheS5pc0FycmF5KGMpKVxuICAgICAgYyA9ICdESVInXG5cbiAgICAvLyBJdCBleGlzdHMsIGJ1dCBtYXliZSBub3QgaG93IHdlIG5lZWQgaXRcbiAgICBpZiAoIW5lZWREaXIgfHwgYyA9PT0gJ0RJUicpXG4gICAgICByZXR1cm4gY1xuXG4gICAgaWYgKG5lZWREaXIgJiYgYyA9PT0gJ0ZJTEUnKVxuICAgICAgcmV0dXJuIGZhbHNlXG5cbiAgICAvLyBvdGhlcndpc2Ugd2UgaGF2ZSB0byBzdGF0LCBiZWNhdXNlIG1heWJlIGM9dHJ1ZVxuICAgIC8vIGlmIHdlIGtub3cgaXQgZXhpc3RzLCBidXQgbm90IHdoYXQgaXQgaXMuXG4gIH1cblxuICB2YXIgZXhpc3RzXG4gIHZhciBzdGF0ID0gdGhpcy5zdGF0Q2FjaGVbYWJzXVxuICBpZiAoIXN0YXQpIHtcbiAgICB2YXIgbHN0YXRcbiAgICB0cnkge1xuICAgICAgbHN0YXQgPSB0aGlzLmZzLmxzdGF0U3luYyhhYnMpXG4gICAgfSBjYXRjaCAoZXIpIHtcbiAgICAgIGlmIChlciAmJiAoZXIuY29kZSA9PT0gJ0VOT0VOVCcgfHwgZXIuY29kZSA9PT0gJ0VOT1RESVInKSkge1xuICAgICAgICB0aGlzLnN0YXRDYWNoZVthYnNdID0gZmFsc2VcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxzdGF0ICYmIGxzdGF0LmlzU3ltYm9saWNMaW5rKCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0YXQgPSB0aGlzLmZzLnN0YXRTeW5jKGFicylcbiAgICAgIH0gY2F0Y2ggKGVyKSB7XG4gICAgICAgIHN0YXQgPSBsc3RhdFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ID0gbHN0YXRcbiAgICB9XG4gIH1cblxuICB0aGlzLnN0YXRDYWNoZVthYnNdID0gc3RhdFxuXG4gIHZhciBjID0gdHJ1ZVxuICBpZiAoc3RhdClcbiAgICBjID0gc3RhdC5pc0RpcmVjdG9yeSgpID8gJ0RJUicgOiAnRklMRSdcblxuICB0aGlzLmNhY2hlW2Fic10gPSB0aGlzLmNhY2hlW2Fic10gfHwgY1xuXG4gIGlmIChuZWVkRGlyICYmIGMgPT09ICdGSUxFJylcbiAgICByZXR1cm4gZmFsc2VcblxuICByZXR1cm4gY1xufVxuXG5HbG9iU3luYy5wcm90b3R5cGUuX21hcmsgPSBmdW5jdGlvbiAocCkge1xuICByZXR1cm4gY29tbW9uLm1hcmsodGhpcywgcClcbn1cblxuR2xvYlN5bmMucHJvdG90eXBlLl9tYWtlQWJzID0gZnVuY3Rpb24gKGYpIHtcbiAgcmV0dXJuIGNvbW1vbi5tYWtlQWJzKHRoaXMsIGYpXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBQSxNQUFNLENBQUNDLE9BQU8sR0FBR0MsUUFBUTtBQUN6QkEsUUFBUSxDQUFDQyxRQUFRLEdBQUdBLFFBQVE7QUFFNUIsSUFBSUMsRUFBRSxHQUFHQyxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQy9CLElBQUlDLFNBQVMsR0FBR0QsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxJQUFJRSxTQUFTLEdBQUdELFNBQVMsQ0FBQ0MsU0FBUztBQUNuQyxJQUFJQyxJQUFJLEdBQUdILE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQ0csSUFBSTtBQUNwQyxJQUFJQyxJQUFJLEdBQUdKLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDMUIsSUFBSUssSUFBSSxHQUFHTCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzFCLElBQUlNLE1BQU0sR0FBR04sT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUM5QixJQUFJTyxVQUFVLEdBQUdQLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUM1QyxJQUFJUSxNQUFNLEdBQUdSLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDbkMsSUFBSVMsT0FBTyxHQUFHRCxNQUFNLENBQUNDLE9BQU87QUFDNUIsSUFBSUMsT0FBTyxHQUFHRixNQUFNLENBQUNFLE9B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